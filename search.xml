<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>AtCoder 188</title>
    <url>/blog/AtCoder-ABC188/</url>
    <content><![CDATA[<p>A - Three-Point Shot<br>Can the lower-point team win with a 3-point goal?</p>
<figure class="highlight c"><figcaption><span>three-point.cpp</span><a href="/downloads/code/three-point.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">abs</span>(x-y)&lt;<span class="number">3</span>) <span class="built_in">cout</span>&lt;&lt;<span class="string">"Yes"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="string">"No"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<a id="more"></a>


<p>B - Orthogonality<br>If two vectors are orthogonal?</p>
<figure class="highlight c"><figcaption><span>orthogonality.cpp</span><a href="/downloads/code/orthogonality.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> a[N], b[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;b[i]);</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) res += a[i] * b[i];</span><br><span class="line">    <span class="keyword">if</span>(res==<span class="number">0</span>) <span class="built_in">cout</span>&lt;&lt;<span class="string">"Yes"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="string">"No"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>C - ABC Tournament<br>Simulate the runner-up of 1-1 elimination team match.</p>
<figure class="highlight c"><figcaption><span>ABC-tournament.cpp</span><a href="/downloads/code/ABC-tournament.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> y second</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="built_in">vector</span>&lt;PII&gt;v(<span class="number">1</span>&lt;&lt;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">1</span>&lt;&lt;n;i++) {</span><br><span class="line">        <span class="keyword">int</span> t;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;t;</span><br><span class="line">        v[i] = {t, i+<span class="number">1</span>};</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n<span class="number">-1</span>;i++){</span><br><span class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;<span class="number">2</span>*j+<span class="number">1</span>&lt;v.<span class="built_in">size</span>();j++){</span><br><span class="line">            <span class="keyword">auto</span> t1 = v[<span class="number">2</span>*j], t2 = v[<span class="number">2</span>*j+<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span>(t1.x &gt; t2.x) v[k++] = t1;</span><br><span class="line">            <span class="keyword">else</span> v[k++] = t2;</span><br><span class="line">        }</span><br><span class="line">        v.resize(k);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(v[<span class="number">0</span>].x &lt; v[<span class="number">1</span>].x) <span class="built_in">cout</span>&lt;&lt;v[<span class="number">0</span>].y&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;v[<span class="number">1</span>].y&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>D - Snuke Prime<br>Discretization. Event sweeping method.</p>
<figure class="highlight c"><figcaption><span>snuke-prime.cpp</span><a href="/downloads/code/snuke-prime.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    LL N, C;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;N&gt;&gt;C;</span><br><span class="line">    <span class="built_in">vector</span>&lt;pair&lt;LL,LL&gt;&gt; event;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;N;i++){</span><br><span class="line">        LL a, b, c;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b&gt;&gt;c;</span><br><span class="line">        event.push_back({a<span class="number">-1</span>, c});</span><br><span class="line">        event.push_back({b, -c});</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    sort(event.<span class="built_in">begin</span>(), event.<span class="built_in">end</span>());</span><br><span class="line">    LL ans = <span class="number">0</span>, fee = <span class="number">0</span>, t = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> [x, y]: event){</span><br><span class="line">        <span class="keyword">if</span>(x!=t){</span><br><span class="line">            ans += <span class="built_in">min</span>(C, fee) * (x-t);</span><br><span class="line">            t = x;</span><br><span class="line">        }</span><br><span class="line">        fee += y;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>E - Peddler<br>Stock selling on a DAG<br>Solution:<br>Build a reverse graph.<br>For each vertex i, calculate dp[i]: the cheapest purchase price reachable from i (only vertex prior current vertex in DAG, therefore reverse edges).<br>Sell at vertex i and update res = A[i] - dp[i];</p>
<figure class="highlight c"><figcaption><span>peddler.cpp</span><a href="/downloads/code/peddler.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">A</span><span class="params">(n+<span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;A[i]);</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;g[n+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++){</span><br><span class="line">        <span class="keyword">int</span> a, b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b );</span><br><span class="line">        <span class="comment">// reverse edges</span></span><br><span class="line">        g[b].push_back(a);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// lowest price reachable from i, sell at point i</span></span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;LL&gt; <span class="title">dp</span><span class="params">(n+<span class="number">1</span>, INF)</span></span>;</span><br><span class="line">    LL res = -INF;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> x:g[i]){</span><br><span class="line">            dp[i] = <span class="built_in">min</span>(dp[i], dp[x]);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(dp[i] &lt; INF) res = <span class="built_in">max</span>(res, (LL)A[i] - dp[i]);</span><br><span class="line">        dp[i] = <span class="built_in">min</span>(dp[i], (LL)A[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>



<p>F - +1-1x2<br>Return the minimum steps from X to Y, by applying:</p>
<ol>
<li>X = X + 1</li>
<li>X = X - 1</li>
<li>X = X * 2<br>Solution: A BFS problem. The range of data is very big.<br>Start search from Y instead.<br>If current y is smaller than X, then can only apply operation 1.<br>Otherwise, y can do %2 (if odd) or y = y + 1, or y = y - 1;<br>Two pruning strategies:</li>
<li>if step is greater than best ans, break;</li>
<li>if current y is smaller than X, calculate abs(X - y) and continue; <figure class="highlight c"><figcaption><span>+1-1x2.cpp</span><a href="/downloads/code/+1-1x2.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> y second</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;LL, LL&gt; PLL;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    LL x, y;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;x&gt;&gt;y;</span><br><span class="line">    <span class="keyword">if</span>(x&gt;=y) <span class="built_in">cout</span>&lt;&lt;x-y&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span>{</span><br><span class="line">        <span class="built_in">unordered_set</span>&lt;LL&gt;s;</span><br><span class="line">        LL ans = y - x;</span><br><span class="line">        <span class="built_in">queue</span>&lt;PLL&gt;q;</span><br><span class="line">        q.push({y, <span class="number">0</span>});</span><br><span class="line">        s.insert(y);</span><br><span class="line">        <span class="keyword">while</span>(q.<span class="built_in">size</span>()){</span><br><span class="line">            <span class="keyword">auto</span> t = q.front(); q.pop();</span><br><span class="line">            <span class="keyword">if</span>(t.y &gt;= ans) <span class="keyword">break</span>;</span><br><span class="line">            ans = <span class="built_in">min</span>(ans, t.y+ <span class="built_in">abs</span>(t.x - x));</span><br><span class="line">            <span class="keyword">if</span> (t.x &lt;= x) <span class="keyword">continue</span>; <span class="comment">// not break; can no longer apply //2.</span></span><br><span class="line">            <span class="keyword">if</span>(t.x %<span class="number">2</span> ==<span class="number">0</span>){</span><br><span class="line">                <span class="keyword">if</span>(!s.count(t.x/<span class="number">2</span>)) {</span><br><span class="line">                    s.insert(t.x/<span class="number">2</span>);</span><br><span class="line">                    q.push({t.x/<span class="number">2</span>, t.y + <span class="number">1</span>});</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span> {</span><br><span class="line">                <span class="keyword">if</span>(!s.count(t.x + <span class="number">1</span>)){</span><br><span class="line">                    s.insert(t.x + <span class="number">1</span>);</span><br><span class="line">                    q.push({t.x + <span class="number">1</span>, t.y + <span class="number">1</span>});</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">if</span>(!s.count(t.x - <span class="number">1</span>)){</span><br><span class="line">                    s.insert(t.x - <span class="number">1</span>);</span><br><span class="line">                    q.push({t.x - <span class="number">1</span>, t.y + <span class="number">1</span>});</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>AtCoder</category>
      </categories>
      <tags>
        <tag>ABC</tag>
      </tags>
  </entry>
  <entry>
    <title>AtCoder 187</title>
    <url>/blog/AtCoder-ABC187/</url>
    <content><![CDATA[<p>A - Large Digits<br>Return max of S(A) and S(B).</p>
<figure class="highlight c"><figcaption><span>large-digits.cpp</span><a href="/downloads/code/large-digits.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x){</span><br><span class="line">        s += x%<span class="number">10</span>;</span><br><span class="line">        x/=<span class="number">10</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b;</span><br><span class="line">    <span class="keyword">int</span> sa = sum(a), sb = sum(b);</span><br><span class="line">    <span class="keyword">if</span>(sa!=sb) <span class="built_in">cout</span>&lt;&lt;<span class="built_in">max</span>(sa, sb)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;sa&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<a id="more"></a>


<p>B - Gentle Pairs<br>Return the number of points whose slope is between -1 and 1.</p>
<figure class="highlight c"><figcaption><span>gentle-pairs.cpp</span><a href="/downloads/code/gentle-pairs.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1010</span>;</span><br><span class="line"><span class="keyword">int</span> x[N], y[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;++i){</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;x[i]&gt;&gt;y[i];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;n;j++){</span><br><span class="line">            <span class="keyword">double</span> t = (<span class="keyword">double</span>)(y[j] - y[i])/ (x[j] - x[i]);</span><br><span class="line">            <span class="keyword">if</span>(t&gt;=<span class="number">-1</span> &amp;&amp; t&lt;=<span class="number">1</span>) res++;</span><br><span class="line">        }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>C - 1-SAT<br>Return the unsatifiable string.</p>
<figure class="highlight c"><figcaption><span>1-sat.cpp</span><a href="/downloads/code/1-sat.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unordered_set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    ios_base::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; <span class="title">str</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> &amp;s: str) <span class="built_in">cin</span>&gt;&gt;s;</span><br><span class="line">    <span class="function"><span class="built_in">unordered_set</span>&lt;<span class="built_in">string</span>&gt; <span class="title">st</span><span class="params">(str.<span class="built_in">begin</span>(), str.<span class="built_in">end</span>())</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> s: str){</span><br><span class="line">        <span class="keyword">if</span>(st.count(<span class="string">'!'</span> + s)) {</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; s &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"satisfiable"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>D - Choose Me<br>Choose the minimum number of speeches to make to win-over another candidate.<br>Use greedy method.</p>
<figure class="highlight c"><figcaption><span>choose-me.cpp</span><a href="/downloads/code/choose-me.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">2e5</span> + <span class="number">10</span>;</span><br><span class="line">LL delta[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    LL sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++){</span><br><span class="line">        LL a, b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%lld%lld"</span>, &amp;a, &amp;b);</span><br><span class="line">        sum -= a;</span><br><span class="line">        delta[i] = <span class="number">2</span> * a + b;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    sort(delta, delta + n, [](LL a, LL b){</span><br><span class="line">        <span class="keyword">return</span> a &gt; b;</span><br><span class="line">    });</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++){</span><br><span class="line">        <span class="keyword">if</span>(sum&gt;<span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        cnt++;</span><br><span class="line">        sum += delta[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;cnt&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>E - Through Path<br>There are N vertices and N-1 edges. Each edge connects ai and bi.<br>Perform the following 2 operations.</p>
<ol>
<li>add x to all descendants of ai without traversing bi;</li>
<li>add x to all descendants of bi without traversing ai;</li>
</ol>
<p>Print the value of each node at the end.</p>
<p>Solution1:<br>For operation 1, add x to global root and -x to vertex b;<br>For operation 2, add x to vertex b;<br>In order to propagate the change to its subtree, need to preprocess depths of each vertex.</p>
<figure class="highlight c"><figcaption><span>through-path1.cpp</span><a href="/downloads/code/through-path1.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="built_in">vector</span>&lt;LL&gt;G[n];</span><br><span class="line">    <span class="built_in">vector</span>&lt;PII&gt;edges;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n<span class="number">-1</span>;i++){</span><br><span class="line">        <span class="keyword">int</span> a, b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        a--, b--;</span><br><span class="line">        G[a].push_back(b);</span><br><span class="line">        G[b].push_back(a);</span><br><span class="line">        edges.push_back({a, b});</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">depth</span><span class="params">(n, <span class="number">-1</span>)</span></span>;</span><br><span class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; Q;</span><br><span class="line">    depth[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    Q.push(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">while</span>(Q.<span class="built_in">size</span>()){</span><br><span class="line">        <span class="keyword">int</span> t = Q.front(); Q.pop();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;G[t].<span class="built_in">size</span>();i++){</span><br><span class="line">            <span class="keyword">if</span>(depth[G[t][i]]==<span class="number">-1</span>){</span><br><span class="line">                depth[G[t][i]] = depth[t] + <span class="number">1</span>;</span><br><span class="line">                Q.push(G[t][i]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;LL&gt; <span class="title">s</span><span class="params">(n, <span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="keyword">int</span> q;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;q;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;q;i++){</span><br><span class="line">        <span class="keyword">int</span> t, e, x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;t, &amp;e, &amp;x);</span><br><span class="line">        <span class="keyword">int</span> a = edges[e<span class="number">-1</span>].first, b = edges[e<span class="number">-1</span>].second; <span class="comment">// e-1</span></span><br><span class="line">        <span class="keyword">if</span>(depth[a] &gt; depth[b]){</span><br><span class="line">            swap(a, b);</span><br><span class="line">            <span class="keyword">if</span>(t==<span class="number">1</span>) t = <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">else</span> t = <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(t==<span class="number">1</span>){</span><br><span class="line">            s[<span class="number">0</span>] += x;</span><br><span class="line">            s[b] -= x;</span><br><span class="line">        }<span class="keyword">else</span> s[b] += x;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    Q = <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; ();</span><br><span class="line">    Q.push(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">while</span>(Q.<span class="built_in">size</span>()){</span><br><span class="line">        <span class="keyword">int</span> t = Q.front(); Q.pop();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;G[t].<span class="built_in">size</span>();i++){</span><br><span class="line">            <span class="keyword">if</span>(depth[G[t][i]] &gt; depth[t]) {</span><br><span class="line">                s[G[t][i]] += s[t];</span><br><span class="line">                Q.push(G[t][i]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> x: s) <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, x);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>Solution2:<br>Solution1 doesnâ€™t support online query and arbitrary range change between nodes.<br>For arbitrary range, use dfs order;<br>For online query, use segment tree.</p>
<figure class="highlight c"><figcaption><span>through-path2.cpp</span><a href="/downloads/code/through-path2.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ls rt &lt;&lt; 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rs rt &lt;&lt; 1 | 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lson l , mid , rt &lt;&lt; 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rson mid + 1, r, rt &lt;&lt; 1 | 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lr2 (l + r) &gt;&gt; 1</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">4e5</span> + <span class="number">50</span>;</span><br><span class="line">ll sum[maxn &lt;&lt; <span class="number">2</span>], lazy[maxn &lt;&lt; <span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> L[maxn], R[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_up</span><span class="params">(<span class="keyword">int</span> rt)</span></span>{</span><br><span class="line">    sum[rt] = sum[ls] + sum[rs];</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">push_down</span><span class="params">(<span class="keyword">int</span> rt, <span class="keyword">int</span> m)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(lazy[rt])</span><br><span class="line">	{</span><br><span class="line">		lazy[ls] += lazy[rt];</span><br><span class="line">		lazy[rs] += lazy[rt];</span><br><span class="line">		sum[ls] += lazy[rt] * (m - (m &gt;&gt; <span class="number">1</span>));</span><br><span class="line">		sum[rs] += lazy[rt] * (m &gt;&gt; <span class="number">1</span>);</span><br><span class="line">		lazy[rt] = <span class="number">0</span>;</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, ll v, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> rt)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(a &lt;= l &amp;&amp; b &gt;= r){</span><br><span class="line">        sum[rt] += <span class="number">1L</span>L * (r - l + <span class="number">1</span>) * v;</span><br><span class="line">        lazy[rt] += v;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    push_down(rt, r - l + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> mid = lr2;</span><br><span class="line">    <span class="keyword">if</span>(a &lt;= mid) update(a, b, v, lson);</span><br><span class="line">    <span class="keyword">if</span>(b &gt; mid) update(a, b, v, rson);</span><br><span class="line">    push_up(rt);</span><br><span class="line">}</span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> rt)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(a &lt;= l &amp;&amp; b &gt;= r){</span><br><span class="line">        <span class="keyword">return</span> sum[rt];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = lr2;</span><br><span class="line">    push_down(rt, r - l + <span class="number">1</span>);</span><br><span class="line">    ll ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(a &lt;= mid) ans += query(a, b, lson);</span><br><span class="line">    <span class="keyword">if</span>(b &gt; mid) ans += query(a, b, rson);</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">    push_up(rt);</span><br><span class="line">}</span><br><span class="line"><span class="keyword">int</span> a[maxn], b[maxn];</span><br><span class="line"><span class="keyword">int</span> cnt, n;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; G[maxn];</span><br><span class="line"><span class="keyword">int</span> d[maxn];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> v, <span class="keyword">int</span> fa)</span></span>{</span><br><span class="line">    L[v] = ++cnt;</span><br><span class="line">    d[v] = d[fa] + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> u : G[v]){</span><br><span class="line">        <span class="keyword">if</span>(u != fa){</span><br><span class="line">            dfs(u, v);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    R[v] = cnt;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">std</span>::ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt; n;i++){</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a[i] &gt;&gt; b[i];</span><br><span class="line">        G[a[i]].push_back(b[i]);</span><br><span class="line">        G[b[i]].push_back(a[i]);</span><br><span class="line">    }</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">int</span> q;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; q;</span><br><span class="line">    ll ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(q--){</span><br><span class="line">        <span class="keyword">int</span> t, id;</span><br><span class="line">        ll x;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; t &gt;&gt; id &gt;&gt; x;</span><br><span class="line">        <span class="keyword">if</span>(t == <span class="number">1</span>){</span><br><span class="line">            <span class="keyword">if</span>(d[a[id]] &lt; d[b[id]]){</span><br><span class="line">                ans += x;</span><br><span class="line">                update(L[b[id]], R[b[id]], -x, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span> update(L[a[id]], R[a[id]], x, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span>{</span><br><span class="line">            <span class="keyword">if</span>(d[b[id]] &lt; d[a[id]]){</span><br><span class="line">                ans += x;</span><br><span class="line">                update(L[a[id]], R[a[id]], -x, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span> update(L[b[id]], R[b[id]], x, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt;= n;i++) <span class="built_in">cout</span> &lt;&lt; query(L[i], L[i], <span class="number">1</span>, n ,<span class="number">1</span>) + ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>F - Close Group<br>Given a graph of N nodes and M edges. A satisfied connected component is one where each pair of nodes within it are directly connected.<br>Can remove zero or more edges on the graph.<br>Return the minimum number of satisfied connected components.</p>
<p>Idea: For each set S, which is a subset of V, calculate dp[S] from its subset, using dynamic programming.<br>specifically, dp[S] = min(dp[T] + dp[S\T]), for all Sâ€™s subsets.<br>if {T} satisfies, the dp[T] = 1.<br>The satisfying condition can be pre-processed using O(2^N * N^2);<br>The transition takes O(3^N) time.<br>Time complexity: O(2^N * N^2 + 3^N).</p>
<figure class="highlight c"><figcaption><span>close-group.cpp</span><a href="/downloads/code/close-group.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">18</span>, INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">bool</span> valid[<span class="number">1</span>&lt;&lt;N];</span><br><span class="line"><span class="keyword">bool</span> adj[N][N];</span><br><span class="line"><span class="keyword">int</span> dp[<span class="number">1</span>&lt;&lt;N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++){</span><br><span class="line">        <span class="keyword">int</span> a, b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        a--, b--;</span><br><span class="line">        adj[a][b] = adj[b][a] = <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">1</span>&lt;&lt;n;i++){</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; vec;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++){</span><br><span class="line">            <span class="keyword">if</span>(i&gt;&gt;j&amp;<span class="number">1</span>) vec.push_back(j);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">bool</span> flag = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> u=<span class="number">0</span>;u&lt;vec.<span class="built_in">size</span>();u++) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> v = u + <span class="number">1</span>; v &lt; vec.<span class="built_in">size</span>(); v++) {</span><br><span class="line">                <span class="keyword">if</span> (!adj[vec[u]][vec[v]]) { <span class="comment">//error</span></span><br><span class="line">                    flag = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span>(!flag) <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(flag) valid[i] = <span class="literal">true</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(dp, INF, <span class="keyword">sizeof</span> dp);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">1</span>&lt;&lt;n;i++){</span><br><span class="line">        <span class="keyword">if</span>(valid[i]) dp[i] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j; j = (j - <span class="number">1</span>) &amp; i) {</span><br><span class="line">                dp[i] = <span class="built_in">min</span>(dp[i], dp[j] + dp[i^j]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;dp[(<span class="number">1</span>&lt;&lt;n)<span class="number">-1</span>]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>AtCoder</category>
      </categories>
      <tags>
        <tag>ABC</tag>
      </tags>
  </entry>
  <entry>
    <title>AtCoder 186</title>
    <url>/blog/AtCoder-ABC186/</url>
    <content><![CDATA[<p>A - Brick<br>At most how many bricks can be loaded?</p>
<figure class="highlight c"><figcaption><span>brick.cpp</span><a href="/downloads/code/brick.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n, w;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;w;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;n/w&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<a id="more"></a>


<p>B - Blocks on Grid<br>Print the minimum number of blocks that must be removed.</p>
<figure class="highlight c"><figcaption><span>blocks-on-grid.cpp</span><a href="/downloads/code/blocks-on-grid.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">110</span>, INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">int</span> a[N][N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">int</span> k = INF;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m;j++) {</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i][j]);</span><br><span class="line">            k = <span class="built_in">min</span>(k, a[i][j]);</span><br><span class="line">        }</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m;j++)</span><br><span class="line">            res += a[i][j] - k;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>C - Unlucky 7<br>Number of digits in octal and decimal format from 1 to N.</p>
<figure class="highlight c"><figcaption><span>unlucky-7.cpp</span><a href="/downloads/code/unlucky-7.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">to_oct</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="built_in">string</span> s;</span><br><span class="line">    <span class="keyword">while</span>(x) {</span><br><span class="line">        s = to_string(x % <span class="number">8</span>) + s;</span><br><span class="line">        x /= <span class="number">8</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;s.<span class="built_in">size</span>();j++)</span><br><span class="line">        <span class="keyword">if</span>(s[j]==<span class="string">'7'</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">to_dec</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="built_in">string</span> s = to_string(x);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;s.<span class="built_in">size</span>();j++)</span><br><span class="line">        <span class="keyword">if</span>(s[j]==<span class="string">'7'</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">int</span> s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">if</span>(to_dec(i) || to_oct(i)) s++;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;n-s&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>D - Sum of difference<br>Calculate |A_i - A_j| for all pairs of i, j in O(NlogN) time.</p>
<figure class="highlight c"><figcaption><span>sum-of-diff.cpp</span><a href="/downloads/code/sum-of-diff.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">200010</span>;</span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    LL s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">        s += a[i];</span><br><span class="line">    }</span><br><span class="line">    sort(a+<span class="number">1</span>, a+n+<span class="number">1</span>);</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        s -= a[i];</span><br><span class="line">        res += s  - (LL)(n-i) * a[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>E - Throne<br>N chairs arranged in a circle, S is the initial offset.<br>Move K chairs away each time. Minimum move to go back the first location?</p>
<figure class="highlight c"><figcaption><span>throne.cpp</span><a href="/downloads/code/throne.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">exgcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, ll &amp;x, ll &amp;y)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(!b){</span><br><span class="line">        x = <span class="number">1</span>, y = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> d= exgcd(b, a % b, y, x);</span><br><span class="line">    y -= a/b  * (ll)x;</span><br><span class="line">    <span class="keyword">return</span> d;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (t--) {</span><br><span class="line">        ll n,s,k;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;s&gt;&gt;k;</span><br><span class="line">        ll x, y;</span><br><span class="line">        s = n-s;</span><br><span class="line">        <span class="keyword">int</span> g=exgcd(k, n, x, y);</span><br><span class="line">        <span class="keyword">if</span> (s%g!=<span class="number">0</span>) {</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="string">"-1\n"</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        x = (ll)x * (s/g);</span><br><span class="line">        x = (x%(n/g) + n/g) % (n/g);</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;x&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>F - Rook on Grid<br>Given a 2-d grid and some obstacles. Print the number of cells that can be reached with the following two moves.</p>
<ol>
<li>Move down followed by move right;</li>
<li>Move right followed by move down;</li>
</ol>
<p>Idea: First add all the cells that can be reached with approach 1. Second add remaining cells that can only be reached with approach 2.<br>Use sweep line + bit tree to get O(NlogN) complexity.<br>For each line, consider the first obstacle. Cells left of this obstacle can use approach 1.<br>For cells right of this obstacle, it may be reached with approach 2.<br>tr[i] is the number of rows from 1~ith row, that has an obstacle on the left of the current enumerating column.</p>
<figure class="highlight c"><figcaption><span>rook-on-grid.cpp</span><a href="/downloads/code/rook-on-grid.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">2e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> r[N], c[N];</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> tr[N];</span><br><span class="line"><span class="keyword">int</span> h, w;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> x &amp; -x;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> v)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=x;i&lt;=h;i+=lowbit(i)) {</span><br><span class="line">        tr[i] += v;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> res =<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=x;i;i-=lowbit(i)){</span><br><span class="line">        res += tr[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> m;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;h&gt;&gt;w&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=h;i++) r[i] = w+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=w;j++) c[j] = h+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="keyword">int</span> x,y;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;x, &amp;y);</span><br><span class="line">        r[x] = <span class="built_in">min</span>(r[x], y);</span><br><span class="line">        c[y] = <span class="built_in">min</span>(c[y], x);</span><br><span class="line">    }</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=h;i++) {</span><br><span class="line">        <span class="keyword">if</span>(flag) {r[i] = <span class="number">1</span>; <span class="keyword">continue</span>;}</span><br><span class="line">        <span class="keyword">if</span>(r[i]==<span class="number">1</span>) {flag = <span class="number">1</span>; <span class="keyword">continue</span>;}</span><br><span class="line">        res += r[i] - <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v[w+<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=h;i++) v[r[i]].push_back(i);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=w;j++){</span><br><span class="line">        <span class="keyword">if</span>(c[j]==<span class="number">1</span>) <span class="keyword">break</span>; <span class="comment">//important</span></span><br><span class="line">        res += sum(c[j] <span class="number">-1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i: v[j]) add(i, <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>AtCoder</category>
      </categories>
      <tags>
        <tag>ABC</tag>
      </tags>
  </entry>
  <entry>
    <title>AtCoder 185</title>
    <url>/blog/AtCoder-ABC185/</url>
    <content><![CDATA[<p>A - ABC Preparation<br>The number of tests that can be formed.</p>
<figure class="highlight c"><figcaption><span>abc-prep.cpp</span><a href="/downloads/code/abc-prep.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> a1, a2, a3, a4;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;a1&gt;&gt;a2&gt;&gt;a3&gt;&gt;a4;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt;<span class="built_in">min</span>(<span class="built_in">min</span>(a1,a2), <span class="built_in">min</span>(a3, a4));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<a id="more"></a>


<p>B - Smartphone Addiction<br>Print if the phone battery is able to sustain till getting home.</p>
<figure class="highlight c"><figcaption><span>smartphone-addict.cpp</span><a href="/downloads/code/smartphone-addict.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> N, m, t;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;N&gt;&gt;m&gt;&gt;t;</span><br><span class="line">    <span class="keyword">int</span> n = N;</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="keyword">int</span> pre = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++){</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b;</span><br><span class="line">        n -= (a - pre);</span><br><span class="line">        <span class="keyword">if</span>(n&lt;=<span class="number">0</span>) {<span class="built_in">cout</span>&lt;&lt;<span class="string">"No"</span>&lt;&lt;<span class="built_in">endl</span>;  <span class="keyword">return</span> <span class="number">0</span>;}</span><br><span class="line">        n += (b-a);</span><br><span class="line">        n = <span class="built_in">min</span>(n, N);</span><br><span class="line">        pre = b;</span><br><span class="line">    }</span><br><span class="line">    n -= (t - pre);</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">0</span>) <span class="built_in">cout</span> &lt;&lt; <span class="string">"No"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; <span class="string">"Yes"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>C - Duodecim Ferra<br>The number of ways to divide L into 12 integer-segments.</p>
<figure class="highlight c"><figcaption><span>duodecim-ferra.cpp</span><a href="/downloads/code/duodecim-ferra.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    LL n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    LL res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">11</span>;i++){</span><br><span class="line">        res = res * (n - i) / i;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>D - Stamp<br>Minimum number of moves to stamp an array with stamp of size k.</p>
<figure class="highlight c"><figcaption><span>stamp.cpp</span><a href="/downloads/code/stamp.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">2e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> a[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">    sort(a, a+m);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> k = n;</span><br><span class="line">    <span class="keyword">int</span> pre = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++){</span><br><span class="line">        <span class="keyword">int</span> t = a[i] - pre - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (t &gt; <span class="number">0</span>)</span><br><span class="line">            k = <span class="built_in">min</span>(k, a[i] - pre - <span class="number">1</span>);</span><br><span class="line">        pre = a[i];</span><br><span class="line">        a[i] = t;</span><br><span class="line">    }</span><br><span class="line">    a[m] = n - pre ;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="keyword">if</span>(a[i] % k==<span class="number">0</span>) res += a[i] / k ;</span><br><span class="line">        <span class="keyword">else</span> res += a[i] / k  + <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>E - Sequence Matchinge<br>Minimum x+y given two sequence A, B of length n, m respectively.<br>x: removals from A and B to make them of equal length.<br>y: number of elements where A_i is not equal to B_i;</p>
<figure class="highlight c"><figcaption><span>seq-match.cpp</span><a href="/downloads/code/seq-match.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">10010</span>;</span><br><span class="line"><span class="keyword">int</span> a[N], b[N];</span><br><span class="line"><span class="keyword">int</span> f[N][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++) f[i][j] = <span class="built_in">max</span>(n, m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) f[i][<span class="number">0</span>] = i;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++) f[<span class="number">0</span>][j] = j;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;b[j]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++){</span><br><span class="line">            f[i][j] = <span class="built_in">min</span>(f[i][j], f[i<span class="number">-1</span>][j] + <span class="number">1</span>);</span><br><span class="line">            f[i][j] = <span class="built_in">min</span>(f[i][j], f[i][j<span class="number">-1</span>] + <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span>(a[i]!=b[j]) f[i][j] = <span class="built_in">min</span>(f[i][j], f[i<span class="number">-1</span>][j<span class="number">-1</span>] + <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">else</span> f[i][j] = <span class="built_in">min</span>(f[i][j], f[i<span class="number">-1</span>][j<span class="number">-1</span>] );</span><br><span class="line">        }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;f[n][m]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>F - Range Xor Query<br>Range query for the Xor operation.<br>Use fenwick-tree to solve.</p>
<figure class="highlight c"><figcaption><span>range-xor-query.cpp</span><a href="/downloads/code/range-xor-query.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">300010</span>;</span><br><span class="line"><span class="keyword">int</span> s[N], a[N];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> x &amp; -x;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> v)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=x;i&lt;=n;i+=lowbit(i)){</span><br><span class="line">        s[i] ^= v;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=x;i;i-=lowbit(i)){</span><br><span class="line">        res ^= s[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> q;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;q;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">int</span> x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;x);</span><br><span class="line">        a[i] = a[i<span class="number">-1</span>] ^ x;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">        s[i] = a[i] ^ a[i-lowbit(i)];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(q--){</span><br><span class="line">        <span class="keyword">int</span> t, x, v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;t, &amp;x, &amp;v);</span><br><span class="line">        <span class="keyword">if</span>(t==<span class="number">1</span>) modify(x, v);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, sum(v) ^ sum(x<span class="number">-1</span>));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>AtCoder</category>
      </categories>
      <tags>
        <tag>data_structure</tag>
        <tag>ABC</tag>
      </tags>
  </entry>
  <entry>
    <title>AtCoder 184</title>
    <url>/blog/AtCoder-ABC184/</url>
    <content><![CDATA[<p>A - Determinant</p>
<figure class="highlight c"><figcaption><span>determinant.cpp</span><a href="/downloads/code/determinant.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> a, b, c, d;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b&gt;&gt;c&gt;&gt;d;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt; a*d - b * c&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<a id="more"></a>


<p>B - Quizzes<br>Return the number of points he gets given a string.</p>
<figure class="highlight c"><figcaption><span>quizzes.cpp</span><a href="/downloads/code/quizzes.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n, x;</span><br><span class="line">    <span class="built_in">string</span> s;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;x;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;s;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> c: s){</span><br><span class="line">        <span class="keyword">if</span>(c==<span class="string">'o'</span>) x +=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> x = <span class="built_in">max</span>(<span class="number">0</span>, x<span class="number">-1</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;x&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>C - Super Ryuma<br>Minimum number of steps reaching from (r1, c1) to (r2, c2), using 3 ways.</p>
<figure class="highlight c"><figcaption><span>super-ryuma.cpp</span><a href="/downloads/code/super-ryuma.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> r1, c1, r2, c2;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;r1&gt;&gt;c1&gt;&gt;r2&gt;&gt;c2;</span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(r1==r2 &amp;&amp; c1==c2) <span class="built_in">cout</span>&lt;&lt;<span class="number">0</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(r1-c1==r2-c2 || r1+c1==r2+c2 || <span class="built_in">abs</span>(r1-r2) + <span class="built_in">abs</span>(c1-c2)&lt;=<span class="number">3</span>) <span class="built_in">cout</span>&lt;&lt;<span class="number">1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>((r1 + c1 + r2 - c2)%<span class="number">2</span>==<span class="number">0</span>) <span class="built_in">cout</span>&lt;&lt;<span class="number">2</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span>{</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">-3</span>;i&lt;=<span class="number">3</span>;i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">-3</span>;j&lt;=<span class="number">3</span>;j++){</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">abs</span>(i) + <span class="built_in">abs</span>(j) &gt; <span class="number">3</span>) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">int</span> r = r1 + i, c = c1 + j;</span><br><span class="line">                <span class="keyword">if</span>(r-c==r2-c2 || r+c == r2 + c2 || <span class="built_in">abs</span>(r-r2) + <span class="built_in">abs</span>(c -c2) &lt;=<span class="number">3</span>){</span><br><span class="line">                    <span class="built_in">cout</span>&lt;&lt;<span class="number">2</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="number">3</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>D - increment of coins<br>Given A, B, C coins, return the expected number of operations to reach 100 points in bag.</p>
<figure class="highlight c"><figcaption><span>incre-coins.cpp</span><a href="/downloads/code/incre-coins.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">double</span> ret[maxn][maxn][maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">dfs</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp;coins)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(coins[<span class="number">1</span>]==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">100.0</span> - coins[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">if</span>(coins[<span class="number">0</span>]==<span class="number">100</span> || coins[<span class="number">1</span>] ==<span class="number">100</span> || coins[<span class="number">2</span>]==<span class="number">100</span>) <span class="keyword">return</span> <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">double</span> &amp;ans = ret[coins[<span class="number">0</span>]][coins[<span class="number">1</span>]][coins[<span class="number">2</span>]];</span><br><span class="line">    <span class="keyword">if</span>(ans&gt;=<span class="number">0</span>) <span class="keyword">return</span> ans;</span><br><span class="line">    <span class="keyword">int</span> s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> c: coins) s += c;</span><br><span class="line">    <span class="keyword">double</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++){</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;nxt(coins);</span><br><span class="line">        nxt[i] ++;</span><br><span class="line">        res += (<span class="keyword">double</span>)coins[i] / s * (<span class="number">1</span>+dfs(nxt));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> ans = res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">coins</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++) <span class="built_in">cin</span>&gt;&gt;coins[i];</span><br><span class="line">    sort(coins.rbegin(), coins.rend());</span><br><span class="line">    <span class="built_in">memset</span>(ret, <span class="number">-1</span>, <span class="keyword">sizeof</span> ret);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.12f\n"</span>, dfs(coins));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>E - Third Avenue<br>Given 2-dim grids, return the minimum number of steps from start to goal.<br>An additional way of teleport is abled.</p>
<figure class="highlight c"><figcaption><span>third-avenue.cpp</span><a href="/downloads/code/third-avenue.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">2010</span>, INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">char</span> g[N][N];</span><br><span class="line"><span class="keyword">int</span> dis[N][N];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> y second</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> dx[<span class="number">4</span>] = {<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>}, dy[<span class="number">4</span>] = {<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>};</span><br><span class="line"><span class="keyword">int</span> si, sj, ei, ej;</span><br><span class="line"><span class="built_in">vector</span>&lt;PII&gt; tele[<span class="number">26</span>];</span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; <span class="title">used</span><span class="params">(<span class="number">26</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bfs</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">queue</span>&lt;PII&gt; q;</span><br><span class="line">    q.push({si, sj});</span><br><span class="line">    dis[si][sj] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(q.<span class="built_in">size</span>()){</span><br><span class="line">        <span class="keyword">auto</span> t = q.front();</span><br><span class="line">        q.pop();</span><br><span class="line">        <span class="keyword">if</span>(t.x == ei &amp;&amp; t.y == ej) <span class="keyword">return</span> dis[t.x][t.y];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++){</span><br><span class="line">            <span class="keyword">int</span> mx = t.x + dx[i], my = t.y + dy[i];</span><br><span class="line">            <span class="keyword">if</span>(mx&lt;<span class="number">0</span> || mx &gt;=n || my&lt;<span class="number">0</span> || my&gt;=m || dis[mx][my]!=INF || g[mx][my]==<span class="string">'#'</span>) <span class="keyword">continue</span>;</span><br><span class="line">            dis[mx][my] = dis[t.x][t.y] + <span class="number">1</span>;</span><br><span class="line">            q.push({mx, my});</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(g[t.x][t.y]&gt;=<span class="string">'a'</span> &amp;&amp; g[t.x][t.y]&lt;=<span class="string">'z'</span> &amp;&amp; !used[g[t.x][t.y] - <span class="string">'a'</span>]){</span><br><span class="line">            used[g[t.x][t.y] - <span class="string">'a'</span>] = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">auto</span> [x, y]: tele[g[t.x][t.y] - <span class="string">'a'</span>]){</span><br><span class="line">                <span class="keyword">if</span>(dis[x][y]==INF){</span><br><span class="line">                    dis[x][y] = dis[t.x][t.y] + <span class="number">1</span>;</span><br><span class="line">                    q.push({x, y});</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> INF;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="built_in">memset</span>(dis, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> dis);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, g[i]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m;j++){</span><br><span class="line">            <span class="keyword">if</span>(g[i][j]==<span class="string">'S'</span>) si = i, sj = j;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(g[i][j]==<span class="string">'G'</span>) ei = i, ej = j;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(g[i][j]&gt;=<span class="string">'a'</span> &amp;&amp; g[i][j]&lt;=<span class="string">'z'</span>) tele[g[i][j]-<span class="string">'a'</span>].push_back({i, j});</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> res = bfs();</span><br><span class="line">    <span class="keyword">if</span>(res==INF) <span class="built_in">cout</span>&lt;&lt;<span class="number">-1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>F - Programming Contest<br>Maximum number of problems that can be solved with maximum T minutes.<br>This is a typical backpacking problem, but the maximum volume is too large.<br>Should use meet-in-the-middle to solve.</p>
<figure class="highlight c"><figcaption><span>program-contest.cpp</span><a href="/downloads/code/program-contest.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">45</span>;</span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; L, R;</span><br><span class="line">    L.insert(<span class="number">0</span>), R.insert(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">    <span class="keyword">int</span> l = n/<span class="number">2</span>, r = n - l;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="number">1</span>&lt;&lt;l);i++){</span><br><span class="line">        <span class="keyword">int</span> s = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;l;j++){</span><br><span class="line">            <span class="keyword">if</span>(i&amp;(<span class="number">1</span>&lt;&lt;j)){</span><br><span class="line">                s += a[j];</span><br><span class="line">                <span class="keyword">if</span>(s&gt;m) <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(s&lt;=m) L.insert(s);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="number">1</span>&lt;&lt;r);i++){</span><br><span class="line">        <span class="keyword">int</span> s = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;r;j++){</span><br><span class="line">            <span class="keyword">if</span>(i&amp;(<span class="number">1</span>&lt;&lt;j)){</span><br><span class="line">                s += a[l + j];</span><br><span class="line">                <span class="keyword">if</span>(s&gt;m) <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(s&lt;=m) R.insert(s);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> l: L){</span><br><span class="line">        <span class="keyword">auto</span> it = R.lower_bound(m+<span class="number">1</span>-l);</span><br><span class="line">        <span class="keyword">if</span>(it!=R.<span class="built_in">begin</span>())</span><br><span class="line">            it--;</span><br><span class="line">        <span class="keyword">if</span>(l + * it &lt;=m) res = <span class="built_in">max</span>(res, l + *it);</span><br><span class="line">        <span class="keyword">if</span>(res==m) <span class="keyword">break</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>AtCoder</category>
      </categories>
      <tags>
        <tag>data_structure</tag>
        <tag>ABC</tag>
      </tags>
  </entry>
  <entry>
    <title>AtCoder 183</title>
    <url>/blog/AtCoder-ABC183/</url>
    <content><![CDATA[<p>A - ReLU</p>
<figure class="highlight c"><figcaption><span>relu.cpp</span><a href="/downloads/code/relu.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;x;</span><br><span class="line">    x = <span class="built_in">max</span>(x, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;x&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<a id="more"></a>


<p>B - Billiards<br>Ouput the turning point given input point and output point.</p>
<figure class="highlight c"><figcaption><span>billards.cpp</span><a href="/downloads/code/billards.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">double</span> sx, sy, gx, gy;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;sx&gt;&gt;sy&gt;&gt;gx&gt;&gt;gy;</span><br><span class="line">    <span class="keyword">double</span> x = (<span class="keyword">double</span>)(sy*gx + sx * gy) / (sy+gy);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.10lf\n"</span>, x);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>C - Travel<br>Find the number of paths from city 1 to city n with total distance equalling to k.</p>
<figure class="highlight c"><figcaption><span>travel.cpp</span><a href="/downloads/code/travel.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span>  N = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> g[N][N];</span><br><span class="line"><span class="keyword">bool</span> vis[N];</span><br><span class="line"><span class="keyword">int</span> n, k;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> cnt, <span class="keyword">int</span> dis)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(cnt==n){</span><br><span class="line">        dis += g[u][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span>(dis==k) res++;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">if</span>(!vis[i]){</span><br><span class="line">            vis[i] = <span class="number">1</span>;</span><br><span class="line">            dfs(i, cnt+<span class="number">1</span>, dis + g[u][i]);</span><br><span class="line">            vis[i] = <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;k;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">            <span class="built_in">cin</span>&gt;&gt;g[i][j];</span><br><span class="line">    vis[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>D - Water Heater<br>A water heater is able to provide W liters at a given minute.<br>There are N people, the i-th people needs P_i water from S_i to E_i.<br>Is it possible to satisfy everyone?</p>
<figure class="highlight c"><figcaption><span>water-heater.cpp</span><a href="/downloads/code/water-heater.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//å·®åˆ†æ•°ç»„ï¼Œ æˆ–è€…æ‰«æçº¿</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">200010</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line">LL b[N];</span><br><span class="line"><span class="keyword">int</span> n, w;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;w;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) {</span><br><span class="line">        <span class="keyword">int</span> st, ed, c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;st, &amp;ed, &amp;c);</span><br><span class="line">        b[st] += c, b[ed] -= c;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++) b[i] += b[i<span class="number">-1</span>];</span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="keyword">if</span>(b[i] &gt; w){</span><br><span class="line">        flag = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(flag) <span class="built_in">cout</span>&lt;&lt;<span class="string">"Yes"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="string">"No"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>E - Queen on Grid<br>The number of ways from (1,1) to (H, W). Need to take care of walls in the path.</p>
<figure class="highlight c"><figcaption><span>queen-grid.cpp</span><a href="/downloads/code/queen-grid.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">2010</span>;</span><br><span class="line"><span class="keyword">char</span> g[N][N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="keyword">int</span> f[N][N], rsum[N][N], csum[N][N], dsum[N][N];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, g[i]);</span><br><span class="line"></span><br><span class="line">    f[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    rsum[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1</span>, csum[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1</span>, dsum[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++) {</span><br><span class="line">            <span class="keyword">if</span> (g[i - <span class="number">1</span>][j - <span class="number">1</span>] == <span class="string">'#'</span>) {</span><br><span class="line">                f[i][j] = <span class="number">0</span>;</span><br><span class="line">                rsum[i][j] = <span class="number">0</span>, csum[i][j] = <span class="number">0</span>, dsum[i][j] = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            }</span><br><span class="line">            LL tmp = f[i][j];</span><br><span class="line">            tmp = (tmp + rsum[i<span class="number">-1</span>][j]) % mod;</span><br><span class="line">            tmp = (tmp + csum[i][j<span class="number">-1</span>]) % mod;</span><br><span class="line">            tmp = (tmp + dsum[i<span class="number">-1</span>][j<span class="number">-1</span>]) % mod;</span><br><span class="line"></span><br><span class="line">            f[i][j] = tmp;</span><br><span class="line">            rsum[i][j] = (rsum[i<span class="number">-1</span>][j] + f[i][j]) % mod;</span><br><span class="line">            csum[i][j] = (csum[i][j<span class="number">-1</span>] + f[i][j]) % mod;</span><br><span class="line">            dsum[i][j] = (dsum[i<span class="number">-1</span>][j<span class="number">-1</span>] + f[i][j]) % mod;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="comment">//    for(int i=1;i&lt;=n;i++){</span></span><br><span class="line"><span class="comment">//        for(int j=1;j&lt;=m;j++)</span></span><br><span class="line"><span class="comment">//            printf("%d ", f[i][j]);</span></span><br><span class="line"><span class="comment">//        puts("");</span></span><br><span class="line"><span class="comment">//    }</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;f[n][m]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>F - Confluence<br>N students belonging to C different classes.<br>1 a b: join student a and b in the same group<br>2 a b: query the number of students belonging to class b from group of student a;</p>
<figure class="highlight c"><figcaption><span>confluence.cpp</span><a href="/downloads/code/confluence.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, q;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">200010</span>;</span><br><span class="line"><span class="keyword">int</span> p[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(p[x]!=x) p[x] = <span class="built_in">find</span>(p[x]);</span><br><span class="line">    <span class="keyword">return</span> p[x];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;q;</span><br><span class="line">    vector&lt;map&lt;int,int&gt;&gt; cnt(n+1);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">        <span class="keyword">int</span> c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;c);</span><br><span class="line">        p[i] = i;</span><br><span class="line">        cnt[i][c] = <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(q--){</span><br><span class="line">        <span class="keyword">int</span> x, a, b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;x, &amp;a, &amp;b);</span><br><span class="line">        <span class="keyword">if</span>(x==<span class="number">1</span>){</span><br><span class="line">            <span class="keyword">int</span> fa = <span class="built_in">find</span>(a), fb = <span class="built_in">find</span>(b);</span><br><span class="line">            <span class="keyword">if</span>(fa!=fb){</span><br><span class="line">                <span class="keyword">if</span>(cnt[fa].<span class="built_in">size</span>() &gt; cnt[fb].<span class="built_in">size</span>()) swap(fa, fb);</span><br><span class="line">                p[fa] = fb;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">auto</span> [k,v]: cnt[fa]) cnt[fb][k] += v;</span><br><span class="line">            }</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="keyword">int</span> fa = <span class="built_in">find</span>(a);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, cnt[fa][b]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>AtCoder</category>
      </categories>
      <tags>
        <tag>data_structure</tag>
        <tag>ABC</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¤¼ç‰©</title>
    <url>/blog/%E7%A4%BC%E7%89%A9/</url>
    <content><![CDATA[<p>åœ¨åŒèƒžèƒŽå…„å¼Ÿå°Aä¸Žå°Bçš„ç”Ÿæ—¥ä¼šä¸Šï¼Œä»–ä»¬å…±æ”¶åˆ°äº†Nä¸ªç¤¼ç‰©ï¼Œç”Ÿæ—¥è¿‡åŽä»–ä»¬å†³å®šåˆ†é…è¿™Nä¸ªç¤¼ç‰©(cntA+cntB=N)ï¼ˆcntAï¼ŒcntBè¡¨ç¤ºAå’ŒBæœ€ç»ˆå¾—åˆ°çš„ç¤¼ç‰©æ•°ï¼‰ã€‚å¯¹äºŽæ¯ä¸ªç¤¼ç‰©ä»–ä»¬ä¿©æœ‰ç€å„è‡ªå¿ƒä¸­çš„ä»·å€¼A_iå’ŒB_iï¼Œä»–ä»¬è¦æ±‚å„è‡ªåˆ†åˆ°çš„ç¤¼ç‰©æ•°ç›®|cntA-cntB|&lt;=1ï¼Œå¹¶ä¸”å„è‡ªæ‰€è¡¡é‡çš„ç¤¼ç‰©ä»·å€¼çš„å·®å€¼|sumA-sumB|å°½å¯èƒ½å°ï¼ŒçŽ°åœ¨ä»–ä»¬æƒ³çŸ¥é“æœ€å°çš„å·®å€¼æ˜¯å¤šå°‘ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>æ¯ç»„æ•°æ®ç¬¬ä¸€è¡Œä¸ºä¸€ä¸ªæ•´æ•°Nï¼Œè¡¨ç¤ºç¤¼ç‰©æ•°, N&lt;=30<br>ç¬¬äºŒè¡Œæœ‰Nä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå°Aæ‰€è¡¡é‡çš„æ¯ä¸ªç¤¼ç‰©çš„ä»·å€¼A_iã€‚<br>ç¬¬ä¸‰è¡Œä¹Ÿæœ‰Nä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå°Bæ‰€è¡¡é‡çš„æ¯ä¸ªç¤¼ç‰©çš„ä»·å€¼B_iã€‚</p>
</blockquote>

<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>è¾“å‡ºæœ€å°çš„å·®å€¼ã€‚</p>
</blockquote>


<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>3<br>1 2 3<br>4 2 1</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>1</p>
</blockquote>


<figure class="highlight c"><figcaption><span>liwu.cpp</span><a href="/downloads/code/liwu.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 40</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;R[M];</span><br><span class="line"><span class="keyword">int</span> A[M],B[M],n,ans;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> &amp;a,<span class="keyword">int</span> b)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(a==<span class="number">-1</span>||a&gt;b)a=b;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> sum,<span class="keyword">int</span> c)</span></span>{<span class="comment">//cè¡¨ç¤ºå°Aåœ¨å³è¾¹éœ€è¦çš„ç¤¼ç‰©æ•°</span></span><br><span class="line">    <span class="keyword">int</span> id=lower_bound(R[c].<span class="built_in">begin</span>(),R[c].<span class="built_in">end</span>(),sum)-R[c].<span class="built_in">begin</span>();</span><br><span class="line">    <span class="keyword">if</span>(id!=(<span class="keyword">int</span>)R[c].<span class="built_in">size</span>())</span><br><span class="line">        check(ans,<span class="built_in">abs</span>(sum-R[c][id]));</span><br><span class="line">    <span class="keyword">if</span>(id&gt;<span class="number">0</span>)</span><br><span class="line">        check(ans,<span class="built_in">abs</span>(sum-R[c][id<span class="number">-1</span>]));</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> i,j;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i]);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;B[i]);</span><br><span class="line">    <span class="keyword">int</span> m=n/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=n;i++)R[i].<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;(<span class="number">1</span>&lt;&lt;(n-m));i++){<span class="comment">//é¢„å¤„ç†å³åŠéƒ¨åˆ†</span></span><br><span class="line">        <span class="keyword">int</span> sum=<span class="number">0</span>,c=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;n-m;j++){</span><br><span class="line">            <span class="keyword">if</span>(i&amp;(<span class="number">1</span>&lt;&lt;j)){</span><br><span class="line">                sum-=A[m+j],c++;</span><br><span class="line">            }<span class="keyword">else</span> sum+=B[m+j];</span><br><span class="line">        }</span><br><span class="line">        R[c].push_back(sum);<span class="comment">//sumB-sumA</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=n-m;i++)sort(R[i].<span class="built_in">begin</span>(),R[i].<span class="built_in">end</span>());<span class="comment">//æ¯ä¸ªä¸ªæ•°å¯¹åº”çš„vectoræŽ’åº</span></span><br><span class="line">    ans=<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;(<span class="number">1</span>&lt;&lt;m);i++){<span class="comment">//æžšä¸¾å·¦è¾¹åˆ†é…æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">int</span> L=<span class="number">0</span>,c=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;m;j++)</span><br><span class="line">            <span class="keyword">if</span>(i&amp;(<span class="number">1</span>&lt;&lt;j)){<span class="comment">//sumA-sumB</span></span><br><span class="line">                L+=A[j],c++;</span><br><span class="line">            }<span class="keyword">else</span> L-=B[j];</span><br><span class="line">        <span class="keyword">if</span>(n&amp;<span class="number">1</span>)solve(L,n/<span class="number">2</span>+<span class="number">1</span>-c);</span><br><span class="line">        solve(L,n/<span class="number">2</span>-c);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>search</tag>
      </tags>
  </entry>
  <entry>
    <title>å“ˆå¸Œ</title>
    <url>/blog/%E5%93%88%E5%B8%8C/</url>
    <content><![CDATA[<p>ç»™å®š3ä¸ªé•¿åº¦ä¸ºnçš„å­—ç¬¦ä¸²A,B,C.çŽ°åœ¨éœ€è¦æž„é€ å‡ºä¸€ä¸ªå­—ç¬¦ä¸²Sï¼ŒS[i]å¯ä»¥æ˜¯A[i],B[i],C[i]ä¸­çš„ä¸€ä¸ªã€‚Sçš„å“ˆå¸Œå€¼ï¼Œç”±ä»¥ä¸‹ä»£ç ç”Ÿæˆï¼š</p>
<blockquote><p>function hash(S):<br>    answer = 0<br>    for each valid index i into S, starting from 0:<br>        answer = (answer * 127 + ord(S[i])) mod 1000000000000037<br>return answer</p>
</blockquote>
<p>ord(S[i])è¡¨ç¤ºS[i]çš„asciiç å€¼ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œæœ‰ä¸€ä¸ªæ­£æ•´æ•°nï¼Œè¡¨ç¤ºå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œnâ‰¤20ã€‚<br>æŽ¥ä¸‹æ¥3è¡Œï¼Œè¡¨ç¤ºå­—ç¬¦ä¸²A,B,Cã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>è¾“å‡ºæœ€å°çš„å“ˆå¸Œå€¼</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>4<br>ELLY<br>KRIS<br>STAN</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>142572564</p>
</blockquote>


<figure class="highlight c"><figcaption><span>haxi.cpp</span><a href="/downloads/code/haxi.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LL long long</span></span><br><span class="line">LL num[<span class="number">5000005</span>],ans;</span><br><span class="line">LL P=<span class="number">1000000000000037L</span>L,T;</span><br><span class="line"><span class="built_in">string</span> a,b,c;</span><br><span class="line"><span class="keyword">int</span> all,n,m,tot;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,LL p)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(x==n){</span><br><span class="line">        num[tot]=p;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++)num[tot]=(num[tot]*<span class="number">127</span>)%P;</span><br><span class="line">        tot++;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    dfs(x+<span class="number">1</span>,(p*<span class="number">127</span>+a[x])%P);</span><br><span class="line">    dfs(x+<span class="number">1</span>,(p*<span class="number">127</span>+b[x])%P);</span><br><span class="line">    dfs(x+<span class="number">1</span>,(p*<span class="number">127</span>+c[x])%P);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> x,LL p)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(x==all){</span><br><span class="line">        LL tmp=(num[<span class="number">0</span>]+p)%P;</span><br><span class="line">        ans=<span class="built_in">min</span>(ans,tmp);</span><br><span class="line">        <span class="keyword">int</span> k=lower_bound(num,num+tot,P-p)-num;</span><br><span class="line">        <span class="keyword">if</span>(k!=tot)ans=<span class="built_in">min</span>(ans,(num[k]+p)%P);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    DFS(x+<span class="number">1</span>,(p*<span class="number">127</span>+a[x])%P);</span><br><span class="line">    DFS(x+<span class="number">1</span>,(p*<span class="number">127</span>+b[x])%P);</span><br><span class="line">    DFS(x+<span class="number">1</span>,(p*<span class="number">127</span>+c[x])%P);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> N;<span class="built_in">string</span> A,B,C;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;N&gt;&gt;A&gt;&gt;B&gt;&gt;C;</span><br><span class="line">        n=N/<span class="number">2</span>;all=N;</span><br><span class="line">        m=N-n;</span><br><span class="line">        tot=<span class="number">0</span>;</span><br><span class="line">        a=A;b=B;c=C;</span><br><span class="line">        dfs(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        sort(num,num+tot);</span><br><span class="line">        ans=P;</span><br><span class="line">        DFS(n,<span class="number">0</span>);</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt; ans &lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">};</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>search</tag>
      </tags>
  </entry>
  <entry>
    <title>æœ€å—æ¬¢è¿Žçš„å¥¶ç‰›</title>
    <url>/blog/%E6%9C%80%E5%8F%97%E6%AC%A2%E8%BF%8E%E7%9A%84%E5%A5%B6%E7%89%9B/</url>
    <content><![CDATA[<p>æ¯å¤´ç‰›éƒ½æœ‰ä¸€ä¸ªæ¢¦æƒ³ï¼šæˆä¸ºä¸€ä¸ªç¾¤ä½“ä¸­æœ€å—æ¬¢è¿Žçš„åç‰›ï¼åœ¨ä¸€ä¸ªæœ‰1&lt;=N&lt;=10000å¤´ç‰›çš„ç‰›ç¾¤ä¸­ï¼Œç»™ä½ 1&lt;=M&lt;=50000ä¸ªäºŒå…ƒç»„(A,B),è¡¨ç¤ºAè®¤ä¸ºBæ˜¯å—æ¬¢è¿Žçš„ã€‚æ—¢ç„¶å—æ¬¢è¿Žæ˜¯å¯ä¼ é€’çš„ï¼Œé‚£ä¹ˆå¦‚æžœAè®¤ä¸ºBå—æ¬¢è¿Žï¼ŒBåˆè®¤ä¸ºCå—æ¬¢è¿Ž,åˆ™Aä¹Ÿä¼šè®¤ä¸ºCæ˜¯å—æ¬¢è¿Žçš„ï¼Œå“ªæ€•è¿™ä¸æ˜¯ååˆ†æ˜Žç¡®çš„è§„å®šã€‚ä½ çš„ä»»åŠ¡æ˜¯è®¡ç®—è¢«æ‰€æœ‰å…¶å®ƒçš„ç‰›éƒ½å–œæ¬¢çš„ç‰›çš„ä¸ªæ•°ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œï¼Œä¸¤ä¸ªæ•°ï¼ŒNå’ŒMã€‚ç¬¬2ï½žM+1è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•°ï¼ŒAå’ŒBï¼Œè¡¨ç¤ºAè®¤ä¸ºBæ˜¯å—æ¬¢è¿Žçš„ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>ä¸€ä¸ªæ•°ï¼Œè¢«å…¶ä»–æ‰€æœ‰å¥¶ç‰›è®¤ä¸ºå—æ¬¢è¿Žçš„å¥¶ç‰›å¤´æ•°ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>3 3<br>1 2<br>2 1<br>2 3</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>1</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>3å·å¥¶ç‰›è¢«å…¶ä»–å¥¶ç‰›å´‡æ‹œ</p>
</blockquote>


<figure class="highlight c"><figcaption><span>popular_cow.cpp</span><a href="/downloads/code/popular_cow.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">P</span>{</span></span><br><span class="line">    <span class="keyword">int</span> l,to;</span><br><span class="line">}e[<span class="number">50005</span>],E[<span class="number">50005</span>];</span><br><span class="line"><span class="keyword">int</span> n,m,sk[<span class="number">10005</span>],tp,d[<span class="number">10005</span>],l[<span class="number">10005</span>],b[<span class="number">10005</span>],t,nu,h[<span class="number">10005</span>],x,y,H[<span class="number">10005</span>],s,u;</span><br><span class="line"><span class="keyword">bool</span> v[<span class="number">10005</span>],is[<span class="number">10005</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">se</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    d[x]=l[x]=++t;sk[++tp]=x;is[x]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=h[x];i;i=e[i].l){</span><br><span class="line">        <span class="keyword">if</span>(!d[e[i].to]){</span><br><span class="line">            se(e[i].to);</span><br><span class="line">            l[x]=<span class="built_in">min</span>(l[x],l[e[i].to]);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(is[e[i].to])l[x]=<span class="built_in">min</span>(l[x],l[e[i].to]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(l[x]==d[x]){</span><br><span class="line">        ++nu;</span><br><span class="line">        <span class="keyword">do</span>{</span><br><span class="line">            y=sk[tp--];</span><br><span class="line">            b[y]=nu;</span><br><span class="line">            is[y]=<span class="number">0</span>;</span><br><span class="line">        }<span class="keyword">while</span>(y!=x);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;x,&amp;e[i].to);</span><br><span class="line">        e[i].l=h[x];h[x]=i;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i){</span><br><span class="line">        <span class="keyword">if</span>(!d[i])se(i);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i){</span><br><span class="line">        x=b[i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> o=h[i];o;o=e[o].l){</span><br><span class="line">            y=b[e[o].to];</span><br><span class="line">            <span class="keyword">if</span>(x!=y)v[x]=<span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line"><span class="comment">//      printf("%d %d %d\n",i,x,v[x]);</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=nu;++i){</span><br><span class="line">        <span class="keyword">if</span>(!v[i])s++,u=i;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(s!=<span class="number">1</span>)<span class="built_in">printf</span>(<span class="string">"0\n"</span>);</span><br><span class="line">    <span class="keyword">else</span> {</span><br><span class="line">        s--;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)<span class="keyword">if</span>(b[i]==u)s++;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,s);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>graph</tag>
      </tags>
  </entry>
  <entry>
    <title>é¢œè‰²ç»Ÿè®¡</title>
    <url>/blog/%E9%A2%9C%E8%89%B2%E7%BB%9F%E8%AE%A1/</url>
    <content><![CDATA[<p>ç»™å‡ºä¸€æ£µ n ä¸ªç»“ç‚¹çš„æ ‘ï¼Œæ¯ä¸ªç»“ç‚¹æœ‰ä¸€ä¸ªé¢œè‰²c_iã€‚ è¯¢é—® q æ¬¡ï¼Œæ¯æ¬¡è¯¢é—®ä»¥ v ç»“ç‚¹ä¸ºæ ¹çš„å­æ ‘ä¸­ï¼Œå‡ºçŽ°æ¬¡æ•° â‰¥k çš„é¢œè‰²æœ‰å¤šå°‘ç§ã€‚æ ‘çš„æ ¹èŠ‚ç‚¹æ˜¯1ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ä¸€è¡Œä¸¤ä¸ªæ•´æ•°nå’Œmã€‚</p>
<p>ç¬¬äºŒè¡Œnä¸ªæ•´æ•°c_iï¼Œè¡¨ç¤ºæ¯ä¸ªèŠ‚ç‚¹çš„é¢œè‰²ã€‚</p>
<p>æŽ¥ä¸‹æ¥n-1è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä¸€æ¡è¾¹ã€‚</p>
<p>æŽ¥ä¸‹æ¥mè¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°vå’Œkï¼Œè¡¨ç¤ºä¸€ä¸ªè¯¢é—®ã€‚</p>
<p>1&lt;=n,m,ci&lt;=10^5</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯¹äºŽæ¯ä¸ªè¯¢é—®ï¼Œè¾“å‡ºä¸€ä¸ªç»“æžœã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>8 5<br>1 2 2 3 3 2 3 3<br>1 2<br>1 5<br>2 3<br>2 4<br>5 6<br>5 7<br>5 8<br>1 2<br>1 3<br>1 4<br>2 3<br>5 3</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>2<br>2<br>1<br>0<br>1</p>
</blockquote>


<figure class="highlight c"><figcaption><span>yansetongji.cpp</span><a href="/downloads/code/yansetongji.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Query</span>{</span></span><br><span class="line">    <span class="keyword">int</span> id,c;</span><br><span class="line">};</span><br><span class="line"><span class="built_in">vector</span>&lt;Query&gt;q[M];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;edge[M];</span><br><span class="line"><span class="keyword">int</span> col[M],cnt[M],Res[M];</span><br><span class="line"><span class="keyword">int</span> sz[M],Big[M],ans[M];</span><br><span class="line"><span class="keyword">int</span> Lt[M],Rt[M],dfsLine[M],tid=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Rd</span><span class="params">(<span class="keyword">int</span> &amp;res)</span></span>{</span><br><span class="line">    <span class="keyword">char</span> c;res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(c=getchar(),c&lt;<span class="string">'0'</span>);</span><br><span class="line">    <span class="keyword">do</span> res=(res&lt;&lt;<span class="number">3</span>)+(res&lt;&lt;<span class="number">1</span>)+(c^<span class="number">48</span>);</span><br><span class="line">    <span class="keyword">while</span>(c=getchar(),c&gt;=<span class="string">'0'</span>);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs_pre</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> f)</span></span>{</span><br><span class="line">    sz[x]=<span class="number">1</span>;Big[x]=<span class="number">0</span>;</span><br><span class="line">    Lt[x]=++tid;dfsLine[tid]=x;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edge[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y=edge[x][i];</span><br><span class="line">        <span class="keyword">if</span>(y==f)<span class="keyword">continue</span>;</span><br><span class="line">        dfs_pre(y,x);</span><br><span class="line">        sz[x]+=sz[y];</span><br><span class="line">    }</span><br><span class="line">    Rt[x]=tid;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Del</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=Lt[x];i&lt;=Rt[x];i++){</span><br><span class="line">        <span class="keyword">int</span> t=dfsLine[i];</span><br><span class="line">        --Res[cnt[col[t]]--];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=Lt[x];i&lt;=Rt[x];i++) {</span><br><span class="line">        <span class="keyword">int</span> t=dfsLine[i];</span><br><span class="line">        ++Res[++cnt[col[t]]];</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> f)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> big=<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edge[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y=edge[x][i];</span><br><span class="line">        <span class="keyword">if</span>(y==f)<span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span>(big==<span class="number">-1</span>||sz[y]&gt;sz[big])big=y;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edge[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y=edge[x][i];</span><br><span class="line">        <span class="keyword">if</span>(y!=f&amp;&amp;y!=big){</span><br><span class="line">            solve(y,x);Del(y);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(big!=<span class="number">-1</span>)solve(big,x);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edge[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y=edge[x][i];</span><br><span class="line">        <span class="keyword">if</span>(y!=f&amp;&amp;y!=big)Add(y);</span><br><span class="line">    }</span><br><span class="line">    ++Res[++cnt[col[x]]];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;q[x].<span class="built_in">size</span>();i++)</span><br><span class="line">        ans[q[x][i].id]=Res[q[x][i].c];</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Prt</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(x==<span class="number">0</span>)<span class="keyword">return</span>;</span><br><span class="line">    Prt(x/<span class="number">10</span>); <span class="built_in">putchar</span>(x%<span class="number">10</span>^<span class="number">48</span>);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n,m,a,b;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        edge[i].<span class="built_in">clear</span>();</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;col[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;a,&amp;b);</span><br><span class="line">        edge[a].push_back(b);</span><br><span class="line">        edge[b].push_back(a);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;a,&amp;b);</span><br><span class="line">        q[a].push_back((Query){i,b});</span><br><span class="line">    }</span><br><span class="line">    dfs_pre(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">    solve(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="keyword">if</span>(ans[i]==<span class="number">0</span>)<span class="built_in">putchar</span>(<span class="string">'0'</span>);</span><br><span class="line">        Prt(ans[i]);</span><br><span class="line">        <span class="built_in">putchar</span>(<span class="string">'\n'</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>tree</tag>
      </tags>
  </entry>
  <entry>
    <title>æ ‘çš„ç»Ÿè®¡</title>
    <url>/blog/%E6%A0%91%E7%9A%84%E7%BB%9F%E8%AE%A1/</url>
    <content><![CDATA[<p>ä¸€æ£µæ ‘ä¸Šæœ‰nä¸ªèŠ‚ç‚¹ï¼Œç¼–å·åˆ†åˆ«ä¸º1åˆ°nï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªæƒå€¼wã€‚æˆ‘ä»¬å°†ä»¥ä¸‹é¢çš„å½¢å¼æ¥è¦æ±‚ä½ å¯¹è¿™æ£µæ ‘å®Œæˆ</p>
<p>ä¸€äº›æ“ä½œï¼š</p>
<p>I. CHANGE u t : æŠŠç»“ç‚¹uçš„æƒå€¼æ”¹ä¸ºt</p>
<p>II. QMAX u v: è¯¢é—®ä»Žç‚¹uåˆ°ç‚¹vçš„è·¯å¾„ä¸Šçš„èŠ‚ç‚¹çš„æœ€å¤§æƒå€¼</p>
<p>III. QSUM u v: è¯¢é—®ä»Žç‚¹uåˆ°ç‚¹vçš„è·¯å¾„ä¸Šçš„èŠ‚ç‚¹çš„æƒå€¼å’Œ</p>
<p>æ³¨æ„ï¼šä»Žç‚¹uåˆ°ç‚¹vçš„è·¯å¾„ä¸Šçš„èŠ‚ç‚¹åŒ…æ‹¬uå’Œvæœ¬èº«</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>è¾“å…¥çš„ç¬¬ä¸€è¡Œä¸ºä¸€ä¸ªæ•´æ•°nï¼Œè¡¨ç¤ºèŠ‚ç‚¹çš„ä¸ªæ•°ã€‚æŽ¥ä¸‹æ¥nâ€“1è¡Œï¼Œæ¯è¡Œ2ä¸ªæ•´æ•°aå’Œbï¼Œè¡¨ç¤ºèŠ‚ç‚¹aå’ŒèŠ‚ç‚¹bä¹‹é—´æœ‰</p>
<p>ä¸€æ¡è¾¹ç›¸è¿žã€‚æŽ¥ä¸‹æ¥nè¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ•´æ•°ï¼Œç¬¬iè¡Œçš„æ•´æ•°wiè¡¨ç¤ºèŠ‚ç‚¹içš„æƒå€¼ã€‚æŽ¥ä¸‹æ¥1è¡Œï¼Œä¸ºä¸€ä¸ªæ•´æ•°qï¼Œè¡¨ç¤ºæ“ä½œ</p>
<p>çš„æ€»æ•°ã€‚æŽ¥ä¸‹æ¥qè¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ“ä½œï¼Œä»¥â€œCHANGE u tâ€æˆ–è€…â€œQMAX u vâ€æˆ–è€…â€œQSUM u vâ€çš„å½¢å¼ç»™å‡ºã€‚</p>
<p> å¯¹äºŽ100ï¼…çš„æ•°æ®ï¼Œä¿è¯ 1&lt;=n&lt;=30000, 0&lt;=q&lt;=200000ï¼›ä¸­é€”æ“ä½œä¸­ä¿è¯æ¯ä¸ªèŠ‚ç‚¹çš„æƒå€¼wåœ¨-30000åˆ°30000ä¹‹é—´ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯¹äºŽæ¯ä¸ªâ€œQMAXâ€æˆ–è€…â€œQSUMâ€çš„æ“ä½œï¼Œæ¯è¡Œè¾“å‡ºä¸€ä¸ªæ•´æ•°è¡¨ç¤ºè¦æ±‚è¾“å‡ºçš„ç»“æžœã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>4<br>1 2<br>2 3<br>4 1<br>4 2 1 3<br>12<br>QMAX 3 4<br>QMAX 3 3<br>QMAX 3 2<br>QMAX 2 3<br>QSUM 3 4<br>QSUM 2 1<br>CHANGE 1 5<br>QMAX 3 4<br>CHANGE 3 6<br>QMAX 3 4<br>QMAX 2 4<br>QSUM 3 4</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>4<br>1<br>2<br>2<br>10<br>6<br>5<br>6<br>5<br>16</p>
</blockquote>


<figure class="highlight c"><figcaption><span>shudetongji.cpp</span><a href="/downloads/code/shudetongji.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 30005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> L,R,sum,mx;</span><br><span class="line">}tree[M&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;edge[M];</span><br><span class="line"><span class="keyword">int</span> val[M],A[M],dep[M];</span><br><span class="line"><span class="keyword">int</span> sz[M];<span class="comment">//å­æ ‘å¤§å°</span></span><br><span class="line"><span class="keyword">int</span> pathfa[M];<span class="comment">//è™šè¾¹ï¼Œç”¨äºŽè·³å‘ä¸Šä¸€æ¡é‡é“¾</span></span><br><span class="line"><span class="keyword">int</span> root[M];<span class="comment">//æ‰€åœ¨é‡é“¾çš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">int</span> sonID[M];<span class="comment">//é‡å„¿å­ç¼–å·</span></span><br><span class="line"><span class="keyword">int</span> segID[M];<span class="comment">//åœ¨çº¿æ®µæ ‘ä¸Šçš„ç¼–å·</span></span><br><span class="line"><span class="keyword">int</span> sT=<span class="number">0</span>;<span class="comment">//çº¿æ®µæ ‘ç¼–å·</span></span><br><span class="line"><span class="keyword">int</span> qsum,qmx;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Assign</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> f,<span class="keyword">int</span> d)</span></span>{<span class="comment">//åˆ†é…é‡å„¿å­</span></span><br><span class="line">    sz[x]=<span class="number">1</span>;<span class="keyword">int</span> k=<span class="number">-1</span>; dep[x]=d;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edge[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y=edge[x][i];</span><br><span class="line">        <span class="keyword">if</span>(y==f)<span class="keyword">continue</span>;</span><br><span class="line">        Assign(y,x,d+<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(k==<span class="number">-1</span>||sz[y]&gt;sz[k])k=y;</span><br><span class="line">        sz[x]+=sz[y];</span><br><span class="line">    }</span><br><span class="line">    sonID[x]=k;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> f,<span class="keyword">int</span> pf)</span></span>{<span class="comment">//åˆ†é…çº¿æ®µæ ‘ç¼–å·</span></span><br><span class="line">    root[x]=f;pathfa[x]=pf;segID[x]=++sT;A[sT]=val[x];</span><br><span class="line">    <span class="keyword">if</span>(sonID[x]!=<span class="number">-1</span>)Dfs(sonID[x],f,pf);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edge[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y=edge[x][i];</span><br><span class="line">        <span class="keyword">if</span>(sonID[x]==y||sz[x]&lt;sz[y])<span class="keyword">continue</span>;<span class="comment">//å„¿å­èŠ‚ç‚¹å’Œåå‘è¾¹</span></span><br><span class="line">        Dfs(y,y,x);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Up</span><span class="params">(<span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    tree[p].sum=tree[<span class="number">2</span>*p].sum+tree[<span class="number">2</span>*p+<span class="number">1</span>].sum;</span><br><span class="line">    tree[p].mx=<span class="built_in">max</span>(tree[<span class="number">2</span>*p].mx,tree[<span class="number">2</span>*p+<span class="number">1</span>].mx);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    tree[p].L=L,tree[p].R=R;</span><br><span class="line">    <span class="keyword">if</span>(L==R){</span><br><span class="line">        tree[p].sum=tree[p].mx=A[L];<span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(L,mid,<span class="number">2</span>*p);build(mid+<span class="number">1</span>,R,<span class="number">2</span>*p+<span class="number">1</span>);</span><br><span class="line">    Up(p);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> x,<span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(tree[p].L==tree[p].R){</span><br><span class="line">        tree[p].mx=tree[p].sum=x;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid=(tree[p].L+tree[p].R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(a&lt;=mid)update(a,x,<span class="number">2</span>*p);</span><br><span class="line">    <span class="keyword">else</span> update(a,x,<span class="number">2</span>*p+<span class="number">1</span>);</span><br><span class="line">    Up(p);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(tree[p].L==L&amp;&amp;tree[p].R==R){</span><br><span class="line">        qsum+=tree[p].sum,qmx=<span class="built_in">max</span>(qmx,tree[p].mx);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid=(tree[p].L+tree[p].R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(R&lt;=mid)query(L,R,<span class="number">2</span>*p);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(L&gt;mid)query(L,R,<span class="number">2</span>*p+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> {</span><br><span class="line">        query(L,mid,<span class="number">2</span>*p);query(mid+<span class="number">1</span>,R,<span class="number">2</span>*p+<span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Query</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>{</span><br><span class="line">    <span class="keyword">while</span>(root[a]!=root[b]){</span><br><span class="line">        <span class="keyword">if</span>(dep[root[a]]&lt;dep[root[b]])swap(a,b);</span><br><span class="line">        query(segID[root[a]],segID[a],<span class="number">1</span>);</span><br><span class="line">        a=pathfa[a];<span class="comment">//è·³åˆ°ä¸Šä¸€æ¡é‡é“¾</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(dep[a]&lt;dep[b])swap(a,b);</span><br><span class="line">    query(segID[b],segID[a],<span class="number">1</span>);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n,m,i,j,k,a,b;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;a,&amp;b);</span><br><span class="line">        edge[a].push_back(b);</span><br><span class="line">        edge[b].push_back(a);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;val[i]);</span><br><span class="line">    Assign(<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">    Dfs(<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">    build(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;m);</span><br><span class="line">    <span class="keyword">char</span> tmp[<span class="number">20</span>];</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;m;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s%d%d"</span>,tmp,&amp;a,&amp;b);</span><br><span class="line">        <span class="keyword">if</span>(tmp[<span class="number">0</span>]==<span class="string">'C'</span>){</span><br><span class="line">            update(segID[a],b,<span class="number">1</span>);</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            qsum=<span class="number">0</span>,qmx=<span class="number">-10000000</span>;</span><br><span class="line">            Query(a,b);</span><br><span class="line">            <span class="keyword">if</span>(tmp[<span class="number">1</span>]==<span class="string">'S'</span>)<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,qsum);</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,qmx);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>shulianpofen</tag>
      </tags>
  </entry>
  <entry>
    <title>æ ‘ä¸Šé›†ä¸­</title>
    <url>/blog/%E6%A0%91%E4%B8%8A%E9%9B%86%E4%B8%AD/</url>
    <content><![CDATA[<p>ç»™å®šä¸€æ£µå«æœ‰nä¸ªèŠ‚ç‚¹çš„æ ‘ï¼Œè¾¹é•¿éƒ½ä¸º1.</p>
<p>æœ‰mä¸ªè¯¢é—®ï¼Œæ¯æ¬¡è¯¢é—®ï¼Œç»™å®šä¸¤ä¸ªç‚¹Aå’ŒB</p>
<p>è¯¢é—®æœ‰å¤šå°‘ä¸ªç‚¹åˆ°Aå’ŒBçš„è·ç¦»ç›¸åŒã€‚ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•°n<br>æŽ¥ä¸‹æ¥n-1ï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ ‘ä¸Šçš„ä¸€æ¡è¾¹ã€‚<br>æŽ¥ä¸‹æ¥ä¸€ä¸ªæ•´æ•°mï¼Œè¡¨ç¤ºè¯¢é—®ä¸ªæ•°ã€‚<br>æŽ¥ä¸‹æ¥mè¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°Aå’ŒBï¼Œè¡¨ç¤ºè¯¢é—®æ ‘ä¸Šæœ‰å¤šå°‘ä¸ªç‚¹åˆ°Aå’Œè·ç¦»ä¸Žåˆ°Bçš„è·ç¦»ç›¸åŒ<br>n,m&lt;=10^5</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯¹äºŽæ¯ä¸ªè¯¢é—®ï¼Œè¾“å‡ºä¸€ä¸ªæ•´æ•°</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>4<br>1 2<br>2 3<br>2 4<br>2<br>1 2<br>1 3<br>è¾“å‡º</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>0<br>2</p>
</blockquote>


<figure class="highlight c"><figcaption><span>shushangjizhong.cpp</span><a href="/downloads/code/shushangjizhong.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> F first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MP make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> all(x) (x).begin(), (x).end()</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ull;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">double</span> ld;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> EPS = <span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI = <span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MOD = <span class="number">1000</span> * <span class="number">1000</span> * <span class="number">1000</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">2000</span> * <span class="number">1000</span> * <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> LG = <span class="number">30</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> T <span class="title">sqr</span><span class="params">(T n)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> n * n;</span><br><span class="line">}</span><br><span class="line"><span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; g[MAXN];</span><br><span class="line"><span class="keyword">int</span> n, x, y;</span><br><span class="line"><span class="keyword">int</span> depth[MAXN], <span class="built_in">size</span>[MAXN], anc[MAXN][LG];</span><br><span class="line"><span class="keyword">int</span> tin[MAXN], tout[MAXN], timer;</span><br><span class="line"><span class="keyword">int</span> q, a, b;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> v, <span class="keyword">int</span> par = <span class="number">1</span>, <span class="keyword">int</span> d = <span class="number">0</span>)</span> </span>{</span><br><span class="line">    depth[v] = d;</span><br><span class="line">    <span class="built_in">size</span>[v] = <span class="number">1</span>;</span><br><span class="line">    tin[v] = timer++;</span><br><span class="line">    anc[v][<span class="number">0</span>] = par;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; LG; i++) {</span><br><span class="line">        anc[v][i] = anc[anc[v][i - <span class="number">1</span>]][i - <span class="number">1</span>];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; g[v].<span class="built_in">size</span>(); i++) {</span><br><span class="line">        <span class="keyword">int</span> to = g[v][i];</span><br><span class="line">        <span class="keyword">if</span> (to != par) {</span><br><span class="line">            dfs(to, v, d + <span class="number">1</span>);</span><br><span class="line">            <span class="built_in">size</span>[v] += <span class="built_in">size</span>[to];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    tout[v] = timer++;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">ancestor</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> tin[a] &lt;= tin[b] &amp;&amp; tout[b] &lt;= tout[a];</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">go_up</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>{</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = LG - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) {</span><br><span class="line">        <span class="keyword">if</span> (!ancestor(anc[a][i], b)) {</span><br><span class="line">            a = anc[a][i];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> result = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span> (ancestor(a, b)) {</span><br><span class="line">        result = a;</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (ancestor(b, a)) {</span><br><span class="line">        result = b;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        result = anc[go_up(a, b)][<span class="number">0</span>];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> l = lca(a, b);</span><br><span class="line">    <span class="keyword">int</span> result = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span> (a == b) {</span><br><span class="line">        result = n;</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (depth[a] - depth[l] == depth[b] - depth[l]) {</span><br><span class="line">        a = go_up(a, l);</span><br><span class="line">        b = go_up(b, l);</span><br><span class="line">        result = n - <span class="built_in">size</span>[a] - <span class="built_in">size</span>[b];</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">if</span> (depth[a] &lt; depth[b]) {</span><br><span class="line">            swap(a, b);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> to = a;</span><br><span class="line">        <span class="keyword">int</span> dist = depth[a] + depth[b] - <span class="number">2</span> * depth[l];</span><br><span class="line">        <span class="keyword">if</span> (dist % <span class="number">2</span> == <span class="number">1</span>) {</span><br><span class="line">            result = <span class="number">0</span>;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            dist /= <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = LG - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) {</span><br><span class="line">                <span class="keyword">if</span> (depth[a] - depth[anc[to][i]] &lt; dist) {</span><br><span class="line">                    to = anc[to][i];</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">int</span> mid = anc[to][<span class="number">0</span>];</span><br><span class="line">            result = <span class="built_in">size</span>[mid] - <span class="built_in">size</span>[to];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    freopen(<span class="string">"data0.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line">    freopen(<span class="string">"data0.out"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;x, &amp;y);</span><br><span class="line">        g[x].push_back(y);</span><br><span class="line">        g[y].push_back(x);</span><br><span class="line">    }</span><br><span class="line">    dfs(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;q);</span><br><span class="line">    <span class="keyword">while</span> (q--) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(a, b));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>LCA</tag>
      </tags>
  </entry>
  <entry>
    <title>è·³æ ¼å­</title>
    <url>/blog/%E8%B7%B3%E6%A0%BC%E5%AD%90/</url>
    <content><![CDATA[<p>æœ‰n*mçš„æ ¼å­ï¼Œå¹¶ä¸”æ˜¯ä¸ªè·³æ ¼å­çš„åœ°æ–¹ã€‚æ¯ä¸ªæ ¼å­æœ‰ä¸€ä¸ªé¢œè‰²cã€‚çŽ°åœ¨ä½ è¦ä»Žç½‘æ ¼çš„å·¦ä¸Šè§’è°ƒåˆ°å³ä¸‹è§’ï¼Œå¹¶ä¸”éµå®ˆä»¥ä¸‹è§„åˆ™ï¼š<br>è®¾å½“å‰æ ¼å­ä¸º(x,y)ã€‚<br>1)å¯¹äºŽæ¯æ¬¡è·³åˆ°çš„æ ¼å­(tx,ty), tx&gt;x, ty&gt;y<br>2)å¯¹äºŽæ¯æ¬¡è·³åˆ°çš„æ ¼å­(tx,ty), c[(tx,ty)]â‰ c[(x,y)]<br>é—®æœ‰å¤šå°‘ç§è·³æ³•ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸‰ä¸ªæ•´æ•°n,m,k,è¡¨ç¤ºè¡Œå’Œåˆ—ä»¥åŠé¢œè‰²çš„èŒƒå›´[1,k]ã€‚<br>æŽ¥ä¸‹æ¥nè¡Œï¼Œæ¯è¡Œmä¸ªæ•´æ•°è¡¨ç¤ºå½“å‰æ ¼å­é¢œè‰²ã€‚<br>å¯¹äºŽ100%çš„æ•°æ®ï¼Œn,m&lt;=750, k&lt;=n*mã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>ä¸€ä¸ªæ­£æ•´æ•°sè¡¨ç¤ºè·³æ³•æ•°é‡ã€‚ç­”æ¡ˆå¯¹10^9+7å–æ¨¡ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>4 4 4<br>1 1 1 1<br>1 3 2 1<br>1 2 4 1<br>1 1 1 1</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>5</p>
</blockquote>


<figure class="highlight c"><figcaption><span>tiaogezi.cpp</span><a href="/downloads/code/tiaogezi.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 755</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> P 1000000007</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,k;</span><br><span class="line"><span class="keyword">int</span> del[M*M];</span><br><span class="line"><span class="keyword">int</span> c[M][M],dp[M][M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CDQ</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(L==R)<span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    CDQ(L,mid);</span><br><span class="line">    <span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>;j&lt;=m;j++){</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k=L;k&lt;=mid;k++){</span><br><span class="line">            sum=(sum+dp[k][j<span class="number">-1</span>])%P;</span><br><span class="line">            del[c[k][j<span class="number">-1</span>]]=(del[c[k][j<span class="number">-1</span>]]+dp[k][j<span class="number">-1</span>])%P;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k=mid+<span class="number">1</span>;k&lt;=R;k++){</span><br><span class="line">            dp[k][j]=(dp[k][j]+sum)%P;</span><br><span class="line">            dp[k][j]=(dp[k][j]-del[c[k][j]]+P)%P;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k=L;k&lt;=mid;k++)</span><br><span class="line">            del[c[k][j]]=<span class="number">0</span>;</span><br><span class="line">    CDQ(mid+<span class="number">1</span>,R);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;n,&amp;m,&amp;k);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;c[i][j]);</span><br><span class="line">    dp[<span class="number">1</span>][<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">    CDQ(<span class="number">1</span>,n);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[n][m]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>åºåˆ—åˆ†æ®µ</title>
    <url>/blog/%E5%BA%8F%E5%88%97%E5%88%86%E6%AE%B5/</url>
    <content><![CDATA[<p>é•¿åº¦ä¸ºnçš„åºåˆ—aï¼Œå°†å…¶åˆ†æˆè¿žç»­çš„kæ®µï¼Œæ¯æ®µçš„ä»·å€¼ä¸ºå…¶ä¸­æ•°å­—ç§ç±»çš„ä¸ªæ•°ï¼Œæ±‚æœ€å¤§ä»·å€¼æ€»å’Œã€‚<br>1&lt;=&lt;=35000, 1&lt;=k&lt;=min(n, 50), 1&lt;=ai&lt;=n</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°nå’Œkã€‚<br>ç¬¬äºŒè¡Œnä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä¸€ä¸ªåºåˆ—ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>è¾“å‡ºç»“æžœã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>7 2<br>1 3 3 1 4 4 4</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>5</p>
</blockquote>

<p>ç¤ºä¾‹2<br>è¾“å…¥</p>
<blockquote><p>8 3<br>7 7 8 7 7 8 1 7</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>6</p>
</blockquote>


<figure class="highlight c"><figcaption><span>xuliefenduan.cpp</span><a href="/downloads/code/xuliefenduan.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lson l,m,rt*2</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rson m+1,r,rt*2+1</span></span><br><span class="line"><span class="keyword">int</span> tree[<span class="number">350050</span>*<span class="number">8</span>];</span><br><span class="line"><span class="keyword">int</span> flag[<span class="number">350050</span>*<span class="number">8</span>];</span><br><span class="line"><span class="keyword">int</span> a[<span class="number">350050</span>];</span><br><span class="line"><span class="keyword">int</span> last[<span class="number">350050</span>];</span><br><span class="line"><span class="keyword">int</span> dp[<span class="number">350050</span>];</span><br><span class="line"><span class="keyword">int</span> n,k;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span> </span>{</span><br><span class="line">    flag[rt]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(l==r) {</span><br><span class="line">        tree[rt]=dp[l];</span><br><span class="line">        flag[rt]=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(lson);</span><br><span class="line">    build(rson);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span> </span>{ <span class="comment">//å‘ä¸‹ç»´æŠ¤æ ‘å†…æ•°æ®</span></span><br><span class="line">    <span class="keyword">if</span>(flag[rt]) { <span class="comment">//å¦‚æžœè´ªå©ªæ ‡è®°ä¸æ˜¯0ï¼ˆè¯´æ˜Žéœ€è¦å‘ä¸‹è¿›è¡Œè¦†ç›–åŒºé—´ï¼ˆæˆ–ç‚¹ï¼‰çš„å€¼ï¼‰</span></span><br><span class="line">        <span class="keyword">int</span> m=(l+r)/<span class="number">2</span>;</span><br><span class="line">        flag[rt*<span class="number">2</span>]+=flag[rt];</span><br><span class="line">        flag[rt*<span class="number">2</span>+<span class="number">1</span>]+=flag[rt];</span><br><span class="line">        tree[rt*<span class="number">2</span>]+=flag[rt];<span class="comment">//åƒä¸‡ç†è§£å¦‚ä½•è¦†ç›–çš„åŒºé—´å€¼ï¼ˆå¯¹åº”çº¿æ®µæ ‘çš„å›¾ç‰‡ç†è§£ï¼ˆm-lï¼‰+1ï¼‰æ˜¯ä»€ä¹ˆæ„è¯†.</span></span><br><span class="line">        tree[rt*<span class="number">2</span>+<span class="number">1</span>]+=flag[rt];</span><br><span class="line">        flag[rt]=<span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> rt)</span> </span>{</span><br><span class="line">    tree[rt]=<span class="built_in">max</span>(tree[rt&lt;&lt;<span class="number">1</span>],tree[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Query</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(L&lt;=l&amp;&amp;r&lt;=R) {</span><br><span class="line">        <span class="keyword">return</span> tree[rt];</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        pushdown(l,r,rt);</span><br><span class="line">        <span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(L&lt;=m) {</span><br><span class="line">            ans=<span class="built_in">max</span>(ans,Query(L,R,lson));</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(m&lt;R) {</span><br><span class="line">            ans=<span class="built_in">max</span>(ans,Query(L,R,rson));</span><br><span class="line">        }</span><br><span class="line">        pushup(rt);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> c,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(L&lt;=l&amp;&amp;r&lt;=R) { <span class="comment">//è¦†ç›–çš„æ˜¯åŒºé—´~</span></span><br><span class="line">        tree[rt]+=c;<span class="comment">//è¦†ç›–å½“å‰ç‚¹çš„å€¼</span></span><br><span class="line">        flag[rt]+=c;<span class="comment">//åŒæ—¶æ‡’æƒ°æ ‡è®°~ï¼</span></span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    }</span><br><span class="line">    pushdown(l,r,rt);</span><br><span class="line">    <span class="keyword">int</span> m=(l+r)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span>(L&lt;=m) {</span><br><span class="line">        update(L,R,c,lson);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(m&lt;R) {</span><br><span class="line">        update(L,R,c,rson);</span><br><span class="line">    }</span><br><span class="line">    pushup(rt);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;k);</span><br><span class="line">    <span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=k; i++) {</span><br><span class="line">        build(<span class="number">0</span>,n,<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; j++)dp[j]=<span class="number">0</span>,last[a[j]]=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; j++) {</span><br><span class="line">            update(last[a[j]],j<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>,n,<span class="number">1</span>);</span><br><span class="line">            last[a[j]]=j;</span><br><span class="line">            dp[j]=Query(<span class="number">0</span>,j<span class="number">-1</span>,<span class="number">0</span>,n,<span class="number">1</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[n]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">char</span> in[<span class="number">20</span>]={<span class="string">"sub0.in"</span>};</span><br><span class="line">    <span class="keyword">char</span> out[<span class="number">20</span>]={<span class="string">"sub0.out"</span>};</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> cas=<span class="number">0</span>;cas&lt;<span class="number">10</span>;cas++){</span><br><span class="line">        freopen(in,<span class="string">"r"</span>,<span class="built_in">stdin</span>);in[<span class="number">3</span>]++;</span><br><span class="line">        freopen(out,<span class="string">"w"</span>,<span class="built_in">stdout</span>);out[<span class="number">3</span>]++;</span><br><span class="line">        solve();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>MIS</title>
    <url>/blog/MIS/</url>
    <content><![CDATA[<p>é•¿åº¦ä¸ºmçš„é€’å¢žå­åºåˆ—ï¼ˆM length Increase Subsequenceï¼‰ï¼Œç§°ä¸ºMISã€‚<br>æ±‚é•¿åº¦ä¸ºnçš„åºåˆ—ï¼Œæœ‰å¤šå°‘ä¸ªMISã€‚<br>å­åºåˆ—ä¸éœ€è¦åœ¨åŽŸåºåˆ—ä¸­ä¸éœ€è¦è¿žç»­ï¼Œä½†è¦ä¿è¯ç›¸å¯¹ä½ç½®ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°nå’Œmã€‚</p>
<p>ç¬¬äºŒè¡Œnä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä¸€ä¸ªåºåˆ—ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>è¾“å‡ºMISçš„ä¸ªæ•°ï¼Œç»“æžœå¯¹20140921å–ä½™ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>5 3<br>1 2 5 3 4</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>5</p>
</blockquote>


<figure class="highlight c"><figcaption><span>MIS.cpp</span><a href="/downloads/code/MIS.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> reg register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 10005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 105</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> P 20140921</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> A[N],B[N],cnt[N];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> dp[M][N];</span><br><span class="line"><span class="keyword">int</span> n,m,mx;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>{</span><br><span class="line">    <span class="keyword">while</span>(x&lt;=mx) {</span><br><span class="line">        cnt[x]+=y;</span><br><span class="line">        <span class="keyword">if</span>(cnt[x]&gt;=P)cnt[x]-=P;</span><br><span class="line">        x+=x&amp;-x;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x) {</span><br><span class="line">        res+=cnt[x];</span><br><span class="line">        <span class="keyword">if</span>(res&gt;=P)res-=P;</span><br><span class="line">        x-=x&amp;-x;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    reg <span class="keyword">int</span> i,j;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;=n; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i]);</span><br><span class="line">        dp[<span class="number">1</span>][i]=<span class="number">1</span>;</span><br><span class="line">        B[i]=A[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(m==<span class="number">1</span>){</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,n);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">    sort(B+<span class="number">1</span>,B+n+<span class="number">1</span>);</span><br><span class="line">    mx=unique(B+<span class="number">1</span>,B+n+<span class="number">1</span>)-B;<span class="comment">//åŽ»é‡</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;=n; i++)A[i]=lower_bound(B+<span class="number">1</span>,B+<span class="number">1</span>+mx,A[i])-B+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">2</span>; i&lt;=m; i++) {</span><br><span class="line">        <span class="built_in">memset</span>(cnt,<span class="number">0</span>,<span class="keyword">sizeof</span> cnt);</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">1</span>; j&lt;=n; j++) {</span><br><span class="line">            dp[i][j]=query(A[j]<span class="number">-1</span>);</span><br><span class="line">            <span class="keyword">if</span>(dp[i<span class="number">-1</span>][j])add(A[j],dp[i<span class="number">-1</span>][j]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    reg <span class="keyword">long</span> <span class="keyword">long</span> ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(j=<span class="number">1</span>; j&lt;=n; j++)</span><br><span class="line">    {</span><br><span class="line">        ans+=dp[m][j];</span><br><span class="line">        <span class="keyword">if</span>(ans&gt;=P)ans-=P;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans%P);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>NOIP</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>è‚¡ç¥¨äº¤æ˜“</title>
    <url>/blog/%E8%82%A1%E7%A5%A8%E4%BA%A4%E6%98%93/</url>
    <content><![CDATA[<p>æœ€è¿‘lxhgwwåˆè¿·ä¸Šäº†æŠ•èµ„è‚¡ç¥¨ï¼Œé€šè¿‡ä¸€æ®µæ—¶é—´çš„è§‚å¯Ÿå’Œå­¦ä¹ ï¼Œä»–æ€»ç»“å‡ºäº†è‚¡ç¥¨è¡Œæƒ…çš„ä¸€äº›è§„å¾‹ã€‚<br>é€šè¿‡ä¸€æ®µæ—¶é—´çš„è§‚å¯Ÿï¼Œlxhgwwé¢„æµ‹åˆ°äº†æœªæ¥Tå¤©å†…æŸåªè‚¡ç¥¨çš„èµ°åŠ¿ï¼Œç¬¬iå¤©çš„è‚¡ç¥¨ä¹°å…¥ä»·ä¸ºæ¯è‚¡AP_iï¼Œç¬¬iå¤©çš„è‚¡ç¥¨å–å‡ºä»·ä¸ºæ¯è‚¡BP_iï¼ˆæ•°æ®ä¿è¯å¯¹äºŽæ¯ä¸ªiï¼Œéƒ½æœ‰ï¼‰ï¼Œä½†æ˜¯æ¯å¤©ä¸èƒ½æ— é™åˆ¶åœ°äº¤æ˜“ï¼ŒäºŽæ˜¯è‚¡ç¥¨äº¤æ˜“æ‰€è§„å®šç¬¬iå¤©çš„ä¸€æ¬¡ä¹°å…¥è‡³å¤šåªèƒ½è´­ä¹°AS_iè‚¡ï¼Œä¸€æ¬¡å–å‡ºè‡³å¤šåªèƒ½å–å‡ºBS_iè‚¡ã€‚<br>å¦å¤–ï¼Œè‚¡ç¥¨äº¤æ˜“æ‰€è¿˜åˆ¶å®šäº†ä¸¤ä¸ªè§„å®šã€‚ä¸ºäº†é¿å…å¤§å®¶ç–¯ç‹‚äº¤æ˜“ï¼Œè‚¡ç¥¨äº¤æ˜“æ‰€è§„å®šåœ¨ä¸¤æ¬¡äº¤æ˜“ï¼ˆæŸä¸€å¤©çš„ä¹°å…¥æˆ–è€…å–å‡ºå‡ç®—æ˜¯ä¸€æ¬¡äº¤æ˜“ï¼‰ä¹‹é—´ï¼Œè‡³å°‘è¦é—´éš”Wå¤©ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æžœåœ¨ç¬¬iå¤©å‘ç”Ÿäº†äº¤æ˜“ï¼Œé‚£ä¹ˆä»Žç¬¬i+1å¤©åˆ°ç¬¬i+Wå¤©ï¼Œå‡ä¸èƒ½å‘ç”Ÿäº¤æ˜“ã€‚åŒæ—¶ï¼Œä¸ºäº†é¿å…åž„æ–­ï¼Œè‚¡ç¥¨äº¤æ˜“æ‰€è¿˜è§„å®šåœ¨ä»»ä½•æ—¶é—´ï¼Œä¸€ä¸ªäººçš„æ‰‹é‡Œçš„è‚¡ç¥¨æ•°ä¸èƒ½è¶…è¿‡MaxPã€‚<br>åœ¨ç¬¬1å¤©ä¹‹å‰ï¼Œlxhgwwæ‰‹é‡Œæœ‰ä¸€å¤§ç¬”é’±ï¼ˆå¯ä»¥è®¤ä¸ºé’±çš„æ•°ç›®æ— é™ï¼‰ï¼Œä½†æ˜¯æ²¡æœ‰ä»»ä½•è‚¡ç¥¨ï¼Œ<br>å½“ç„¶ï¼ŒTå¤©ä»¥åŽï¼Œlxhgwwæƒ³è¦èµšåˆ°æœ€å¤šçš„é’±ï¼Œèªæ˜Žçš„ç¨‹åºå‘˜ä»¬ï¼Œä½ ä»¬èƒ½å¸®åŠ©ä»–å—ï¼Ÿ</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>è¾“å…¥æ•°æ®ç¬¬ä¸€è¡ŒåŒ…æ‹¬3ä¸ªæ•´æ•°ï¼Œåˆ†åˆ«æ˜¯Tï¼ŒMaxPï¼ŒWã€‚<br>æŽ¥ä¸‹æ¥Tè¡Œï¼Œç¬¬iè¡Œä»£è¡¨ç¬¬i-1å¤©çš„è‚¡ç¥¨èµ°åŠ¿ï¼Œæ¯è¡Œ4ä¸ªæ•´æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºAP_i,BP_i,AS_i,BS_iã€‚0&lt;=W&lt;T&lt;=2000, 1&lt;=MaxP&lt;=2000, 1&lt;=BPi&lt;=APi&lt;=1000, 1&lt;=ASi&lt;=BSi&lt;=MaxP</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>è¾“å‡ºæ•°æ®ä¸ºä¸€è¡Œï¼ŒåŒ…æ‹¬1ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºlxhgwwèƒ½èµšåˆ°çš„æœ€å¤šçš„é’±æ•°ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>5 2 0<br>2 1 1 1<br>2 1 1 1<br>3 2 1 1<br>4 3 1 1<br>5 4 1 1</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>3</p>
</blockquote>


<figure class="highlight c"><figcaption><span>gupiaojiaoyi.cpp</span><a href="/downloads/code/gupiaojiaoyi.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 2005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> ap,bp,as,bs;</span><br><span class="line">}A[M];</span><br><span class="line"><span class="keyword">int</span> dp[M][M];</span><br><span class="line"><span class="keyword">int</span> INF;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> v,id;</span><br><span class="line">}Q[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n,m,W;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m&gt;&gt;W;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;A[i].ap&gt;&gt;A[i].bp&gt;&gt;A[i].as&gt;&gt;A[i].bs;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(dp,<span class="number">-127</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=W+<span class="number">1</span>;i++){</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=m;j++){</span><br><span class="line">            <span class="keyword">if</span>(j&lt;=A[i].as)dp[i][j]=-j*A[i].ap;</span><br><span class="line">            <span class="keyword">if</span>(i&gt;<span class="number">1</span>)dp[i][j]=<span class="built_in">max</span>(dp[i][j],dp[i<span class="number">-1</span>][j]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=W+<span class="number">2</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">int</span> ii=i-W<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">int</span> L=<span class="number">0</span>,R=<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=m;j&gt;=<span class="number">0</span>;j--){<span class="comment">//å–</span></span><br><span class="line">            Node tmp;</span><br><span class="line">            tmp.v=dp[ii][j]+j*A[i].bp;  tmp.id=j;</span><br><span class="line">            <span class="keyword">while</span>(L&lt;=R&amp;&amp;Q[R].v&lt;=tmp.v)R--;</span><br><span class="line">            Q[++R]=tmp;</span><br><span class="line">            <span class="keyword">while</span>(L&lt;=R&amp;&amp;Q[L].id-j&gt;A[i].bs)L++;</span><br><span class="line">            dp[i][j]=Q[L].v-j*A[i].bp;</span><br><span class="line">        }</span><br><span class="line">        L=<span class="number">0</span>,R=<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=m;j++){<span class="comment">//ä¹°</span></span><br><span class="line">            Node tmp;</span><br><span class="line">            tmp.v=dp[ii][j]+j*A[i].ap;   tmp.id=j;</span><br><span class="line">            <span class="keyword">while</span>(L&lt;=R&amp;&amp;Q[R].v&lt;=tmp.v)R--;</span><br><span class="line">            Q[++R]=tmp;</span><br><span class="line">            <span class="keyword">while</span>(L&lt;=R&amp;&amp;j-Q[L].id&gt;A[i].as)L++;</span><br><span class="line">            dp[i][j]=<span class="built_in">max</span>(dp[i][j],Q[L].v-j*A[i].ap);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=m;j++){</span><br><span class="line">            dp[i][j]=<span class="built_in">max</span>(dp[i][j],dp[i<span class="number">-1</span>][j]);</span><br><span class="line">        <span class="comment">//  printf("%d %d %d\n",i,j,dp[i][j]);</span></span><br><span class="line">        }</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        for(int j=0;j&lt;=m;j++){</span></span><br><span class="line"><span class="comment">            {</span></span><br><span class="line"><span class="comment">                for(int jj=j;jj&lt;=min(j+A[i].bs,m);jj++)//å–</span></span><br><span class="line"><span class="comment">                    dp[i][j]=max(dp[i][j],dp[ii][jj]+jj*A[i].bp)-j*A[i].bp);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                for(int jj=j;jj&gt;=max(0,j-A[i].as);jj--)//ä¹°</span></span><br><span class="line"><span class="comment">                    dp[i][j]=max(dp[i][j],dp[ii][jj]+jj*A[i].ap)-j*A[i].ap);</span></span><br><span class="line"><span class="comment">            }</span></span><br><span class="line"><span class="comment">            dp[i][j]=max(dp[i][j],dp[i-1][j]);</span></span><br><span class="line"><span class="comment">        }*/</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=m;j++)ans=<span class="built_in">max</span>(ans,dp[n][j]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>å¤šé‡èƒŒåŒ…</title>
    <url>/blog/%E5%A4%9A%E9%87%8D%E8%83%8C%E5%8C%85/</url>
    <content><![CDATA[<p>æœ‰ä¸€ä¸ªä½“ç§¯ä¸ºVçš„èƒŒåŒ…ï¼Œæœ‰mç§ç‰©å“ï¼Œæ¯ç§ç‰©å“æœ‰ä½“ç§¯å’Œä»·å€¼ï¼Œä¸”æ•°é‡ä¸€å®šã€‚æ±‚èƒŒåŒ…èƒ½è£…ä¸‹çš„æœ€å¤§ä»·å€¼ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°Vå’Œmã€‚<br>æŽ¥ä¸‹æ¥mè¡Œï¼Œæ¯è¡Œ3ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºç¬¬iç§ç‰©å“çš„æ•°é‡ã€ä½“ç§¯å’Œä»·å€¼ã€‚<br>V&lt;=10000ï¼Œm&lt;=500,ä¸ªæ•°ã€ä½“ç§¯ã€ä»·å€¼ä¸è¶…è¿‡1000ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºèƒŒåŒ…èƒ½è£…ä¸‹çš„æœ€å¤§ä»·å€¼ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>10 4<br>2 3 2<br>2 4 3<br>1 2 2<br>4 5 3</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>8</p>
</blockquote>


<figure class="highlight c"><figcaption><span>duochongbeibao.cpp</span><a href="/downloads/code/duochongbeibao.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> dp[M],A[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">int</span> V,m,v,c,k;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;V,&amp;m);</span><br><span class="line">        <span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;k,&amp;v,&amp;c);</span><br><span class="line">            <span class="keyword">if</span>(k*v&gt;=V){</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=v;j&lt;=V;j++)<span class="comment">//å®Œå…¨èƒŒåŒ…</span></span><br><span class="line">                    dp[j]=<span class="built_in">max</span>(dp[j],dp[j-v]+c);</span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                <span class="keyword">int</span> n=<span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=k;j&lt;&lt;=<span class="number">1</span>){</span><br><span class="line">                    A[n++]=j;k-=j;</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">if</span>(k)A[n++]=k;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> a=<span class="number">0</span>;a&lt;n;a++){<span class="comment">//01èƒŒåŒ…</span></span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> b=V;b&gt;=A[a]*v;b--)</span><br><span class="line">                        dp[b]=<span class="built_in">max</span>(dp[b],dp[b-v*A[a]]+c*A[a]);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[V]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>duochongbeibao4.cpp</span><a href="/downloads/code/duochongbeibao4.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 10005</span></span><br><span class="line"><span class="keyword">int</span> Q[M],Q2[M],dp[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line"><span class="comment">//  dp[cur][k*d+i]-k*val[i] = Max(dp[!cur][j*d+i]-j*val[i]);</span></span><br><span class="line">    <span class="keyword">int</span> n,v;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;v,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,num,ct,val; i&lt;=n; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;num,&amp;ct,&amp;val);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;ct; j++) {</span><br><span class="line">            <span class="keyword">int</span> head = <span class="number">1</span>,tail = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k*ct+j&lt;=v; k++) {</span><br><span class="line">                <span class="keyword">int</span> res = dp[k*ct+j]-k*val;</span><br><span class="line">                <span class="keyword">while</span>(head &lt;= tail &amp;&amp; k-Q2[head] &gt; num) head ++;</span><br><span class="line">                <span class="keyword">while</span>(head &lt;= tail &amp;&amp; res &gt;= Q[tail]) tail--;</span><br><span class="line">                Q[++tail] = res,Q2[tail] = k;</span><br><span class="line">                dp[k*ct+j] = Q[head]+k*val;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[v]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title> æŽ’é˜Ÿ</title>
    <url>/blog/%E6%8E%92%E9%98%9F/</url>
    <content><![CDATA[<p>nä¸ªäººæ¥åˆ°åŒ»é™¢æŽ’é˜Ÿå°±å°±åŒ»ï¼ŒçŽ°åœ¨æŽ’åœ¨åŒ»é™¢å¤–é¢ã€‚æ¯ä¸ªç—…äººçš„çœ‹ç—…æ—¶é—´æ˜¯T[i]ã€‚å‡è®¾é˜Ÿä¼æ˜¯éšæœºçš„ï¼ˆå¯èƒ½æ˜¯1~nçš„ä»»æ„ä¸€ä¸ªæŽ’åˆ—ï¼‰ï¼Œæ±‚æ¯ä¸ªäººéœ€è¦åœ¨å¤–é¢ç­‰å¾…æ—¶é—´çš„æœŸæœ›å€¼ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•°nè¡¨ç¤ºäººæ•°ï¼ˆnâ‰¤1000ï¼‰ã€‚<br>ç¬¬äºŒè¡Œnä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ¯ä¸ªäººå°±åŒ»éœ€è¦èŠ±çš„æ—¶é—´T<a href="T[i]â‰¤1000">i</a>ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>è¾“å‡ºnä¸ªå®žæ•°ï¼Œè¡¨ç¤ºæ¯ä¸ªäººéœ€è¦æŽ’é˜Ÿæ—¶é—´çš„æœŸæœ›å€¼ã€‚ç»“æžœä¿ç•™2ä½å°æ•°ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>4<br>2 4 3 5</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>6.00 5.00 5.50 4.50</p>
</blockquote>


<figure class="highlight c"><figcaption><span>paidui.cpp</span><a href="/downloads/code/paidui.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> A[<span class="number">2005</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">int</span> s=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) {</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;A[i];</span><br><span class="line">        s+=A[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%.2f "</span>,(s-A[i])/<span class="number">2.0</span>);</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    solve();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title> å˜æˆ1</title>
    <url>/blog/%E5%8F%98%E6%88%901/</url>
    <content><![CDATA[<p>ç»™å®šä¸€ä¸ªæ•´æ•°nï¼Œæ¯æ¬¡æ“ä½œå¯ä»¥å¯¹å½“å‰æ•°è¿›è¡Œé™¤ä»¥å®ƒçš„æŸä¸ªå› å­ã€‚é™¤ä»¥å“ªä¸ªå› å­æ˜¯éšæœºçš„ï¼Œæ±‚æŠŠnå˜æˆ1çš„æœŸæœ›æ­¥æ•°ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•°Tï¼Œè¡¨ç¤ºæµ‹è¯•æ•°æ®ç»„æ•°ã€‚<br>æŽ¥ä¸‹æ¥Tè¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºnã€‚<br>T,n&lt;=100000</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯¹äºŽæ¯ç»„æµ‹è¯•æ•°æ®ï¼Œè¾“å‡ºä¸€è¡Œè¡¨ç¤ºæŠŠnå˜æˆ1çš„æœŸæœ›æ“ä½œæ¬¡æ•°ã€‚ä¿ç•™4ä½å°æ•°ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>3<br>1<br>2<br>50</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>0.0000<br>2.0000<br>3.0333</p>
</blockquote>


<figure class="highlight c"><figcaption><span>biancheng1.cpp</span><a href="/downloads/code/biancheng1.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100005</span></span><br><span class="line"><span class="keyword">double</span> dp[M];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;son[M];</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> n)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(dp[n]&lt;<span class="number">0</span>){</span><br><span class="line">        <span class="keyword">double</span> &amp;res=dp[n];</span><br><span class="line">        <span class="keyword">int</span> t=son[n].<span class="built_in">size</span>();</span><br><span class="line">        res=t;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            dp[n]=sum(dp[son[n][i]])/t+1;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;son[n].<span class="built_in">size</span>();i++){</span><br><span class="line">            <span class="keyword">int</span> x=son[n][i];</span><br><span class="line">            <span class="keyword">if</span>(x==n)<span class="keyword">continue</span>;</span><br><span class="line">            res+=dfs(x);</span><br><span class="line">        }</span><br><span class="line">        res=res/(t<span class="number">-1</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> dp[n];</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;M;i++){</span><br><span class="line">        dp[i]=<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;M;j+=i)</span><br><span class="line">            son[j].push_back(i);</span><br><span class="line">    }</span><br><span class="line">    dp[<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> cas,n,v=<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;cas;</span><br><span class="line">    <span class="keyword">while</span>(cas--){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%.4f\n"</span>,dfs(n));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>å›¾ä¸Šè¡Œèµ°</title>
    <url>/blog/%E5%9B%BE%E4%B8%8A%E8%A1%8C%E8%B5%B0/</url>
    <content><![CDATA[<p>ç»™å‡ºä¸€ä¸ªæœ‰å‘æ— çŽ¯çš„è¿žé€šå›¾ï¼Œèµ·ç‚¹ä¸º1ç»ˆç‚¹ä¸ºNï¼Œä»Ž1èƒ½åˆ°è¾¾æ‰€æœ‰ç‚¹ï¼Œæ‰€æœ‰ç‚¹ä¹Ÿéƒ½èƒ½åˆ°è¾¾nï¼Œæ¯æ¡è¾¹éƒ½æœ‰ä¸€ä¸ªé•¿åº¦ã€‚ä¹ä¹ä»Žèµ·ç‚¹å‡ºå‘ï¼Œèµ°å‘ç»ˆç‚¹ã€‚<br>åˆ°è¾¾æ¯ä¸€ä¸ªé¡¶ç‚¹æ—¶ï¼Œå¦‚æžœæœ‰Kæ¡ç¦»å¼€è¯¥ç‚¹çš„é“è·¯ï¼Œä¹ä¹å¯ä»¥é€‰æ‹©ä»»æ„ä¸€æ¡é“è·¯ç¦»å¼€è¯¥ç‚¹ï¼Œå¹¶ä¸”èµ°å‘æ¯æ¡è·¯çš„æ¦‚çŽ‡éƒ½æ˜¯ã€‚1/K<br>çŽ°åœ¨ä¹ä¹æƒ³çŸ¥é“ï¼Œä»Žèµ·ç‚¹èµ°åˆ°ç»ˆç‚¹çš„æ‰€ç»è¿‡çš„è·¯å¾„æ€»é•¿åº¦æœŸæœ›æ˜¯å¤šå°‘ï¼Ÿ</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œ: ä¸¤ä¸ªæ•´æ•° N Mï¼Œä»£è¡¨å›¾ä¸­æœ‰Nä¸ªç‚¹ã€Mæ¡è¾¹ã€‚<br>ç¬¬äºŒè¡Œåˆ°ç¬¬ 1+M è¡Œ: æ¯è¡Œ3ä¸ªæ•´æ•° a b cï¼Œä»£è¡¨ä»Žaåˆ°bæœ‰ä¸€æ¡é•¿åº¦ä¸ºcçš„æœ‰å‘è¾¹ã€‚<br>N&lt;=100000, M&lt;=2N</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>ä»Žèµ·ç‚¹åˆ°ç»ˆç‚¹è·¯å¾„æ€»é•¿åº¦çš„æœŸæœ›å€¼ï¼Œå››èˆäº”å…¥ä¿ç•™ä¸¤ä½å°æ•°ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>4 4<br>1 2 1<br>1 3 2<br>2 3 3<br>3 4 4</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>7.00</p>
</blockquote>


<figure class="highlight c"><figcaption><span>tushangxingzou.cpp</span><a href="/downloads/code/tushangxingzou.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> to,v;</span><br><span class="line">};</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt;edge[M];</span><br><span class="line"><span class="keyword">double</span> dp[M];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">bool</span> mark[M];</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(x==n)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(dp[x]&gt;<span class="number">-1.0</span>)<span class="keyword">return</span> dp[x];</span><br><span class="line">    dp[x]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edge[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y=edge[x][i].to;</span><br><span class="line">        dp[x]+=edge[x][i].v+dfs(y);</span><br><span class="line">    }</span><br><span class="line">    dp[x]/=edge[x].<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">return</span> dp[x];</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> m,a,b,c;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">        edge[a].push_back((node)&lt;%b,c%&gt;);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)dp[i]=<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">double</span> ans=dfs(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.2f\n"</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title> éª°å­æ¸¸æˆ</title>
    <url>/blog/%E9%AA%B0%E5%AD%90%E6%B8%B8%E6%88%8F/</url>
    <content><![CDATA[<p>æœ‰Aï¼ŒBä¸¤ä¸ªäººåˆ†åˆ«æœ‰n,mçš„è¡€é‡ï¼Œæ¯è½®éƒ½æ‰”ç­›å­ï¼Œç‚¹æ•°å°çš„æ‰£ä¸€æ»´è¡€ã€‚æŸäººçš„è¡€é‡æ‰£åˆ°0å°±è¾“äº†ã€‚å·²çŸ¥ä¸¤ä¸ªäººæ‰”å‡ºæ¯ä¸ªç‚¹çš„æ¦‚çŽ‡ã€‚æ±‚æœ€åŽAèµ¢çš„æ¦‚çŽ‡ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°nå’Œmï¼Œè¡¨ç¤ºAå’ŒBçš„åˆå§‹è¡€é‡ï¼ˆn,mâ‰¤1000ï¼‰ã€‚<br>æŽ¥ä¸‹æ¥ä¸€è¡Œ6ä¸ªæµ®ç‚¹æ•°ï¼Œè¡¨ç¤ºAæŽ·å‡º1-6ç‚¹çš„æ¦‚çŽ‡ã€‚<br>æŽ¥ä¸‹æ¥ä¸€è¡Œ6ä¸ªæµ®ç‚¹æ•°ï¼Œè¡¨ç¤ºBæŽ·å‡º1-6ç‚¹çš„æ¦‚çŽ‡ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>Aèµ¢çš„æ¦‚çŽ‡ã€‚ä¿ç•™å…­ä½å°æ•°ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>5 5<br>1.000 0.000 0.000 0.000 0.000 0.000<br>0.000 0.000 0.000 0.000 0.000 1.000</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>0.000000</p>
</blockquote>


<p>ç¤ºä¾‹2<br>è¾“å…¥</p>
<blockquote><p>5 5<br>0.000 0.000 0.000 0.000 0.000 1.000<br>1.000 0.000 0.000 0.000 0.000 0.000</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>1.000000</p>
</blockquote>



<figure class="highlight c"><figcaption><span>saiziyouxi.cpp</span><a href="/downloads/code/saiziyouxi.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">double</span> dp[<span class="number">2005</span>][<span class="number">2005</span>],A[<span class="number">10</span>],B[<span class="number">10</span>],p,q;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(y==<span class="number">0</span>)<span class="keyword">return</span> <span class="number">1.0</span>;</span><br><span class="line">    <span class="keyword">if</span>(x==<span class="number">0</span>)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(dp[x][y]&gt;<span class="number">-1.0</span>)<span class="keyword">return</span> dp[x][y];</span><br><span class="line">    <span class="keyword">return</span> dp[x][y]=dfs(x<span class="number">-1</span>,y)*q+dfs(x,y<span class="number">-1</span>)*p;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> n,m;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">6</span>; i++)<span class="built_in">scanf</span>(<span class="string">"%lf"</span>,&amp;A[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">6</span>; i++)<span class="built_in">scanf</span>(<span class="string">"%lf"</span>,&amp;B[i]);</span><br><span class="line">    p=<span class="number">0</span>,q=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">6</span>; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=<span class="number">6</span>; j++) {</span><br><span class="line">            <span class="keyword">if</span>(i&gt;j)p+=A[i]*B[j];</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(i&lt;j)q+=A[i]*B[j];</span><br><span class="line">        }</span><br><span class="line">    <span class="keyword">double</span> s=p+q;</span><br><span class="line">    p/=s,q/=s;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=n; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;=m; j++)dp[i][j]=<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">double</span> tmp=dfs(n,m);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.6f\n"</span>,tmp);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    solve();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>ç å®ç®±</title>
    <url>/blog/%E7%8F%A0%E5%AE%9D%E7%AE%B1/</url>
    <content><![CDATA[<p>ç»™å®šä¸€ä¸ªå«æœ‰n*mä¸ªæ ¼å­çš„ç å®ç®±ï¼Œæ¯ä¸ªæ ¼å­å¯ä»¥æ”¾ä¸€é¢—å®çŸ³ï¼Œè¦ä½¿å¾—æ¯ä¸€è¡Œï¼Œæ¯ä¸€åˆ—éƒ½æœ‰ä¸€ä¸ªå®çŸ³ï¼Œé—®æœ‰å¤šå°‘æ”¾æ³•æ»¡è¶³æ¡ä»¶ï¼Ÿ</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°nå’Œmï¼Œè¡¨ç¤ºç å®ç®±çš„å¤§å°ï¼ˆn,mâ‰¤100ï¼‰ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>è¾“å‡ºæ–¹æ¡ˆæ€»æ•°å¯¹1000000007 å–æ¨¡åŽçš„ç»“æžœã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>3 2</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>25</p>
</blockquote>

<p>ç¤ºä¾‹2<br>è¾“å…¥</p>
<blockquote><p>5 10</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>853472452</p>
</blockquote>


<figure class="highlight c"><figcaption><span>zhubaoxiang.cpp</span><a href="/downloads/code/zhubaoxiang.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 51</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> P 1000000007</span></span><br><span class="line"><span class="keyword">int</span> F2[M],Ft[M],F[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Fast</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> n)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> res=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(n&gt;<span class="number">0</span>) {</span><br><span class="line">        <span class="keyword">if</span>(n&amp;<span class="number">1</span>)res=(<span class="number">1L</span>L*res*x)%P;</span><br><span class="line">        x=(<span class="number">1L</span>L*x*x)%P;</span><br><span class="line">        n&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init</span><span class="params">()</span> </span>{</span><br><span class="line">    F2[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    F[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;M; i++) {</span><br><span class="line">        F2[i]=F2[i<span class="number">-1</span>]*<span class="number">2</span>%P;</span><br><span class="line">        F[i]=<span class="number">1L</span>L*F[i<span class="number">-1</span>]*i%P;</span><br><span class="line">    }</span><br><span class="line">    Ft[M<span class="number">-1</span>]=Fast(F[M<span class="number">-1</span>],P<span class="number">-2</span>);<span class="comment">//Ft[i]= i!^-1</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=M<span class="number">-2</span>; i&gt;=<span class="number">0</span>; i--) {</span><br><span class="line">        Ft[i]=<span class="number">1L</span>L*(i+<span class="number">1</span>)*Ft[i+<span class="number">1</span>]%P;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> &amp;x,<span class="keyword">int</span> y)</span> </span>{</span><br><span class="line">    x+=y;</span><br><span class="line">    <span class="keyword">if</span>(x&gt;=P)x-=P;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;<span class="number">0</span>)x+=P;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> n,m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;m; i++) {</span><br><span class="line">        <span class="keyword">int</span> tmp=<span class="number">1L</span>L*F[m]*Ft[m-i]%P*Ft[i]%P*Fast(F2[m-i]<span class="number">-1</span>,n)%P;</span><br><span class="line">        <span class="keyword">if</span>(i&amp;<span class="number">1</span>)tmp=-tmp;</span><br><span class="line">        Add(ans,tmp);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    Init();</span><br><span class="line">    solve();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>SPOJ BALNUM</title>
    <url>/blog/SPOJ-BALNUM/</url>
    <content><![CDATA[<p>å®šä¹‰ä¸€ä¸ªæ•°ä¸ºå¹³è¡¡æ•°ï¼Œå½“ä¸”ä»…å½“åœ¨å®ƒçš„æ¯ä¸ªåè¿›åˆ¶ä½ä¸Šæ»¡è¶³å¦‚ä¸‹æ¡ä»¶ï¼š</p>
<ol>
<li><p>å¥‡æ•°å‡ºçŽ°çš„æ¬¡æ•°ä¸ºå¶æ•°æ¬¡</p>
</li>
<li><p>å¶æ•°å‡ºçŽ°çš„æ¬¡æ•°ä¸ºå¥‡æ•°æ¬¡</p>
</li>
</ol>
<p>çŽ°æœ‰Tä¸ªè¯¢é—®ï¼Œæ¯æ¬¡è¯¢é—®é—­åŒºé—´[A,B]åŒ…å«å¤šå°‘å¹³è¡¡æ•°ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸€ä¸ªTã€‚T&lt;=500<br>ä»¥ä¸‹Tè¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•°Aï¼ŒBã€‚1&lt;=A,B&lt;=10^19</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯¹äºŽæ¯ä¸ªè¯¢é—®è¾“å‡º[A,B]åŒºé—´åŒ…å«å¤šå°‘å¹³è¡¡æ•°ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>2<br>1 1000<br>1 9</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>147<br>4</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>T&lt;=500, 1&lt;=A,B&lt;=10^19</p>
</blockquote>


<figure class="highlight c"><figcaption><span>SPOJ_BALLNUM.cpp</span><a href="/downloads/code/SPOJ_BALLNUM.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> uLL unsigned long long</span></span><br><span class="line">uLL dp[<span class="number">21</span>][<span class="number">1025</span>][<span class="number">1025</span>];</span><br><span class="line"><span class="keyword">int</span> num[<span class="number">21</span>];</span><br><span class="line"><span class="keyword">bool</span> mark[<span class="number">1025</span>][<span class="number">1025</span>];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> mask,<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(!mask)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">        <span class="keyword">if</span>(mask&amp;(<span class="number">1</span>&lt;&lt;i)){</span><br><span class="line">            <span class="keyword">if</span>(((x&amp;(<span class="number">1</span>&lt;&lt;i))&gt;<span class="number">0</span>)==(i&amp;<span class="number">1</span>))<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">1024</span>;i++){</span><br><span class="line">         <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">1024</span>;j++)</span><br><span class="line">             mark[i][j]=check(i,j);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function">uLL <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> pos,<span class="keyword">int</span> mask,<span class="keyword">int</span> x,<span class="keyword">bool</span> limit)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(pos==<span class="number">0</span>)<span class="keyword">return</span> mark[mask][x];</span><br><span class="line">    <span class="keyword">if</span>(!limit&amp;&amp;~dp[pos][mask][x])<span class="keyword">return</span> dp[pos][mask][x];</span><br><span class="line">    <span class="keyword">int</span> up=limit?num[pos]:<span class="number">9</span>;</span><br><span class="line">    uLL cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=up;i++){</span><br><span class="line">        <span class="keyword">if</span>(!mask&amp;&amp;!i)cnt+=dfs(pos<span class="number">-1</span>,mask,x,limit&amp;&amp;(i==up));</span><br><span class="line">        <span class="keyword">else</span> cnt+=dfs(pos<span class="number">-1</span>,mask|(<span class="number">1</span>&lt;&lt;i),x^(<span class="number">1</span>&lt;&lt;i),limit&amp;&amp;(i==up));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> limit?cnt:dp[pos][mask][x]=cnt;</span><br><span class="line">}</span><br><span class="line"><span class="function">uLL <span class="title">solve</span><span class="params">(uLL n)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">0</span>)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> len=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(n){</span><br><span class="line">        num[++len]=n%<span class="number">10</span>;</span><br><span class="line">        n/=<span class="number">10</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> dfs(len,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    Init();</span><br><span class="line">    <span class="keyword">int</span> cas;</span><br><span class="line">    <span class="built_in">memset</span>(dp,<span class="number">-1</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;cas;</span><br><span class="line">    uLL L,R;</span><br><span class="line">    <span class="keyword">while</span>(cas--){</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;L&gt;&gt;R;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;solve(R)-solve(L<span class="number">-1</span>)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>Round Numbers</title>
    <url>/blog/Round-Numbers/</url>
    <content><![CDATA[<p>å¦‚ä½ æ‰€çŸ¥ï¼Œå¥¶ç‰›æ²¡æœ‰æ‰‹æŒ‡ï¼Œæ‰€ä»¥ä»–ä»¬ä¸èƒ½ç”¨çŸ³å¤´å‰ªåˆ€å¸ƒåŽ»åšä¾‹å¦‚è°å…ˆåŽ»æŒ¤å¥¶ä¹‹ç±»çš„æ¸¸æˆï¼Œä»–ä»¬ç”šè‡³ä¸èƒ½æŠ•ç¡¬å¸å› ä¸ºç”¨è¹„å­æŠ•ç¡¬å¸å¤ªéš¾äº†ã€‚<br>å› æ­¤ï¼Œä»–ä»¬æŠŠç›®å…‰æŠ•å‘äº†æ•´æ•°ï¼Œä¸¤åªå¥¶ç‰›å„è‡ªé€‰å–ä¸€ä¸ªä¸¤äº¿ä¹‹å†…çš„æ•´æ•°ï¼Œå¦‚æžœè¿™ä¸¤ä¸ªæ•´æ•°éƒ½æ˜¯â€œRound Numberâ€ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªå¥¶ç‰›èŽ·å¾—èƒœåˆ©ï¼Œå¦åˆ™ç¬¬äºŒåªå¥¶ç‰›èƒœåˆ©ã€‚<br>ä¸€ä¸ªæ­£æ•´æ•°nè¢«ç§°ä½œä¸€ä¸ªâ€œRound Numberâ€ï¼Œå½“ä¸”ä»…å½“è¿™ä¸ªæ•°çš„äºŒè¿›åˆ¶é›¶çš„ä¸ªæ•°æ¯”ä¸€çš„ä¸ªæ•°å¤šï¼Œæˆ–è€…ä¸€æ ·å¤šã€‚ä¾‹å¦‚9æ˜¯â€œRound Numberâ€ï¼Œå› ä¸º9çš„äºŒè¿›åˆ¶æ˜¯1001ï¼›è€Œ26ä¸æ˜¯ï¼Œå› ä¸º26çš„äºŒè¿›åˆ¶æ˜¯11010ã€‚<br>æ˜¾ç„¶ï¼Œå¥¶ç‰›éœ€è¦èŠ±å¾ˆå¤šæ—¶é—´åŽ»åšè¿›åˆ¶è½¬æ¢å–å†³å®šèµ¢å®¶ã€‚è´èŒœæƒ³è¦ä½œå¼Šï¼Œå¥¹ç¡®ä¿¡å¦‚æžœå¥¹çŸ¥é“ä¸€æ®µåŒºé—´å†…â€œRound Numberâ€çš„ä¸ªæ•°å°±èƒ½ä½œå¼Šã€‚<br>è¯·å‘Šè¯‰å¥¹åœ¨ç»™å®šçš„é—­åŒºé—´[l,r]å†…æœ‰å¤šå°‘ä¸ªæ•°æ˜¯â€œRound Numberâ€ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ä¸¤ä¸ªç”±ç©ºæ ¼åˆ†å‰²çš„æ•´æ•°ï¼Œè¡¨ç¤ºåŒºé—´çš„l,rç«¯ç‚¹ã€‚1&lt;=l,r&lt;=2x10^9ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>ä¸€ä¸ªæ•´æ•°ä»£è¡¨ç»™å®šåŒºé—´å†…çš„â€œRound Numberâ€æ•°é‡ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>2 12</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>6</p>
</blockquote>


<figure class="highlight c"><figcaption><span>roundnumber.cpp</span><a href="/downloads/code/roundnumber.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LL long long</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> dp[<span class="number">35</span>][<span class="number">2</span>][<span class="number">70</span>];</span><br><span class="line"><span class="keyword">int</span> num[<span class="number">40</span>],len;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Abs</span><span class="params">(<span class="keyword">int</span> x)</span></span>{ <span class="keyword">return</span> x&gt;<span class="number">0</span>?x:-x; }</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> pos,<span class="keyword">bool</span> lead0,<span class="keyword">int</span> cha,<span class="keyword">bool</span> limit)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(pos==<span class="number">0</span>)<span class="keyword">return</span> cha&gt;=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(!limit&amp;&amp;~dp[pos][lead0][cha+<span class="number">35</span>])<span class="keyword">return</span> dp[pos][lead0][cha+<span class="number">35</span>];</span><br><span class="line">    <span class="keyword">int</span> up=limit?num[pos]:<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=up;i++){</span><br><span class="line">        <span class="keyword">if</span>(lead0){</span><br><span class="line">            <span class="keyword">if</span>(i==<span class="number">0</span>)cnt+=dfs(pos<span class="number">-1</span>,<span class="number">1</span>,cha,limit&amp;&amp;i==up);</span><br><span class="line">            <span class="keyword">else</span> cnt+=dfs(pos<span class="number">-1</span>,<span class="number">0</span>,cha<span class="number">-1</span>,limit&amp;&amp;i==up);</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="keyword">int</span> k=(i==<span class="number">0</span>)?<span class="number">1</span>:<span class="number">-1</span>;</span><br><span class="line">            cnt+=dfs(pos<span class="number">-1</span>,<span class="number">0</span>,cha+k,limit&amp;&amp;i==up);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> limit?cnt:dp[pos][lead0][cha+<span class="number">35</span>]=cnt;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> n)</span></span>{</span><br><span class="line">    len=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(n){</span><br><span class="line">        num[++len]=n%<span class="number">2</span>;</span><br><span class="line">        n/=<span class="number">2</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(dp,<span class="number">-1</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">    <span class="keyword">return</span> dfs(len,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> a,b;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;a,&amp;b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,solve(b)-solve(a<span class="number">-1</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸é™æ•°</title>
    <url>/blog/%E4%B8%8D%E9%99%8D%E6%95%B0/</url>
    <content><![CDATA[<p>å®šä¹‰ä¸€ç§ä¸é™æ•°ï¼Œè¿™ç§æ•°å­—å¿…é¡»æ»¡è¶³ä»Žå·¦åˆ°å³å„ä½æ•°å­—æˆå°äºŽç­‰äºŽçš„å…³ç³»ï¼Œå¦‚123ï¼Œ446ã€‚<br>çŽ°åœ¨å¤§å®¶å†³å®šçŽ©ä¸€ä¸ªæ¸¸æˆï¼ŒæŒ‡å®šä¸€ä¸ªæ•´æ•°é—­åŒºé—´[a,b] ï¼Œé—®è¿™ä¸ªåŒºé—´å†…æœ‰å¤šå°‘ä¸ªä¸é™æ•°ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>æœ‰å¤šç»„æµ‹è¯•æ•°æ®ã€‚æ¯ç»„åªå«ä¸¤ä¸ªæ•°å­— aï¼Œbæ„ä¹‰å¦‚é¢˜ç›®æè¿°,1&lt;=a,b&lt;=2^31</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>æ¯è¡Œç»™å‡ºä¸€ä¸ªæµ‹è¯•æ•°æ®çš„ç­”æ¡ˆï¼Œå³ [a,b] ä¹‹é—´æœ‰å¤šå°‘ä¸é™æ•°ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>1 9<br>1 19</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>9<br>18</p>
</blockquote>


<figure class="highlight c"><figcaption><span>bujiangshu.cpp</span><a href="/downloads/code/bujiangshu.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LL long long</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">25</span>;</span><br><span class="line"><span class="keyword">int</span> digit[N];</span><br><span class="line">LL dp[N][N];</span><br><span class="line"><span class="function">LL <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> pos,<span class="keyword">int</span> statu,<span class="keyword">int</span> limit)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">     <span class="keyword">int</span> i,<span class="built_in">end</span>,s;</span><br><span class="line">     LL res=<span class="number">0</span>;</span><br><span class="line">     <span class="keyword">if</span>(pos==<span class="number">-1</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">     <span class="keyword">if</span>(!limit&amp;&amp;dp[pos][statu]!=<span class="number">-1</span>)</span><br><span class="line">        <span class="keyword">return</span> dp[pos][statu];</span><br><span class="line">     <span class="built_in">end</span>=limit?digit[pos]:<span class="number">9</span>;</span><br><span class="line">     <span class="keyword">for</span>(i=statu;i&lt;=<span class="built_in">end</span>;i++)</span><br><span class="line">         res+=dfs(pos<span class="number">-1</span>,i,limit&amp;&amp;i==<span class="built_in">end</span>);</span><br><span class="line">     <span class="keyword">if</span>(!limit)</span><br><span class="line">         dp[pos][statu]=res;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"><span class="function">LL <span class="title">calc</span><span class="params">(LL n)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">     <span class="keyword">int</span> len=<span class="number">0</span>;</span><br><span class="line">     <span class="built_in">memset</span>(dp,<span class="number">-1</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">     <span class="keyword">while</span>(n)</span><br><span class="line">     {</span><br><span class="line">         digit[len++]=n%<span class="number">10</span>;</span><br><span class="line">         n/=<span class="number">10</span>;</span><br><span class="line">     }</span><br><span class="line">     <span class="keyword">return</span> dfs(len<span class="number">-1</span>,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{    freopen(<span class="string">"data1.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</span><br><span class="line">     freopen(<span class="string">"data1.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</span><br><span class="line">     LL a,b;</span><br><span class="line">     <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%lld %lld"</span>,&amp;a,&amp;b)!=EOF)</span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,calc(b)-calc(a<span class="number">-1</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>é€‰è¯¾</title>
    <url>/blog/%E9%80%89%E8%AF%BE/</url>
    <content><![CDATA[<p>å­¦æ ¡å®žè¡Œå­¦åˆ†åˆ¶ã€‚æ¯é—¨çš„å¿…ä¿®è¯¾éƒ½æœ‰å›ºå®šçš„å­¦åˆ†ï¼ŒåŒæ—¶è¿˜å¿…é¡»èŽ·å¾—ç›¸åº”çš„é€‰ä¿®è¯¾ç¨‹å­¦åˆ†ã€‚å­¦æ ¡å¼€è®¾äº†Nï¼ˆN&lt;300ï¼‰é—¨çš„é€‰ä¿®è¯¾ç¨‹ï¼Œæ¯ä¸ªå­¦ç”Ÿå¯é€‰è¯¾ç¨‹çš„æ•°é‡Mæ˜¯ç»™å®šçš„ã€‚å­¦ç”Ÿé€‰ä¿®äº†è¿™Mé—¨è¯¾å¹¶è€ƒæ ¸é€šè¿‡å°±èƒ½èŽ·å¾—ç›¸åº”çš„å­¦åˆ†ã€‚<br>åœ¨é€‰ä¿®è¯¾ç¨‹ä¸­ï¼Œæœ‰äº›è¯¾ç¨‹å¯ä»¥ç›´æŽ¥é€‰ä¿®ï¼Œæœ‰äº›è¯¾ç¨‹éœ€è¦ä¸€å®šçš„åŸºç¡€çŸ¥è¯†ï¼Œå¿…é¡»åœ¨é€‰äº†å…¶å®ƒçš„ä¸€äº›è¯¾ç¨‹çš„åŸºç¡€ä¸Šæ‰èƒ½é€‰ä¿®ã€‚ä¾‹å¦‚ã€ŠFrontpageã€‹å¿…é¡»åœ¨é€‰ä¿®äº†ã€ŠWindowsæ“ä½œåŸºç¡€ã€‹ä¹‹åŽæ‰èƒ½é€‰ä¿®ã€‚æˆ‘ä»¬ç§°ã€ŠWindowsæ“ä½œåŸºç¡€ã€‹æ˜¯ã€ŠFrontpageã€‹çš„å…ˆä¿®è¯¾ã€‚æ¯é—¨è¯¾çš„ç›´æŽ¥å…ˆä¿®è¯¾æœ€å¤šåªæœ‰ä¸€é—¨ã€‚ä¸¤é—¨è¯¾ä¹Ÿå¯èƒ½å­˜åœ¨ç›¸åŒçš„å…ˆä¿®è¯¾ã€‚æ¯é—¨è¯¾éƒ½æœ‰ä¸€ä¸ªè¯¾å·ï¼Œä¾æ¬¡ä¸º1ï¼Œ2ï¼Œ3ï¼Œâ€¦ã€‚ ä¾‹å¦‚:è¡¨ä¸­1æ˜¯2çš„å…ˆä¿®è¯¾ï¼Œ2æ˜¯3ã€4çš„å…ˆä¿®è¯¾ã€‚å¦‚æžœè¦é€‰3ï¼Œé‚£ä¹ˆ1å’Œ2éƒ½ä¸€å®šå·²è¢«é€‰ä¿®è¿‡ã€‚<br>ä½ çš„ä»»åŠ¡æ˜¯ä¸ºè‡ªå·±ç¡®å®šä¸€ä¸ªé€‰è¯¾æ–¹æ¡ˆï¼Œä½¿å¾—ä½ èƒ½å¾—åˆ°çš„å­¦åˆ†æœ€å¤šï¼Œå¹¶ä¸”å¿…é¡»æ»¡è¶³å…ˆä¿®è¯¾ä¼˜å…ˆçš„åŽŸåˆ™ã€‚å‡å®šè¯¾ç¨‹ä¹‹é—´ä¸å­˜åœ¨æ—¶é—´ä¸Šçš„å†²çªã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>è¾“å…¥æ–‡ä»¶çš„ç¬¬ä¸€è¡ŒåŒ…æ‹¬ä¸¤ä¸ªæ•´æ•°Nã€Mï¼ˆä¸­é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼‰å…¶ä¸­ã€‚</p>
<p>æŽ¥ä¸‹æ¥Nè¡Œæ¯è¡Œä»£è¡¨ä¸€é—¨è¯¾ã€‚è¯¾å·ä¾æ¬¡ä¸º1ï¼Œ2ï¼Œâ€¦ï¼ŒNã€‚æ¯è¡Œæœ‰ä¸¤ä¸ªæ•°ï¼ˆç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼‰ï¼Œç¬¬ä¸€ä¸ªæ•°ä¸ºè¿™é—¨è¯¾å…ˆä¿®è¯¾çš„è¯¾å·ï¼ˆè‹¥ä¸å­˜åœ¨å…ˆä¿®è¯¾åˆ™è¯¥é¡¹ä¸º0ï¼‰ï¼Œç¬¬äºŒä¸ªæ•°ä¸ºè¿™é—¨è¯¾çš„å­¦åˆ†ã€‚å­¦åˆ†æ˜¯ä¸è¶…è¿‡10çš„æ­£æ•´æ•°ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>è¾“å‡ºæ–‡ä»¶åªæœ‰ä¸€ä¸ªæ•°,å®žé™…æ‰€é€‰è¯¾ç¨‹çš„å­¦åˆ†æ€»æ•°ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>7 4<br>2 2<br>0 1<br>0 4<br>2 1<br>7 1<br>7 6<br>2 2</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>13</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>1&lt;=N&lt;=300, M&lt;=N</p>
</blockquote>


<figure class="highlight c"><figcaption><span>xuanke.cpp</span><a href="/downloads/code/xuanke.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 305</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> m,val[M]= {<span class="number">0</span>},cost[M];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;edge[M];</span><br><span class="line"><span class="keyword">int</span> dp[M][M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> t=<span class="number">0</span>,i,j,k,y;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;=m; i++)</span><br><span class="line">        dp[x][i]=val[x];</span><br><span class="line">    <span class="keyword">if</span>(x)t=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;edge[x].<span class="built_in">size</span>(); i++) {</span><br><span class="line">        y=edge[x][i];</span><br><span class="line">        dfs(y);</span><br><span class="line">        <span class="keyword">for</span>(j=m; j&gt;=t; j--)</span><br><span class="line">            <span class="keyword">for</span>(k=<span class="number">1</span>; k&lt;=j-t; k++)</span><br><span class="line">                dp[x][j]=<span class="built_in">max</span>(dp[x][j],dp[x][j-k]+dp[y][k]);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> n,i,a,b;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;=n; i++)</span><br><span class="line">        edge[i].<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;=n; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;a,&amp;val[i]);</span><br><span class="line">        edge[a].push_back(i);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">    dfs(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[<span class="number">0</span>][m]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>çŽ¯ä¸Šæœ€å¤§è¿žç»­å’Œ</title>
    <url>/blog/%E7%8E%AF%E4%B8%8A%E6%9C%80%E5%A4%A7%E8%BF%9E%E7%BB%AD%E5%92%8C/</url>
    <content><![CDATA[<p>ç»™å®šN,Kä»¥åŠä¸€ä¸ªçŽ¯ï¼šA[1],A[2],A[3],â€¦A[N]ï¼Œå…¶ä¸­A[1]çš„å·¦è¾¹æ˜¯A[N]ã€‚<br>æ±‚è¯¥çŽ¯ä¸Šæœ€å¤§çš„è¿žç»­å­æ®µå’Œï¼Œè¦æ±‚é€‰å‡ºçš„å­æ®µé•¿åº¦ä¸è¶…è¿‡Kã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°Nå’ŒKã€‚<br>æŽ¥ä¸‹æ¥ä¸€è¡Œï¼ŒNä¸ªæ•´æ•°è¡¨ç¤ºA[i]ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>è¾“å‡ºé¢˜ç›®è¦æ±‚çš„æœ€å¤§è¿žç»­å’Œã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>6 3<br>6 -1 2 -6 5 -5</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>7</p>
</blockquote>

<p>ç¤ºä¾‹2<br>è¾“å…¥</p>
<blockquote><p>6 4<br>6 -1 2 -6 5 -5</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>7</p>
</blockquote>

<p>ç¤ºä¾‹3<br>è¾“å…¥</p>
<blockquote><p>6 3<br>-1 2 -6 5 -5 6</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>7</p>
</blockquote>

<p>ç¤ºä¾‹4<br>è¾“å…¥</p>
<blockquote><p>6 6<br>-1 -1 -1 -1 -1 -1</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>-1</p>
</blockquote>



<p>è¯´æ˜Ž</p>
<blockquote><p>1&lt;=K&lt;=N&lt;=10^5, -10^3&lt;A[i]&lt;10^3</p>
</blockquote>


<figure class="highlight c"><figcaption><span>huanshangzuidalianxu.cpp</span><a href="/downloads/code/huanshangzuidalianxu.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> çŽ¯çš„é—®é¢˜ä¸€èˆ¬æŠŠåºåˆ—å˜æˆä¸¤å€</span></span><br><span class="line"><span class="comment"> é¢„å¤„ç†å‡ºå‰ç¼€å’Œ</span></span><br><span class="line"><span class="comment"> æžšä¸¾å³ç«¯ç‚¹iï¼Œsum[i]-sum[x]æœ€å¤§ï¼Œxéœ€è¦åœ¨æŸä¸ªèŒƒå›´å†…sum[x]æœ€å°ï¼Œä½¿ç”¨å•è°ƒé˜Ÿåˆ—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 200005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> q[M],sum[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> n,k,l=<span class="number">1</span>,r=<span class="number">1</span>,ans=<span class="number">-2e9</span>,al,ar;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;k);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;sum[i]);</span><br><span class="line">        sum[i]+=sum[i<span class="number">-1</span>];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=n+<span class="number">1</span>; i&lt;n+k; i++)sum[i]=sum[n]+sum[i-n];</span><br><span class="line">    q[r]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;n+k; i++) {</span><br><span class="line">        <span class="keyword">while</span>(r&gt;=l&amp;&amp;i-q[l]&gt;k)l++;</span><br><span class="line">        <span class="keyword">if</span>(r&gt;=l&amp;&amp;ans&lt;sum[i]-sum[q[l]]) {</span><br><span class="line">            ans=sum[i]-sum[q[l]];</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">while</span>(r&gt;=l&amp;&amp;sum[q[r]]&gt;=sum[i])r--;</span><br><span class="line">        q[++r]=i;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>monotone_queue</tag>
      </tags>
  </entry>
  <entry>
    <title> æœ€å¤§å…¨1çŸ©é˜µ</title>
    <url>/blog/%E6%9C%80%E5%A4%A7%E5%85%A81%E7%9F%A9%E9%98%B5/</url>
    <content><![CDATA[<p>åœ¨ä¸€ä¸ªn*mçš„çŸ©é˜µä¸­ï¼Œæ‰€æœ‰çš„å…ƒç´ åªæœ‰0å’Œ1ã€‚ä½ éœ€è¦ä»Žè¿™ä¸ªçŸ©é˜µä¸­æ‰¾å‡ºä¸€ä¸ªé¢ç§¯æœ€å¤§çš„å…¨1å­çŸ©é˜µï¼ˆè¯¥çŸ©é˜µæ‰€æœ‰å…ƒç´ éƒ½æ˜¯1ï¼‰ã€‚æ‰€è°“æœ€å¤§æ˜¯æŒ‡å…ƒç´ 1çš„ä¸ªæ•°æœ€å¤šã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>è¾“å…¥çš„ç¬¬ä¸€è¡Œæ˜¯ä¸¤ä¸ªæ•´æ•°m nï¼Œè¡¨ç¤ºå°†è¦è¾“å…¥çš„çŸ©é˜µçš„å¤§å°ã€‚<br>çŸ©é˜µå…±æœ‰mè¡Œï¼Œæ¯è¡Œæœ‰nä¸ªæ•´æ•°ï¼Œåˆ†åˆ«æ˜¯0æˆ–1ï¼Œç›¸é‚»ä¸¤æ•°ä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>è¾“å‡ºçŸ©é˜µä¸­é¢ç§¯æœ€å¤§çš„å…¨1å­çŸ©é˜µçš„å…ƒç´ ä¸ªæ•°ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>4 5<br>1 1 1 0 0<br>1 1 1 0 0<br>1 1 0 0 0<br>1 1 0 0 0</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>8</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>n,m&lt;=1000</p>
</blockquote>


<figure class="highlight c"><figcaption><span>zuidaquan1.cpp</span><a href="/downloads/code/zuidaquan1.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 2005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> max(x,y) (x)&gt;(y)?(x):(y)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S(x) sum[C][x]</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> sum[M][M],stk[M],L[M],R[M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> &amp;x,<span class="keyword">int</span> y)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(x&lt;y) x=y;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> C,<span class="keyword">int</span> n)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> top=<span class="number">0</span>;</span><br><span class="line">    S(<span class="number">0</span>)=<span class="number">-2e9</span>,stk[++top]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) {</span><br><span class="line">        <span class="keyword">while</span>(S(stk[top])&gt;=S(i)) top--;</span><br><span class="line">        L[i]=stk[top];</span><br><span class="line">        stk[++top]=i;</span><br><span class="line">    }</span><br><span class="line">    top=<span class="number">0</span>;</span><br><span class="line">    S(n+<span class="number">1</span>)=<span class="number">-2e9</span>,stk[++top]=n+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=n; i&gt;=<span class="number">1</span>; i--) {</span><br><span class="line">        <span class="keyword">while</span>(S(stk[top])&gt;=S(i)) top--;</span><br><span class="line">        R[i]=stk[top];</span><br><span class="line">        stk[++top]=i;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> ans=<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) check(ans,(R[i]-L[i]<span class="number">-1</span>)*S(i));</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> n,m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="built_in">memset</span>(sum,<span class="number">0</span>,<span class="keyword">sizeof</span>(sum));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=m; j++) {</span><br><span class="line">            <span class="keyword">int</span> x;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;x);</span><br><span class="line">            <span class="keyword">if</span>(x!=<span class="number">0</span>)<span class="comment">//ç®—å‡ºæ¯ä¸ªç‚¹å‘ä¸Šçš„æœ€å¤§è·ç¦»</span></span><br><span class="line">                sum[i][j]=sum[i<span class="number">-1</span>][j]+x;</span><br><span class="line">        }</span><br><span class="line">    <span class="keyword">int</span> ans=<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        check(ans,solve(i,m));</span><br><span class="line"><span class="comment">//    cerr&lt;&lt;n&lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;ans&lt;&lt;endl;</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">char</span> in[<span class="number">20</span>]={<span class="string">"zero0.in"</span>};</span><br><span class="line">    <span class="keyword">char</span> out[<span class="number">20</span>]={<span class="string">"zero0.out"</span>};</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> cas=<span class="number">1</span>;cas&lt;=<span class="number">10</span>;cas++){</span><br><span class="line">        freopen(in,<span class="string">"r"</span>,<span class="built_in">stdin</span>);in[<span class="number">4</span>]++;</span><br><span class="line">        freopen(out,<span class="string">"w"</span>,<span class="built_in">stdout</span>);out[<span class="number">4</span>]++;</span><br><span class="line">        solve();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>monotone_stack</tag>
      </tags>
  </entry>
  <entry>
    <title>è´§è½¦è¿è¾“</title>
    <url>/blog/%E8%B4%A7%E8%BD%A6%E8%BF%90%E8%BE%93/</url>
    <content><![CDATA[<p>Aå›½æœ‰nåº§åŸŽå¸‚ï¼Œç¼–å·ä»Ž1åˆ°nï¼ŒåŸŽå¸‚ä¹‹é—´æœ‰mæ¡åŒå‘é“è·¯ã€‚æ¯ä¸€æ¡é“è·¯å¯¹è½¦è¾†éƒ½æœ‰é‡é‡é™åˆ¶ï¼Œç®€ç§°é™é‡ã€‚çŽ°åœ¨æœ‰qè¾†è´§è½¦åœ¨è¿è¾“è´§ç‰©ï¼Œ å¸æœºä»¬æƒ³çŸ¥é“æ¯è¾†è½¦åœ¨ä¸è¶…è¿‡è½¦è¾†é™é‡çš„æƒ…å†µä¸‹ï¼Œæœ€å¤šèƒ½è¿å¤šé‡çš„è´§ç‰©ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œæœ‰ä¸¤ä¸ªç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€çš„æ•´æ•°n,mï¼Œè¡¨ç¤º Aå›½æœ‰nåº§åŸŽå¸‚å’Œmæ¡é“è·¯ã€‚<br>æŽ¥ä¸‹æ¥mè¡Œæ¯è¡Œ3ä¸ªæ•´æ•°x,y,zï¼Œæ¯ä¸¤ä¸ªæ•´æ•°ä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼Œè¡¨ç¤ºä»Žxå·åŸŽå¸‚åˆ°yå·åŸŽå¸‚æœ‰ä¸€æ¡é™é‡ä¸ºzçš„é“è·¯ã€‚æ³¨æ„ï¼šxä¸ç­‰äºŽyï¼Œä¸¤åº§åŸŽå¸‚ä¹‹é—´å¯èƒ½æœ‰å¤šæ¡é“è·¯ã€‚<br>æŽ¥ä¸‹æ¥ä¸€è¡Œæœ‰ä¸€ä¸ªæ•´æ•°qï¼Œè¡¨ç¤ºæœ‰qè¾†è´§è½¦éœ€è¦è¿è´§ã€‚<br>æŽ¥ä¸‹æ¥qè¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°x yï¼Œä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼Œè¡¨ç¤ºä¸€è¾†è´§è½¦éœ€è¦ä»ŽxåŸŽå¸‚è¿è¾“è´§ç‰©åˆ°yåŸŽå¸‚ï¼Œæ³¨æ„ï¼šxä¸ç­‰äºŽyã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å…±æœ‰qè¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå¯¹äºŽæ¯ä¸€è¾†è´§è½¦ï¼Œå®ƒçš„æœ€å¤§è½½é‡å¯ä»¥æ˜¯å¤šå°‘ã€‚å¦‚æžœè´§è½¦ä¸èƒ½åˆ°è¾¾ç›®çš„åœ°ï¼Œè¾“å‡º-1ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>4 3<br>1 2 4<br>2 3 3<br>3 1 1<br>3<br>1 3<br>1 4<br>1 3</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>3<br>-1<br>3</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>n,m,q&lt;=10^4, z&lt;=10^5</p>
</blockquote>


<figure class="highlight c"><figcaption><span>huocheyunshu.cpp</span><a href="/downloads/code/huocheyunshu.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> oo 2000000000</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> x,y,z;</span><br><span class="line">}s[M];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Query</span>{</span></span><br><span class="line">    <span class="keyword">int</span> x,id,next;</span><br><span class="line">}query[M*<span class="number">10</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Rd</span><span class="params">(<span class="keyword">int</span> &amp;res)</span></span>{</span><br><span class="line">    <span class="keyword">char</span> c;res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(c=getchar(),!<span class="built_in">isdigit</span>(c));</span><br><span class="line">    <span class="keyword">do</span>{</span><br><span class="line">        res=(res&lt;&lt;<span class="number">3</span>)+(res&lt;&lt;<span class="number">1</span>)+(c^<span class="number">48</span>);</span><br><span class="line">    }<span class="keyword">while</span>(c=getchar(),<span class="built_in">isdigit</span>(c));</span><br><span class="line">}</span><br><span class="line"><span class="keyword">int</span> fa[M],ans[M];</span><br><span class="line"><span class="keyword">int</span> qcnt[M],head[M],tot=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> v)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(fa[v]!=v)</span><br><span class="line">        fa[v]=<span class="built_in">get</span>(fa[v]);</span><br><span class="line">    <span class="keyword">return</span> fa[v];</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node A,node B)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> A.z&gt;B.z;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> &amp;x,<span class="keyword">int</span> y)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(x&lt;y)x=y;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> c)</span></span>{</span><br><span class="line">    qcnt[a]++;</span><br><span class="line">    query[tot].x=b,query[tot].id=c,query[tot].next=head[a],head[a]=tot++;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n,m,q,x,y,i,j;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)fa[i]=i;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;m;i++){</span><br><span class="line">        Rd(s[i].x);Rd(s[i].y);Rd(s[i].z);</span><br><span class="line">    }</span><br><span class="line">    sort(s,s+m,cmp);</span><br><span class="line">    Rd(q);</span><br><span class="line">    <span class="built_in">memset</span>(head,<span class="number">-1</span>,<span class="keyword">sizeof</span>(head));</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;q;i++){</span><br><span class="line">        Rd(x);Rd(y);</span><br><span class="line">        add(x,y,i);add(y,x,i); ans[i]=<span class="number">-1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;m;i++){</span><br><span class="line">        x=s[i].x,y=s[i].y;</span><br><span class="line">        <span class="keyword">int</span> fx=<span class="built_in">get</span>(x),fy=<span class="built_in">get</span>(y);</span><br><span class="line">        <span class="keyword">if</span>(fx==fy)<span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span>(qcnt[fx]&gt;qcnt[fy])swap(fx,fy);</span><br><span class="line">        fa[fx]=fy;</span><br><span class="line">        <span class="keyword">for</span>(j=head[fx];j!=<span class="number">-1</span>;j=query[j].next){</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">get</span>(query[j].x)==fy)check(ans[query[j].id],s[i].z);</span><br><span class="line">            <span class="keyword">else</span> add(fy,query[j].x,query[j].id);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;q;i++)<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>union_find</tag>
      </tags>
  </entry>
  <entry>
    <title>ç§»åŠ¨ç§¯æœ¨</title>
    <url>/blog/%E7%A7%BB%E5%8A%A8%E7%A7%AF%E6%9C%A8/</url>
    <content><![CDATA[<p>åˆå§‹æœ‰Nå †ç§¯æœ¨ï¼Œç¬¬iå †ç§¯æœ¨åªæœ‰ä¸€ä¸ªç¼–å·ä¸ºiçš„ç§¯æœ¨ï¼Œç„¶åŽè¿›è¡Œpæ¬¡æ“ä½œï¼Œæ¯æ¬¡æ“ä½œå¯èƒ½ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š</p>
<p>M x yï¼šå°†ç¼–å·xæ‰€åœ¨çš„é‚£å †ç§¯æœ¨æ”¾åˆ°ç¼–å·yæ‰€åœ¨çš„é‚£å †ç§¯æœ¨çš„ä¸Šé¢ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•°qï¼Œè¡¨ç¤ºæ“ä½œæ¬¡æ•°ã€‚<br>æŽ¥ä¸‹æ¥æœ‰qè¡Œè¾“å…¥ï¼ŒM, x, yæˆ–è€…C, xï¼ˆä¿è¯ï¼‰ã€‚<br>ç§¯æœ¨çš„æ€»ä¸ªæ•°Nï¼Œä¸ä¼šå‡ºçŽ°åœ¨è¾“å…¥ä¸­ã€‚åˆå§‹æ—¶æ¯ä¸ªç§¯æœ¨å•ç‹¬ä¸ºä¸€åˆ—ã€‚ä½ å¯ä»¥è®¤ä¸ºï¼Œæ“ä½œè¿‡ç¨‹ä¸­ï¼Œä¸ä¼šå‡ºçŽ°ç¼–å·å¤§äºŽ30000çš„ç§¯æœ¨ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯¹äºŽæ¯ä¸ªè¯¢é—®ï¼Œè¾“å‡ºç›¸åº”çš„å€¼ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>6<br>M 1 6<br>C 1<br>M 2 4<br>M 2 6<br>C 3<br>C 4</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>1<br>0<br>2</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>1&lt;=n&lt;=30000ï¼Œq&lt;=10^5</p>
</blockquote>


<figure class="highlight c"><figcaption><span>yidongjimu.cpp</span><a href="/downloads/code/yidongjimu.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 30005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> m;</span><br><span class="line"><span class="keyword">int</span> p[M],dis[M];<span class="comment">//cnté‡Œä¸ºæœ€ç»ˆç­”æ¡ˆ</span></span><br><span class="line"><span class="keyword">int</span> sz[M];</span><br><span class="line"><span class="keyword">char</span> S[<span class="number">5</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(p[x]!=x) {</span><br><span class="line">        <span class="keyword">int</span> t=<span class="built_in">find</span>(p[x]);</span><br><span class="line">        dis[x]+=dis[p[x]];</span><br><span class="line">        p[x]=t;</span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="comment">//aç§»è‡³bä¸Šä¸Žbç§»è‡³aä¸‹ç›¸åŒ</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=M<span class="number">-5</span>; i++)p[i]=i,dis[i]=<span class="number">0</span>,sz[i]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,x,y; i&lt;=m; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>,S);</span><br><span class="line">        <span class="keyword">if</span>(S[<span class="number">0</span>]==<span class="string">'M'</span>) {</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</span><br><span class="line">            <span class="keyword">int</span> r1=<span class="built_in">find</span>(x),r2=<span class="built_in">find</span>(y);</span><br><span class="line">            <span class="keyword">if</span>(r1!=r2) {</span><br><span class="line">                p[r1]=r2;</span><br><span class="line">                dis[r1]+=sz[r2];</span><br><span class="line">                sz[r2]+=sz[r1];</span><br><span class="line">                sz[r1]=<span class="number">0</span>;</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;x);</span><br><span class="line">            <span class="keyword">int</span> r=<span class="built_in">find</span>(x);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dis[x]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>union_find</tag>
      </tags>
  </entry>
  <entry>
    <title>å¼€è½¦</title>
    <url>/blog/%E5%BC%80%E8%BD%A6/</url>
    <content><![CDATA[<p>æœ‰nä¸ªåŸŽå¸‚ï¼Œè¢«mæ¡æ— å‘è¾¹è¿žæŽ¥ï¼Œæ¯æ¡è¾¹æœ‰ä¸€ä¸ªå¼€è½¦ç»è¿‡æ‰€éœ€è¦çš„æ—¶é—´ã€‚<br>Jackå¼€è½¦çš„æ—¶é—´ä¸èƒ½è¿žç»­è¶…è¿‡xåˆ†é’Ÿï¼Œä¹Ÿå°±æ˜¯éœ€è¦å¼€è½¦æ—¶é—´è¶…è¿‡xçš„è¾¹ï¼Œä»–ä¸ä¼šèµ°ã€‚<br>æ±‚æœ‰å¤šå°‘å¯¹åŸŽå¸‚(a,b)ï¼Œæ»¡è¶³ä»–å¯ä»¥å¼€è½¦ä»ŽaåŸŽå¸‚åˆ°è¾¾båŸŽå¸‚ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œ3ä¸ªæ•´æ•°nï¼Œmå’Œqã€‚<br>æŽ¥ä¸‹æ¥mè¡Œï¼Œæ¯è¡Œ3ä¸ªæ•´æ•°a,b,c.è¡¨ç¤ºä¸€æ¡è¿žæŽ¥aå’Œbçš„è¾¹ï¼Œé•¿åº¦ä¸ºcã€‚<br>æŽ¥ä¸‹æ¥qè¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ•´æ•°xï¼Œè¡¨ç¤ºä¸€æ¬¡è¯¢é—®ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯¹äºŽæ¯ä¸ªè¯¢é—®ï¼Œè¾“å‡ºç›¸åº”çš„ç»“æžœã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>5 5 3<br>2 3 6334<br>1 5 15724<br>3 5 5705<br>4 3 12382<br>1 3 21726<br>6000<br>10000<br>13000</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>2<br>6<br>12</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>n,q&lt;=20000, c,m&lt;=10^5</p>
</blockquote>


<figure class="highlight c"><figcaption><span>kaiche.cpp</span><a href="/downloads/code/kaiche.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MN 20005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> {</span></span><br><span class="line">    <span class="keyword">int</span> a,b,x;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Edge &amp;m) <span class="keyword">const</span> {</span><br><span class="line">        <span class="keyword">return</span> x&lt;m.x;</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line">Edge e[<span class="number">100005</span>];</span><br><span class="line"><span class="keyword">int</span> ufs[MN],siz[MN];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> x==ufs[x]?x:ufs[x]=<span class="built_in">find</span>(ufs[x]);</span><br><span class="line">}</span><br><span class="line"><span class="function">ll <span class="title">Union</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span> </span>{</span><br><span class="line">    a=<span class="built_in">find</span>(a);</span><br><span class="line">    b=<span class="built_in">find</span>(b);</span><br><span class="line">    <span class="keyword">if</span>(a==b)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    ll ans=(ll)siz[a]*siz[b];</span><br><span class="line">    siz[a]+=siz[b];</span><br><span class="line">    ufs[b]=a;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">}</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Ques</span> {</span></span><br><span class="line">    <span class="keyword">int</span> id,x;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Ques &amp;m) <span class="keyword">const</span> {</span><br><span class="line">        <span class="keyword">return</span> x&lt;m.x;</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line">Ques q[<span class="number">5005</span>];</span><br><span class="line">ll out[<span class="number">5005</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span>  n,m,k;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;n,&amp;m,&amp;k);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) {</span><br><span class="line">        ufs[i]=i;</span><br><span class="line">        siz[i]=<span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;e[i].a,&amp;e[i].b,&amp;e[i].x);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=k; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;q[i].x),q[i].id=i;</span><br><span class="line">    sort(e+<span class="number">1</span>,e+<span class="number">1</span>+m);</span><br><span class="line">    sort(q+<span class="number">1</span>,q+<span class="number">1</span>+k);</span><br><span class="line">    ll ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,j=<span class="number">1</span>; i&lt;=k; i++) {</span><br><span class="line">        <span class="keyword">while</span>(j&lt;=m&amp;&amp;e[j].x&lt;=q[i].x) {</span><br><span class="line">            ans+=Union(e[j].a,e[j].b);</span><br><span class="line">            j++;</span><br><span class="line">        }</span><br><span class="line">        out[q[i].id]=ans;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=k; i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,out[i]*<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>union_find</tag>
      </tags>
  </entry>
  <entry>
    <title>é›†å¸‚ç­è½¦</title>
    <url>/blog/%E9%9B%86%E5%B8%82%E7%8F%AD%E8%BD%A6/</url>
    <content><![CDATA[<p>é€›é€›é›†å¸‚ï¼Œå…‘å…‘å¥–å“ï¼Œçœ‹çœ‹èŠ‚ç›®å¯¹å†œå¤«çº¦ç¿°æ¥è¯´ä¸ç®—ä»€ä¹ˆï¼Œå¯æ˜¯ä»–çš„å¥¶ç‰›ä»¬éžå¸¸ç¼ºä¹é”»ç‚¼â€”â€”å¦‚æžœè¦é€›å®Œä¸€æ•´å¤©çš„é›†å¸‚ï¼Œä»–ä»¬ä¸€å®šä¼šç­‹ç–²åŠ›å°½çš„ã€‚æ‰€ä»¥ä¸ºäº†è®©å¥¶ç‰›ä»¬ä¹Ÿèƒ½æ„‰å¿«åœ°é€›é›†å¸‚ï¼Œçº¦ç¿°å‡†å¤‡è®©å¥¶ç‰›ä»¬åœ¨é›†å¸‚ä¸Šä»¥è½¦ä»£æ­¥ã€‚ä½†æ˜¯ï¼Œçº¦ç¿°æœ¨æœ‰é’±ï¼Œä»–ç§Ÿæ¥çš„ç­è½¦åªèƒ½åœ¨é›†å¸‚ä¸Šæ²¿ç›´çº¿è·‘ä¸€æ¬¡ï¼Œè€Œä¸”åªèƒ½åœé Nä¸ªåœ°ç‚¹ï¼ˆæ‰€æœ‰åœ°ç‚¹éƒ½ä»¥1åˆ°Nä¹‹é—´çš„ä¸€ä¸ªæ•°å­—æ¥è¡¨ç¤ºï¼‰ã€‚<br>çŽ°åœ¨å¥¶ç‰›ä»¬åˆ†æˆKä¸ªå°ç»„ï¼Œç¬¬iç»„æœ‰M_iå¤´å¥¶ç‰›ï¼Œä»–ä»¬å¸Œæœ›ä»ŽS_iè·‘åˆ°T_iã€‚ç”±äºŽç­è½¦å®¹é‡æœ‰é™ï¼Œå¯èƒ½è½½ä¸ä¸‹æ‰€æœ‰æƒ³ä¹˜è½¦çš„å¥¶ç‰›ä»¬ï¼Œæ­¤æ—¶ä¹Ÿå…è®¸å°ç»„é‡Œçš„ä¸€éƒ¨åˆ†å¥¶ç‰›åˆ†å¼€ä¹˜åç­è½¦ã€‚çº¦ç¿°ç»è¿‡è°ƒæŸ¥å¾—çŸ¥ç­è½¦çš„å®¹é‡æ˜¯C ï¼Œè¯·ä½ å¸®åŠ©çº¦ç¿°è®¡åˆ’ä¸€ä¸ªå°½å¯èƒ½æ»¡è¶³æ›´å¤šå¥¶ç‰›æ„¿æœ›çš„æ–¹æ¡ˆã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡ŒåŒ…æ‹¬ä¸‰ä¸ªæ•´æ•°K N Cï¼Œå½¼æ­¤ç”¨ç©ºæ ¼éš”å¼€ã€‚<br>ç¬¬äºŒè¡Œåˆ°K+1è¡Œï¼šåœ¨ç¬¬i+1è¡Œï¼Œå°†ä¼šå‘Šè¯‰ä½ ç¬¬iç»„å¥¶ç‰›çš„ä¿¡æ¯ï¼šS_i,E_iå’ŒM_iï¼Œå½¼æ­¤ç”¨ç©ºæ ¼éš”å¼€ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯ä»¥åç­è½¦çš„å¥¶ç‰›çš„æœ€å¤§å¤´æ•°ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>8 15 3<br>1 5 2<br>13 14 1<br>5 8 3<br>8 14 2<br>14 15 1<br>9 12 1<br>12 15 2<br>4 6 1</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>10</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>ç­è½¦å¯ä»¥æŠŠä¸¤å¤´å¥¶ç‰›ä»Ž1é€åˆ°5ï¼Œä¸‰å¤´å¥¶ç‰›ä»Ž5é€åˆ°8ï¼Œä¸¤å¤´å¥¶ç‰›ä»Ž8é€åˆ°14ï¼Œä¸€å¤´å¥¶ç‰›ä»Ž9é€åˆ°12ï¼Œä¸€å¤´å¥¶ç‰›ä»Ž13é€åˆ°14ï¼Œä¸€å¤´å¥¶ç‰›ä»Ž14é€åˆ°15ã€‚<br>2&lt;=N&lt;=10000, 1&lt;=K&lt;=50000, 1&lt;=C&lt;=100</p>
</blockquote>


<figure class="highlight c"><figcaption><span>jishibanche.cpp</span><a href="/downloads/code/jishibanche.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> æŒ‰ç…§ä¸‹è½¦åœ°ç‚¹ä»Žå°åˆ°å¤§æŽ’åºä¹‹åŽï¼Œæ—©ä¸‹è½¦çš„ä¸€å®šè¦ä¼˜å…ˆé€‰å–</span></span><br><span class="line"><span class="comment"> æ¯æ¬¡å†³ç­–ï¼Œå…ˆç®—å‡ºå½“å‰åŒºé—´ä¸Šè½¦å­æœ€å¤šæœ‰å¤šå°‘ä¹˜å®¢</span></span><br><span class="line"><span class="comment"> é‚£ä¹ˆå‰©ä¸‹çš„ä½ç½®å®‰æŽ’ç»™å½“å‰è¿™æ‰¹</span></span><br><span class="line"><span class="comment"> ç”¨çº¿æ®µæ ‘ç»´æŠ¤æ¯ä¸ªç‚¹è½¦ä¸Šçš„ä¹˜å®¢æ•°</span></span><br><span class="line"><span class="comment"> éœ€è¦æ”¯æŒåŒºé—´æœ€å€¼ å’Œ åŒºé—´åŠ å€¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 10005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 50005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> s,e,m;</span><br><span class="line">} A[N];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node w1,node w2)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> w1.e&lt;w2.e;</span><br><span class="line">}</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> L,R,mx,add;</span><br><span class="line">} tree[M&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">up</span><span class="params">(<span class="keyword">int</span> p)</span> </span>{</span><br><span class="line">    tree[p].mx=<span class="built_in">max</span>(tree[p&lt;&lt;<span class="number">1</span>].mx,tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].mx);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">down</span><span class="params">(<span class="keyword">int</span> p)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(!tree[p].add)<span class="keyword">return</span>;</span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>].add+=tree[p].add;</span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>].mx+=tree[p].add;</span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].add+=tree[p].add;</span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].mx+=tree[p].add;</span><br><span class="line">    tree[p].add=<span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> p)</span> </span>{</span><br><span class="line">    tree[p].L=L,tree[p].R=R,tree[p].mx=<span class="number">0</span>,tree[p].add=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(L==R)<span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(L,mid,p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    build(mid+<span class="number">1</span>,R,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> p,<span class="keyword">int</span> a)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(tree[p].L==L&amp;&amp;tree[p].R==R) {</span><br><span class="line">        tree[p].mx+=a;</span><br><span class="line">        tree[p].add+=a;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    down(p);</span><br><span class="line">    <span class="keyword">int</span> mid=(tree[p].L+tree[p].R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(R&lt;=mid)update(L,R,p&lt;&lt;<span class="number">1</span>,a);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(L&gt;mid)update(L,R,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,a);</span><br><span class="line">    <span class="keyword">else</span> update(L,mid,p&lt;&lt;<span class="number">1</span>,a),update(mid+<span class="number">1</span>,R,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,a);</span><br><span class="line">    up(p);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> p)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(tree[p].L==L&amp;&amp;tree[p].R==R)<span class="keyword">return</span> tree[p].mx;</span><br><span class="line">    down(p);</span><br><span class="line">    <span class="keyword">int</span> mid=(tree[p].L+tree[p].R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(R&lt;=mid)<span class="keyword">return</span> query(L,R,p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span>(L&gt;mid)<span class="keyword">return</span> query(L,R,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">max</span>(query(L,mid,p&lt;&lt;<span class="number">1</span>),query(mid+<span class="number">1</span>,R,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>));</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> k,n,c,ans=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;k,&amp;n,&amp;c);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;A[i].s,&amp;A[i].e,&amp;A[i].m);</span><br><span class="line">    sort(A+<span class="number">1</span>,A+<span class="number">1</span>+k,cmp);</span><br><span class="line">    build(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;i++) {</span><br><span class="line">        <span class="keyword">int</span> mx=query(A[i].s,A[i].e<span class="number">-1</span>,<span class="number">1</span>);</span><br><span class="line">        mx=<span class="built_in">max</span>(c-mx,<span class="number">0</span>);</span><br><span class="line">        mx=<span class="built_in">min</span>(mx,A[i].m);</span><br><span class="line">        update(A[i].s,A[i].e<span class="number">-1</span>,<span class="number">1</span>,mx);</span><br><span class="line">        ans+=mx;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>seg_tree</tag>
      </tags>
  </entry>
  <entry>
    <title>å¯ä¿®æ”¹åŒºé—´ç¬¬Kå€¼</title>
    <url>/blog/%E5%8F%AF%E4%BF%AE%E6%94%B9%E5%8C%BA%E9%97%B4%E7%AC%ACK%E5%80%BC/</url>
    <content><![CDATA[<p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸ºnçš„åºåˆ—Aï¼Œæœ‰mä¸ªè¯¢é—®ï¼Œæ¯æ¬¡è¯¢é—®ä¸‹æ ‡åœ¨[L,R]èŒƒå›´å†…çš„æ•°å­—ï¼Œä»Žå°åˆ°å¤§æŽ’åºä¹‹åŽï¼Œç¬¬Kå°çš„å…ƒç´ å€¼ï¼ŒåŒæ—¶éœ€è¦æ”¯æŒä¿®æ”¹æŸä¸ªå…ƒç´ ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°nå’Œmã€‚<br>ç¬¬äºŒè¡Œnä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºAiã€‚<br>æŽ¥ä¸‹æ¥mè¡Œï¼Œå±žäºŽä¸‹é¢ä¸¤ç§æƒ…å†µä¹‹ä¸€ï¼š<br>1 L R Kï¼šè¡¨ç¤ºä¸‹æ ‡åœ¨[L,R]èŒƒå›´å†…çš„ç¬¬Kå°çš„æ•°ã€‚<br>2 x yï¼šæŠŠA[x]èµ‹å€¼æˆyã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯¹äºŽæ¯ä¸ªè¯¢é—®ï¼Œè¾“å‡ºç›¸åº”çš„ç»“æžœã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>5 3<br>10 5 3 4 8<br>1 1 2 1<br>2 4 7<br>1 1 4 3</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>5<br>7</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>n,m&lt;=30000</p>
</blockquote>


<figure class="highlight c"><figcaption><span>kexiukaik.cpp</span><a href="/downloads/code/kexiukaik.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 305</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> A[M*M],sz[M],K;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> id,num;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">(<span class="keyword">int</span> _id,<span class="keyword">int</span> _num)</span> </span>{</span><br><span class="line">        id=_id,num=_num;</span><br><span class="line">    }</span><br><span class="line">} C[M][M];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node a,node b)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> a.num&lt;b.num;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Find</span><span class="params">(<span class="keyword">int</span> id,<span class="keyword">int</span> R,<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> L=<span class="number">0</span>,res=<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">while</span>(L&lt;=R) {</span><br><span class="line">        <span class="keyword">int</span> mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(C[id][mid].num&lt;=x) {</span><br><span class="line">            res=mid;</span><br><span class="line">            L=mid+<span class="number">1</span>;</span><br><span class="line">        } <span class="keyword">else</span> R=mid<span class="number">-1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find_less</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span> </span>{<span class="comment">//ä¸å®Œæ•´å—æš´åŠ›æ‰«æï¼Œå®Œæ•´å—äºŒåˆ†æŸ¥æ‰¾</span></span><br><span class="line">    <span class="keyword">int</span> id_a=a/K,id_b=b/K;</span><br><span class="line">    <span class="keyword">int</span> res=<span class="number">0</span>,i;</span><br><span class="line">    <span class="keyword">if</span>(id_a==id_b) {</span><br><span class="line">        <span class="keyword">for</span>(i=a; i&lt;=b; i++)</span><br><span class="line">            res+=A[i]&lt;=x;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">for</span>(i=a; i&lt;id_a*K+sz[id_a]; i++)</span><br><span class="line">            res+=A[i]&lt;=x;</span><br><span class="line">        <span class="keyword">for</span>(i=id_a+<span class="number">1</span>; i&lt;id_b; i++)</span><br><span class="line">            res+=Find(i,sz[i]<span class="number">-1</span>,x)+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(i=id_b*K; i&lt;=b; i++)</span><br><span class="line">            res+=A[i]&lt;=x;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> k)</span> </span>{<span class="comment">//äºŒåˆ†æŸ¥æ‰¾</span></span><br><span class="line">    <span class="keyword">int</span> L=<span class="number">0</span>,R=<span class="number">1000000000</span>;</span><br><span class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(L&lt;=R) {</span><br><span class="line">        <span class="keyword">int</span> mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(find_less(mid,a,b)&gt;=k) {</span><br><span class="line">            res=mid;</span><br><span class="line">            R=mid<span class="number">-1</span>;</span><br><span class="line">        } <span class="keyword">else</span> L=mid+<span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> x)</span> </span>{<span class="comment">//æ›´æ–°</span></span><br><span class="line">    <span class="keyword">int</span> i,id_a=a/K;</span><br><span class="line">    A[a]=x;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;sz[id_a]; i++)<span class="comment">//æ‰¾åˆ°ä½ç½®ï¼Œä¿®æ”¹å€¼</span></span><br><span class="line">        <span class="keyword">if</span>(C[id_a][i].id==a) {</span><br><span class="line">            C[id_a][i].num=x;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">    sort(C[id_a],C[id_a]+sz[id_a],cmp);<span class="comment">//é‡æ–°æŽ’åºï¼Œå¯ç”¨æ’å…¥æŽ’åºä¼˜åŒ–</span></span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> cas,n,m,i,j,k,a,b;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;cas);</span><br><span class="line">    <span class="keyword">while</span>(cas--) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;m);</span><br><span class="line">        K=<span class="keyword">int</span>(<span class="built_in">sqrt</span>(n));</span><br><span class="line">        <span class="built_in">memset</span>(sz,<span class="number">0</span>,<span class="keyword">sizeof</span>(sz));</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;n; i++) {</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i]);</span><br><span class="line">            C[i/K][i%K].<span class="built_in">set</span>(i,A[i]);</span><br><span class="line">            sz[i/K]++;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;=(n<span class="number">-1</span>)/K; i++) {</span><br><span class="line">            sort(C[i],C[i]+sz[i],cmp);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">char</span> op[<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">while</span>(m--&amp;&amp;<span class="built_in">scanf</span>(<span class="string">"%s"</span>,op)) {</span><br><span class="line">            <span class="keyword">if</span>(op[<span class="number">0</span>]==<span class="string">'Q'</span>) {</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;a,&amp;b,&amp;k);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,query(--a,--b,k));</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;a,&amp;b);</span><br><span class="line">                update(--a,b);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>block</tag>
      </tags>
  </entry>
  <entry>
    <title>åŠ¨æ€åŒºé—´è¿žç»­å’Œ</title>
    <url>/blog/%E5%8A%A8%E6%80%81%E5%8C%BA%E9%97%B4%E8%BF%9E%E7%BB%AD%E5%92%8C/</url>
    <content><![CDATA[<p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸ºnçš„åºåˆ—Aï¼Œæœ‰mæ¬¡æ“ä½œï¼Œæ¯æ¬¡æ“ä½œä¸ºä»¥ä¸‹ä¸¤ç§ä¹‹ä¸€ï¼š</p>
<p>ï¼ˆ1ï¼‰0 x aï¼ŒæŠŠA[x]æ”¹æˆaã€‚</p>
<p>ï¼ˆ2ï¼‰1 x yï¼Œæ±‚åŒºé—´[x,y]çš„æœ€å¤§è¿žç»­å’Œï¼Œå³ max{A[i] + â€¦ + A[j]} (x&lt;=i&lt;=j&lt;=y)</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•°nã€‚<br>ç¬¬äºŒè¡Œnä¸ªå…ƒç´ ï¼Œè¡¨ç¤ºåºåˆ—ä¸­çš„å…ƒç´ ã€‚<br>ç¬¬ä¸‰è¡Œä¸€ä¸ªæ•´æ•°mï¼Œè¡¨ç¤ºæ“ä½œçš„ä¸ªæ•°ã€‚<br>æŽ¥ä¸‹æ¥mè¡Œï¼Œæ¯è¡Œä¸ºä¸¤ç§æ“ä½œä¸­çš„ä¸€ç§ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯¹äºŽæ¯ä¸ªè¯¢é—®è¾“å‡ºç›¸åº”çš„ç»“æžœã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>4<br>1 2 3 4<br>4<br>1 1 3<br>0 3 -3<br>1 2 4<br>1 3 3</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>6<br>4<br>-3</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>å¯¹äºŽ100%çš„æ•°æ®ï¼Œ1&lt;=n,m&lt;=10^5ï¼Œæ‰€æœ‰å…ƒç´ çš„èŒƒå›´å’Œyçš„å€¼åœ¨åŒºé—´[-20000,20000]å†…ã€‚</p>
</blockquote>


<figure class="highlight c"><figcaption><span>dongtailianxuhe.cpp</span><a href="/downloads/code/dongtailianxuhe.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> åŒºé—´æŸ¥è¯¢ï¼Œè€ƒè™‘ç”¨çº¿æ®µæ ‘</span></span><br><span class="line"><span class="comment"> ä¸¤ä¸ªå­åŒºé—´åˆå¹¶æ—¶ï¼Œç­”æ¡ˆå¯èƒ½æ˜¯æ¥è‡ªä¸‰ä¸ªéƒ¨åˆ†</span></span><br><span class="line"><span class="comment"> ï¼ˆ1ï¼‰å·¦åŒºé—´</span></span><br><span class="line"><span class="comment"> ï¼ˆ2ï¼‰å³åŒºé—´</span></span><br><span class="line"><span class="comment"> ï¼ˆ3ï¼‰å·¦åŒºé—´å³è¾¹çš„ä¸€æ®µ å’Œ å³åŒºé—´å·¦è¾¹ä¸€æ®µ</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> éœ€è¦è®°å½•çº¿æ®µæ ‘åŒºé—´å·¦å³ä¸¤ä¸ªç«¯ç‚¹å‘å†…å»¶ä¼¸çš„æœ€å¤§å’Œï¼Œç”¨äºŽåˆå¹¶</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> mx;<span class="comment">//æœ€å¤§è¿žç»­å’Œ</span></span><br><span class="line">    <span class="keyword">int</span> sum;<span class="comment">//åŒºé—´å’Œ</span></span><br><span class="line">    <span class="keyword">int</span> Lmx;<span class="comment">//å·¦ç«¯ç‚¹å‘å³çš„æœ€å¤§å’Œ</span></span><br><span class="line">    <span class="keyword">int</span> Rmx;<span class="comment">//å³ç«¯ç‚¹å‘å·¦çš„æœ€å¤§å’Œ</span></span><br><span class="line">} tree[M&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> A[M],n,m,a,b,f;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">Max</span><span class="params">(<span class="keyword">int</span> &amp;a,<span class="keyword">int</span> b)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(a&lt;b)a=b;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">up</span><span class="params">(node &amp;C,node A,node B)</span> </span>{ <span class="comment">//[A][B]åˆå¹¶æˆ[C]</span></span><br><span class="line">    C.sum=A.sum+B.sum;</span><br><span class="line">    C.mx=<span class="built_in">max</span>(A.mx,B.mx);</span><br><span class="line">    Max(C.mx,A.Rmx+B.Lmx);</span><br><span class="line">    C.Lmx=<span class="built_in">max</span>(A.Lmx,A.sum+B.Lmx);</span><br><span class="line">    C.Rmx=<span class="built_in">max</span>(B.Rmx,B.sum+A.Rmx);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> p)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(l==r) {</span><br><span class="line">        tree[p].mx=tree[p].Lmx=tree[p].Rmx=tree[p].sum=A[l];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid=l+r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(l,mid,p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    build(mid+<span class="number">1</span>,r,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    up(tree[p],tree[p&lt;&lt;<span class="number">1</span>],tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> a,<span class="keyword">int</span> x,<span class="keyword">int</span> p)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(L==R) {</span><br><span class="line">        tree[p].mx=tree[p].Lmx=tree[p].Rmx=tree[p].sum=x;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid=L+R&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(a&lt;=mid)update(L,mid,a,x,p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> update(mid+<span class="number">1</span>,R,a,x,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    up(tree[p],tree[p&lt;&lt;<span class="number">1</span>],tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">}</span><br><span class="line"><span class="function">node <span class="title">query</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> p)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(L==l&amp;&amp;R==r)<span class="keyword">return</span> tree[p];</span><br><span class="line">    <span class="keyword">int</span> mid=L+R&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(r&lt;=mid)<span class="keyword">return</span> query(L,mid,l,r,p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(l&gt;mid)<span class="keyword">return</span> query(mid+<span class="number">1</span>,R,l,r,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> {</span><br><span class="line">        node A=query(L,mid,l,mid,p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">        node B=query(mid+<span class="number">1</span>,R,mid+<span class="number">1</span>,r,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">        node C;</span><br><span class="line">        up(C,A,B);</span><br><span class="line">        <span class="keyword">return</span> C;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i]);</span><br><span class="line">    build(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;m;</span><br><span class="line">    <span class="keyword">while</span>(m--) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;f,&amp;a,&amp;b);</span><br><span class="line">        <span class="keyword">if</span>(f) {</span><br><span class="line">            node tmp=query(<span class="number">1</span>,n,a,b,<span class="number">1</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,tmp.mx);</span><br><span class="line">        } <span class="keyword">else</span> update(<span class="number">1</span>,n,a,b,<span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>seg_tree</tag>
      </tags>
  </entry>
  <entry>
    <title>åŒºé—´ç¬¬kå€¼</title>
    <url>/blog/%E5%8C%BA%E9%97%B4%E7%AC%ACk%E5%80%BC/</url>
    <content><![CDATA[<p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸ºnçš„åºåˆ—Aï¼Œæœ‰mä¸ªè¯¢é—®ï¼Œæ¯æ¬¡è¯¢é—®ä¸‹æ ‡åœ¨[L,R]èŒƒå›´å†…çš„æ•°å­—ï¼Œä»Žå°åˆ°å¤§æŽ’åºä¹‹åŽï¼Œç¬¬Kå°çš„å…ƒç´ å€¼ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°nå’Œmã€‚<br>ç¬¬äºŒè¡Œnä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºAiã€‚<br>æŽ¥ä¸‹æ¥mè¡Œï¼Œæ¯è¡Œ3ä¸ªæ•´æ•°L,R,Kã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯¹äºŽæ¯ä¸ªè¯¢é—®ï¼Œè¾“å‡ºç›¸åº”çš„ç»“æžœã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>5 3<br>10 5 3 4 8<br>1 2 1<br>2 4 3<br>1 5 4</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>5<br>5<br>8</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>n,m&lt;=30000</p>
</blockquote>


<figure class="highlight c"><figcaption><span>qujiank_fenkuai.cpp</span><a href="/downloads/code/qujiank_fenkuai.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 30005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> A[M],B[M],S,num[M];</span><br><span class="line"><span class="keyword">int</span> sum[<span class="number">180</span>][M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> x)</span></span>{<span class="comment">//åœ¨[L,R]èŒƒå›´å†…æ‰¾&lt;=xçš„ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">int</span> kl=L/S,kr=R/S,cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(kl==kr){</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=L;i&lt;=R;i++)</span><br><span class="line">            cnt+=A[i]&lt;=num[x];</span><br><span class="line">    }<span class="keyword">else</span>{</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=L;i&lt;(kl+<span class="number">1</span>)*S;i++)cnt+=A[i]&lt;=num[x];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=kl+<span class="number">1</span>;i&lt;kr;i++)cnt+=sum[i][x];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=kr*S;i&lt;=R;i++)cnt+=A[i]&lt;=num[x];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line"></span><br><span class="line">    freopen(<span class="string">"kth.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</span><br><span class="line">    freopen(<span class="string">"my.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> n,m;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i]);</span><br><span class="line">        num[i<span class="number">-1</span>]=B[i]=A[i];</span><br><span class="line">    }</span><br><span class="line">    S=<span class="built_in">sqrt</span>(n);</span><br><span class="line">    sort(num,num+n);</span><br><span class="line">    <span class="keyword">int</span> v=unique(num,num+n)-num;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">int</span> k=lower_bound(num,num+v,A[i])-num;</span><br><span class="line">        sum[i/S][k]++;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n/S;i++)<span class="comment">//é¢„å¤„ç†æ¯ä¸ªå—çš„å‰ç¼€å’Œ</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;v;j++)sum[i][j]+=sum[i][j<span class="number">-1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="keyword">int</span> a,b,c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">        <span class="keyword">int</span> L=<span class="number">0</span>,R=v<span class="number">-1</span>,res;</span><br><span class="line">        <span class="keyword">while</span>(L&lt;=R){</span><br><span class="line">            <span class="keyword">int</span> mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> tmp=<span class="built_in">get</span>(a,b,mid);</span><br><span class="line">            <span class="keyword">if</span>(tmp&gt;=c){</span><br><span class="line">                res=mid;R=mid<span class="number">-1</span>;</span><br><span class="line">            }<span class="keyword">else</span> L=mid+<span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,num[res]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>qujiank_fenkuai1.cpp</span><a href="/downloads/code/qujiank_fenkuai1.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 30005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> A[M],B[M],S,num[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> x)</span></span>{<span class="comment">//åœ¨[L,R]èŒƒå›´å†…æ‰¾&lt;=xçš„ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">int</span> kl=L/S,kr=R/S,cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(kl==kr){</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=L;i&lt;=R;i++)</span><br><span class="line">            cnt+=A[i]&lt;=x;</span><br><span class="line">    }<span class="keyword">else</span>{</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=L;i&lt;(kl+<span class="number">1</span>)*S;i++)cnt+=A[i]&lt;=x;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=kl+<span class="number">1</span>;i&lt;kr;i++)cnt+=upper_bound(B+i*S,B+i*S+S,x)-(B+i*S);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=kr*S;i&lt;=R;i++)cnt+=A[i]&lt;=x;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    freopen(<span class="string">"kth.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</span><br><span class="line">    freopen(<span class="string">"my.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</span><br><span class="line">    <span class="keyword">int</span> n,m;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i]);</span><br><span class="line">        num[i]=B[i]=A[i];</span><br><span class="line">    }</span><br><span class="line">    S=<span class="built_in">sqrt</span>(n*<span class="built_in">log</span>(n)/<span class="built_in">log</span>(<span class="number">2</span>));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=S;i+S<span class="number">-1</span>&lt;=n;i+=S)sort(B+i,B+i+S); <span class="comment">//ç¬¬ä¸€ä¸ªåŒºé—´ä¸æŽ’åº</span></span><br><span class="line">    sort(num+<span class="number">1</span>,num+n+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="keyword">int</span> a,b,c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">        <span class="keyword">int</span> L=<span class="number">1</span>,R=n,res;</span><br><span class="line">        <span class="keyword">while</span>(L&lt;=R){</span><br><span class="line">            <span class="keyword">int</span> mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> tmp=<span class="built_in">get</span>(a,b,num[mid]);</span><br><span class="line">            <span class="keyword">if</span>(tmp&gt;=c){</span><br><span class="line">                res=num[mid];</span><br><span class="line">                R=mid<span class="number">-1</span>;</span><br><span class="line">            }<span class="keyword">else</span> L=mid+<span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,res);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>qujiank_segtree.cpp</span><a href="/downloads/code/qujiank_segtree.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 30005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> L,R;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;num;</span><br><span class="line">}tree[M&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> A[M],s[M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    tree[p].L=L,tree[p].R=R;</span><br><span class="line">    tree[p].num.<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">if</span>(L==R){</span><br><span class="line">        tree[p].num.push_back(A[L]);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(L,mid,p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    build(mid+<span class="number">1</span>,R,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    tree[p].num.resize(R-L+<span class="number">1</span>);<span class="comment">//****</span></span><br><span class="line">    merge(tree[p&lt;&lt;<span class="number">1</span>].num.<span class="built_in">begin</span>(),tree[p&lt;&lt;<span class="number">1</span>].num.<span class="built_in">end</span>(),</span><br><span class="line">          tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].num.<span class="built_in">begin</span>(),tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].num.<span class="built_in">end</span>(),</span><br><span class="line">          tree[p].num.<span class="built_in">begin</span>());</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> x,<span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(L==tree[p].L&amp;&amp;R==tree[p].R){</span><br><span class="line">        <span class="keyword">return</span> upper_bound(tree[p].num.<span class="built_in">begin</span>(),tree[p].num.<span class="built_in">end</span>(),x)-tree[p].num.<span class="built_in">begin</span>();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid=(tree[p].L+tree[p].R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(R&lt;=mid)<span class="keyword">return</span> query(L,R,x,p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(L&gt;mid)<span class="keyword">return</span> query(L,R,x,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span>{</span><br><span class="line">        <span class="keyword">return</span> query(L,mid,x,p&lt;&lt;<span class="number">1</span>)+query(mid+<span class="number">1</span>,R,x,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    freopen(<span class="string">"kth.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</span><br><span class="line">    freopen(<span class="string">"my.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</span><br><span class="line">    <span class="keyword">int</span> n,m,a,b,c;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i]);</span><br><span class="line">        s[i<span class="number">-1</span>]=A[i];</span><br><span class="line">    }</span><br><span class="line">    sort(s,s+n);</span><br><span class="line">    build(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">        <span class="keyword">int</span> L=<span class="number">0</span>,R=n<span class="number">-1</span>,res;</span><br><span class="line">        <span class="keyword">while</span>(L&lt;=R){</span><br><span class="line">            <span class="keyword">int</span> mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> tmp=query(a,b,s[mid],<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span>(tmp&gt;=c){</span><br><span class="line">                R=mid<span class="number">-1</span>;res=s[mid];</span><br><span class="line">            }<span class="keyword">else</span> L=mid+<span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,res);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>qujiank_bitree.cpp</span><a href="/downloads/code/qujiank_bitree.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 30005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) (x&amp;(-x))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> A[M],B[M],S,num[M],C[M],V,ans[M],n;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> a,b,c,l,r,mid,res,id;</span><br><span class="line">}query[M];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Num</span>{</span></span><br><span class="line">    <span class="keyword">int</span> id,x;</span><br><span class="line">}G[M];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node a,node b)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> a.mid&lt;b.mid;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp1</span><span class="params">(Num a,Num b)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> a.x&lt;b.x;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(x==<span class="number">0</span>)<span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">while</span>(x&lt;=n){</span><br><span class="line">        C[x]++;x+=lowbit(x);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Get</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x&gt;<span class="number">0</span>){</span><br><span class="line">        res+=C[x];</span><br><span class="line">        x-=lowbit(x);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    freopen(<span class="string">"kth.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</span><br><span class="line">    freopen(<span class="string">"my.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</span><br><span class="line">    <span class="keyword">int</span> m;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i]);</span><br><span class="line">        num[i]=A[i];</span><br><span class="line">    }</span><br><span class="line">    sort(num,num+n);</span><br><span class="line">    V=unique(num,num+n)-num;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++){</span><br><span class="line">        A[i]=lower_bound(num,num+V,A[i])-num;</span><br><span class="line">        G[i].id=i+<span class="number">1</span>,G[i].x=A[i];</span><br><span class="line">    }</span><br><span class="line">    sort(G,G+n,cmp1);</span><br><span class="line">    <span class="keyword">int</span> a,b,c;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">        query[i]=(node){a,b,c,<span class="number">0</span>,V<span class="number">-1</span>,(V<span class="number">-1</span>)&gt;&gt;<span class="number">1</span>,<span class="number">-1</span>,i};</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">15</span>;i++){</span><br><span class="line">        sort(query,query+m,cmp);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> k=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)C[j]=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m;j++){</span><br><span class="line">            <span class="keyword">if</span>(query[j].l&gt;query[j].r)<span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">while</span>(k&lt;n&amp;&amp;G[k].x&lt;=query[j].mid){</span><br><span class="line">                Add(G[k++].id);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">int</span> tmp=Get(query[j].b)-Get(query[j].a<span class="number">-1</span>);</span><br><span class="line">            <span class="keyword">if</span>(tmp&gt;=query[j].c){</span><br><span class="line">                query[j].res=query[j].mid;</span><br><span class="line">                query[j].r=query[j].mid<span class="number">-1</span>;</span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                query[j].l=query[j].mid+<span class="number">1</span>;</span><br><span class="line">            }</span><br><span class="line">            query[j].mid=query[j].l+query[j].r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++)ans[query[i].id]=num[query[i].res];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++)<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>seg_tree</tag>
        <tag>block</tag>
        <tag>bit_tree</tag>
      </tags>
  </entry>
  <entry>
    <title>POJ-1804</title>
    <url>/blog/POJ-1804/</url>
    <content><![CDATA[<p>æ±‚é€†åºå¯¹æ•°</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>The first line contains the number of scenarios.<br>For every scenario, you are given a line containing first the length N (1 &lt;= N &lt;= 1000) of the sequence,followed by the N elements of the sequence (each element is an integer in [-1000000, 1000000]). All numbers in this line are separated by single blanks.</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>Start the output for every scenario with a line containing â€œScenario #i:â€, where i is the number of the scenario starting at 1. Then print a single line containing the minimal number of swaps of adjacent numbers that are necessary to sort the given sequence. Terminate the output for the scenario with a blank line.</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>4<br>4 2 8 0 3<br>10 0 1 2 3 4 5 6 7 8 9<br>6 -42 23 6 28 -100 65537<br>5 0 0 0 0 0</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>Scenario #1:<br>3</p>
<p>Scenario #2:<br>0</p>
<p>Scenario #3:<br>5</p>
<p>Scenario #4:<br>0</p>
</blockquote>


<figure class="highlight c"><figcaption><span>POJ_1804_merge_sort.cpp</span><a href="/downloads/code/POJ_1804_merge_sort.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1010</span>;</span><br><span class="line"><span class="keyword">int</span> a[N], tmp[N];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">merge_sort</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(L&gt;=R) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> mid = L+R&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> res = merge_sort(L, mid) + merge_sort(mid+<span class="number">1</span>, R);</span><br><span class="line">    <span class="keyword">int</span> l = L, r=mid+<span class="number">1</span>, k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(l&lt;=mid &amp;&amp; r&lt;=R){</span><br><span class="line">        <span class="keyword">if</span>(a[l]&lt;=a[r]) tmp[k++] = a[l++];</span><br><span class="line">        <span class="keyword">else</span> {</span><br><span class="line">            tmp[k++] = a[r++];</span><br><span class="line">            res += mid-l+<span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">while</span>(l&lt;=mid) tmp[k++] = a[l++];</span><br><span class="line">    <span class="keyword">while</span>(r&lt;=R) tmp[k++] = a[r++];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=L, j=<span class="number">0</span>; i&lt;=R; i++, j++) a[i] = tmp[j];</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=T;i++){</span><br><span class="line">        <span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="keyword">sizeof</span> a);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">        <span class="keyword">int</span> res = merge_sort(<span class="number">0</span>, n<span class="number">-1</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Scenario #%d:\n%d\n\n"</span>, i, res);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>POJ_1804_seg_tree.cpp</span><a href="/downloads/code/POJ_1804_seg_tree.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1010</span>;</span><br><span class="line"><span class="keyword">int</span> a[N], bin[N];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> sum[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    sum[x] = sum[x*<span class="number">2</span>] + sum[x*<span class="number">2</span>+<span class="number">1</span>];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r, <span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(l==r){</span><br><span class="line">        sum[x] = <span class="number">0</span>; <span class="comment">//mistake</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = l+r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(l, mid, x&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    build(mid+<span class="number">1</span>, r, x&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    update(x);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> A, <span class="keyword">int</span> B, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(A&lt;=l &amp;&amp; B&gt;=r) <span class="keyword">return</span> sum[x];</span><br><span class="line">    <span class="keyword">int</span> mid = l+r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(A&lt;=mid) ans += query(A, B, l, mid, x&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span>(B&gt;mid) ans += query(A, B, mid+<span class="number">1</span>, r, x&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">change</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> v, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(l==r) {</span><br><span class="line">        sum[x]+= v;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = l+r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(pos &lt;=mid) change(pos, v, l, mid, x&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> change(pos, v, mid+<span class="number">1</span>, r, x&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    update(x);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=T;i++){</span><br><span class="line">        <span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="keyword">sizeof</span> a);</span><br><span class="line">        <span class="built_in">memset</span>(bin, <span class="number">0</span>, <span class="keyword">sizeof</span> bin);</span><br><span class="line">        <span class="built_in">memset</span>(sum, <span class="number">0</span>, <span class="keyword">sizeof</span> sum);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">            bin[++cnt] = a[i];</span><br><span class="line">        }</span><br><span class="line">        sort(bin+<span class="number">1</span>, bin+<span class="number">1</span>+cnt);</span><br><span class="line">        cnt = unique(bin+<span class="number">1</span>, bin+<span class="number">1</span>+cnt) - bin<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">            a[i] = lower_bound(bin + <span class="number">1</span>, bin + <span class="number">1</span> + cnt, a[i]) - bin;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        build(<span class="number">1</span>, cnt, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">            res += query(a[i]+<span class="number">1</span>, cnt, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">            change(a[i], <span class="number">1</span>, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Scenario #%d:\n%d\n\n"</span>, i, res);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>wanmen</category>
      </categories>
      <tags>
        <tag>seg_tree</tag>
        <tag>merge_sort</tag>
      </tags>
  </entry>
  <entry>
    <title>POJ_3067</title>
    <url>/blog/POJ-3067/</url>
    <content><![CDATA[<p>Japan plans to welcome the ACM ICPC World Finals and a lot of roads must be built for the venue. Japan is tall island with N cities on the East coast and M cities on the West coast (M &lt;= 1000, N &lt;= 1000). K superhighways will be build. Cities on each coast are numbered 1, 2, â€¦ from North to South. Each superhighway is straight line and connects city on the East coast with city of the West coast. The funding for the construction is guaranteed by ACM. A major portion of the sum is determined by the number of crossings between superhighways. At most two superhighways cross at one location. Write a program that calculates the number of the crossings between superhighways.</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>The input file starts with T - the number of test cases. Each test case starts with three numbers â€“ N, M, K. Each of the next K lines contains two numbers â€“ the numbers of cities connected by the superhighway. The first one is the number of the city on the East coast and second one is the number of the city of the West coast.</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>For each test case write one line on the standard output:<br>Test case (case number): (number of crossings)</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>1<br>3 4 4<br>1 4<br>2 3<br>3 2<br>3 1</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>Test case 1: 5</p>
</blockquote>


<figure class="highlight c"><figcaption><span>POJ_3067.cpp</span><a href="/downloads/code/POJ_3067.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1010</span>;</span><br><span class="line"><span class="keyword">int</span> a, b, n;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line">ll c[N];</span><br><span class="line"><span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; &gt; p;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; &amp; p1, <span class="keyword">const</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; &amp;p2)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(p1.second != p2.second) <span class="keyword">return</span> p1.second&gt;p2.second;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> p1.first&lt; p2.first;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> x &amp; -x;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=x;i&lt;=N;i+=lowbit(i))</span><br><span class="line">        c[i] += <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=x;i&gt;<span class="number">0</span>;i-=lowbit(i))</span><br><span class="line">        ans += c[i];</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> t=<span class="number">1</span>;t&lt;=T;t++){</span><br><span class="line">        <span class="built_in">memset</span>(c, <span class="number">0</span>, <span class="keyword">sizeof</span> c);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;n);</span><br><span class="line">        <span class="keyword">int</span> x, y;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x, &amp;y);</span><br><span class="line">            p.push_back({x, y});</span><br><span class="line">        }</span><br><span class="line">        sort(p.<span class="built_in">begin</span>(), p.<span class="built_in">end</span>(), cmp);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;p.<span class="built_in">size</span>();i++) <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span> ,p[i].first, p[i].second);</span><br><span class="line">        ll ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;p.<span class="built_in">size</span>();i++){</span><br><span class="line">            x = p[i].first, y = p[i].second;</span><br><span class="line">            ans += query(x<span class="number">-1</span>);</span><br><span class="line">            add(x);</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Test case %d: %lld\n"</span>, t,ans);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>wanmen</category>
      </categories>
      <tags>
        <tag>bit_tree</tag>
      </tags>
  </entry>
  <entry>
    <title>HDU_2852</title>
    <url>/blog/HDU-2852/</url>
    <content><![CDATA[<p>For the k-th number, we all should be very familiar with it. Of course,to kiki it is also simple. Now Kiki meets a very similar problem, kiki wants to design a container, the container is to support the three operations.</p>
<p>Push: Push a given element e to container</p>
<p>Pop: Pop element of a given e from container</p>
<p>Query: Given two elements a and k, query the kth larger number which greater than a in container;</p>
<p>Although Kiki is very intelligent, she can not think of how to do it, can you help her to solve this problem?</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>Input some groups of test data ,each test data the first number is an integer m (1 &lt;= m &lt;100000), means that the number of operation to do. The next m lines, each line will be an integer p at the beginning, p which has three values:<br>If p is 0, then there will be an integer e (0 &lt;e &lt;100000), means press element e into Container.</p>
<p>If p is 1, then there will be an integer e (0 &lt;e &lt;100000), indicated that delete the element e from the container</p>
<p>If p is 2, then there will be two integers a and k (0 &lt;a &lt;100000, 0 &lt;k &lt;10000),means the inquiries, the element is greater than a, and the k-th larger number.</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>For each deletion, if you want to delete the element which does not exist, the output â€œNo Elment!â€. For each query, output the suitable answers in line .if the number does not exist, the output â€œNot Find!â€.</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>5<br>0 5<br>1 2<br>0 6<br>2 3 2<br>2 8 1<br>7<br>0 2<br>0 2<br>0 4<br>2 1 1<br>2 1 2<br>2 1 3<br>2 1 4</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>No Elment!<br>6<br>Not Find!<br>2<br>2<br>4<br>Not Find!</p>
</blockquote>


<figure class="highlight c"><figcaption><span>HDU_2852.cpp</span><a href="/downloads/code/HDU_2852.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> sum[N+<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> x &amp;-x;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> d)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=x;i&lt;=N;i+=lowbit(i))</span><br><span class="line">        sum[i] +=d;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=x;i&gt;<span class="number">0</span>;i-=lowbit(i)){</span><br><span class="line">        ans += sum[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> m, t, e, a, k;</span><br><span class="line">    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;m)){</span><br><span class="line">        <span class="built_in">memset</span>(sum, <span class="number">0</span>, <span class="keyword">sizeof</span> sum);</span><br><span class="line">        <span class="keyword">while</span>(m--){</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;t);</span><br><span class="line">            <span class="keyword">if</span>(t==<span class="number">0</span>){</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;e);</span><br><span class="line">                add(e, <span class="number">1</span>);</span><br><span class="line">            }<span class="keyword">else</span> <span class="keyword">if</span>(t==<span class="number">1</span>){</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;e);</span><br><span class="line">                <span class="keyword">if</span>(!(query(e) - query(e<span class="number">-1</span>))) <span class="built_in">printf</span>(<span class="string">"No Elment!\n"</span>);</span><br><span class="line">                <span class="keyword">else</span> add(e, <span class="number">-1</span>);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span>{</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;k);</span><br><span class="line">                <span class="keyword">int</span> v = query(a)+ k;</span><br><span class="line">                <span class="keyword">int</span> l = <span class="number">0</span>, r = N;</span><br><span class="line">                <span class="keyword">while</span>(l&lt;r){</span><br><span class="line">                    <span class="keyword">int</span> mid = l+r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">if</span>(query(mid)&gt;=v) r = mid;</span><br><span class="line">                    <span class="keyword">else</span> l = mid+<span class="number">1</span>;</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">if</span>(r==<span class="number">0</span> || r==N) <span class="built_in">printf</span>(<span class="string">"Not Find!\n"</span>);</span><br><span class="line">                <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, r);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>wanmen</category>
      </categories>
      <tags>
        <tag>bit_tree</tag>
      </tags>
  </entry>
  <entry>
    <title>poj_2352</title>
    <url>/blog/poj-2352/</url>
    <content><![CDATA[<p>Astronomers often examine star maps where stars are represented by points on a plane and each star has Cartesian coordinates. Let the level of a star be an amount of the stars that are not higher and not to the right of the given star. Astronomers want to know the distribution of the levels of the stars.</p>
<img src="/downloads/imgs/poj-2352.png" class="example" title="title exg" alt="alt exg">

<p>For example, look at the map shown on the figure above. Level of the star number 5 is equal to 3 (itâ€™s formed by three stars with a numbers 1, 2 and 4). And the levels of the stars numbered by 2 and 4 are 1. At this map there are only one star of the level 0, two stars of the level 1, one star of the level 2, and one star of the level 3.</p>
<p>You are to write a program that will count the amounts of the stars of each level on a given map.</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>The first line of the input file contains a number of stars N (1&lt;=N&lt;=15000). The following N lines describe coordinates of stars (two integers X and Y per line separated by a space, 0&lt;=X,Y&lt;=32000). There can be only one star at one point of the plane. Stars are listed in ascending order of Y coordinate. Stars with equal Y coordinates are listed in ascending order of X coordinate.</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>The output should contain N lines, one number per line. The first line contains amount of stars of the level 0, the second does amount of stars of the level 1 and so on, the last line contains amount of stars of the level N-1.</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>5<br>1 1<br>5 1<br>7 1<br>3 3<br>5 5</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>1<br>2<br>1<br>1<br>0</p>
</blockquote>



<figure class="highlight c"><figcaption><span>poj_2352.cpp</span><a href="/downloads/code/poj_2352.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">15010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; &gt; coords;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;&amp;p1, <span class="keyword">const</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;&amp;p2)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(p1.second!=p2.second){</span><br><span class="line">        <span class="keyword">return</span> p1.second&lt;p2.second;</span><br><span class="line">    }<span class="keyword">else</span> <span class="keyword">return</span> p1.first&lt;p2.first;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">32001</span>;</span><br><span class="line"><span class="keyword">int</span> c[M+<span class="number">2</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> x &amp; -x;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ans[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> d)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=x;i&lt;=M;i+=lowbit(i)){</span><br><span class="line">        c[i] += d;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=x;i&gt;<span class="number">0</span>;i-=lowbit(i)){</span><br><span class="line">        ans += c[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">int</span> x, y;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;x, &amp;y);</span><br><span class="line">        coords.push_back(make_pair(x, y));</span><br><span class="line">    }</span><br><span class="line">    sort(coords.<span class="built_in">begin</span>(), coords.<span class="built_in">end</span>(), cmp);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// bit_tree can't deal with zero</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;coords.<span class="built_in">size</span>();i++) {</span><br><span class="line">        add(coords[i].first + <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">        ans[query(coords[i].first+<span class="number">1</span>) ]++;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>wanmen</category>
      </categories>
      <tags>
        <tag>bit_tree</tag>
      </tags>
  </entry>
  <entry>
    <title>POJ_3468</title>
    <url>/blog/POJ-3468/</url>
    <content><![CDATA[<p>You have N integers, A1, A2, â€¦ , AN. You need to deal with two kinds of operations. One type of operation is to add some given number to each number in a given interval. The other is to ask for the sum of numbers in a given interval.</p>
<p>Input</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>The first line contains two numbers N and Q. 1 â‰¤ N,Q â‰¤ 100000.<br>The second line contains N numbers, the initial values of A1, A2, â€¦ , AN. -1000000000 â‰¤ Ai â‰¤ 1000000000.<br>Each of the next Q lines represents an operation.<br>â€œC a b câ€ means adding c to each of Aa, Aa+1, â€¦ , Ab. -10000 â‰¤ c â‰¤ 10000.<br>â€œQ a bâ€ means querying the sum of Aa, Aa+1, â€¦ , Ab.</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>You need to answer all Q commands in order. One answer in a line.</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>10 5<br>1 2 3 4 5 6 7 8 9 10<br>Q 4 4<br>Q 1 10<br>Q 2 4<br>C 3 6 3<br>Q 2 4</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>4<br>55<br>9<br>15</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>The sums may exceed the range of 32-bit integers</p>
</blockquote>


<figure class="highlight c"><figcaption><span>poj_3468.cpp</span><a href="/downloads/code/poj_3468.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line">ll N,tree1[<span class="number">100001</span>],tree2[<span class="number">100001</span>];</span><br><span class="line">ll a[<span class="number">100001</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> (x&amp;(-x));</span><br><span class="line">}</span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(ll x ,ll val)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ll i;</span><br><span class="line">    <span class="keyword">for</span>( i = x ; i &lt;= N;i+=lowbit(i) )</span><br><span class="line">    {</span><br><span class="line">        tree1[i]+=val;</span><br><span class="line">        tree2[i]+=x*val;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(ll x)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ll i;</span><br><span class="line">    ll sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>( i = x ; i &gt; <span class="number">0</span> ;i-=lowbit(i))</span><br><span class="line">    {</span><br><span class="line">        sum+=(x+<span class="number">1</span>)*tree1[i]-tree2[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ll  Q , i , A ,B , C;</span><br><span class="line">    <span class="built_in">string</span> s;</span><br><span class="line">    ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; N &gt;&gt; Q;</span><br><span class="line">    a[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> ( i = <span class="number">1</span> ;i &lt;= N ; i++)</span><br><span class="line">    {</span><br><span class="line">         <span class="built_in">cin</span> &gt;&gt; a[i];</span><br><span class="line">         update(i ,a[i]-a[i<span class="number">-1</span>]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> ( i = <span class="number">1</span> ; i &lt;= Q ; i ++)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">        <span class="keyword">if</span>(s[<span class="number">0</span>]==<span class="string">'Q'</span>)</span><br><span class="line">        {</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; A &gt;&gt; B ;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; query (B)- query(A<span class="number">-1</span>)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        {</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; A &gt;&gt; B &gt;&gt; C;</span><br><span class="line">            update(A , C);</span><br><span class="line">            update(B+<span class="number">1</span> ,-C );</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>wanmen</category>
      </categories>
      <tags>
        <tag>bit_tree</tag>
      </tags>
  </entry>
  <entry>
    <title>POJ_2155_matrix</title>
    <url>/blog/POJ-2155-matrix/</url>
    <content><![CDATA[<p>Language:<br>Matrix<br>Time Limit: 3000MS        Memory Limit: 65536K<br>Total Submissions: 37057        Accepted: 13286<br>Description</p>
<p>Given an N*N matrix A, whose elements are either 0 or 1. A[i, j] means the number in the i-th row and j-th column. Initially we have A[i, j] = 0 (1 &lt;= i, j &lt;= N).</p>
<p>We can change the matrix in the following way. Given a rectangle whose upper-left corner is (x1, y1) and lower-right corner is (x2, y2), we change all the elements in the rectangle by using â€œnotâ€ operation (if it is a â€˜0â€™ then change it into â€˜1â€™ otherwise change it into â€˜0â€™). To maintain the information of the matrix, you are asked to write a program to receive and execute two kinds of instructions.</p>
<ol>
<li>C x1 y1 x2 y2 (1 &lt;= x1 &lt;= x2 &lt;= n, 1 &lt;= y1 &lt;= y2 &lt;= n) changes the matrix by using the rectangle whose upper-left corner is (x1, y1) and lower-right corner is (x2, y2).</li>
<li>Q x y (1 &lt;= x, y &lt;= n) querys A[x, y].</li>
</ol>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>The first line of the input is an integer X (X &lt;= 10) representing the number of test cases. The following X blocks each represents a test case.</p>
<p>The first line of each block contains two numbers N and T (2 &lt;= N &lt;= 1000, 1 &lt;= T &lt;= 50000) representing the size of the matrix and the number of the instructions. The following T lines each represents an instruction having the format â€œQ x yâ€ or â€œC x1 y1 x2 y2â€, which has been described above.</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>For each querying output one line, which has an integer representing A[x, y].</p>
<p>There is a blank line between every two continuous test cases.</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>1<br>2 10<br>C 2 1 2 2<br>Q 2 2<br>C 2 1 2 1<br>Q 1 1<br>C 1 1 2 1<br>C 1 2 1 2<br>C 1 1 2 2<br>Q 1 1<br>C 1 1 2 1<br>Q 2 1</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>1<br>0<br>0<br>1</p>
</blockquote>


<figure class="highlight c"><figcaption><span>poj_2155.cpp</span><a href="/downloads/code/poj_2155.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1010</span>;</span><br><span class="line"><span class="keyword">int</span> sum[N][N];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">C</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> x &amp; -x;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x&gt;<span class="number">0</span>){</span><br><span class="line">        <span class="keyword">int</span> ty = y;</span><br><span class="line">        <span class="keyword">while</span>(ty&gt;<span class="number">0</span>){</span><br><span class="line">            ans += sum[x][ty];</span><br><span class="line">            ty -= C(ty);</span><br><span class="line">        }</span><br><span class="line">        x -= C(x);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> d)</span></span>{</span><br><span class="line">    <span class="keyword">while</span>(x&lt;=n){</span><br><span class="line">        <span class="keyword">int</span> ty = y;</span><br><span class="line">        <span class="keyword">while</span>(ty&lt;=n){</span><br><span class="line">            sum[x][ty] = (sum[x][ty] + d) % <span class="number">2</span>;</span><br><span class="line">            ty += C(ty);</span><br><span class="line">        }</span><br><span class="line">        x += C(x);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> X ;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;X);</span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    <span class="keyword">char</span> c[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">int</span> x1, y1, x2, y2;</span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;X;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;T);</span><br><span class="line">        <span class="built_in">memset</span>(sum, <span class="number">0</span>, <span class="keyword">sizeof</span> sum);</span><br><span class="line">        <span class="keyword">while</span>(T--){</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>,c);</span><br><span class="line">            <span class="keyword">if</span>(c[<span class="number">0</span>]==<span class="string">'C'</span>){</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d%d%d%d"</span>, &amp;x1, &amp;y1, &amp;x2, &amp;y2);</span><br><span class="line"><span class="comment">//                printf("%d %d %d %d\n", x1,y1, x2,y2);</span></span><br><span class="line">                add(x1, y1, <span class="number">1</span>);</span><br><span class="line">                add(x1, y2+<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">                add(x2+<span class="number">1</span>, y1, <span class="number">1</span>);</span><br><span class="line">                add(x2+<span class="number">1</span>, y2+<span class="number">1</span>, +<span class="number">1</span>);</span><br><span class="line">            }<span class="keyword">else</span> <span class="keyword">if</span>(c[<span class="number">0</span>]==<span class="string">'Q'</span>){</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;x, &amp;y);</span><br><span class="line"><span class="comment">//                printf("%d %d\n", x, y);</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(x, y) % <span class="number">2</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>wanmen</category>
      </categories>
      <tags>
        <tag>bit_tree</tag>
      </tags>
  </entry>
  <entry>
    <title>Planning for Autononous Cars that Leverage Effects on Human Actions</title>
    <url>/blog/Planning-for-Autononous-Cars/</url>
    <content><![CDATA[<p><b>Idea: </b></p>
<ol>
<li>Action from the autonomous car will affect human responses and these could be leveraged for planning.</li>
<li>Approximate human as optimal driver, with a reward function acquired through inverse reinforcement learning.</li>
</ol>
<p><b>Motivation:</b></p>
<ol>
<li>Current autonomous cars are defensive</li>
<li>Plan more efficient and communicative behaviors for autonomous cars.</li>
</ol>
<a id="more"></a>

<p><b>Assumptions</b></p>
<ol>
<li>Two car system.</li>
</ol>
<p><b>Method</b></p>
<ol>
<li><p>The robot will use MPC at every iteration by computing a finite sequence of actions to maximize its reward and then execute the first one. (Eqn 5).</p>
<img src="/downloads/imgs/auton1.png" class="example" title="title exg" alt="alt exg">
</li>
<li><p>Compute u^{*}_H by optimizing the following:</p>
<img src="/downloads/imgs/auton2.png" class="example" title="title exg" alt="alt exg">
</li>
<li><p>Learn r_h with inverse reinforcement learning (separate optimization process that maximizes probability of demonstrations).</p>
</li>
</ol>
<p><b>Implementations</b><br>Use theano to compute jacobian and hessian symbolically and use L-BFGS to optimize Eqn 5. (code: <a href="https://github.com/dsadigh/driving-interactions/blob/master/utils.py" target="_blank" rel="noopener">https://github.com/dsadigh/driving-interactions/blob/master/utils.py</a>)</p>
]]></content>
      <categories>
        <category>Papers</category>
      </categories>
      <tags>
        <tag>HRI</tag>
      </tags>
  </entry>
  <entry>
    <title>Human-Robot-Mutual</title>
    <url>/blog/Human-Robot-Mutual/</url>
    <content><![CDATA[<blockquote><p>Formalizing Human-Robot Mutual Adaptation: A Bounded Memory Model</p>
</blockquote>

<p><b>Idea: </b> the robot reasons how human may change its strategy, based on a model of human adaptation.<br><b>Motivation:</b></p>
<ol>
<li>Previous works do not use a model of human adaptation that can enable the robot to actively influence the actions of human.</li>
<li>Previous works do not reason over the human adaptation throughout the interaction. Compare with Intention-Aware Motion Planning paper.</li>
</ol>
<a id="more"></a>

<p><b>Assumptions</b></p>
<ol>
<li>Definition of m_r, m_h requires a specific collaborative task (rotating table as in paper).</li>
</ol>
<p><b>Preliminaries</b></p>
<ol>
<li>f maps QxArxAh into modes M: {0,1}.</li>
<li>Q=X_state x H_k at time step i is reprensented eventually as m_{h}^{i}, m_{r}^{i}, computed over a history of length k.</li>
</ol>
<p><b>Method</b><br>Modelling (adaptable human): Human adaptability a is accounted for via transition function P: Q to P(Q). At state q, the human will choose action specified by m_r with probability a, or m_h with 1-a.<br>Planning (adaptable robot):</p>
<ol>
<li>S: X x Y; X: X_world x M^{k} x M^{k}. M is the mode of robot/human; Y is partial observable variable, adaptabiity.</li>
<li>human policy $\pi_h$ is from BAM model. It outputs m_h or m_r.</li>
<li>The belief is based on unobserable variable a. Therefore, MOMDP maps from V(Q, b(a)) to a_r. Then BAM models gives human action a_h. Then use Eqn.3 (below) to update the belief.</li>
</ol>
<img src="/downloads/imgs/mutual1.png" class="example" title="title exg" alt="alt exg">]]></content>
      <categories>
        <category>Papers</category>
      </categories>
      <tags>
        <tag>HRI</tag>
      </tags>
  </entry>
  <entry>
    <title>Intention-Aware Motion Planning</title>
    <url>/blog/CSCI699/</url>
    <content><![CDATA[<blockquote><p>Intention-aware motion planning</p>
</blockquote>

<p><b>Motivation:</b> Motion planning with uncertainty in human intention.<br><b>Assumptions</b></p>
<ol>
<li>A finite set of unknown intentions.</li>
<li>Given intention, the agentâ€™s dynamics is modeled and known to robot.</li>
<li>The agent has perfect information on the robotâ€™s and its own state.</li>
</ol>
<a id="more"></a>

<p><b>Idea:</b></p>
<ol>
<li>Model intent-aware motion planning as a Partially Observable Markov Decision Process.</li>
<li>The agentâ€™s intention is the primary uncertainty state variable in MOMDP.</li>
</ol>
<p><b>Preliminaries</b></p>
<ol>
<li>MDP allows to model action uncertainty only and the state is fully obserable.</li>
<li>POMDP specifies p(o|sâ€™,a), which models observation uncertainty.</li>
<li>In POMDP, state is not known and is represented as a belief b(s).</li>
<li>A POMDP policy induces a value function mapping from b to reward.</li>
<li>Each alpha-vector defines a hyperplane over B. The value function V can be represented as a finite set of hyperplanes.</li>
</ol>
<p><b>Method</b></p>
<ol>
<li>In the offline stage, construct a motion model for each agent intention; in the online stage, infer over a finite set of agent intentions and act accordingly.</li>
<li>Modelling<ol>
<li>Each intention type corresponds to an agent policy $\rou: XxYx\theta$.</li>
<li>$\rou$ can be computed by solving a simplified MDP. Assume the pedestrian follows shortest path and avoids collision.</li>
</ol>
</li>
<li>Execution<ol>
<li>MOMDP policy, represented as a value function $V(x, y, b_\theta)$.</li>
<li>First selects an action for current belief: $V(x, y, b_\theta) = max_{a} {a * b_\theta}$</li>
<li>Then update the belief: $bâ€™<em>\theta = Z(xâ€™,yâ€™, o) \sum</em>{\theta}{T_x(x, a, xâ€™) * T_y{x, y, \theta, yâ€™} * b(\theta)}$</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>Papers</category>
      </categories>
      <tags>
        <tag>HRI</tag>
      </tags>
  </entry>
  <entry>
    <title>reinforcement_learning-1</title>
    <url>/blog/reinforcement-learning1/</url>
    <content><![CDATA[<blockquote><p>End-to-End Robotic Reinforcement Learning without Reward Engineering</p>
</blockquote>

<p><b>Motivation:</b> Manual-engineered reward defeats the purpose of end-to-end learning<br><b>Idea:</b></p>
<ol>
<li>Human periodically labels the queries, used to supervise reward training</li>
<li>Train a classifier to predict reward, based on high-dimensional input (pixels)</li>
<li>Use RL to provide negative samples for step2 and RL uses the reward from step 2.</li>
</ol>
]]></content>
      <categories>
        <category>Papers</category>
      </categories>
      <tags>
        <tag>HRI</tag>
        <tag>reinforcement_learning</tag>
      </tags>
  </entry>
  <entry>
    <title>metric_learning-1</title>
    <url>/blog/metric-learning/</url>
    <content><![CDATA[<blockquote><p>Self-training with Noisy Student improves ImageNet classification</p>
</blockquote>

<p>The idea is to train a noisy student no smaller than the teacher and repeat.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">While not converge</span><br><span class="line">    1. Train a teacher net to provide pseudo-labels (unoised).</span><br><span class="line">    2. Train a larger student model with pseudo and groundtruth labels (noised).</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<blockquote><p>Embedding Expansion: Augmentation in Embedding Space for Deep Metric Learning</p>
</blockquote>
<p><b>Idea:</b> Proposes an embedding augmentation and combines with representation learning.<br><b>Motivation:</b> To generate hard-synthsis with easy samples without using GAN.<br><b>Related Work:</b> query expansion and database augmentation.<br><b>Method:</b> Loss/Negative Pair Mining</p>
<blockquote><p>Momentum Contrast for Unsupervised Visual Representation Learning</p>
</blockquote>
<p><b>Motivation:</b> Close the gap between unsupervised learning and supervised learning.<br><b>Idea: </b>Reformulate contrastive matching as dictionary look-up<br><b>Method</b></p>
<ol>
<li>Loss function: maximize softmax on the positive key</li>
<li>Implement the dictionary as a queue and maintains a momentum update on the key encoder</li>
</ol>
<blockquote><p>A Simple Framework for Contrastive Learning of Visual Representations</p>
</blockquote>
<p><b>Method</b></p>
<ol>
<li>Data augmentation plays a crucial role</li>
<li>Nonlinear transformation between representation and loss is crucial</li>
<li>Larger batch_size and more training steps compared to supervised training</li>
</ol>
<blockquote><p>Learning Diverse Fashion Collocation by Neural Graph Filtering</p>
</blockquote>
<p><b>Motivation:</b> To achieve compatibility, diversity and flexibility requirements of fashion<br>collocation.</p>
<p><b>Highlights:</b><br>    1. Edge-centric graph operations with permutation-invariant symmetric aggregation function<br>    2. Use focal loss to handle imbalance.<br>    3. New dataset for style classification.</p>
]]></content>
      <categories>
        <category>Papers</category>
      </categories>
      <tags>
        <tag>metric-learning</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸­å›½å‰©ä½™å®šç†</title>
    <url>/blog/%E4%B8%AD%E5%9B%BD%E5%89%A9%E4%BD%99%E5%AE%9A%E7%90%86/</url>
    <content><![CDATA[<p>ã€Šå­™å­ç®—ç»ã€‹ä¸­çš„é¢˜ç›®ï¼šæœ‰ç‰©ä¸çŸ¥å…¶æ•°ï¼ŒA[i]ä¸ªä¸€æ•°ä½™B[i]ï¼Œé—®è¯¥ç‰©æ€»æ•°å‡ ä½•ï¼Ÿ</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œï¼Œä¸€ä¸ªæ•´æ•°nã€‚<br>æŽ¥ä¸‹æ¥nè¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°A[i]å’ŒB[i],è¡¨ç¤ºç”¨è¿™ä¸ªæ•°æ¨¡A[i]å¾—B[i]ã€‚<br>ä¿è¯æ‰€æœ‰A[i]ä¸¤ä¸¤äº’ç´ ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>è¾“å‡ºæœ€å°çš„æ»¡è¶³æ¡ä»¶çš„æ­£æ•´æ•°è§£ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>3<br>2 1<br>3 2<br>5 3</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>23</p>
</blockquote>


<figure class="highlight c"><figcaption><span>shengyudingli.cpp</span><a href="/downloads/code/shengyudingli.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> A[N], B[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">exgcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, LL &amp;x, LL &amp;y)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(b==<span class="number">0</span>){</span><br><span class="line">        x = <span class="number">1</span>, y = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> d = exgcd(b, a%b, x, y);</span><br><span class="line">    LL x1 = y;</span><br><span class="line">    LL y1 = x - a/b * y;</span><br><span class="line">    x = x1, y= y1;</span><br><span class="line">    <span class="keyword">return</span> d;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    LL mul = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;A[i], &amp;B[i]);</span><br><span class="line">        mul *= A[i];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        LL Mi = mul / A[i];</span><br><span class="line">        LL x, y;</span><br><span class="line">        exgcd(Mi, A[i], x, y);</span><br><span class="line">        sum += ((x%A[i] + A[i]) % A[i]) * Mi * B[i];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, sum % mul);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>Math</tag>
      </tags>
  </entry>
  <entry>
    <title>é’è›™çš„çº¦ä¼š</title>
    <url>/blog/%E9%9D%92%E8%9B%99%E7%9A%84%E7%BA%A6%E4%BC%9A/</url>
    <content><![CDATA[<p>ä¸¤åªé’è›™åœ¨ç½‘ä¸Šç›¸è¯†äº†ï¼Œå®ƒä»¬èŠå¾—å¾ˆå¼€å¿ƒï¼ŒäºŽæ˜¯è§‰å¾—å¾ˆæœ‰å¿…è¦è§ä¸€é¢ã€‚å®ƒä»¬å¾ˆé«˜å…´åœ°å‘çŽ°å®ƒä»¬ä½åœ¨åŒä¸€æ¡çº¬åº¦çº¿ä¸Šï¼ŒäºŽæ˜¯å®ƒä»¬çº¦å®šå„è‡ªæœè¥¿è·³ï¼Œç›´åˆ°ç¢°é¢ä¸ºæ­¢ã€‚å¯æ˜¯å®ƒä»¬å‡ºå‘ä¹‹å‰å¿˜è®°äº†ä¸€ä»¶å¾ˆé‡è¦çš„äº‹æƒ…ï¼Œæ—¢æ²¡æœ‰é—®æ¸…æ¥šå¯¹æ–¹çš„ç‰¹å¾ï¼Œä¹Ÿæ²¡æœ‰çº¦å®šè§é¢çš„å…·ä½“ä½ç½®ã€‚ä¸è¿‡é’è›™ä»¬éƒ½æ˜¯å¾ˆä¹è§‚çš„ï¼Œå®ƒä»¬è§‰å¾—åªè¦ä¸€ç›´æœç€æŸä¸ªæ–¹å‘è·³ä¸‹åŽ»ï¼Œæ€»èƒ½ç¢°åˆ°å¯¹æ–¹çš„ã€‚ä½†æ˜¯é™¤éžè¿™ä¸¤åªé’è›™åœ¨åŒä¸€æ—¶é—´è·³åˆ°åŒä¸€ç‚¹ä¸Šï¼Œä¸ç„¶æ˜¯æ°¸è¿œéƒ½ä¸å¯èƒ½ç¢°é¢çš„ã€‚ä¸ºäº†å¸®åŠ©è¿™ä¸¤åªä¹è§‚çš„é’è›™ï¼Œä½ è¢«è¦æ±‚å†™ä¸€ä¸ªç¨‹åºæ¥åˆ¤æ–­è¿™ä¸¤åªé’è›™æ˜¯å¦èƒ½å¤Ÿç¢°é¢ï¼Œä¼šåœ¨ä»€ä¹ˆæ—¶å€™ç¢°é¢ã€‚<br>æˆ‘ä»¬æŠŠè¿™ä¸¤åªé’è›™åˆ†åˆ«å«åšé’è›™Aå’Œé’è›™Bï¼Œå¹¶ä¸”è§„å®šçº¬åº¦çº¿ä¸Šä¸œç»0åº¦å¤„ä¸ºåŽŸç‚¹ï¼Œç”±ä¸œå¾€è¥¿ä¸ºæ­£æ–¹å‘ï¼Œå•ä½é•¿åº¦1ç±³ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€æ¡é¦–å°¾ç›¸æŽ¥çš„æ•°è½´ã€‚è®¾é’è›™Açš„å‡ºå‘ç‚¹åæ ‡æ˜¯xï¼Œé’è›™Bçš„å‡ºå‘ç‚¹åæ ‡æ˜¯yã€‚é’è›™Aä¸€æ¬¡èƒ½è·³mç±³ï¼Œé’è›™Bä¸€æ¬¡èƒ½è·³nç±³ï¼Œä¸¤åªé’è›™è·³ä¸€æ¬¡æ‰€èŠ±è´¹çš„æ—¶é—´ç›¸åŒã€‚çº¬åº¦çº¿æ€»é•¿Lç±³ã€‚çŽ°åœ¨è¦ä½ æ±‚å‡ºå®ƒä»¬è·³äº†å‡ æ¬¡ä»¥åŽæ‰ä¼šç¢°é¢ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>è¾“å…¥åªåŒ…æ‹¬ä¸€è¡Œ5ä¸ªæ•´æ•°xï¼Œyï¼Œmï¼Œnï¼ŒL</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>è¾“å‡ºç¢°é¢æ‰€éœ€è¦çš„è·³è·ƒæ¬¡æ•°ï¼Œå¦‚æžœæ°¸è¿œä¸å¯èƒ½ç¢°é¢åˆ™è¾“å‡ºä¸€è¡Œâ€Impossibleâ€</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>1 2 3 4 5</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>4</p>
</blockquote>


<figure class="highlight c"><figcaption><span>qingwadeyuehui.cpp</span><a href="/downloads/code/qingwadeyuehui.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> int long long</span></span><br><span class="line"><span class="keyword">int</span> s1, s2, m, n, L;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">exgcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> &amp;x, <span class="keyword">int</span> &amp;y)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(b==<span class="number">0</span>){</span><br><span class="line">        x = <span class="number">1</span>, y = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span>  res = exgcd(b, a%b, x, y);</span><br><span class="line">    <span class="keyword">int</span> x1 = y;</span><br><span class="line">    <span class="keyword">int</span> y1 =  x - a/b * y;</span><br><span class="line">    x = x1, y = y1;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line"></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d%d%d"</span>, &amp;s1, &amp;s2, &amp;m, &amp;n, &amp;L);</span><br><span class="line">    s1%=L, s2%=L;</span><br><span class="line">    <span class="keyword">int</span> a = m-n, b = s2-s1;</span><br><span class="line">    <span class="keyword">if</span>(a&lt;<span class="number">0</span>) a = -a, b = -b;</span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">    <span class="keyword">int</span> d = exgcd(a, L, x, y);</span><br><span class="line">    <span class="keyword">if</span>(b%d) <span class="built_in">puts</span>(<span class="string">"Impossible"</span>);</span><br><span class="line">    <span class="keyword">else</span> x = x * b / d,  L/= d, <span class="built_in">printf</span>(<span class="string">"%lld"</span>, (x%L + L) % L);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>Math</tag>
      </tags>
  </entry>
  <entry>
    <title>ç»„åˆè®¡æ•°</title>
    <url>/blog/%E7%BB%84%E5%90%88%E8%AE%A1%E6%95%B0/</url>
    <content><![CDATA[<p>æ±‚ç»„åˆæ•°ï¼ŒC(n, m)% Pã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ä¸¤ä¸ªæ•´æ•°nå’Œm</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>C(n,m) è¡¨ç¤ºçš„ç»“æžœ</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>6 3</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>20</p>
</blockquote>


<figure class="highlight c"><figcaption><span>zuheshu1.cpp</span><a href="/downloads/code/zuheshu1.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1000010</span>, P = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">int</span> cnt[N+<span class="number">10</span>];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; son[N+<span class="number">10</span>];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">prime</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=N;i++){</span><br><span class="line">        <span class="keyword">if</span>(son[i].<span class="built_in">size</span>()==<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;=n;j+=i) {</span><br><span class="line">                son[j].push_back(i); <span class="comment">//è¯¥æ•°æ˜¯è´¨æ•°ï¼Œ åŒ…å«è¯¥è´¨æ•°å› å­æœ¬èº«</span></span><br><span class="line">            }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> k)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;son[i].<span class="built_in">size</span>();j++){</span><br><span class="line">            <span class="keyword">int</span> x = son[i][j], c = <span class="number">0</span>, p=i;</span><br><span class="line">            <span class="keyword">while</span>(p%x==<span class="number">0</span>){</span><br><span class="line">                p/=x, c++;</span><br><span class="line">            }</span><br><span class="line">            cnt[x] += c*k;</span><br><span class="line">        }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">fast</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>{</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(b){</span><br><span class="line">        <span class="keyword">if</span>(b&amp;<span class="number">1</span>) res = res * a % P;</span><br><span class="line">        a = a * a % P;</span><br><span class="line">        b&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    prime();</span><br><span class="line">    solve(n, <span class="number">1</span>);</span><br><span class="line">    solve(n-m, <span class="number">-1</span>);</span><br><span class="line">    solve(m, <span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">if</span>(cnt[i]&gt;<span class="number">0</span>)</span><br><span class="line">            res = res * fast(i, cnt[i]) % P;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>zuheshu2.cpp</span><a href="/downloads/code/zuheshu2.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1000010</span>, P = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> pcnt, pr[N+<span class="number">10</span>];</span><br><span class="line"><span class="keyword">int</span> cnt[N+<span class="number">10</span>];</span><br><span class="line"><span class="keyword">int</span> mark[N+<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">prime</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=N;i++)</span><br><span class="line">        <span class="keyword">if</span>(!mark[i]) {</span><br><span class="line">            pr[++pcnt] = i;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i + i; j &lt;= n; j += i)</span><br><span class="line">                mark[j] = <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//é˜¶ä¹˜è´¨å› å­åˆ†è§£</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> k)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=pcnt &amp;&amp; pr[i]&lt;=n;i++){  <span class="comment">//starts from 1</span></span><br><span class="line">        <span class="keyword">int</span> x = pr[i];</span><br><span class="line">        <span class="comment">// xåœ¨n!ä¸­æŒ‡æ•°</span></span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> t = x;</span><br><span class="line">        <span class="keyword">while</span>(t&lt;=n){</span><br><span class="line">            cnt[x] += n/t * k;</span><br><span class="line">            t*=x;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">fast</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(x){</span><br><span class="line">        <span class="keyword">if</span>(x&amp;<span class="number">1</span>) res = res * n % P;</span><br><span class="line">        n = n * n % P;</span><br><span class="line">        x &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    prime();</span><br><span class="line">    solve(n, <span class="number">1</span>);</span><br><span class="line">    solve(n-m, <span class="number">-1</span>);</span><br><span class="line">    solve(m, <span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">if</span>(cnt[i])</span><br><span class="line">            res = res * fast(i, cnt[i]) % P;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>zuheshu3.cpp</span><a href="/downloads/code/zuheshu3.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line">ll T,f[<span class="number">1000009</span>],n,m;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> p=<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="function">ll <span class="title">fast</span><span class="params">(ll x,<span class="keyword">int</span> b)</span></span>{</span><br><span class="line">    ll res=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(b&gt;<span class="number">0</span>){</span><br><span class="line">        <span class="keyword">if</span>(b&amp;<span class="number">1</span>)res=res*x%p,res%=p;</span><br><span class="line">        x=x*x%p,x%=p;</span><br><span class="line">        b/=<span class="number">2</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    f[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">1000000</span>;i++)f[i]=(f[i<span class="number">-1</span>]%p*i)%p;</span><br><span class="line">    <span class="keyword">char</span> in[<span class="number">20</span>]={<span class="string">"data0.in"</span>};</span><br><span class="line">    <span class="keyword">char</span> out[<span class="number">20</span>]={<span class="string">"data0.out"</span>};</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> cas=<span class="number">1</span>;cas&lt;=<span class="number">10</span>;cas++){</span><br><span class="line">        freopen(in,<span class="string">"r"</span>,<span class="built_in">stdin</span>);in[<span class="number">4</span>]++;</span><br><span class="line">        freopen(out,<span class="string">"w"</span>,<span class="built_in">stdout</span>);out[<span class="number">4</span>]++;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;m);</span><br><span class="line">        <span class="comment">//cerr&lt;&lt;n&lt;&lt;" "&lt;&lt;m&lt;&lt;endl;</span></span><br><span class="line">        <span class="comment">// é™¤æ³•è½¬ä¸ºé€†å…ƒ+è´¹é©¬å°å®šç†</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,f[n]%p*fast(f[m],p<span class="number">-2</span>)%p*fast(f[n-m],p<span class="number">-2</span>)%p);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>Math</tag>
      </tags>
  </entry>
  <entry>
    <title>åŒºé—´ç´ æ•°</title>
    <url>/blog/%E5%8C%BA%E9%97%B4%E7%B4%A0%E6%95%B02/</url>
    <content><![CDATA[<p>ç»™ä½ ä¸¤ä¸ªæ•´æ•°a,bï¼Œæ±‚[a,b]åŒºé—´å†…ç´ æ•°çš„ä¸ªæ•°</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>è¾“å…¥ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ­£æ•´æ•°a,bã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>è¾“å‡ºä¸€ä¸ªæ•´æ•°ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>350874129179 350875129179</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>37682</p>
</blockquote>


<figure class="highlight c"><figcaption><span>qujiansushu.cpp</span><a href="/downloads/code/qujiansushu.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1000010</span>;</span><br><span class="line"><span class="keyword">int</span> mark[N+<span class="number">10</span>], pmark[N+<span class="number">10</span>];</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line">LL a, b;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">prime</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in">sqrt</span>(b);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">if</span>(!mark[i]){</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i+i;j&lt;=n;j+=i)</span><br><span class="line">                mark[j] = <span class="number">1</span>;</span><br><span class="line">            LL p;</span><br><span class="line">            <span class="keyword">if</span>(a%i==<span class="number">0</span>) p = a;</span><br><span class="line">            <span class="keyword">else</span> p = <span class="built_in">max</span>(<span class="number">2L</span>L, (a/i + <span class="number">1</span>) * i);</span><br><span class="line">            <span class="keyword">for</span>(; p&lt;=b; p+=i) pmark[p-a] = <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%lld%lld"</span>, &amp;a, &amp;b);</span><br><span class="line">    prime();</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=b-a;i++)</span><br><span class="line">        <span class="keyword">if</span>(pmark[i]==<span class="number">0</span>) sum++;</span><br><span class="line">    <span class="keyword">if</span>(a==<span class="number">1</span>) sum--;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, sum);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>Math</tag>
      </tags>
  </entry>
  <entry>
    <title>åŒºé—´å› å­</title>
    <url>/blog/%E5%8C%BA%E9%97%B4%E7%B4%A0%E6%95%B0%E5%92%8C/</url>
    <content><![CDATA[<p>ç»™å®šnä¸ªè¯¢é—®ï¼Œéœ€è¦è¾“å‡º[L,R]èŒƒå›´å†…æ¯ä¸ªæ•°çš„å› å­ä¸ªæ•°ä¹‹å’Œã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•°n,è¡¨ç¤ºè¯¢é—®æ•°é‡ã€‚<br>æŽ¥ä¸‹æ¥nè¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°Lå’ŒRã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯¹äºŽæ¯ä¸ªè¯¢é—®ï¼Œè¾“å‡ºç›¸åº”çš„ç»“æžœã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>2<br>10 55<br>33 101</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>208<br>365</p>
</blockquote>



<figure class="highlight c"><figcaption><span>qujianyinzi.cpp</span><a href="/downloads/code/qujianyinzi.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">2000010</span>;</span><br><span class="line"><span class="keyword">int</span> st[N+<span class="number">10</span>];</span><br><span class="line"><span class="keyword">int</span> sum[N+<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;i++) sum[i] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=N;i++){ <span class="comment">//O(nloglogN)</span></span><br><span class="line">        <span class="keyword">if</span>(!st[i]){</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i+i;j&lt;=N;j+=i) st[j] =<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;=N;j+=i){</span><br><span class="line">                <span class="keyword">int</span> t = j, c= <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span>(t%i==<span class="number">0</span>){</span><br><span class="line">                    c++, t/=i;</span><br><span class="line">                }</span><br><span class="line">                sum[j]*=(c+<span class="number">1</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;i++)</span><br><span class="line">        sum[i] += sum[i<span class="number">-1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n--){</span><br><span class="line">        <span class="keyword">int</span> L, R;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;L, &amp;R);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, sum[R] - sum[L<span class="number">-1</span>]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>Math</tag>
      </tags>
  </entry>
  <entry>
    <title>å¤šé‡èƒŒåŒ…</title>
    <url>/blog/%E5%A4%9A%E9%87%8D%E8%83%8C%E5%8C%85/</url>
    <content><![CDATA[<p>æœ‰ä¸€ä¸ªä½“ç§¯ä¸ºVçš„èƒŒåŒ…ï¼Œæœ‰mç§ç‰©å“ï¼Œæ¯ç§ç‰©å“æœ‰ä½“ç§¯å’Œä»·å€¼ï¼Œä¸”æ•°é‡ä¸€å®šã€‚æ±‚èƒŒåŒ…èƒ½è£…ä¸‹çš„æœ€å¤§ä»·å€¼ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°Vå’Œmã€‚<br>æŽ¥ä¸‹æ¥mè¡Œï¼Œæ¯è¡Œ3ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºç¬¬iç§ç‰©å“çš„æ•°é‡ã€ä½“ç§¯å’Œä»·å€¼ã€‚<br>V&lt;=10^4, m&lt;=500ï¼Œä¸ªæ•°ã€ä½“ç§¯ã€ä»·å€¼ä¸è¶…è¿‡1000ã€‚</p>
<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºèƒŒåŒ…èƒ½è£…ä¸‹çš„æœ€å¤§ä»·å€¼ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>10 4<br>2 3 2<br>2 4 3<br>1 2 2<br>4 5 3</p>
</blockquote>

<p>è¾“å‡º<br>8</p></blockquote>


<figure class="highlight c"><figcaption><span>duochongbeibao1.cpp</span><a href="/downloads/code/duochongbeibao1.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">510</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">10010</span>;</span><br><span class="line"><span class="keyword">int</span> A[N];</span><br><span class="line"><span class="keyword">int</span> m, V;</span><br><span class="line"><span class="keyword">int</span> dp[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;V, &amp;m);</span><br><span class="line">    <span class="keyword">int</span> x, y, z;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;x, &amp;y, &amp;z);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=V;j&gt;=<span class="number">0</span>;j--){</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;=x;k++)</span><br><span class="line">                <span class="keyword">if</span>(j&gt;=k*y)</span><br><span class="line">                    dp[j] = <span class="built_in">max</span>(dp[j], dp[j-k*y] + k*z);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[V]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>duochongbeibao2.cpp</span><a href="/downloads/code/duochongbeibao2.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">510</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">10010</span>;</span><br><span class="line"><span class="keyword">int</span> A[N];</span><br><span class="line"><span class="keyword">int</span> m, V;</span><br><span class="line"><span class="keyword">int</span> dp[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;V, &amp;m);</span><br><span class="line">    <span class="keyword">int</span> x, y, z;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;x, &amp;y, &amp;z);</span><br><span class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=x; j*=<span class="number">2</span>){</span><br><span class="line">            A[k++] = j;</span><br><span class="line">            x-=j;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(x) A[k++] = x;</span><br><span class="line"></span><br><span class="line"><span class="comment">// note: m must be at the outerloop</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> m=<span class="number">0</span>;m&lt;k;m++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=V;j&gt;=A[m]*y; j--){</span><br><span class="line">                dp[j] = <span class="built_in">max</span>(dp[j], dp[j-A[m]*y] + A[m]*z);</span><br><span class="line">            }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[V]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>duochongbeibao3.cpp</span><a href="/downloads/code/duochongbeibao3.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// dp[k*y+j] = max(dp[t*y+j] + (k-t)*z)</span></span><br><span class="line"><span class="comment">// dp[k*y+j] = max(dp[t*y+j] - t*z) + k*z</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">510</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">10010</span>;</span><br><span class="line"><span class="keyword">int</span> m, V;</span><br><span class="line"><span class="keyword">int</span> dp[M];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> cnt, val;</span><br><span class="line">}Q[M];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;V, &amp;m);</span><br><span class="line">    <span class="keyword">int</span> x, y, z;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;x, &amp;y, &amp;z);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;y;j++) {</span><br><span class="line">            <span class="keyword">int</span> L = <span class="number">0</span>, R = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k * y + j &lt;= V; k++) {</span><br><span class="line">                node tmp = (node){k, dp[k*y+j] - k*z}; <span class="comment">//easy to forget</span></span><br><span class="line">                <span class="keyword">while</span>(L&lt;=R &amp;&amp; Q[R].val&lt;=tmp.val) R--;</span><br><span class="line">                <span class="keyword">while</span>(L&lt;=R &amp;&amp; tmp.cnt - Q[L].cnt &gt; x ) L++;</span><br><span class="line">                Q[++R] = tmp;</span><br><span class="line">                dp[k*y+j] = <span class="built_in">max</span>(dp[k*y+j], Q[L].val + k*z);</span><br><span class="line"></span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[V]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>duochongbeibao3.5.cpp</span><a href="/downloads/code/duochongbeibao3.5.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100005</span>;</span><br><span class="line"><span class="keyword">int</span> dp[N][N];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> cnt, val;</span><br><span class="line">}Q[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> V, n, x, y, z;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;V&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;x, &amp;y, &amp;z);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;x;j++){</span><br><span class="line">            <span class="keyword">int</span> L = <span class="number">0</span>, R = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k*x+j&lt;=V; k++){</span><br><span class="line">                node tmp = (node){k,dp[i<span class="number">-1</span>][k*x+j] - k*y};</span><br><span class="line">                <span class="keyword">while</span>(R&gt;=L &amp;&amp; tmp.val &gt;= Q[R].val)R--;</span><br><span class="line">                <span class="keyword">while</span>(R&gt;=L &amp;&amp; tmp.cnt - Q[L].cnt&gt;z) L++;</span><br><span class="line">                Q[++R] = tmp;</span><br><span class="line">                dp[i][k*x+j] = Q[L].val + k*y;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=V;j++) dp[i][j] = <span class="built_in">max</span>(dp[i<span class="number">-1</span>][j], dp[i][j]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>duochongbeibao4.cpp</span><a href="/downloads/code/duochongbeibao4.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 10005</span></span><br><span class="line"><span class="keyword">int</span> Q[M],Q2[M],dp[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line"><span class="comment">//  dp[cur][k*d+i]-k*val[i] = Max(dp[!cur][j*d+i]-j*val[i]);</span></span><br><span class="line">    <span class="keyword">int</span> n,v;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;v,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,num,ct,val; i&lt;=n; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;num,&amp;ct,&amp;val);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;ct; j++) {</span><br><span class="line">            <span class="keyword">int</span> head = <span class="number">1</span>,tail = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k*ct+j&lt;=v; k++) {</span><br><span class="line">                <span class="keyword">int</span> res = dp[k*ct+j]-k*val;</span><br><span class="line">                <span class="keyword">while</span>(head &lt;= tail &amp;&amp; k-Q2[head] &gt; num) head ++;</span><br><span class="line">                <span class="keyword">while</span>(head &lt;= tail &amp;&amp; res &gt;= Q[tail]) tail--;</span><br><span class="line">                Q[++tail] = res,Q2[tail] = k;</span><br><span class="line">                dp[k*ct+j] = Q[head]+k*val;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[v]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
        <tag>monotone_queue</tag>
        <tag>optimization</tag>
      </tags>
  </entry>
  <entry>
    <title>éª‘å£«</title>
    <url>/blog/%E9%AA%91%E5%A3%AB/</url>
    <content><![CDATA[<p>åœ¨ä¸€ä¸ª5Ã—5çš„æ£‹ç›˜ä¸Šæœ‰12ä¸ªç™½è‰²çš„éª‘å£«å’Œ12ä¸ªé»‘è‰²çš„éª‘å£«ï¼Œ ä¸”æœ‰ä¸€ä¸ªç©ºä½ã€‚åœ¨ä»»ä½•æ—¶å€™ä¸€ä¸ªéª‘å£«éƒ½èƒ½æŒ‰ç…§éª‘<br>å£«çš„èµ°æ³•ï¼ˆå®ƒå¯ä»¥èµ°åˆ°å’Œå®ƒæ¨ªåæ ‡ç›¸å·®ä¸º1ï¼Œçºµåæ ‡ç›¸å·®ä¸º2æˆ–è€…æ¨ªåæ ‡ç›¸å·®ä¸º2ï¼Œçºµåæ ‡ç›¸å·®ä¸º1çš„æ ¼å­ï¼‰ç§»åŠ¨åˆ°ç©º<br>ä½ä¸Šã€‚ ç»™å®šä¸€ä¸ªåˆå§‹çš„æ£‹ç›˜ï¼Œæ€Žæ ·æ‰èƒ½ç»è¿‡ç§»åŠ¨å˜æˆå¦‚ä¸‹ç›®æ ‡æ£‹ç›˜ï¼š ä¸ºäº†ä½“çŽ°å‡ºéª‘å£«ç²¾ç¥žï¼Œä»–ä»¬å¿…é¡»ä»¥æœ€å°‘çš„æ­¥<br>æ•°å®Œæˆä»»åŠ¡ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œæœ‰ä¸€ä¸ªæ­£æ•´æ•°T()ï¼Œè¡¨ç¤ºä¸€å…±æœ‰Nç»„æ•°æ®ã€‚æŽ¥ä¸‹æ¥æœ‰Tä¸ª5Ã—5çš„çŸ©é˜µï¼Œ0è¡¨ç¤ºç™½è‰²éª‘å£«ï¼Œ1è¡¨ç¤ºé»‘è‰²éª‘<br>å£«ï¼Œ*è¡¨ç¤ºç©ºä½ã€‚ä¸¤ç»„æ•°æ®ä¹‹é—´æ²¡æœ‰ç©ºè¡Œã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯¹äºŽæ¯ç»„æ•°æ®éƒ½è¾“å‡ºä¸€è¡Œã€‚å¦‚æžœèƒ½åœ¨15æ­¥ä»¥å†…ï¼ˆåŒ…æ‹¬15æ­¥ï¼‰åˆ°è¾¾ç›®æ ‡çŠ¶æ€ï¼Œåˆ™è¾“å‡ºæ­¥æ•°ï¼Œå¦åˆ™è¾“å‡ºï¼1ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>2<br>10110<br>01<em>11<br>10111<br>01001<br>00000<br>01011<br>110</em>1<br>01110<br>01010<br>00100</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>7<br>-1</p>
</blockquote>


<figure class="highlight c"><figcaption><span>qishi.cpp</span><a href="/downloads/code/qishi.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> goal[<span class="number">5</span>][<span class="number">5</span>]= {</span><br><span class="line">        {<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>},</span><br><span class="line">        {<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>},</span><br><span class="line">        {<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>},</span><br><span class="line">        {<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>},</span><br><span class="line">        {<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>}</span><br><span class="line">};</span><br><span class="line"><span class="keyword">int</span> Map[<span class="number">5</span>][<span class="number">5</span>],T,pd;</span><br><span class="line"><span class="keyword">int</span> fx[<span class="number">8</span>]= {<span class="number">1</span>,<span class="number">-1</span>,<span class="number">2</span>,<span class="number">-2</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">2</span>,<span class="number">-2</span>};</span><br><span class="line"><span class="keyword">int</span> fy[<span class="number">8</span>]= {<span class="number">2</span>,<span class="number">2</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-2</span>,<span class="number">-2</span>,<span class="number">1</span>,<span class="number">1</span>};</span><br><span class="line"><span class="keyword">int</span> stx,sty;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">check</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> ret=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">5</span>; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;<span class="number">5</span>; j++)</span><br><span class="line">            <span class="keyword">if</span>(Map[i][j]!=goal[i][j]) ret++;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">IDA</span><span class="params">(<span class="keyword">int</span> left, <span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> h = check();</span><br><span class="line">    <span class="keyword">if</span>(!h) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="comment">//    if(h-1&gt;left) return false; //where * comes from, pruning procedure</span></span><br><span class="line">    <span class="keyword">if</span>(left==<span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">8</span>; i++) {</span><br><span class="line">        <span class="keyword">int</span> x1=x+fx[i];</span><br><span class="line">        <span class="keyword">int</span> y1=y+fy[i];</span><br><span class="line">        <span class="keyword">if</span>(x1&lt;<span class="number">0</span>||x1&gt;<span class="number">4</span>||y1&lt;<span class="number">0</span>||y1&gt;<span class="number">4</span>) <span class="keyword">continue</span>;</span><br><span class="line">        swap(Map[x1][y1],Map[x][y]);</span><br><span class="line">        <span class="keyword">if</span>(IDA(left<span class="number">-1</span>,x1, y1)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        swap(Map[x1][y1],Map[x][y]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line">    <span class="keyword">while</span>(T--) {</span><br><span class="line">        pd=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">5</span>; i++) {</span><br><span class="line">            <span class="keyword">char</span> s[<span class="number">10</span>];</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>,s);</span><br><span class="line"><span class="comment">//            printf("%s\n", s);</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;<span class="number">5</span>; j++) {</span><br><span class="line">                <span class="keyword">if</span>(s[j]-<span class="string">'0'</span>==<span class="number">0</span>) Map[i][j]=<span class="number">0</span>;</span><br><span class="line">                <span class="keyword">if</span>(s[j]-<span class="string">'0'</span>==<span class="number">1</span>) Map[i][j]=<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span>(s[j]==<span class="string">'*'</span>) Map[i][j]=<span class="number">2</span>,stx=i,sty=j;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"><span class="comment">//        for(int i=0;i&lt;5;i++){</span></span><br><span class="line"><span class="comment">//            for(int j=0;j&lt;5;j++)</span></span><br><span class="line"><span class="comment">//                printf("%d ", Map[i][j]);</span></span><br><span class="line"><span class="comment">//            printf("\n");</span></span><br><span class="line"><span class="comment">//        }</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">15</span>; i++)</span><br><span class="line">            <span class="keyword">if</span>(IDA(i,stx, sty)) {</span><br><span class="line">                pd=i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">        <span class="keyword">if</span>(pd) <span class="built_in">cout</span>&lt;&lt;pd&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="string">"-1"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>graph</tag>
        <tag>search</tag>
        <tag>IDA*</tag>
      </tags>
  </entry>
  <entry>
    <title>å…«æ•°ç </title>
    <url>/blog/%E5%85%AB%E6%95%B0%E7%A0%81/</url>
    <content><![CDATA[<p>å…«æ•°ç é—®é¢˜ï¼Œå°±æ˜¯åœ¨ä¸€ä¸ªå«æœ‰1-8å’Œxçš„3*3æ–¹æ ¼ä¸­ï¼Œæ¯æ¬¡å¯ä»¥å°†xä¸Žå…¶ç›¸é‚»ä½ç½®çš„æ•°å­—äº¤æ¢ã€‚ä½¿å¾—æœ€åŽå˜æˆ</p>
<p>1 2 3<br>4 5 6<br>7 8 x</p>
<p>ä½ è¦åšçš„å°±æ˜¯å®žçŽ°å…«æ•°ç çš„è§£å†³æ–¹æ¡ˆï¼Œå¹¶è¦æ±‚äº¤æ¢æ¬¡æ•°æœ€å°‘</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>è¾“å…¥ä¸€ä¸ª3*3çš„çŸ©é˜µï¼ŒåŒ…å«1-8å’Œxã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>è¾“å‡ºéœ€è¦ç§»åŠ¨çš„æ­¥æ•°<br>å¦‚æžœä¸å¯èƒ½å®žçŽ°ï¼Œè¾“å‡º-1ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>2  3  4<br>1  5  x<br>7  6  8</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>19</p>
</blockquote>


<figure class="highlight c"><figcaption><span>bashuma_bfs.cpp</span><a href="/downloads/code/bashuma_bfs.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">400010</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> mp[<span class="number">3</span>][<span class="number">3</span>];</span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">step</span>;</span><br><span class="line">    <span class="keyword">int</span> h;</span><br><span class="line">}Q[N], now;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> F[<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// åº·æ‹“å±•å¼€</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Hash</span><span class="params">(<span class="keyword">int</span> A[<span class="number">3</span>][<span class="number">3</span>])</span></span>{</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> s[<span class="number">10</span>]; <span class="keyword">int</span> k=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++) s[k++] = A[i][j];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> t = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;k;i++){</span><br><span class="line">        t = s[i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;i;j++)</span><br><span class="line">            <span class="keyword">if</span>(s[j] &lt; s[i]) t--;</span><br><span class="line">        res += (t<span class="number">-1</span>) * F[<span class="number">8</span>-i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> st[N];</span><br><span class="line"><span class="keyword">int</span> rx[] = {<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>};</span><br><span class="line"><span class="keyword">int</span> ry[] = {<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> x&gt;=<span class="number">0</span> &amp;&amp; x &lt;<span class="number">3</span> &amp;&amp; y&gt;=<span class="number">0</span> &amp;&amp; y&lt;<span class="number">3</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bfs</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> L = <span class="number">0</span>, R = <span class="number">-1</span>;</span><br><span class="line">    now.<span class="built_in">step</span> = <span class="number">0</span>;</span><br><span class="line">    Q[++R] = now;</span><br><span class="line">    <span class="keyword">int</span> h;</span><br><span class="line">    st[h = Hash(now.mp)] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(h==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(L&lt;=R){</span><br><span class="line">        now = Q[L++];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++){</span><br><span class="line">            <span class="keyword">if</span> (check(now.x + rx[i], now.y + ry[i])){</span><br><span class="line">                swap(now.mp[now.x + rx[i]][now.y + ry[i]], now.mp[now.x][now.y]);</span><br><span class="line">                now.x += rx[i], now.y += ry[i];</span><br><span class="line">                now.<span class="built_in">step</span> ++;</span><br><span class="line">                <span class="keyword">int</span> h = Hash(now.mp);</span><br><span class="line">                <span class="keyword">if</span>(h==<span class="number">0</span>) <span class="keyword">return</span> now.<span class="built_in">step</span>;</span><br><span class="line">                <span class="keyword">if</span>(!st[h]){</span><br><span class="line">                    st[h] = <span class="number">1</span>;</span><br><span class="line">                    Q[++R] = now;</span><br><span class="line">                }</span><br><span class="line">                now.x -= rx[i], now.y -= ry[i], now.<span class="built_in">step</span>--;</span><br><span class="line">                swap(now.mp[now.x + rx[i]][now.y + ry[i]], now.mp[now.x][now.y]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    F[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">10</span>;i++) F[i] = F[i<span class="number">-1</span>] * i;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> s[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++) {</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>, s);</span><br><span class="line">            <span class="keyword">if</span> (s[<span class="number">0</span>] == <span class="string">'x'</span>) {</span><br><span class="line">                now.x = i, now.y = j;</span><br><span class="line">                s[<span class="number">0</span>] = <span class="string">'9'</span>;</span><br><span class="line">            }</span><br><span class="line">            now.mp[i][j] = s[<span class="number">0</span>] - <span class="string">'0'</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, bfs());</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>bashuma_ASTAR.cpp</span><a href="/downloads/code/bashuma_ASTAR.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">400010</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> mp[<span class="number">3</span>][<span class="number">3</span>];</span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">step</span>, h;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> node&amp;A) <span class="keyword">const</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">step</span>+h &gt; A.<span class="built_in">step</span> + A.h;</span><br><span class="line">    }</span><br><span class="line">}now;</span><br><span class="line"></span><br><span class="line">priority_queue&lt;node&gt; Q;</span><br><span class="line"><span class="keyword">int</span> F[<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// åº·æ‹“å±•å¼€</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Hash</span><span class="params">(<span class="keyword">int</span> A[<span class="number">3</span>][<span class="number">3</span>])</span></span>{</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> s[<span class="number">10</span>]; <span class="keyword">int</span> k=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++) s[k++] = A[i][j];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> t = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;k;i++){</span><br><span class="line">        t = s[i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;i;j++)</span><br><span class="line">            <span class="keyword">if</span>(s[j] &lt; s[i]) t--;</span><br><span class="line">        res += (t<span class="number">-1</span>) * F[<span class="number">8</span>-i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> st[N];</span><br><span class="line"><span class="keyword">int</span> rx[] = {<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>};</span><br><span class="line"><span class="keyword">int</span> ry[] = {<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> x&gt;=<span class="number">0</span> &amp;&amp; x &lt;<span class="number">3</span> &amp;&amp; y&gt;=<span class="number">0</span> &amp;&amp; y&lt;<span class="number">3</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">H</span><span class="params">(<span class="keyword">int</span> A[<span class="number">3</span>][<span class="number">3</span>])</span></span>{</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++){</span><br><span class="line">            <span class="keyword">if</span>(A[i][j] == <span class="number">9</span>) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">int</span> x = (A[i][j] - <span class="number">1</span>) /<span class="number">3</span>;</span><br><span class="line">            <span class="keyword">int</span> y = (A[i][j] - <span class="number">1</span>) %<span class="number">3</span>;</span><br><span class="line">            res += <span class="built_in">abs</span>(i-x) + <span class="built_in">abs</span>(j-y);</span><br><span class="line">        }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bfs</span><span class="params">()</span></span>{</span><br><span class="line">    now.<span class="built_in">step</span> = <span class="number">0</span>; now.h = H(now.mp);</span><br><span class="line">    Q.push(now);</span><br><span class="line">    <span class="keyword">int</span> h = Hash(now.mp);</span><br><span class="line">    <span class="keyword">if</span>(h==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(!Q.empty()){</span><br><span class="line">        now = Q.top(); Q.pop();</span><br><span class="line">        <span class="keyword">int</span> h = Hash(now.mp);</span><br><span class="line">        <span class="keyword">if</span>(h==<span class="number">0</span>) <span class="keyword">return</span> now.<span class="built_in">step</span>;  <span class="comment">//å¼¹å‡ºæ¥æ—¶æœ€ä¼˜</span></span><br><span class="line">        <span class="keyword">if</span>(st[h]) <span class="keyword">continue</span>;  <span class="comment">//ç±»æ¯”dijstra</span></span><br><span class="line">        st[h] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++){</span><br><span class="line">            <span class="keyword">if</span> (check(now.x + rx[i], now.y + ry[i])){</span><br><span class="line">                swap(now.mp[now.x + rx[i]][now.y + ry[i]], now.mp[now.x][now.y]);</span><br><span class="line">                now.x += rx[i], now.y += ry[i]; now.<span class="built_in">step</span> ++; now.h = H(now.mp);</span><br><span class="line">                Q.push(now); <span class="comment">// no if before entering priority_queue</span></span><br><span class="line">                now.x -= rx[i], now.y -= ry[i], now.<span class="built_in">step</span>--;</span><br><span class="line">                swap(now.mp[now.x + rx[i]][now.y + ry[i]], now.mp[now.x][now.y]); now.h = H(now.mp);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    F[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">10</span>;i++) F[i] = F[i<span class="number">-1</span>] * i;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> s[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++) {</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>, s);</span><br><span class="line">            <span class="keyword">if</span> (s[<span class="number">0</span>] == <span class="string">'x'</span>) {</span><br><span class="line">                now.x = i, now.y = j;</span><br><span class="line">                s[<span class="number">0</span>] = <span class="string">'9'</span>;</span><br><span class="line">            }</span><br><span class="line">            now.mp[i][j] = s[<span class="number">0</span>] - <span class="string">'0'</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, bfs());</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>BFS</tag>
        <tag>Search</tag>
        <tag>A*</tag>
      </tags>
  </entry>
  <entry>
    <title>è¿‡å±±è½¦</title>
    <url>/blog/%E8%BF%87%E5%B1%B1%E8%BD%A6/</url>
    <content><![CDATA[<p>ç»™å®šnä¸ªç”·ç”Ÿå’Œmä¸ªå¥³ç”Ÿï¼Œåè¿‡å±±è½¦ã€‚è¿‡å±±è½¦æ¯æŽ’åªæœ‰ä¸¤ä¸ªä½ç½®ï¼Œä¸”åªèƒ½æ˜¯ä¸€ç”·ä¸€å¥³ã€‚å·²ç»ä¸€äº›æƒ³ååœ¨ä¸€èµ·çš„æ„æ„¿ã€‚<br>æ±‚æœ€å¤šå¯ä»¥åå¤šå°‘æŽ’ï¼Ÿ</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>è¾“å…¥æ•°æ®çš„ç¬¬ä¸€è¡Œæ˜¯ä¸‰ä¸ªæ•´æ•°K , M , Nï¼Œåˆ†åˆ«è¡¨ç¤ºå¯èƒ½çš„ç»„åˆæ•°ç›®ï¼Œå¥³ç”Ÿçš„äººæ•°ï¼Œç”·ç”Ÿçš„äººæ•°ã€‚K&lt;=1000ã€‚<br>N, M&lt;=500.æŽ¥ä¸‹æ¥çš„Kè¡Œï¼Œæ¯è¡Œæœ‰ä¸¤ä¸ªæ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºå¥³ç”ŸA_iæ„¿æ„å’Œç”·ç”ŸB_jåä¸€èµ·ã€‚æœ€åŽä¸€ä¸ª0ç»“æŸè¾“å…¥ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯¹äºŽæ¯ç»„æ•°æ®ï¼Œè¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå¯ä»¥åä¸Šè¿‡å±±è½¦çš„æœ€å¤šç»„åˆæ•°ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>6 3 3<br>1 1<br>1 2<br>1 3<br>2 1<br>2 3<br>3 1<br>0</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>3</p>
</blockquote>


<figure class="highlight c"><figcaption><span>guoshanche.cpp</span><a href="/downloads/code/guoshanche.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">510</span>;</span><br><span class="line"><span class="keyword">int</span> mp[N][N];</span><br><span class="line"><span class="keyword">int</span> st[N];</span><br><span class="line"><span class="keyword">int</span> a[N], b[N];</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="keyword">int</span> ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">sp</span><span class="params">(<span class="keyword">int</span> v)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="keyword">if</span>(mp[v][i] &amp;&amp; !st[i]){</span><br><span class="line">            st[i] = <span class="number">1</span>; <span class="comment">//ç±»ä¼¼äºŽå‡æž</span></span><br><span class="line">            <span class="keyword">if</span>(b[i]==<span class="number">-1</span> || sp(b[i])){</span><br><span class="line">                b[i] = v;</span><br><span class="line">                a[v] = i;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>{</span><br><span class="line">    ans = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(a, <span class="number">-1</span>, <span class="keyword">sizeof</span> a);</span><br><span class="line">    <span class="built_in">memset</span>(b, <span class="number">-1</span>, <span class="keyword">sizeof</span> b);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">if</span>(a[i]==<span class="number">-1</span>){</span><br><span class="line">            <span class="built_in">memset</span>(st, <span class="number">0</span>, <span class="keyword">sizeof</span> st); <span class="comment">//å¯¹æ¯ä¸€iï¼Œéƒ½è¦åšä¸€æ¬¡</span></span><br><span class="line">            <span class="keyword">if</span>(sp(i)) ans ++;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> k;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;k) &amp;&amp; k){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">        <span class="keyword">int</span> a, b;</span><br><span class="line">        <span class="built_in">memset</span>(mp, <span class="number">0</span>, <span class="keyword">sizeof</span> mp);</span><br><span class="line">        <span class="keyword">while</span>(k--){</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">            mp[a][b] = <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">        solve();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>graph</tag>
        <tag>matching</tag>
        <tag>hungarian</tag>
      </tags>
  </entry>
  <entry>
    <title>Theremustbesomethingwrong</title>
    <url>/blog/Theremustbesomethingwrong/</url>
    <content><![CDATA[<p>é¾™é¾™å¾—çŸ¥2020å¹´ä¸­å›½å°†æœ‰2000ä¸‡è‡³4000ä¸‡ç”·äººå¨¶ä¸åˆ°è€å©†åŽã€‚ä»–æ‰“ç®—å¥½å¥½è°ƒæŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯äººä»¬çš„æ„Ÿæƒ…å‡ºçŽ°é—®é¢˜ã€‚ä»–å¯¹nä¸ªäººè¿›è¡Œè°ƒæŸ¥ï¼Œå¾—åˆ°mæ¡ä¿¡æ¯ï¼Œæ¯æ¡ä¿¡æ¯è¡¨ç¤ºä¸ºæŸä¸¤äººæ›¾ç»æ˜¯æƒ…ä¾£ã€‚ç”±äºŽä»–ä¸çŸ¥é“è¿™äº›äººçš„æ€§åˆ«ï¼Œè¯·ä½ å¸®ä»–åˆ¤æ–­ä¸€ä¸‹ï¼Œæœ‰æ²¡æœ‰åŒæ€§æ˜¯æƒ…ä¾£çš„æƒ…å†µ?</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°nå’Œmã€‚<br>æŽ¥ä¸‹æ¥mè¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°aå’Œbï¼Œè¡¨ç¤ºç¼–å·ä¸ºaçš„äººå’Œç¼–å·ä¸ºbçš„äººï¼Œæ›¾ç»æ˜¯æƒ…ä¾£,aâ‰ bã€‚<br>å¯¹äºŽ100%çš„æ•°æ®ï¼Œnçš„èŒƒå›´[2,100000],mçš„èŒƒå›´[0,100000]ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¦‚æžœä¸€åˆ‡æ­£å¸¸è¾“å‡ºï¼šitâ€™s your own problem<br>å¦‚æžœå‡ºçŽ°åŒæ€§æ˜¯æƒ…ä¾£çš„æƒ…å†µè¾“å‡ºï¼šthere are must be something wrong</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>4 4<br>1 2<br>2 3<br>3 4<br>4 1</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>itâ€™s your own problem</p>
</blockquote>

<p>ç¤ºä¾‹2<br>è¾“å…¥</p>
<blockquote><p>3 3<br>1 2<br>1 3<br>2 3</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>there are must be something wrong</p>
</blockquote>


<figure class="highlight c"><figcaption><span>coloring.cpp</span><a href="/downloads/code/coloring.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;edges[N];</span><br><span class="line"><span class="keyword">int</span> colors[N];</span><br><span class="line"><span class="keyword">bool</span> ff = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> c)</span></span>{</span><br><span class="line">    colors[x] = c;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edges[x][i];</span><br><span class="line">        <span class="keyword">if</span>(colors[x]==colors[y]){</span><br><span class="line">            ff = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }<span class="keyword">else</span> <span class="keyword">if</span>(colors[y]==<span class="number">0</span>){</span><br><span class="line">            dfs(y, -c);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        edges[a].push_back(b);</span><br><span class="line">        edges[b].push_back(a);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="built_in">memset</span>(colors, <span class="number">0</span>, <span class="keyword">sizeof</span>(colors));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">if</span>(colors[i]==<span class="number">0</span>) dfs(i, <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(ff) <span class="built_in">puts</span>(<span class="string">"it's your own problem"</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">"there are must be something wrong"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>graph</tag>
        <tag>coloring</tag>
      </tags>
  </entry>
  <entry>
    <title>çŒæ°´</title>
    <url>/blog/%E7%81%8C%E6%B0%B4/</url>
    <content><![CDATA[<p>Farmer Johnå·²ç»å†³å®šæŠŠæ°´çŒåˆ°ä»–çš„n(1â‰¤nâ‰¤300)å—å†œç”°ï¼Œå†œç”°è¢«æ•°å­—1åˆ°næ ‡è®°ã€‚æŠŠä¸€å—åœŸåœ°è¿›è¡ŒçŒæ°´æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä»Žå…¶ä»–å†œç”°é¥®æ°´ï¼Œæˆ–è€…è¿™å—åœŸåœ°å»ºé€ æ°´åº“ã€‚ å»ºé€ ä¸€ä¸ªæ°´åº“éœ€è¦èŠ±è´¹wi(1â‰¤wiâ‰¤105),è¿žæŽ¥ä¸¤å—åœŸåœ°éœ€è¦èŠ±è´¹pijã€‚ è®¡ç®—Farmer Johnæ‰€éœ€çš„æœ€å°‘ä»£ä»·ã€‚<br>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œï¼šä¸€ä¸ªæ•°nã€‚</p>
<p>ç¬¬äºŒè¡Œåˆ°ç¬¬n+1è¡Œï¼šç¬¬i+1è¡Œå«æœ‰ä¸€ä¸ªæ•°wiã€‚</p>
<p>ç¬¬n+2è¡Œåˆ°ç¬¬2âˆ—n+1è¡Œï¼šç¬¬n+1+iè¡Œæœ‰nä¸ªè¢«ç©ºæ ¼åˆ†å¼€çš„æ•°ï¼Œç¬¬jä¸ªæ•°ä»£è¡¨pijã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>ä¸€ä¸ªå•ç‹¬çš„æ•°ä»£è¡¨æœ€å°ä»£ä»·.</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>4<br>5<br>4<br>4<br>3<br>0 2 2 2<br>2 0 3 3<br>2 3 0 4<br>2 3 4 0</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>9</p>
</blockquote>



<figure class="highlight c"><figcaption><span>guanshui.cpp</span><a href="/downloads/code/guanshui.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">310</span>;</span><br><span class="line"><span class="keyword">int</span> fa[N];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>{</span></span><br><span class="line">    <span class="keyword">int</span> a, b, v;</span><br><span class="line">}edges[N*N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> tot;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(x==fa[x]) <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">return</span> fa[x] = <span class="built_in">find</span>(fa[x]);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(Edge &amp;a, Edge&amp;b)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> a.v &lt; b.v;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">int</span> val;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;val);</span><br><span class="line">        edges[++tot].a = <span class="number">0</span>, edges[tot].b = i, edges[tot].v = val;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++){</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;val);</span><br><span class="line">            <span class="keyword">if</span>(i&lt;j)</span><br><span class="line">                edges[++tot].a= i, edges[tot].b = j, edges[tot].v = val;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=n;i++) fa[i] = i;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    sort(edges+<span class="number">1</span>, edges+tot+<span class="number">1</span>, cmp);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=tot;i++){</span><br><span class="line">        <span class="keyword">int</span> a = <span class="built_in">find</span>(edges[i].a);</span><br><span class="line">        <span class="keyword">int</span> b = <span class="built_in">find</span>(edges[i].b);</span><br><span class="line">        <span class="keyword">if</span>(a!=b) fa[a] = b, ans += edges[i].v;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>graph</tag>
        <tag>kruskal</tag>
      </tags>
  </entry>
  <entry>
    <title>æ˜‚è´µçš„è˜ç¤¼</title>
    <url>/blog/%E6%98%82%E8%B4%B5%E7%9A%84%E8%81%98%E7%A4%BC/</url>
    <content><![CDATA[<p>å¹´è½»çš„æŽ¢é™©å®¶æ¥åˆ°äº†ä¸€ä¸ªå°ç¬¬å®‰éƒ¨è½é‡Œã€‚åœ¨é‚£é‡Œä»–å’Œé…‹é•¿çš„å¥³å„¿ç›¸çˆ±äº†ï¼ŒäºŽæ˜¯ä¾¿å‘é…‹é•¿åŽ»æ±‚äº²ã€‚é…‹é•¿è¦ä»–ç”¨10000ä¸ªé‡‘å¸ä½œä¸ºè˜ç¤¼æ‰ç­”åº”æŠŠå¥³å„¿å«ç»™ä»–ã€‚æŽ¢é™©å®¶æ‹¿ä¸å‡ºè¿™ä¹ˆå¤šé‡‘å¸ï¼Œä¾¿è¯·æ±‚é…‹é•¿é™ä½Žè¦æ±‚ã€‚é…‹é•¿è¯´ï¼šâ€å—¯ï¼Œå¦‚æžœä½ èƒ½å¤Ÿæ›¿æˆ‘å¼„åˆ°å¤§ç¥­å¸çš„çš®è¢„ï¼Œæˆ‘å¯ä»¥åªè¦8000é‡‘å¸ã€‚å¦‚æžœä½ èƒ½å¤Ÿå¼„æ¥ä»–çš„æ°´æ™¶çƒï¼Œé‚£ä¹ˆåªè¦5000é‡‘å¸å°±è¡Œäº†ã€‚â€æŽ¢é™©å®¶å°±è·‘åˆ°å¤§ç¥­å¸é‚£é‡Œï¼Œå‘ä»–è¦æ±‚çš®è¢„æˆ–æ°´æ™¶çƒï¼Œå¤§ç¥­å¸è¦ä»–ç”¨é‡‘å¸æ¥æ¢ï¼Œæˆ–è€…æ›¿ä»–å¼„æ¥å…¶ä»–çš„ä¸œè¥¿ï¼Œä»–å¯ä»¥é™ä½Žä»·æ ¼ã€‚æŽ¢é™©å®¶äºŽæ˜¯åˆè·‘åˆ°å…¶ä»–åœ°æ–¹ï¼Œå…¶ä»–äººä¹Ÿæå‡ºäº†ç±»ä¼¼çš„è¦æ±‚ï¼Œæˆ–è€…ç›´æŽ¥ç”¨é‡‘å¸æ¢ï¼Œæˆ–è€…æ‰¾åˆ°å…¶ä»–ä¸œè¥¿å°±å¯ä»¥é™ä½Žä»·æ ¼ã€‚ä¸è¿‡æŽ¢é™©å®¶æ²¡å¿…è¦ç”¨å¤šæ ·ä¸œè¥¿åŽ»æ¢ä¸€æ ·ä¸œè¥¿ï¼Œå› ä¸ºä¸ä¼šå¾—åˆ°æ›´ä½Žçš„ä»·æ ¼ã€‚æŽ¢é™©å®¶çŽ°åœ¨å¾ˆéœ€è¦ä½ çš„å¸®å¿™ï¼Œè®©ä»–ç”¨æœ€å°‘çš„é‡‘å¸å¨¶åˆ°è‡ªå·±çš„å¿ƒä¸Šäººã€‚å¦å¤–ä»–è¦å‘Šè¯‰ä½ çš„æ˜¯ï¼Œåœ¨è¿™ä¸ªéƒ¨è½é‡Œï¼Œç­‰çº§è§‚å¿µååˆ†æ£®ä¸¥ã€‚åœ°ä½å·®è·è¶…è¿‡ä¸€å®šé™åˆ¶çš„ä¸¤ä¸ªäººä¹‹é—´ä¸ä¼šè¿›è¡Œä»»ä½•å½¢å¼çš„ç›´æŽ¥æŽ¥è§¦ï¼ŒåŒ…æ‹¬äº¤æ˜“ã€‚ä»–æ˜¯ä¸€ä¸ªå¤–æ¥äººï¼Œæ‰€ä»¥å¯ä»¥ä¸å—è¿™äº›é™åˆ¶ã€‚ä½†æ˜¯å¦‚æžœä»–å’ŒæŸä¸ªåœ°ä½è¾ƒä½Žçš„äººè¿›è¡Œäº†äº¤æ˜“ï¼Œåœ°ä½è¾ƒé«˜çš„çš„äººä¸ä¼šå†å’Œä»–äº¤æ˜“ï¼Œä»–ä»¬è®¤ä¸ºè¿™æ ·ç­‰äºŽæ˜¯é—´æŽ¥æŽ¥è§¦ï¼Œåè¿‡æ¥ä¹Ÿä¸€æ ·ã€‚å› æ­¤ä½ éœ€è¦åœ¨è€ƒè™‘æ‰€æœ‰çš„æƒ…å†µä»¥åŽç»™ä»–æä¾›ä¸€ä¸ªæœ€å¥½çš„æ–¹æ¡ˆã€‚<br>ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬æŠŠæ‰€æœ‰çš„ç‰©å“ä»Ž1å¼€å§‹è¿›è¡Œç¼–å·ï¼Œé…‹é•¿çš„å…è¯ºä¹Ÿçœ‹ä½œä¸€ä¸ªç‰©å“ï¼Œå¹¶ä¸”ç¼–å·æ€»æ˜¯1ã€‚æ¯ä¸ªç‰©å“éƒ½æœ‰å¯¹åº”çš„ä»·æ ¼Pï¼Œä¸»äººçš„åœ°ä½ç­‰çº§Lï¼Œä»¥åŠä¸€ç³»åˆ—çš„æ›¿ä»£å“Tiå’Œè¯¥æ›¿ä»£å“æ‰€å¯¹åº”çš„â€ä¼˜æƒ â€Viã€‚å¦‚æžœä¸¤äººåœ°ä½ç­‰çº§å·®è·è¶…è¿‡äº†Mï¼Œå°±ä¸èƒ½â€é—´æŽ¥äº¤æ˜“â€ã€‚ä½ å¿…é¡»æ ¹æ®è¿™äº›æ•°æ®æ¥è®¡ç®—å‡ºæŽ¢é™©å®¶æœ€å°‘éœ€è¦å¤šå°‘é‡‘å¸æ‰èƒ½å¨¶åˆ°é…‹é•¿çš„å¥³å„¿ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>è¾“å…¥ç¬¬ä¸€è¡Œæ˜¯ä¸¤ä¸ªæ•´æ•°Mï¼ŒNï¼Œä¾æ¬¡è¡¨ç¤ºåœ°ä½ç­‰çº§å·®è·é™åˆ¶å’Œç‰©å“çš„æ€»æ•°ã€‚æŽ¥ä¸‹æ¥æŒ‰ç…§ç¼–å·ä»Žå°åˆ°å¤§ä¾æ¬¡ç»™å‡ºäº†Nä¸ªç‰©å“çš„æè¿°ã€‚æ¯ä¸ªç‰©å“çš„æè¿°å¼€å¤´æ˜¯ä¸‰ä¸ªéžè´Ÿæ•´æ•°Pã€Lã€Xï¼ˆX &lt; Nï¼‰ï¼Œä¾æ¬¡è¡¨ç¤ºè¯¥ç‰©å“çš„ä»·æ ¼ã€ä¸»äººçš„åœ°ä½ç­‰çº§å’Œæ›¿ä»£å“æ€»æ•°ã€‚æŽ¥ä¸‹æ¥Xè¡Œæ¯è¡ŒåŒ…æ‹¬ä¸¤ä¸ªæ•´æ•°Tå’ŒVï¼Œåˆ†åˆ«è¡¨ç¤ºæ›¿ä»£å“çš„ç¼–å·å’Œâ€ä¼˜æƒ ä»·æ ¼â€ã€‚å¯¹äºŽ100%çš„æ•°æ®ï¼ŒNâˆˆ[1,100],Mâˆˆ[1,100].</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>è¾“å‡ºæœ€å°‘éœ€è¦çš„é‡‘å¸æ•°ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>1 4<br>10000 3 2<br>2 8000<br>3 5000<br>1000 2 1<br>4 200<br>3000 2 1<br>4 200<br>50 2 0</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>5250</p>
</blockquote>



<figure class="highlight c"><figcaption><span>angguipinli.cpp</span><a href="/downloads/code/angguipinli.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">110</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> level[N];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> to, v;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Node &amp;A) <span class="keyword">const</span>{ <span class="comment">//å°æ ¹å †</span></span><br><span class="line">        <span class="keyword">return</span> v &gt; A.v;</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt;edges[N];</span><br><span class="line">priority_queue&lt;Node&gt; Q;</span><br><span class="line"><span class="keyword">int</span> dis[N], st[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ans = <span class="number">1e9</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Node in Q is different from node used in input. Q stores (index, dis[index])</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dijstra</span><span class="params">(<span class="keyword">int</span> L)</span></span>{ <span class="comment">//[L, L+m]</span></span><br><span class="line">    <span class="built_in">memset</span>(dis, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> dis);</span><br><span class="line">    <span class="built_in">memset</span>(st, <span class="number">0</span>, <span class="keyword">sizeof</span> st);</span><br><span class="line">    dis[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    Q.push({<span class="number">0</span>, <span class="number">0</span>});</span><br><span class="line">    <span class="keyword">while</span>(!Q.empty()){</span><br><span class="line">        Node tmp = Q.top();Q.pop();</span><br><span class="line">        <span class="keyword">int</span> k = tmp.to;</span><br><span class="line">        <span class="keyword">if</span>(st[k]) <span class="keyword">continue</span>;</span><br><span class="line">        st[k] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[k].<span class="built_in">size</span>();i++){</span><br><span class="line">            <span class="keyword">int</span> y = edges[k][i].to;</span><br><span class="line">            <span class="keyword">int</span> v = edges[k][i].v;</span><br><span class="line">            <span class="keyword">if</span>(level[y]&lt;L || level[y] &gt; L+m) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(dis[y] &gt; dis[k] + v){</span><br><span class="line">                dis[y] = dis[k] + v;</span><br><span class="line">                Q.push({y, dis[y]});</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    ans = <span class="built_in">min</span>(ans, dis[<span class="number">1</span>]);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;m, &amp;n);</span><br><span class="line">    <span class="keyword">int</span> x, k, y;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){ <span class="comment">//è¯¥ç‰©å“ç¼–å·ä¸ºi</span></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;x, &amp;level[i], &amp;k);</span><br><span class="line">        edges[<span class="number">0</span>].push_back({i, x}); <span class="comment">//ç¼–å·ï¼Œ ä»·æ ¼</span></span><br><span class="line">        <span class="keyword">while</span>(k--){</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;y, &amp;x);</span><br><span class="line">            edges[y].push_back({i, x}); <span class="comment">// æ›¿ä»£å“xåˆ°target iæ’å…¥ä»·æ ¼ä¸ºyçš„è¾¹</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">100</span>;i++){</span><br><span class="line">        Dijstra(i);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>graph</tag>
        <tag>dijstra</tag>
      </tags>
  </entry>
  <entry>
    <title>æ ‘é“¾å‰–åˆ†</title>
    <url>/blog/%E6%A0%91%E9%93%BE%E5%89%96%E5%88%86/</url>
    <content><![CDATA[<p>ä¸¤æ¬¡dfsï¼Œ ç¬¬ä¸€æ¬¡æ±‚å‡ºson[x], å³é‡å„¿å­çš„ç¼–å·ï¼› ç¬¬äºŒæ¬¡æ±‚å‡ºtop[x], å³xæ‰€åœ¨é‡é“¾çš„æ ¹<br>ç»“è®ºï¼Œ æ¯ä¸ªç‚¹æœ€å¤šè·³lognæ¡é‡é“¾ï¼Œå°±å¯ä»¥åˆ°è¾¾æ ‘çš„æ ¹</p>
<p>ç”¨æ ‘é“¾å‰–åˆ†å¯ä»¥æ±‚LCA</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>nä»£è¡¨ç‚¹çš„ä¸ªæ•°<br>n-1æ¡è¾¹</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>i, son[i], top[i]</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>14 1<br>1 2<br>1 3<br>1 4<br>2 5<br>2 6<br>6 11<br>6 12<br>3 7<br>4 8<br>4 9<br>4 10<br>9 13<br>13 14<br>8 14 // m</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>1 4 1<br>2 6 2<br>3 7 3<br>4 9 1<br>5 0 5<br>6 11 2<br>7 0 3<br>8 0 8<br>9 13 1<br>10 0 10<br>11 0 2<br>12 0 12<br>13 14 1<br>14 0 1<br>4</p>
</blockquote>


<img src="/downloads/imgs/shulian.png" class="example" title="title exg" alt="alt exg">

<figure class="highlight c"><figcaption><span>shulian.cpp</span><a href="/downloads/code/shulian.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;edges[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> fa[N], dep[N], son[N], top[N], sz[N];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="comment">// get son vector</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f, <span class="keyword">int</span> d)</span></span>{</span><br><span class="line">    fa[x] = f, dep[x] = d, sz[x] = <span class="number">1</span>, son[x] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edges[x][i];</span><br><span class="line">        <span class="keyword">if</span>(y==f) <span class="keyword">continue</span>;</span><br><span class="line">        dfs(y, x, d+<span class="number">1</span>);</span><br><span class="line">        sz[x] += sz[y];</span><br><span class="line">        <span class="keyword">if</span>(sz[son[x]] &lt; sz[y]) son[x] = y;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// get top vector</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs2</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f, <span class="keyword">int</span> tp)</span></span>{</span><br><span class="line">    top[x] = tp; ID[x] = ++tot;</span><br><span class="line">    <span class="keyword">if</span>(son[x]) dfs2(son[x], x, tp);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edges[x][i];</span><br><span class="line">        <span class="keyword">if</span>(y==f || y == son[x]) <span class="keyword">continue</span>;</span><br><span class="line">        dfs2(y, x, y);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// aå’Œbèµ°å‘ä¸€æ¡é‡é“¾</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">LCA</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>{</span><br><span class="line">    <span class="keyword">while</span>(top[a]!=top[b]){</span><br><span class="line">        <span class="keyword">if</span>(dep[top[a]] &gt; dep[top[b]]){</span><br><span class="line">            <span class="comment">// ID[top[a]], ID[a] æ˜¯ä¸€æ®µè¿žç»­çš„åŒºé—´</span></span><br><span class="line">            a = fa[top[a]];</span><br><span class="line">        }<span class="keyword">else</span> b = fa[top[b]];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> dep[a] &gt; dep[b] ? b: a;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        edges[a].push_back(b);</span><br><span class="line">        edges[b].push_back(a);</span><br><span class="line">    }</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">    dfs2(<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d %d %d\n"</span>, i, son[i], top[i]);</span><br><span class="line">    }</span><br><span class="line"><span class="comment">// 8 jumps to 8, fa[8] = 4Å’</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, LCA(a, b));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>tree</tag>
      </tags>
  </entry>
  <entry>
    <title>åŠ¨æ€å·®åˆ†</title>
    <url>/blog/%E5%8A%A8%E6%80%81%E5%B7%AE%E5%88%86/</url>
    <content><![CDATA[<p>æœ‰nä¸ªç‚¹çš„ä¸€æ£µæ ‘ï¼Œæœ‰mä¸ªæ“ä½œï¼Œåˆ†ä¸ºä¸¤ç±»ï¼š<br>(1):1 x y d:æŠŠxåˆ°yè·¯å¾„ä¸Šæ¯ä¸ªç‚¹çš„æƒå€¼åŠ d<br>(2):2 x:è¯¢é—®xç‚¹çš„æƒå€¼</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°nå’Œm<br>æŽ¥ä¸‹æ¥n-1è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä¸€æ¡è¾¹<br>æŽ¥ä¸‹æ¥mè¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ“ä½œä¸­çš„ä¸€ä¸ªã€‚<br>n,m&lt;=10^5</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯¹äºŽæ¯ä¸ª2æ“ä½œï¼Œè¾“å‡ºç»“æžœã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>5 4<br>1 2<br>1 3<br>3 4<br>3 5<br>1 3 4 1<br>2 3<br>1 1 5 2<br>2 3</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>1<br>3</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>åŒºåˆ«ï¼šåŠ¨æ€å›žç­”è¯¢é—®</p>
</blockquote>


<figure class="highlight c"><figcaption><span>dongtaichafen.cpp</span><a href="/downloads/code/dongtaichafen.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ¯æ¬¡ä¿®æ”¹è·¯å¾„ï¼Œè€Œéžä¸€ä¸ªç‚¹, åŒºåˆ«äºŽè‹¹æžœæ ‘ï¼ŒåŒäºŽæ‰¾è·¯å¾„</span></span><br><span class="line"><span class="comment">// è¦æ±‚åŠ¨æ€å›žç­”è¯¢é—®ï¼Œ åŒºåˆ«äºŽæ¾é¼ çš„æ–°å®¶ï¼Œè·¯å¾„æ›´æ–°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Two mistakes from LCA, (1) fa[N][S+2], (2) return after goUp.</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> S = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> fa[N][S+<span class="number">2</span>], dep[N];</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> Lid[N], Rid[N], tot;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> to, id;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt;edges[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f)</span></span>{</span><br><span class="line">    Lid[x] = ++tot;</span><br><span class="line">    fa[x][<span class="number">0</span>] = f, dep[x] = dep[f]+ <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edges[x][i].to;</span><br><span class="line">        <span class="keyword">if</span>(y==f)<span class="keyword">continue</span>;</span><br><span class="line">        dfs(y, x);</span><br><span class="line">    }</span><br><span class="line">    Rid[x] = tot;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goUp</span><span class="params">(<span class="keyword">int</span> &amp;x, <span class="keyword">int</span> <span class="built_in">step</span>)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=S;i++)</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">step</span> &amp; (<span class="number">1</span>&lt;&lt;i)) x = fa[x][i];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(dep[a] &lt; dep[b]) swap(a,b);</span><br><span class="line">    goUp(a, dep[a]-dep[b]);</span><br><span class="line">    <span class="keyword">if</span>(a==b ) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=S;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        <span class="keyword">if</span>(fa[a][i] != fa[b][i])</span><br><span class="line">            a = fa[a][i], b= fa[b][i];</span><br><span class="line">    <span class="keyword">return</span> fa[a][<span class="number">0</span>];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Bit</span>{</span></span><br><span class="line">    LL C[N];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> d)</span></span>{</span><br><span class="line">        <span class="keyword">while</span>(x&lt;=tot){</span><br><span class="line">            C[x] += d;</span><br><span class="line">            x += x&amp;-x;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="function">LL <span class="title">sum</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(x){</span><br><span class="line">            res += C[x];</span><br><span class="line">            x -= x&amp;-x;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    }</span><br><span class="line">}<span class="built_in">bit</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n ,&amp;m);</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        edges[a].push_back({b, i});</span><br><span class="line">        edges[b].push_back({a, i});</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=S;j++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) fa[i][j] = fa[ fa[i][j<span class="number">-1</span>] ][j<span class="number">-1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> x, y, d;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a);</span><br><span class="line">        <span class="keyword">if</span>(a==<span class="number">1</span>){</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;x ,&amp;y, &amp;d);</span><br><span class="line">            <span class="keyword">int</span> c = lca(x, y);</span><br><span class="line"><span class="comment">//            printf("lca = %d %d %d\n", x, y, c);</span></span><br><span class="line">            <span class="keyword">int</span> e = fa[c][<span class="number">0</span>];</span><br><span class="line">            <span class="built_in">bit</span>.add(Lid[x], d);</span><br><span class="line">            <span class="built_in">bit</span>.add(Lid[y], d);</span><br><span class="line">            <span class="built_in">bit</span>.add(Lid[c], -d);</span><br><span class="line">            <span class="keyword">if</span>(e)<span class="built_in">bit</span>.add(Lid[e], -d); <span class="comment">// if is crucial!</span></span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span>{</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;x);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, <span class="built_in">bit</span>.sum(Rid[x]) - <span class="built_in">bit</span>.sum(Lid[x] <span class="number">-1</span>));</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>LCA</tag>
      </tags>
  </entry>
  <entry>
    <title>è·¯å¾„æ›´æ–°</title>
    <url>/blog/%E8%B7%AF%E5%BE%84%E6%9B%B4%E6%96%B0/</url>
    <content><![CDATA[<p>ç»™å‡ºä¸€æ£µ n ä¸ªç»“ç‚¹çš„æ ‘ï¼Œæœ‰mä¸ªæ“ä½œï¼Œæ¯æ¬¡æŠŠä¸€æ¡è·¯å¾„ä¸Šæ¯æ¡è¾¹éƒ½åŠ ä¸Š1ï¼Œæœ€åŽæŒ‰ç…§æ¯æ¡è¾¹çš„è¾“å…¥é¡ºåºï¼Œè¾“å‡ºæ¯ä¸ªæ¡è¢«å¢žåŠ çš„æ¬¡æ•°ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°nå’Œm<br>æŽ¥ä¸‹æ¥n-1è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä¸€æ¡è¾¹<br>æŽ¥ä¸‹æ¥mè¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°aå’Œbï¼Œè¡¨ç¤ºæŠŠaåˆ°bçš„è·¯å¾„ä¸Šæ¯æ¡è¾¹éƒ½åŠ 1ã€‚<br>n, m&lt;=10^5</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>æŒ‰ç…§è¾¹è¾“å…¥çš„é¡ºåºï¼Œè¾“å‡ºæ¯æ¡è¾¹è¢«å¢žåŠ çš„æ¬¡æ•°ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>5 3<br>1 2<br>1 3<br>3 4<br>3 5<br>1 4<br>1 5<br>2 3</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>1<br>3<br>1<br>1</p>
</blockquote>


<figure class="highlight c"><figcaption><span>lujinggengxin.cpp</span><a href="/downloads/code/lujinggengxin.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">300010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> S = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> path[N];</span><br><span class="line"><span class="keyword">int</span> ans[N], ID[N]; <span class="comment">//map node id to edge id</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> to, id;</span><br><span class="line">};</span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt;edges[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dis[N], dep[N];</span><br><span class="line"><span class="keyword">int</span> fa[N][S+<span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> cnt[N];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f, <span class="keyword">int</span> d)</span></span>{</span><br><span class="line">    fa[x][<span class="number">0</span>] = f, dep[x] = dep[f] +<span class="number">1</span>, dis[x] = d;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edges[x][i].to;</span><br><span class="line">        <span class="keyword">if</span>(y==f) <span class="keyword">continue</span>;</span><br><span class="line">        ID[y] = edges[x][i].id;  <span class="comment">// ID maps y to edge id;</span></span><br><span class="line">        dfs(y, x, d + <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goUp</span><span class="params">(<span class="keyword">int</span> &amp;x, <span class="keyword">int</span> <span class="built_in">step</span>)</span></span>{</span><br><span class="line"><span class="comment">//  starts from 0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=S;i++){</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">step</span> &amp; (<span class="number">1</span>&lt;&lt;i)) x = fa[x][i];</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(dep[x] &lt; dep[y]) swap(x, y);</span><br><span class="line">    goUp(x, dep[x]-dep[y]);</span><br><span class="line">    <span class="keyword">if</span>(x==y) <span class="keyword">return</span> x; <span class="comment">// easy to forget</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=S;i&gt;=<span class="number">0</span>;i--){</span><br><span class="line">        <span class="keyword">if</span>(fa[x][i] != fa[y][i])</span><br><span class="line">            x = fa[x][i], y= fa[y][i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> fa[x][<span class="number">0</span>];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edges[x][i].to;</span><br><span class="line">        <span class="keyword">if</span>(y==f) <span class="keyword">continue</span>;</span><br><span class="line">        DFS(y, x);</span><br><span class="line">        cnt[x] += cnt[y];</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// crucial</span></span><br><span class="line">    ans[ID[x]] = cnt[x];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        edges[a].push_back({b, i});</span><br><span class="line">        edges[b].push_back({a, i});</span><br><span class="line">    }</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=S;j++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">            fa[i][j] = fa[ fa[i][j<span class="number">-1</span>] ][j<span class="number">-1</span>];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        <span class="keyword">int</span> c = lca(a, b);</span><br><span class="line">        cnt[a]++, cnt[b]++, cnt[c]-=<span class="number">2</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    DFS(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++) <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>LCA</tag>
        <tag>chafen</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¾é¼ çš„æ–°å®¶</title>
    <url>/blog/%E6%9D%BE%E9%BC%A0%E7%9A%84%E6%96%B0%E5%AE%B6/</url>
    <content><![CDATA[<p>æ¾é¼ çš„æ–°å®¶æ˜¯ä¸€æ£µæ ‘ï¼Œå‰å‡ å¤©åˆšåˆšè£…ä¿®äº†æ–°å®¶ï¼Œæ–°å®¶æœ‰nä¸ªæˆ¿é—´ï¼Œå¹¶ä¸”æœ‰n-1æ ¹æ ‘æžè¿žæŽ¥ï¼Œæ¯ä¸ªæˆ¿é—´éƒ½å¯ä»¥ç›¸äº’åˆ°è¾¾ï¼Œä¸”ä¿©ä¸ªæˆ¿é—´ä¹‹é—´çš„è·¯çº¿éƒ½æ˜¯å”¯ä¸€çš„ã€‚å¤©å“ªï¼Œä»–å±…ç„¶çœŸçš„ä½åœ¨â€œæ ‘â€ä¸Šã€‚æ¾é¼ æƒ³é‚€è¯·å°ç†Šç»´å°¼å‰æ¥å‚è§‚ï¼Œå¹¶ä¸”è¿˜æŒ‡å®šä¸€ä»½å‚è§‚æŒ‡å—ï¼Œä»–å¸Œæœ›ç»´å°¼èƒ½å¤ŸæŒ‰ç…§ä»–çš„æŒ‡å—é¡ºåºï¼Œå…ˆåŽ»a_1ï¼Œå†åŽ»a_2ï¼Œâ€¦â€¦ï¼Œæœ€åŽåˆ°a_nï¼ŒåŽ»å‚è§‚æ–°å®¶ã€‚</p>
<p>å¯æ˜¯è¿™æ ·ä¼šå¯¼è‡´ç»´å°¼é‡å¤èµ°å¾ˆå¤šæˆ¿é—´ï¼Œæ‡’æƒ°çš„ç»´å°¼ä¸å¬åœ°æŽ¨è¾žã€‚å¯æ˜¯æ¾é¼ å‘Šè¯‰ä»–ï¼Œæ¯èµ°åˆ°ä¸€ä¸ªæˆ¿é—´ï¼Œä»–å°±å¯ä»¥ä»Žæˆ¿é—´æ‹¿ä¸€å—ç³–æžœåƒã€‚ç»´å°¼æ˜¯ä¸ªé¦‹å®¶ä¼™ï¼Œç«‹é©¬å°±ç­”åº”äº†ã€‚</p>
<p>çŽ°åœ¨æ¾é¼ å¸Œæœ›çŸ¥é“ä¸ºäº†ä¿è¯ç»´å°¼æœ‰ç³–æžœåƒï¼Œä»–éœ€è¦åœ¨æ¯ä¸€ä¸ªæˆ¿é—´å„æ”¾è‡³å°‘å¤šå°‘ä¸ªç³–æžœã€‚å› ä¸ºæ¾é¼ å‚è§‚æŒ‡å—ä¸Šçš„æœ€åŽä¸€ä¸ªæˆ¿é—´anæ˜¯é¤åŽ…ï¼Œé¤åŽ…é‡Œä»–å‡†å¤‡äº†ä¸°ç››çš„å¤§é¤ï¼Œæ‰€ä»¥å½“ç»´å°¼åœ¨å‚è§‚çš„æœ€åŽåˆ°è¾¾é¤åŽ…æ—¶å°±ä¸éœ€è¦å†æ‹¿ç³–æžœåƒäº†ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•°nï¼Œè¡¨ç¤ºæˆ¿é—´ä¸ªæ•° 2&lt;=n&lt;=300000;</p>
<p>ç¬¬äºŒè¡Œnä¸ªæ•´æ•°ï¼Œä¾æ¬¡æè¿° a1~anã€‚</p>
<p>æŽ¥ä¸‹æ¥n-1è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°xï¼Œyï¼Œè¡¨ç¤ºæ ‡å·xå’Œyçš„ä¸¤ä¸ªæˆ¿é—´ä¹‹é—´æœ‰æ ‘æžç›¸è¿žã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>ä¸€å…±nè¡Œï¼Œç¬¬iè¡Œè¾“å‡ºæ ‡å·ä¸ºiçš„æˆ¿é—´è‡³å°‘éœ€è¦æ”¾å¤šå°‘ä¸ªç³–æžœï¼Œæ‰èƒ½è®©ç»´å°¼æœ‰ç³–æžœåƒã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>5<br>1 4 5 3 2<br>1 2<br>2 4<br>2 3<br>4 5</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>1<br>2<br>1<br>2<br>1</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>æœ‰nä¸ªç‚¹çš„ä¸€æ£µæ ‘ï¼Œ æ²¿ç€a1~ané¡ºåºåŽ»è®¿é—®æ¯ä¸ªç‚¹ï¼Œ è·¯å¾„ä¸Šç»è¿‡çš„ç‚¹éƒ½è¦è¢«åŠ ä¸Šä¸€æ¬¡ï¼Œæœ€åŽè¾“å‡ºæ¯ä¸ªç‚¹è¢«åŠ çš„æ¬¡æ•°ã€‚</p>
</blockquote>


<figure class="highlight c"><figcaption><span>songshuhome.cpp</span><a href="/downloads/code/songshuhome.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">300010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> S = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> path[N];</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;edges[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dis[N], dep[N];</span><br><span class="line"><span class="keyword">int</span> fa[N][S+<span class="number">1</span>];</span><br><span class="line"><span class="keyword">int</span> cnt[N];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f, <span class="keyword">int</span> d)</span></span>{</span><br><span class="line">    fa[x][<span class="number">0</span>] = f, dep[x] = dep[f] +<span class="number">1</span>, dis[x] = d;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edges[x][i];</span><br><span class="line">        <span class="keyword">if</span>(y==f) <span class="keyword">continue</span>;</span><br><span class="line">        dfs(y, x, d + <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goUp</span><span class="params">(<span class="keyword">int</span> &amp;x, <span class="keyword">int</span> <span class="built_in">step</span>)</span></span>{</span><br><span class="line"><span class="comment">//  starts from 0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=S;i++){</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">step</span> &amp; (<span class="number">1</span>&lt;&lt;i)) x = fa[x][i];</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(dep[x] &lt; dep[y]) swap(x, y);</span><br><span class="line">    goUp(x, dep[x]-dep[y]);</span><br><span class="line">    <span class="keyword">if</span>(x==y) <span class="keyword">return</span> x; <span class="comment">// easy to forget</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=S;i&gt;=<span class="number">0</span>;i--){</span><br><span class="line">        <span class="keyword">if</span>(fa[x][i] != fa[y][i])</span><br><span class="line">            x = fa[x][i], y= fa[y][i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> fa[x][<span class="number">0</span>];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edges[x][i];</span><br><span class="line">        <span class="keyword">if</span>(y==f) <span class="keyword">continue</span>;</span><br><span class="line">        DFS(y, x);</span><br><span class="line">        cnt[x] += cnt[y];</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;path[i]);</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        edges[a].push_back(b);</span><br><span class="line">        edges[b].push_back(a);</span><br><span class="line">    }</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=S;j++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">            fa[i][j] = fa[ fa[i][j<span class="number">-1</span>] ][j<span class="number">-1</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//    for(int i=1;i&lt;=n;i++) printf("%d ", fa[i][0]);</span></span><br><span class="line"><span class="comment">//    puts("");</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++){</span><br><span class="line">        a = path[i], b = path[i+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span> c = lca(a, b);</span><br><span class="line"><span class="comment">//        printf("%d %d %d\n", a, b, c);</span></span><br><span class="line">        cnt[a]++, cnt[b]++, cnt[c]--, cnt[fa[c][<span class="number">0</span>]]--;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    DFS(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++) cnt[path[i]]--; <span class="comment">//why?</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, cnt[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>LCA</tag>
        <tag>chafen</tag>
      </tags>
  </entry>
  <entry>
    <title>æ ‘ä¸Šä¸¤ç‚¹è·ç¦»</title>
    <url>/blog/%E6%A0%91%E4%B8%8A%E4%B8%A4%E7%82%B9%E8%B7%9D%E7%A6%BB/</url>
    <content><![CDATA[<p>ç»™å®šä¸€æ£µæ ‘ï¼Œæ±‚æ ‘ä¸Šä¸¤ç‚¹é—´çš„è·ç¦»ã€‚<br>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°nå’Œmï¼Œè¡¨ç¤ºç‚¹çš„ä¸ªæ•°å’Œè¯¢é—®ä¸ªæ•°ã€‚<br>æŽ¥ä¸‹æ¥n-1è¡Œï¼Œæ¯è¡Œä¸‰ä¸ªæ•´æ•°aï¼Œbï¼Œcï¼Œè¡¨ç¤ºaå’Œbæœ‰é•¿åº¦ä¸ºcçš„è¾¹è¿žæŽ¥ã€‚<br>æŽ¥ä¸‹æ¥mè¡Œï¼Œè¡¨ç¤ºæœ‰mä¸ªè¯¢é—®ï¼Œaå’Œbï¼Œè¾“å‡ºaå’Œbçš„è·ç¦»ã€‚<br>nå’Œmçš„èŒƒå›´10^5;  è¾¹çš„é•¿åº¦ä¸è¶…è¿‡10^4.</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯¹äºŽæ¯ä¸ªè¯¢é—®è¾“å‡ºç›¸åº”çš„ç»“æžœã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>5 4<br>1 2 1<br>1 3 2<br>2 4 3<br>2 5 4<br>1 2<br>2 3<br>4 5<br>3 4</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>1<br>3<br>7<br>6</p>
</blockquote>


<figure class="highlight c"><figcaption><span>shuliangdian.cpp</span><a href="/downloads/code/shuliangdian.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>, S = <span class="number">17</span>;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> fa[N][S+<span class="number">2</span>]; <span class="comment">//crucial!</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> to, val;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt; edges[N];</span><br><span class="line"><span class="keyword">int</span> dep[N], dis[N];</span><br><span class="line"></span><br><span class="line"><span class="comment">//f can't be -1, because of dep[f];</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f, <span class="keyword">int</span> d)</span></span>{</span><br><span class="line">    fa[x][<span class="number">0</span>] = f, dep[x] = dep[f] + <span class="number">1</span>, dis[x] = d;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt; edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> j = edges[x][i].to;</span><br><span class="line">        <span class="keyword">if</span>(j==f) <span class="keyword">continue</span>;</span><br><span class="line">        dfs(j, x, d + edges[x][i].val);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goUp</span><span class="params">(<span class="keyword">int</span> &amp;x, <span class="keyword">int</span> <span class="built_in">step</span>)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=S;i++)</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">step</span> &amp; (<span class="number">1</span>&lt;&lt;i)) x = fa[x][i];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">LCA</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(dep[a]&lt;dep[b]) swap(a, b);</span><br><span class="line">    goUp(a, dep[a] - dep[b]);</span><br><span class="line">    <span class="keyword">if</span>(a==b) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=S;i&gt;=<span class="number">0</span>;i--){</span><br><span class="line">        <span class="keyword">if</span>(fa[a][i] != fa[b][i]){</span><br><span class="line">            a = fa[a][i];  b = fa[b][i];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> fa[a][<span class="number">0</span>];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">int</span> a, b, c;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">        edges[a].push_back((Node){b, c});</span><br><span class="line">        edges[b].push_back((Node){a, c});</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=S;j++){</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">            fa[i][j] = fa[ fa[i][j<span class="number">-1</span>] ][j<span class="number">-1</span>];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        <span class="keyword">int</span> c = LCA(a, b);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dis[a] + dis[b] - <span class="number">2</span>*dis[c]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>LCA</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‰¾è·¯å¾„</title>
    <url>/blog/%E6%89%BE%E8%B7%AF%E5%BE%84/</url>
    <content><![CDATA[<p>ç»™å®šä¸€æ£µå«æœ‰nä¸ªèŠ‚ç‚¹çš„æ ‘ï¼Œæ¯ä¸ªç‚¹ä¸Šéƒ½æœ‰ä¸€ä¸ªæƒå€¼ï¼Œæœ‰mä¸ªæ“ä½œå±žäºŽä»¥ä¸‹ä¸¤ç§ä¹‹ä¸€ï¼š</p>
<p>0 x y: æŠŠxç‚¹çš„æƒå€¼æ”¹ä¸ºy</p>
<p>1 x: è¯¢é—®ä»Ž0å‡ºå‘ï¼Œç»è¿‡xçš„è·¯å¾„ï¼Œæœ€å¤§å’Œæ˜¯å¤šå°‘ï¼Ÿ</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°nå’Œm<br>æŽ¥ä¸‹æ¥n-1ï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ ‘ä¸Šçš„ä¸€æ¡è¾¹ã€‚<br>æŽ¥ä¸‹ä¸€è¡Œnä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„æƒå€¼vã€‚<br>æŽ¥ä¸‹æ¥mè¡Œï¼Œæ¯è¡Œè¡¨ç¤ºä¸€ä¸ªè¯¢é—®ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯¹äºŽæ¯ä¸ªè¯¢é—®ï¼Œè¾“å‡ºä¸€ä¸ªæ•´æ•°</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>6 5<br>0 1<br>1 2<br>0 3<br>3 4<br>5 3<br>7 -5 100 20 -5 -7<br>1 1<br>1 3<br>0 2 -1<br>1 1<br>1 5</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>102<br>27<br>2<br>20</p>
</blockquote>


<figure class="highlight c"><figcaption><span>zhaolujing.cpp</span><a href="/downloads/code/zhaolujing.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;edges[N];</span><br><span class="line"><span class="keyword">int</span> val[N]; <span class="comment">// number on this node</span></span><br><span class="line"><span class="keyword">int</span> Lid[N], Rid[N], tot;</span><br><span class="line"><span class="keyword">int</span> Line[N]; <span class="comment">//map from dfs_id to original id</span></span><br><span class="line">LL dis[N]; <span class="comment">// accumulated number from root till this node</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f, LL d)</span></span>{</span><br><span class="line">    Lid[x] = ++tot; dis[x] = d; Line[tot] = x;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> j = edges[x][i];</span><br><span class="line">        <span class="keyword">if</span>(j==f) <span class="keyword">continue</span>;</span><br><span class="line">        dfs(j, x, d + val[j]);</span><br><span class="line">    }</span><br><span class="line">    Rid[x] = tot;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> L, R;</span><br><span class="line">    LL mx, add;</span><br><span class="line">}tree[N&lt;&lt;<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">up</span><span class="params">(<span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    tree[p].mx = <span class="built_in">max</span>(tree[p&lt;&lt;<span class="number">1</span>].mx, tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].mx);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    tree[p].L = L, tree[p].R = R;</span><br><span class="line">    tree[p].add = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(L==R){</span><br><span class="line">        tree[p].mx = dis[Line[L]];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = (L + R )&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(L, mid, p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    build(mid+<span class="number">1</span>, R, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    up(p);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">down</span><span class="params">(<span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    LL &amp;t = tree[p].add;</span><br><span class="line">    <span class="keyword">if</span>(t==<span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>].add += t;</span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>].mx += t;</span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].add += t;</span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].mx += t;</span><br><span class="line">    t = <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> x, <span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(tree[p].L == L &amp;&amp; tree[p].R ==R){</span><br><span class="line">        tree[p].add += x;</span><br><span class="line">        tree[p].mx += x;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    down(p);</span><br><span class="line">    <span class="keyword">int</span> mid = (tree[p].L + tree[p].R )&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(R&lt;=mid) update(L, R, x, p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(L&gt;mid) update(L, R, x, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span>{</span><br><span class="line">        update(L, mid, x, p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">        update(mid+<span class="number">1</span>, R, x, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">    up(p);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(tree[p].L == L &amp;&amp; tree[p].R ==R ){</span><br><span class="line">        <span class="keyword">return</span> tree[p].mx;</span><br><span class="line">    }</span><br><span class="line">    down(p);</span><br><span class="line">    <span class="keyword">int</span> mid = (tree[p].L + tree[p].R) &gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(R&lt;=mid) <span class="keyword">return</span> query(L,R, p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(L&gt;mid) <span class="keyword">return</span> query(L, R, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">max</span>(query(L, mid, p&lt;&lt;<span class="number">1</span>), query(mid+<span class="number">1</span>, R, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>));</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) edges[i].<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        edges[a].push_back(b);</span><br><span class="line">        edges[b].push_back(a);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;val[i]);</span><br><span class="line">    }</span><br><span class="line"><span class="comment">//  dfs order</span></span><br><span class="line">    dfs(<span class="number">0</span>, <span class="number">-1</span>, val[<span class="number">0</span>]);</span><br><span class="line">    build(<span class="number">1</span>, tot, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> c;</span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        <span class="keyword">if</span>(a==<span class="number">0</span>){</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;c);</span><br><span class="line">            update(Lid[b], Rid[b], c-val[b], <span class="number">1</span>); <span class="comment">// segment tree supports dfs_id manipulation</span></span><br><span class="line">            val[b] = c;  <span class="comment">// original id</span></span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(Lid[b], Rid[b], <span class="number">1</span>));</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>seg_tree</tag>
        <tag>tree</tag>
      </tags>
  </entry>
  <entry>
    <title>è‹¹æžœæ ‘</title>
    <url>/blog/%E8%8B%B9%E6%9E%9C%E6%A0%91/</url>
    <content><![CDATA[<p>åœ¨å¡å¡çš„æˆ¿å­å¤–é¢ï¼Œæœ‰ä¸€æ£µè‹¹æžœæ ‘ã€‚æ¯å¹´çš„æ˜¥å¤©ï¼Œæ ‘ä¸Šæ€»ä¼šç»“å‡ºå¾ˆå¤šçš„è‹¹æžœã€‚å¡å¡éžå¸¸å–œæ¬¢åƒè‹¹æžœï¼Œæ‰€ä»¥ä»–ä¸€ç›´éƒ½ç²¾å¿ƒçš„å‘µæŠ¤è¿™æ£µè‹¹æžœæ ‘ã€‚æˆ‘ä»¬çŸ¥é“æ ‘æ˜¯æœ‰å¾ˆå¤šåˆ†å‰ç‚¹çš„ï¼Œè‹¹æžœä¼šé•¿åœ¨æžæ¡çš„åˆ†å‰ç‚¹ä¸Šé¢ï¼Œä¸”ä¸ä¼šæœ‰ä¸¤ä¸ªè‹¹æžœç»“åœ¨ä¸€èµ·ã€‚å¡å¡å¾ˆæƒ³çŸ¥é“ä¸€ä¸ªåˆ†å‰ç‚¹æ‰€ä»£è¡¨çš„å­æ ‘ä¸Šæ‰€ç»“çš„è‹¹æžœçš„æ•°ç›®ï¼Œä»¥ä¾¿ç ”ç©¶è‹¹æžœæ ‘å“ªäº›æžæ¡çš„ç»“æžœèƒ½åŠ›æ¯”è¾ƒå¼ºã€‚<br>å¡å¡æ‰€çŸ¥é“çš„æ˜¯ï¼Œæ¯éš”ä¸€äº›æ—¶é—´ï¼ŒæŸäº›åˆ†å‰ç‚¹ä¸Šä¼šç»“å‡ºä¸€äº›è‹¹æžœï¼Œä½†æ˜¯å¡å¡æ‰€ä¸çŸ¥é“çš„æ˜¯ï¼Œæ€»ä¼šæœ‰ä¸€äº›è°ƒçš®çš„å°å­©æ¥æ ‘ä¸Šæ‘˜èµ°ä¸€äº›è‹¹æžœã€‚<br>äºŽæ˜¯æˆ‘ä»¬å®šä¹‰ä¸¤ç§æ“ä½œï¼š<br>C x è¡¨ç¤ºç¼–å·ä¸ºxçš„åˆ†å‰ç‚¹çš„çŠ¶æ€è¢«æ”¹å˜(åŽŸæ¥æœ‰è‹¹æžœçš„è¯ï¼Œå°±è¢«æ‘˜æŽ‰ï¼ŒåŽŸæ¥æ²¡æœ‰çš„è¯ï¼Œå°±ç»“å‡ºä¸€ä¸ªè‹¹æžœ)<br>Q x æŸ¥è¯¢ç¼–å·ä¸ºxçš„åˆ†å‰ç‚¹æ‰€ä»£è¡¨çš„å­æ ‘ä¸­æœ‰å¤šå°‘ä¸ªè‹¹æžœ<br>æˆ‘ä»¬å‡å®šä¸€å¼€å§‹çš„æ—¶å€™ï¼Œæ ‘ä¸Šå…¨éƒ½æ˜¯è‹¹æžœï¼Œä¹ŸåŒ…æ‹¬ä½œä¸ºæ ¹ç»“ç‚¹çš„åˆ†å‰1ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸€ä¸ªæ•°N<br>æŽ¥ä¸‹æ¥n-1è¡Œ,æ¯è¡Œ2ä¸ªæ•°u,v,è¡¨ç¤ºåˆ†å‰ç‚¹uå’Œåˆ†å‰ç‚¹væ˜¯ç›´æŽ¥ç›¸è¿žçš„ã€‚<br>å†æŽ¥ä¸‹æ¥ä¸€è¡Œä¸€ä¸ªæ•°Mè¡¨ç¤ºè¯¢é—®æ•°<br>æŽ¥ä¸‹æ¥Mè¡Œ,è¡¨ç¤ºè¯¢é—®,è¯¢é—®çš„æ ¼å¼å¦‚é¢˜ç›®æ‰€è¿°Q xæˆ–è€…C x<br>n,mä¸è¶…è¿‡ 10^5;</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯¹äºŽæ¯ä¸ªQ xçš„è¯¢é—®,è¯·è¾“å‡ºç›¸åº”çš„ç»“æžœ,æ¯è¡Œè¾“å‡ºä¸€ä¸ª</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>3<br>1 2<br>1 3<br>3<br>Q 1<br>C 2<br>Q 1</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>3<br>2</p>
</blockquote>

<p>è¯´æ˜Ž:</p>
<blockquote><p>ç»™å®šä¸€æ£µæ ¹èŠ‚ç‚¹ä¸º1ï¼ŒåŒ…å«nä¸ªèŠ‚ç‚¹çš„æ ‘ï¼Œ æ¯ä¸ªèŠ‚ç‚¹çš„åˆå§‹å€¼ä¸º1ï¼Œ mä¸ªæ“ä½œå±žäºŽä»¥ä¸‹å‡ ç§ï¼š<br>1 x:åæ­£xèŠ‚ç‚¹çš„çŠ¶æ€ï¼Œ 1å˜0ï¼Œ 0å˜1<br>2 x:è¯¢é—®xå¯¹åº”å­æ ‘ä¸­çš„å’Œ</p>
</blockquote>


<figure class="highlight c"><figcaption><span>pingguoshu.cpp</span><a href="/downloads/code/pingguoshu.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;edges[M];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> L[M], R[M], tot;</span><br><span class="line"><span class="keyword">int</span> val[M];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Bit</span>{</span></span><br><span class="line">    <span class="keyword">int</span> C[M];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> t)</span></span>{</span><br><span class="line">        <span class="keyword">while</span>(x&lt;=n){</span><br><span class="line">            C[x] += t;</span><br><span class="line">            x += x&amp;-x;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(x){</span><br><span class="line">            res += C[x];</span><br><span class="line">            x -= x&amp;-x;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    }</span><br><span class="line">}<span class="built_in">bit</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f)</span></span>{</span><br><span class="line">    L[x] = ++tot;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edges[x][i];</span><br><span class="line">        <span class="keyword">if</span>(y==f) <span class="keyword">continue</span>;</span><br><span class="line">        dfs(y, x);</span><br><span class="line">    }</span><br><span class="line">    R[x] = tot;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++){</span><br><span class="line">        <span class="keyword">int</span> a, b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        edges[a].push_back({b});</span><br><span class="line">        edges[b].push_back({a});</span><br><span class="line">        <span class="built_in">bit</span>.add(i,<span class="number">1</span>);</span><br><span class="line">        val[i] = <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    val[n] = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">bit</span>.add(n, <span class="number">1</span>);</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¯ä¸ªç‚¹çš„æ–°ç¼–å·æ˜¯L[x], ç®¡ç†çš„åŒºé—´æ˜¯[L[x], R[x]]</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;m);</span><br><span class="line">    <span class="keyword">char</span> s[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å•ç‚¹ä¿®æ”¹ï¼Œ åŒºé—´æŸ¥è¯¢</span></span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s%d"</span>, s, &amp;x);</span><br><span class="line">        <span class="keyword">if</span>(s[<span class="number">0</span>]==<span class="string">'C'</span>) {</span><br><span class="line">            <span class="built_in">bit</span>.add(L[x], -val[x]);</span><br><span class="line">            val[x] = -val[x];</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> {</span><br><span class="line">            <span class="keyword">int</span> m = <span class="built_in">bit</span>.sum(R[x]) - <span class="built_in">bit</span>.sum(L[x]<span class="number">-1</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, m);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>tree</tag>
        <tag>bit_tree</tag>
      </tags>
  </entry>
  <entry>
    <title>æ ‘çš„ç›´å¾„</title>
    <url>/blog/%E6%A0%91%E7%9A%84%E7%9B%B4%E5%BE%84/</url>
    <content><![CDATA[<p>ç»™å®šä¸€æ£µæ ‘ï¼Œæ±‚å‡ºè¿™æ£µæ ‘çš„ç›´å¾„ï¼Œå³ä¸¤ä¸ªèŠ‚ç‚¹è·ç¦»çš„æœ€å¤§å€¼ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>è¾“å…¥ç¬¬ä¸€è¡Œï¼Œä¸€ä¸ªæ•´æ•°n;<br>æŽ¥ä¸‹æ¥nâˆ’1è¡Œï¼Œæ¯è¡Œä¸‰ä¸ªæ•´æ•°a,b,cï¼Œè¡¨ç¤ºè¿žæŽ¥èŠ‚ç‚¹aå’Œbçš„è¾¹é•¿ä¸ºc</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>è¾“å‡ºè¿™æ£µæ ‘çš„ç›´å¾„ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>6<br>0 1 3<br>1 5 4<br>1 2 2<br>2 3 1<br>2 4 5</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>11</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>csacademy.com/app/graph_editor</p>
</blockquote>


<figure class="highlight c"><figcaption><span>tree_radius1.cpp</span><a href="/downloads/code/tree_radius1.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">100010</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> to, val;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt;edges[M];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ans = <span class="number">0</span>, R=<span class="number">-1</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f, <span class="keyword">int</span> dis)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(dis &gt; ans) {ans = dis, R = x;}</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edges[x][i].to;</span><br><span class="line">        <span class="keyword">if</span>(y==f) <span class="keyword">continue</span>;</span><br><span class="line">        dfs(y, x, dis + edges[x][i].val);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++){</span><br><span class="line">        <span class="keyword">int</span> a, b, c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">        edges[a].push_back({b,c});</span><br><span class="line">        edges[b].push_back({a,c});</span><br><span class="line">    }</span><br><span class="line">    dfs(<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>);</span><br><span class="line">    dfs(R, <span class="number">-1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>tree_radius2.cpp</span><a href="/downloads/code/tree_radius2.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">100010</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> to, val;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt;edges[M];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> fir = <span class="number">0</span>, sec = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edges[x][i].to;</span><br><span class="line">        <span class="keyword">if</span>(y==f) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">int</span> t= dfs(y, x) + edges[x][i].val;</span><br><span class="line">        <span class="keyword">if</span>(t &gt;fir){</span><br><span class="line">            sec = fir;</span><br><span class="line">            fir = t;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(t &gt; sec)</span><br><span class="line">            sec = t;</span><br><span class="line">    }</span><br><span class="line">    ans = <span class="built_in">max</span>(ans, fir+sec);</span><br><span class="line">    <span class="keyword">return</span> fir;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++){</span><br><span class="line">        <span class="keyword">int</span> a, b, c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">        edges[a].push_back({b,c});</span><br><span class="line">        edges[b].push_back({a,c});</span><br><span class="line">    }</span><br><span class="line">    dfs(<span class="number">0</span>, <span class="number">-1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>tree</tag>
      </tags>
  </entry>
  <entry>
    <title>STè¡¨</title>
    <url>/blog/ST%E8%A1%A8/</url>
    <content><![CDATA[<p>æœ‰ä¸€ä¸ªé•¿åº¦ä¸ºnçš„æ•°ç»„Aï¼Œæœ‰mä¸ªè¯¢é—®ï¼Œæ¯æ¬¡ä½ éœ€è¦å›žç­”åœ¨åŒºé—´[L,R]å†…çš„æ•°çš„æœ€å¤§å€¼ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>è¾“å…¥çš„ç¬¬ä¸€è¡Œæ˜¯ä¸¤ä¸ªæ•´æ•°n,m,è¡¨ç¤ºæ•°ç»„é•¿åº¦å’Œè¯¢é—®ä¸ªæ•°ã€‚<br>ç¬¬äºŒè¡Œnä¸ªå…ƒç´ ï¼Œè¡¨ç¤ºAæ•°ç»„ã€‚<br>æŽ¥ä¸‹æ¥mè¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°Lå’ŒRï¼Œè¡¨ç¤ºä¸€ä¸ªåŒºé—´ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯¹äºŽæ¯ä¸ªè¯¢é—®ï¼Œè¾“å‡ºç›¸åº”çš„ç»“æžœã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>5 3<br>4 5 2 3 8<br>3 4<br>3 5<br>2 4</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>3<br>8<br>5</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>n,m&lt;=10^5</p>
</blockquote>


<figure class="highlight c"><figcaption><span>st1.cpp</span><a href="/downloads/code/st1.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> S[N][<span class="number">17</span>];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> res = a[L];</span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">step</span> = R-L +<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;(<span class="number">1</span>&lt;&lt;i)&lt;=<span class="built_in">step</span>;i++){</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">step</span> &amp; (<span class="number">1</span>&lt;&lt;i)){</span><br><span class="line">            res = <span class="built_in">max</span>(res, S[L][i]);</span><br><span class="line">            L += (<span class="number">1</span>&lt;&lt;i);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">        S[i][<span class="number">0</span>] = a[i];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;(<span class="number">1</span>&lt;&lt;j)&lt;=n;j++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i+(<span class="number">1</span>&lt;&lt;j)<span class="number">-1</span>&lt;=n;i++) {</span><br><span class="line">            <span class="keyword">int</span> t = i + (<span class="number">1</span>&lt;&lt;j<span class="number">-1</span>);</span><br><span class="line">            S[i][j] = <span class="built_in">max</span>(S[i][j<span class="number">-1</span>], S[t][j<span class="number">-1</span>]);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="keyword">int</span> L, R;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;L, &amp;R);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(L, R));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>st2.cpp</span><a href="/downloads/code/st2.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> S[N][<span class="number">17</span>];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> k=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(L+(<span class="number">1</span>&lt;&lt;k)&lt;R-(<span class="number">1</span>&lt;&lt;k)+<span class="number">1</span>) k++;</span><br><span class="line">    res = <span class="built_in">max</span>(S[L][k], S[R-(<span class="number">1</span>&lt;&lt;k)+<span class="number">1</span>][k]);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">        S[i][<span class="number">0</span>] = a[i];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;(<span class="number">1</span>&lt;&lt;j)&lt;=n;j++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i+(<span class="number">1</span>&lt;&lt;j)<span class="number">-1</span>&lt;=n;i++) {</span><br><span class="line">            <span class="keyword">int</span> t = i + (<span class="number">1</span>&lt;&lt;j<span class="number">-1</span>);</span><br><span class="line">            S[i][j] = <span class="built_in">max</span>(S[i][j<span class="number">-1</span>], S[t][j<span class="number">-1</span>]);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="keyword">int</span> L, R;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;L, &amp;R);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(L, R));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>st3.cpp</span><a href="/downloads/code/st3.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> S[N][<span class="number">17</span>];</span><br><span class="line"><span class="keyword">int</span> Log[N];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> k= Log[R-L+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">int</span> res = <span class="built_in">max</span>(S[L][k], S[R-(<span class="number">1</span>&lt;&lt;k)+<span class="number">1</span>][k]);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">        S[i][<span class="number">0</span>] = a[i];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    Log[<span class="number">0</span>] =<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) Log[i] = Log[i&gt;&gt;<span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;(<span class="number">1</span>&lt;&lt;j)&lt;=n;j++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i+(<span class="number">1</span>&lt;&lt;j)<span class="number">-1</span>&lt;=n;i++) {</span><br><span class="line">            <span class="keyword">int</span> t = i + (<span class="number">1</span>&lt;&lt;j<span class="number">-1</span>);</span><br><span class="line">            S[i][j] = <span class="built_in">max</span>(S[i][j<span class="number">-1</span>], S[t][j<span class="number">-1</span>]);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="keyword">int</span> L, R;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;L, &amp;R);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(L, R));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>data_structure</tag>
        <tag>beizeng</tag>
      </tags>
  </entry>
  <entry>
    <title>MinMax</title>
    <url>/blog/MinMax/</url>
    <content><![CDATA[<img src="/downloads/imgs/minmax.png" class="example" title="title exg" alt="alt exg">

<p>è¾“å…¥æè¿°:</p>
<blockquote><p>è¾“å…¥çš„ç¬¬ä¸€è¡Œæ˜¯ä¸¤ä¸ªæ•´æ•°n kã€‚<br>æŽ¥ä¸‹æ¥ä¸€è¡Œnä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ•°åˆ—a_i</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>è¾“å‡ºä¸¤è¡Œï¼Œæ¯è¡Œn-k+1ä¸ªæ•°ï¼Œç¬¬ä¸€è¡Œæ˜¯bæ•°ç»„ï¼Œç¬¬äºŒè¡Œæ˜¯cæ•°ç»„ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>8 3<br>1 3 -1 -3 5 3 6 7</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>-1 -3 -3 -3 3 3<br>3 3 5 5 6 7</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>n&lt;=10^6</p>
</blockquote>


<figure class="highlight c"><figcaption><span>minmax.cpp</span><a href="/downloads/code/minmax.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1000010</span>;</span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> q[N];</span><br><span class="line"><span class="keyword">int</span> ans[N];</span><br><span class="line"><span class="keyword">int</span> tt=<span class="number">0</span>, rr = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, k;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;k);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">while</span>(tt&lt;=rr &amp;&amp; a[q[rr]]&gt;=a[i]) rr--;</span><br><span class="line">        q[++rr] = i;</span><br><span class="line">        <span class="keyword">while</span>(tt&lt;=rr &amp;&amp; i-q[tt]&gt;=k) tt++;</span><br><span class="line">        ans[i] = q[tt];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=k;i&lt;=n;i++) <span class="built_in">printf</span>(<span class="string">"%d "</span>, a[ans[i]]);</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line"></span><br><span class="line">    tt =<span class="number">0</span>, rr = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">while</span>(tt&lt;=rr &amp;&amp; a[q[rr]]&lt;=a[i]) rr--;</span><br><span class="line">        q[++rr] = i;</span><br><span class="line">        <span class="keyword">while</span>(tt&lt;=rr &amp;&amp; i-q[tt]&gt;=k) tt++;</span><br><span class="line">        ans[i] = q[tt];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=k;i&lt;=n;i++) <span class="built_in">printf</span>(<span class="string">"%d "</span>, a[ans[i]]);</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>monotone_queue</tag>
      </tags>
  </entry>
  <entry>
    <title>æœ€å¤§é¢ç§¯</title>
    <url>/blog/%E6%9C%80%E5%A4%A7%E9%9D%A2%E7%A7%AF/</url>
    <content><![CDATA[<p>çŽ°åœ¨æœ‰ç”±nä¸ªå®½åº¦ä¸º1ï¼Œé«˜åº¦åˆ†åˆ«ä¸º$h_1,h_2,â€¦h_n$çš„é•¿æ–¹å½¢ä»Žå·¦åˆ°å³ä¾æ¬¡æŽ’åˆ—ç»„æˆçš„æŸ±å½¢å›¾ã€‚é—®é‡Œé¢åŒ…å«çš„é•¿æ–¹å½¢çš„æœ€å¤§é¢ç§¯æ˜¯å¤šå°‘ï¼Ÿ</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•°nï¼Œè¡¨ç¤ºæŸ±å½¢ä¸ªæ•°ã€‚<br>æŽ¥ä¸‹æ¥ä¸€è¡Œnä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ¯ä¸ªæŸ±å½¢çš„é«˜åº¦$h_i$ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>è¾“å‡ºæœ€å¤§çš„çŸ©å½¢é¢ç§¯ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>7<br>2 1 4 5 1 3 3</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>8</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>n&lt;=10^5.</p>
</blockquote>


<figure class="highlight c"><figcaption><span>zuidamianji.cpp</span><a href="/downloads/code/zuidamianji.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> h[N];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> L[N], R[N];</span><br><span class="line"><span class="keyword">int</span> stk[N], t=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;h[i]);</span><br><span class="line"></span><br><span class="line">    stk[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">        <span class="keyword">while</span> (t &gt; <span class="number">0</span> &amp;&amp; h[stk[t]] &gt;= h[i]) t--;</span><br><span class="line">        L[i] = stk[t];</span><br><span class="line">        stk[++t] = i;</span><br><span class="line">    }</span><br><span class="line">    stk[<span class="number">0</span>] = n+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=n;i&gt;=<span class="number">1</span>;i--){</span><br><span class="line">        <span class="keyword">while</span>(t&gt;<span class="number">0</span> &amp;&amp; h[stk[t]] &gt;= h[i]) t--;</span><br><span class="line">        R[i] = stk[t];</span><br><span class="line">        stk[++t] = i;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//    for(int i=1;i&lt;=n;i++) printf("%d ", L[i]);</span></span><br><span class="line"><span class="comment">//    puts("");</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    for(int i=1;i&lt;=n;i++) printf("%d ", R[i]);</span></span><br><span class="line"><span class="comment">//    puts("");</span></span><br><span class="line"></span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        res = <span class="built_in">max</span>(res, <span class="number">1L</span>L * (R[i]-L[i] <span class="number">-1</span>) * h[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>monotone_stack</tag>
      </tags>
  </entry>
  <entry>
    <title>Quick Sort Template</title>
    <url>/blog/hello-world/</url>
    <content><![CDATA[<p>Quick sort is one of the most fundamental algorithms.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Test"><a href="#Test" class="headerlink" title="Test"></a>Test</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo g &amp;&amp; hexo s -p 8001</span><br></pre></td></tr></table></figure>
<h3 id="Deploy"><a href="#Deploy" class="headerlink" title="Deploy"></a>Deploy</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo g &amp;&amp; hexo d</span><br></pre></td></tr></table></figure>

<a id="more"></a>
<h3 id="quick-sort"><a href="#quick-sort" class="headerlink" title="quick sort"></a>quick sort</h3><figure class="highlight c"><figcaption><span>quick_sort.cpp</span><a href="/downloads/code/quick_sort.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100005</span>;</span><br><span class="line"><span class="keyword">int</span> q[N];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quick_sort</span><span class="params">(<span class="keyword">int</span> q[], <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(l&gt;=r) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> x = q[l], i=l<span class="number">-1</span>, j = r+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(i&lt;j){</span><br><span class="line">        <span class="keyword">do</span> i++; <span class="keyword">while</span>(q[i]&lt;x);</span><br><span class="line">        <span class="keyword">do</span> j--; <span class="keyword">while</span>(q[j]&gt;x);</span><br><span class="line">        <span class="keyword">if</span>(i&lt;j) swap(q[i], q[j]);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    quick_sort(q, l ,j);</span><br><span class="line">    quick_sort(q, j+<span class="number">1</span>, r);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;q[i]);</span><br><span class="line">    quick_sort(q, <span class="number">0</span>, n<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="built_in">printf</span>(<span class="string">"%d "</span>, q[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>template</category>
      </categories>
      <tags>
        <tag>basic_algo</tag>
      </tags>
  </entry>
  <entry>
    <title>DeepSnake</title>
    <url>/blog/DeepSnake/</url>
    <content><![CDATA[<h2 id="Traditional-snake-algorithms"><a href="#Traditional-snake-algorithms" class="headerlink" title="Traditional snake algorithms:"></a>Traditional snake algorithms:</h2><blockquote><p>given an initial contour, traditional snake algorithms treat the coordinates<br>of the vertices as a set of variables and optimize an energy functional with respect to these variables.<br>Active contour models could optimize the contour to the object boundary. The energy functional is typically<br>nonconvex, the deformation process tend to find local optimal solutions.</p>
</blockquote>

<h2 id="Network-Architecture"><a href="#Network-Architecture" class="headerlink" title="Network Architecture:"></a>Network Architecture:</h2><blockquote><p>Deep snake consists of three parts: <span style="color:red">a backbone</span>, <span style="color:red">a fusion block</span> and <span style="color:red">a prediction head</span>. The backbone is comprised<br> of 8 â€œCirConvBn-ReLUâ€ layers and <em>uses residual skip connections for all layers</em>. The fusion block aims to fuse<br> the information across all contour points at multiple scales.</p>
</blockquote>
<img src="/downloads/imgs/deepsnake_architecture.jpg" class="example" title="title exg" alt="alt exg">

<h2 id="Detail"><a href="#Detail" class="headerlink" title="Detail:"></a>Detail:</h2><blockquote><p>Add deep snake to an object detection model. The detector first produces objet boxes that are used to construct<br>diamond contours. Then deep snake deforms the diamond vertices to object extreme points, which are used to<br>construct octagon contours. Finally, the approach takes <strong>octagons as initial contours and performs iterative<br>contour deformation to obtain the object shape</strong>.</p>
</blockquote>

<h2 id="Initial-contour-proposal"><a href="#Initial-contour-proposal" class="headerlink" title="Initial contour proposal:"></a>Initial contour proposal:</h2><blockquote><p>The octagon is formed by four extreme points, which are top, leftmost, bottom, rightmost pixels in an object,<br>given a detected object box, extract four points centered at top, left, bottom, right box borders and then<br>connect them to get a diamond contour.</p>
</blockquote>

<h2 id="Optimization"><a href="#Optimization" class="headerlink" title="Optimization:"></a>Optimization:</h2><blockquote><p>Regressing the offsets in one pass in challenging, especially for vertices far away from the object. <strong>Use an<br>iterative optimization fashion</strong>. Solve the localization errors from the detector.</p>
</blockquote>

<h2 id="Multi-component-objects"><a href="#Multi-component-objects" class="headerlink" title="Multi-component objects:"></a>Multi-component objects:</h2><blockquote><p>use RoIAlign to extract a feature map and adds a detector branch on the feature map to produce the component boxes.</p>
</blockquote>

<img src="/downloads/imgs/RoIAlign.png" class="example" title="title exg" alt="alt exg">




]]></content>
      <categories>
        <category>Computer Vision</category>
      </categories>
      <tags>
        <tag>Instance Segmentation</tag>
      </tags>
  </entry>
  <entry>
    <title>åŠ¨æ€åŒºé—´æ±‚å’Œ</title>
    <url>/blog/%E5%8A%A8%E6%80%81%E5%8C%BA%E9%97%B4%E6%B1%82%E5%92%8C/</url>
    <content><![CDATA[<p>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸ºnçš„åºåˆ—ï¼Œæœ‰mä¸ªæ“ä½œï¼Œéœ€è¦å®žçŽ°åŒºé—´åŠ ä¸€ä¸ªå€¼å’Œç»Ÿè®¡åŒºé—´å’Œã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°nå’Œmï¼Œè¡¨ç¤ºæœ‰ä¸€ä¸ªé•¿åº¦ä¸ºnä¸ªåºåˆ—å’Œmä¸ªæ“ä½œã€‚<br>ç¬¬äºŒè¡Œnä¸ªæ•´æ•°è¡¨ç¤ºåˆå§‹åºåˆ—ã€‚<br>æŽ¥ä¸‹æ¥mè¡Œï¼Œæ¯è¡Œçš„å†…å®¹å±žäºŽä»¥ä¸‹ä¸€ç§ï¼š<br>Add x y aï¼šæŠŠåœ¨åŒºé—´[x,y]å†…çš„æ•°éƒ½åŠ ä¸Šaï¼ˆaâˆˆ[-10000,10000]ï¼‰ã€‚<br>Query x yï¼šæ±‚å‡ºåŒºé—´[x,y]ä¸­æ‰€æœ‰æ•°çš„å’Œã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯¹äºŽæ¯ä¸ªè¯¢é—®è¾“å‡ºç›¸åº”çš„ç»“æžœã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>5 5<br>1 2 3 4 5<br>Query 1 5<br>Add 1 3 5<br>Query 3 5<br>Add 3 5 10<br>Query 1 5</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>15<br>17<br>60</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>n,m&lt;=10^5</p>
</blockquote>


<figure class="highlight c"><figcaption><span>lazy_seg_tree.cpp</span><a href="/downloads/code/lazy_seg_tree.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> A[N];</span><br><span class="line"><span class="keyword">char</span> s[<span class="number">100</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> L, R;</span><br><span class="line">    LL tag, sum;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">len</span><span class="params">()</span></span>{ <span class="keyword">return</span> (R-L+<span class="number">1</span>);}</span><br><span class="line"></span><br><span class="line">}tree[N&lt;&lt;<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">up</span><span class="params">(<span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    tree[p].sum = tree[p&lt;&lt;<span class="number">1</span>].sum + tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].sum;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    tree[p].L = L, tree[p].R =R;</span><br><span class="line">    <span class="keyword">if</span>(L==R){</span><br><span class="line">        tree[p].sum = A[L];</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = L+R&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(L, mid, p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    build(mid+<span class="number">1</span>, R, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    up(p);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">down</span><span class="params">(<span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    LL &amp;t = tree[p].tag;</span><br><span class="line">    <span class="keyword">if</span>(t==<span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>].tag += t;</span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>].sum += t * tree[p&lt;&lt;<span class="number">1</span>].len();</span><br><span class="line"></span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].tag += t;</span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].sum += t*tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].len();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¸…ç©ºæ‡’æ ‡è®°</span></span><br><span class="line">    t = <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> x, <span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(tree[p].L ==L &amp;&amp; tree[p].R ==R){</span><br><span class="line">        tree[p].tag += x;</span><br><span class="line">        tree[p].sum += tree[p].len() * x; <span class="comment">// forget;</span></span><br><span class="line">        <span class="comment">//forget</span></span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    }</span><br><span class="line">    down(p);</span><br><span class="line">    <span class="keyword">int</span> mid = tree[p].L + tree[p].R &gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(R&lt;=mid) update(L, R, x, p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(L&gt;mid) update(L, R, x, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> {</span><br><span class="line">        update(L, mid, x, p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">        update(mid+<span class="number">1</span>, R, x, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">    up(p);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(tree[p].L==L &amp;&amp; tree[p].R==R){</span><br><span class="line">        <span class="keyword">return</span> tree[p].sum;</span><br><span class="line">    }</span><br><span class="line"><span class="comment">//    forget</span></span><br><span class="line">    down(p);</span><br><span class="line">    <span class="keyword">int</span> mid = tree[p].L + tree[p].R &gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(R&lt;=mid) <span class="keyword">return</span> query(L, R, p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(L&gt;mid) <span class="keyword">return</span> query(L, R, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">return</span> query(L, mid, p&lt;&lt;<span class="number">1</span>) + query(mid+<span class="number">1</span>, R, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;A[i]);</span><br><span class="line">    build(<span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, s);</span><br><span class="line">        <span class="keyword">if</span>(s[<span class="number">0</span>]==<span class="string">'A'</span>){</span><br><span class="line">            <span class="keyword">int</span> a, b, c;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">            update(a, b, c, <span class="number">1</span>);</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="keyword">int</span> a, b;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, query(a, b, <span class="number">1</span>));</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>chunji_nowcoder</tag>
        <tag>lazy_tag</tag>
      </tags>
  </entry>
  <entry>
    <title>åŒºé—´ç»Ÿè®¡</title>
    <url>/blog/%E5%8C%BA%E9%97%B4%E7%BB%9F%E8%AE%A1/</url>
    <content><![CDATA[<p>ç»™å®šä¸€ä¸ª1åˆ°nçš„æŽ’åˆ—Aæ•°ç»„ï¼Œæœ‰mä¸ªè¯¢é—®ï¼Œæ¯æ¬¡æŸ¥è¯¢ä¸‹æ ‡åœ¨[L,R]èŒƒå›´å†…ï¼Œå°äºŽç­‰äºŽxçš„æ•°çš„ä¸ªæ•°ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œ2ä¸ªæ•´æ•°nå’Œmã€‚<br>ç¬¬äºŒè¡Œnä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºä¸€ä¸ªæŽ’åˆ—ã€‚<br>æŽ¥ä¸‹æ¥mè¡Œï¼Œæ¯è¡Œ3ä¸ªæ•´æ•°L,R,xã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯¹äºŽæ¯ä¸ªè¯¢é—®ï¼Œè¾“å‡ºç›¸åº”çš„ç»“æžœ</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>5 3<br>4 3 2 5 1<br>1 2 3<br>2 4 3<br>3 5 4</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>1<br>2<br>2</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>n,m&lt;=10^5</p>
</blockquote>


<figure class="highlight c"><figcaption><span>qujiantongji_fenkuai.cpp</span><a href="/downloads/code/qujiantongji_fenkuai.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> A[N], B[N];</span><br><span class="line"><span class="keyword">int</span> S;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> ka = L / S, kb = R / S;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (ka == kb) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = L; i &lt;= R; i++) {</span><br><span class="line">            res += A[i] &lt;= x;</span><br><span class="line">        }</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = L; i &lt; (ka + <span class="number">1</span>) * S; i++)</span><br><span class="line">            res += A[i] &lt;= x;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = ka + <span class="number">1</span>; i &lt; kb; i++) {</span><br><span class="line">            res += upper_bound(B + i * S, B + i * S + S, x) - (B + i * S);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = kb * S; i &lt;= R; i++)</span><br><span class="line">            res += A[i] &lt;= x;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;A[i]);</span><br><span class="line">        B[i] = A[i];</span><br><span class="line">    }</span><br><span class="line">    S = <span class="built_in">sqrt</span>(n*<span class="built_in">log</span>(n)/<span class="built_in">log</span>(<span class="number">2</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=S;i+S<span class="number">-1</span>&lt;=n;i+=S){</span><br><span class="line">        sort(B+i, B+i+S);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="keyword">int</span> a, b, x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;x);</span><br><span class="line">        <span class="keyword">int</span> ans = query(a, b, x);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>qujiantongji2.cpp</span><a href="/downloads/code/qujiantongji2.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> A[N], sum[<span class="number">320</span>][N];</span><br><span class="line"><span class="keyword">int</span> S;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> ka = L / S, kb = R / S;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (ka == kb) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = L; i &lt;= R; i++) {</span><br><span class="line">            res += A[i] &lt;= x;</span><br><span class="line">        }</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = L; i &lt; (ka + <span class="number">1</span>) * S; i++)</span><br><span class="line">            res += A[i] &lt;= x;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = ka + <span class="number">1</span>; i &lt; kb; i++) {</span><br><span class="line">            res += sum[i][x];</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = kb * S; i &lt;= R; i++)</span><br><span class="line">            res += A[i] &lt;= x;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    S = <span class="built_in">sqrt</span>(n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;A[i]);</span><br><span class="line">        sum[i/S][A[i]] ++;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n/S; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">            sum[i][j] += sum[i][j<span class="number">-1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="keyword">int</span> a, b, x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;x);</span><br><span class="line">        <span class="keyword">int</span> ans = query(a, b, x);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>qujiantongji_fenwick_tree.cpp</span><a href="/downloads/code/qujiantongji_fenwick_tree.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> A[N];</span><br><span class="line"><span class="keyword">int</span> C[N];</span><br><span class="line"><span class="keyword">int</span> pre[N];</span><br><span class="line"><span class="keyword">int</span> ans[N];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> x, id, flag;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt;query[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> a)</span></span>{</span><br><span class="line">    <span class="keyword">while</span>(x&lt;=n){</span><br><span class="line">        C[x] += a;</span><br><span class="line">        x += x&amp;-x;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x){</span><br><span class="line">        res+= C[x];</span><br><span class="line">        x-= x&amp;-x;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) pre[i] = pre[i<span class="number">-1</span>] + A[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        C[i] = pre[i] - pre[i-(i&amp;-i)];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;A[i]);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="keyword">int</span> L, R, x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;L, &amp;R, &amp;x);</span><br><span class="line">        query[R].push_back((Node){x, i, <span class="number">1</span>});</span><br><span class="line">        query[L<span class="number">-1</span>].push_back((Node){x, i, <span class="number">-1</span>});</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="comment">//    for(int i=1;i&lt;=n;i++) add(A[i], 1);  wrong</span></span><br><span class="line"><span class="comment">//  ä¸‹æ ‡æœ‰åºï¼ŒæŒ‰åºç‚¹äº®äºŒè¿›åˆ¶å€¼ï¼Œ æƒå€¼æ ‘çŠ¶æ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        add(A[i], <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;query[i].<span class="built_in">size</span>();j++){</span><br><span class="line">            ans[query[i][j].id] += query[i][j].flag * sum(query[i][j].x);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="comment">//    ç¦»çº¿å›žç­”è¯¢é—®,</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>data_structure</tag>
        <tag>fenwick_tree_offline</tag>
        <tag>seg_tree</tag>
        <tag>block</tag>
      </tags>
  </entry>
  <entry>
    <title>æœ€ä¼˜è´¸æ˜“åˆ†å—</title>
    <url>/blog/%E6%9C%80%E4%BC%98%E8%B4%B8%E6%98%93%E5%88%86%E5%9D%97/</url>
    <content><![CDATA[<p>Cå›½æœ‰ n åº§åŸŽå¸‚ï¼Œç¼–å·æ˜¯ 1 åˆ° n ï¼Œç¼–å·ä¸º i çš„åŸŽå¸‚æœ‰è·¯åˆ°ç¼–å·ä¸º i+1 çš„åŸŽå¸‚ï¼ˆç¼–å·ä¸º n çš„åŸŽå¸‚æ²¡æœ‰è·¯åˆ°å…¶ä»–çš„åŸŽå¸‚ï¼‰ã€‚</p>
<p>Cå›½å¹…å‘˜è¾½é˜”ï¼Œå„åœ°çš„èµ„æºåˆ†å¸ƒæƒ…å†µå„ä¸ç›¸åŒï¼Œè¿™å°±å¯¼è‡´äº†åŒä¸€ç§å•†å“åœ¨ä¸åŒåŸŽå¸‚çš„ä»·æ ¼ä¸ä¸€å®šç›¸åŒã€‚ä½†æ˜¯ï¼ŒåŒä¸€ç§å•†å“åœ¨åŒä¸€ä¸ªåŸŽå¸‚çš„ä¹°å…¥ä»·å’Œå–å‡ºä»·å§‹ç»ˆæ˜¯ç›¸åŒçš„ã€‚</p>
<p>å•†äººé˜¿é¾™å†æ¬¡æ¥åˆ°Cå›½æ—…æ¸¸ã€‚ä»–è¿˜æ˜¯æƒ³è´©å–æ°´æ™¶èµšå–æ—…è´¹ï¼Œåœ¨æŸä¸ªåŸŽå¸‚ä¹°å…¥ï¼Œå†å¦ä¸€ä¸ªåŸŽå¸‚å–å‡ºã€‚</p>
<p>ä»–å°†ä»Žç¼–å·ä¸º a çš„åŸŽå¸‚åˆ°ç¼–å·åˆ° b çš„åŸŽå¸‚ã€‚è¯·ä½ å¸®ä»–ç®—ç®—ï¼Œæœ€å¤šèƒ½èµšå¤šå°‘é’±ã€‚</p>
<p>æ³¨ï¼šä»–æœ€å¤šè¿›è¡Œä¸€æ¬¡ä¹°å…¥å’Œä¸€æ¬¡å–å‡ºã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°nå’Œmï¼Œè¡¨ç¤ºnä¸ªåŸŽå¸‚å’Œmä¸ªè¯¢é—®ã€‚<br>ç¬¬äºŒè¡Œnä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºnåº§åŸŽå¸‚æ°´æ™¶çš„ä¹°å…¥å’Œå–å‡ºçš„ä»·æ ¼ã€‚<br>æŽ¥ä¸‹æ¥mè¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°a,bï¼Œè¡¨ç¤ºé˜¿é¾™è¦ä»Žç¼–å·ä¸ºaçš„åŸŽå¸‚åˆ°ç¼–å·ä¸ºbçš„åŸŽå¸‚ï¼ˆä¿è¯a&lt;bï¼‰ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯¹äºŽæ¯ä¸ªè¯¢é—®è¾“å‡ºé˜¿é¾™æœ€å¤šèƒ½èµšå¤šå°‘é’±ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>6 3<br>2 1 3 6 4 5<br>1 2<br>2 4<br>1 6</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>0<br>5<br>5</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>ä»Ž1åˆ°2ï¼Œæ— æ³•èµšé’±ã€‚<br>ä»Ž2åˆ°4ï¼Œåœ¨ç¼–å·ä¸º2çš„åŸŽå¸‚ä¹°å…¥ï¼Œåœ¨ç¼–å·ä¸º4çš„åŸŽå¸‚å–å‡ºã€‚<br>ä»Ž1åˆ°6ï¼Œåœ¨ç¼–å·ä¸º2çš„åŸŽå¸‚ä¹°å…¥ï¼Œåœ¨ç¼–å·ä¸º4çš„åŸŽå¸‚å–å‡ºã€‚</p>
</blockquote>


<figure class="highlight c"><figcaption><span>zuiyoumaoyi_fenkuai.cpp</span><a href="/downloads/code/zuiyoumaoyi_fenkuai.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">320</span>, M = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> S;</span><br><span class="line"><span class="keyword">int</span> A[M];</span><br><span class="line"><span class="keyword">int</span> V[N], Mi[N], Mx[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> ka = L/S, kb= R/S;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>, mi = A[L];</span><br><span class="line">    <span class="keyword">if</span>(ka==kb){</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=L+<span class="number">1</span>;i&lt;=R;i++){</span><br><span class="line">            res = <span class="built_in">max</span>(res, A[i] - mi);</span><br><span class="line">            mi = <span class="built_in">min</span>(mi, A[i]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span>{</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=L+<span class="number">1</span>;i&lt;(ka+<span class="number">1</span>)*S;i++){</span><br><span class="line">            res = <span class="built_in">max</span>(res, A[i] - mi);</span><br><span class="line">            mi = <span class="built_in">min</span>(mi, A[i]);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=ka+<span class="number">1</span>;i&lt;kb;i++){</span><br><span class="line">            res = <span class="built_in">max</span>(res, <span class="built_in">max</span>(V[i], Mx[i] - mi));</span><br><span class="line">            mi = <span class="built_in">min</span>(mi, Mi[i]);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=kb*S;i&lt;=R;i++){</span><br><span class="line">            res = <span class="built_in">max</span>(res, A[i] - mi);</span><br><span class="line">            mi = <span class="built_in">min</span>(mi, A[i]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;A[i]);</span><br><span class="line">    S = <span class="built_in">sqrt</span>(n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n/S; i++){</span><br><span class="line">        V[i] = <span class="number">0</span>;</span><br><span class="line">        Mi[i] = <span class="number">1e9</span>;</span><br><span class="line">        Mx[i] = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">int</span> x = i/S;</span><br><span class="line">        V[x] = <span class="built_in">max</span>(V[x], A[i] - Mi[x]);</span><br><span class="line">        Mi[x] = <span class="built_in">min</span>(Mi[x], A[i]);</span><br><span class="line">        Mx[x] = <span class="built_in">max</span>(Mx[x], A[i]);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="keyword">int</span> l, r;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;l, &amp;r);</span><br><span class="line">        <span class="keyword">int</span> ans = query(l, r);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>zuiyoumaoyi_segtree.cpp</span><a href="/downloads/code/zuiyoumaoyi_segtree.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> A[N];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> val, mi, mx;</span><br><span class="line">    <span class="keyword">int</span> L, R;</span><br><span class="line">}tree[N&lt;&lt;<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">up</span><span class="params">(Node&amp;root, Node &amp;ls, Node &amp;rs)</span></span>{</span><br><span class="line">    root.val = <span class="built_in">max</span>(<span class="built_in">max</span>(ls.val, rs.val), rs.mx-ls.mi);</span><br><span class="line">    root.mi = <span class="built_in">min</span>(ls.mi, rs.mi);</span><br><span class="line">    root.mx = <span class="built_in">max</span>(ls.mx, rs.mx);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    tree[p].L = L, tree[p].R = R;</span><br><span class="line">    <span class="keyword">if</span>(L==R){</span><br><span class="line">        tree[p].val = <span class="number">0</span>;</span><br><span class="line">        tree[p].mi = A[L];</span><br><span class="line">        tree[p].mx = A[L];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = L+R&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(L, mid, p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    build(mid+<span class="number">1</span>, R, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    <span class="comment">//é€’å½’å®Œæ¯•ï¼Œç”¨tree</span></span><br><span class="line">    up(tree[p], tree[p&lt;&lt;<span class="number">1</span>], tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function">Node <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(tree[p].L ==L &amp;&amp; tree[p].R==R){</span><br><span class="line">        <span class="keyword">return</span> tree[p];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = tree[p].L + tree[p].R &gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(R&lt;=mid) <span class="keyword">return</span> query(L, R, p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(L&gt;mid) <span class="keyword">return</span> query(L, R, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span>{</span><br><span class="line"><span class="comment">//        å‡†å¤‡å¼€å§‹é€’å½’</span></span><br><span class="line">        Node B = query(L, mid, p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">        Node C = query(mid+<span class="number">1</span>, R, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">        Node res;</span><br><span class="line">        up(res, B, C);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n ,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;A[i]);</span><br><span class="line">    build(<span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="keyword">int</span> L, R;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;L, &amp;R);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(L, R, <span class="number">1</span>).val);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>zuiyoumaoyi_beizeng.cpp</span><a href="/downloads/code/zuiyoumaoyi_beizeng.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> A[N];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> V[N][<span class="number">17</span>], Mi[N][<span class="number">17</span>], Mx[N][<span class="number">17</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">step</span> = R - L + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>, mi = <span class="number">1e9</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;(<span class="number">1</span>&lt;&lt;i)&lt;=<span class="built_in">step</span>;i++){</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">step</span> &amp; (<span class="number">1</span>&lt;&lt;i)){</span><br><span class="line">            res = <span class="built_in">max</span>(res, <span class="built_in">max</span>(V[L][i], Mx[L][i] - mi));</span><br><span class="line">            mi = <span class="built_in">min</span>(mi, Mi[L][i]);</span><br><span class="line">            L += (<span class="number">1</span>&lt;&lt;i);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;A[i]);</span><br><span class="line">        V[i][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        Mi[i][<span class="number">0</span>] = A[i];</span><br><span class="line">        Mx[i][<span class="number">0</span>] = A[i];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;(<span class="number">1</span>&lt;&lt;j)&lt;=n;j++){</span><br><span class="line"><span class="comment">//      i starts from i cause'  A starts from 1</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i+(<span class="number">1</span>&lt;&lt;j)<span class="number">-1</span>&lt;=n;i++){</span><br><span class="line">            <span class="keyword">int</span> t = i+(<span class="number">1</span>&lt;&lt;j<span class="number">-1</span>);</span><br><span class="line">            V[i][j] = <span class="built_in">max</span>(<span class="built_in">max</span>(V[i][j<span class="number">-1</span>], V[t][j<span class="number">-1</span>]), Mx[t][j<span class="number">-1</span>] - Mi[i][j<span class="number">-1</span>]);</span><br><span class="line">            Mx[i][j] = <span class="built_in">max</span>(Mx[i][j<span class="number">-1</span>], Mx[t][j<span class="number">-1</span>]);</span><br><span class="line">            Mi[i][j] = <span class="built_in">min</span>(Mi[i][j<span class="number">-1</span>], Mi[t][j<span class="number">-1</span>]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="keyword">int</span> L, R;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;L, &amp;R);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(L, R));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>zuiyoumaoyi_union_set.cpp</span><a href="/downloads/code/zuiyoumaoyi_union_set.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> A[N];</span><br><span class="line"><span class="keyword">int</span> fa[N];</span><br><span class="line"><span class="comment">// corresponding value from i to root</span></span><br><span class="line"><span class="keyword">int</span> V[N], Mx[N], Mi[N];</span><br><span class="line"><span class="keyword">int</span> ans[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> L, id;</span><br><span class="line">};</span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt;query[N];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getfa</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(fa[x] != x) {</span><br><span class="line">        <span class="keyword">int</span> t = fa[x];</span><br><span class="line">        <span class="comment">// finish calc of father's Mi[t], V[t], Mx[t]</span></span><br><span class="line">        fa[x] = getfa(t);</span><br><span class="line">        <span class="comment">// x--&gt; t --&gt; fa[x]</span></span><br><span class="line">        V[x] = <span class="built_in">max</span>(V[x], <span class="built_in">max</span>(V[t], Mx[t] - Mi[x]));</span><br><span class="line">        Mi[x] = <span class="built_in">min</span>(Mi[x], Mi[t]);</span><br><span class="line">        Mx[x] = <span class="built_in">max</span>(Mx[x], Mx[t]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> fa[x];</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;A[i]);</span><br><span class="line">        fa[i] = i;</span><br><span class="line">        Mi[i] = Mx[i] = A[i];</span><br><span class="line">        V[i] = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="keyword">int</span> L, R;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;L, &amp;R);</span><br><span class="line">        query[R].push_back((Node){L, i});</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;query[i].<span class="built_in">size</span>();j++){</span><br><span class="line">            <span class="keyword">int</span> L = query[i][j].L;  <span class="comment">//[L, i]</span></span><br><span class="line">            getfa(L);</span><br><span class="line">            ans[query[i][j].id] = V[L];</span><br><span class="line">        }</span><br><span class="line">        fa[i] = i+<span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans[i]);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>data_structure</tag>
        <tag>seg_tree</tag>
        <tag>block</tag>
        <tag>beizeng</tag>
      </tags>
  </entry>
  <entry>
    <title>è¿›ç”µæ¢¯</title>
    <url>/blog/%E8%BF%9B%E7%94%B5%E6%A2%AF/</url>
    <content><![CDATA[<p>nä¸ªäººåœ¨æŽ’æˆä¸€é˜Ÿåœ¨ç”µæ¢¯é¢å‰ï¼Œæœ€å‰é¢çš„äººæ¯ä¸€ç§’é’Ÿä¼šè¿›è¡Œä¸€æ¬¡é€‰æ‹©ï¼Œæœ‰pçš„æ¦‚çŽ‡è¿›ç”µæ¢¯ï¼Œæœ‰1-pçš„æ¦‚çŽ‡åœåœ¨åŽŸåœ°ã€‚æ¯ä¸ªäººåªæœ‰ä»–å‰é¢çš„äººéƒ½è¿›ç”µæ¢¯äº†ï¼Œä»–æ‰æœ‰å¯èƒ½è¿›ç”µæ¢¯ã€‚æ±‚tç§’ä¹‹åŽï¼Œè¿›ç”µæ¢¯äººæ•°çš„æœŸæœ›å€¼ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ä¸€è¡Œä¸‰ä¸ªæ•°n t pï¼ˆn,tæ˜¯ä¸è¶…è¿‡2000çš„æ•´æ•°ï¼›pæ˜¯æµ®ç‚¹æ•°ï¼ŒèŒƒå›´åœ¨[0,1]ä¹‹é—´ï¼‰ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>è¾“å‡ºtç§’é’ŸåŽï¼Œç”µæ¢¯ä¸­äººæ•°çš„æœŸæœ›å€¼ã€‚ä¿ç•™6ä½å°æ•°ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>1 1 0.50</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>0.500000</p>
</blockquote>


<p>å¡«è¡¨æ³•ï¼š<br>dp[i][j] = dp[i-1][j] * (1-p) + dp[i-1][j-1] * p</p>
<p>åˆ·è¡¨æ³•ï¼š<br>dp[i+1][j] += dp[i][j] * (1-p)<br>dp[i+1][j+1] += dp[i][j] * p</p>
<figure class="highlight c"><figcaption><span>jindianti.cpp</span><a href="/downloads/code/jindianti.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">2010</span>;</span><br><span class="line"><span class="keyword">double</span> dp[N][N];</span><br><span class="line"><span class="keyword">int</span> n, t;</span><br><span class="line"><span class="keyword">double</span> p;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line"></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%lf"</span>, &amp;n, &amp;t, &amp;p);</span><br><span class="line"><span class="comment">//    cin&gt;&gt;n&gt;&gt;t&gt;&gt;p;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) dp[<span class="number">0</span>][i] = <span class="number">0</span>;</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=t;i++){</span><br><span class="line">        dp[i][<span class="number">0</span>] = dp[i<span class="number">-1</span>][<span class="number">0</span>] * (<span class="number">1</span>-p);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=(i,n<span class="number">-1</span>);j++) {</span><br><span class="line">            dp[i][j] = dp[i<span class="number">-1</span>][j] * (<span class="number">1</span>-p) + dp[i<span class="number">-1</span>][j<span class="number">-1</span>] * p;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(i&gt;=n) dp[i][n] = dp[i<span class="number">-1</span>][n] + dp[i<span class="number">-1</span>][n<span class="number">-1</span>] * p;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">double</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        ans += dp[t][i] * i;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.6lf\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>äºŒå‰è‹¹æžœæ ‘</title>
    <url>/blog/%E4%BA%8C%E5%8F%89%E8%8B%B9%E6%9E%9C%E6%A0%91/</url>
    <content><![CDATA[<p>ç»™å®šä¸€æ£µnä¸ªç»“ç‚¹çš„äºŒå‰æ ‘ï¼Œä½ éœ€è¦é€‰æ‹©ä¸€æ£µä»¥1å·ç»“ç‚¹ä¸ºæ ¹ï¼Œmæ¡è¾¹çš„è”é€šå­æ ‘ï¼Œä½¿å¾—æ‰€é€‰æ‹©çš„è¾¹æƒå€¼ä¹‹å’Œæœ€å¤§ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°n,mã€‚<br>ä¹‹åŽn-1è¡Œï¼Œæ¯è¡Œä¸‰ä¸ªæ•´æ•°x,y,zï¼Œè¡¨ç¤ºç»“ç‚¹x,yä¹‹é—´æœ‰ä¸€æ¡æƒå€¼ä¸ºzçš„æ— å‘è¾¹ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>æ‰€é€‰çš„è¾¹çš„æƒå€¼å’Œçš„æœ€å¤§å€¼ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>5 2<br>1 3 1<br>1 4 10<br>2 3 20<br>3 5 20</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>21</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>n&lt;=100, m&lt;=n-1.</p>
</blockquote>


<figure class="highlight c"><figcaption><span>erchapingguo1.cpp</span><a href="/downloads/code/erchapingguo1.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//70%</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">110</span>;</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> to, val;</span><br><span class="line">};</span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt; edge[N];</span><br><span class="line"><span class="keyword">int</span> ch[N][<span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> dp[N][N];</span><br><span class="line"><span class="keyword">int</span> val[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> k=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edge[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edge[x][i].to;</span><br><span class="line">        <span class="keyword">if</span>(y!=f){</span><br><span class="line">            dfs(y, x);</span><br><span class="line">            val[y] = edge[x][i].val;</span><br><span class="line">            ch[x][k++] = y;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"><span class="comment">//    printf("%d %d\n", x, k);</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DP</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> ls = ch[x][<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">int</span> rs = ch[x][<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">if</span>(ls==<span class="number">0</span> &amp;&amp; rs==<span class="number">0</span>){</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) dp[x][i] = val[x];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(ls!=<span class="number">0</span> &amp;&amp; rs!=<span class="number">0</span>) {</span><br><span class="line">        DP(ls);</span><br><span class="line">        DP(rs);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j + <span class="number">1</span> &lt;= i; j++)</span><br><span class="line">                dp[x][i] = <span class="built_in">max</span>(dp[x][i], dp[ls][j] + dp[rs][i - j - <span class="number">1</span>] + val[x]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m); m++;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++) {</span><br><span class="line">        <span class="keyword">int</span> a, b, c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">        edge[a].push_back({b, c});</span><br><span class="line">        edge[b].push_back({a, c});</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    DP(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[<span class="number">1</span>][m]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>erchapingguo2.cpp</span><a href="/downloads/code/erchapingguo2.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">110</span>;</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> to, val;</span><br><span class="line">};</span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt; edge[N];</span><br><span class="line"><span class="keyword">int</span> ch[N][<span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> dp[N][N];</span><br><span class="line"><span class="keyword">int</span> val[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> k=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edge[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edge[x][i].to;</span><br><span class="line">        <span class="keyword">if</span>(y!=f){</span><br><span class="line">            dfs(y, x);</span><br><span class="line">            val[y] = edge[x][i].val;</span><br><span class="line">            ch[x][k++] = y;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(k!=<span class="number">0</span>){</span><br><span class="line">        <span class="keyword">int</span> ls = ch[x][<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> rs = ch[x][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= i; j++)</span><br><span class="line">                dp[x][i] = <span class="built_in">max</span>(dp[x][i], dp[ls][j] + dp[rs][i - j]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=m;i&gt;=<span class="number">1</span>;i--)</span><br><span class="line">        dp[x][i] = dp[x][i<span class="number">-1</span>] + val[x];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m); m++;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++) {</span><br><span class="line">        <span class="keyword">int</span> a, b, c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">        edge[a].push_back({b, c});</span><br><span class="line">        edge[b].push_back({a, c});</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[<span class="number">1</span>][m]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>duochapingguo.cpp</span><a href="/downloads/code/duochapingguo.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// Note that m edges rather than m nodes.</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">110</span>;</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> to, val;</span><br><span class="line">};</span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt; edge[N];</span><br><span class="line"><span class="keyword">int</span> dp[N][N];</span><br><span class="line"><span class="keyword">int</span> tmp[N];</span><br><span class="line"><span class="keyword">int</span> sz[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edge[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edge[x][i].to, val = edge[x][i].val;</span><br><span class="line">        <span class="keyword">if</span> (y==f) <span class="keyword">continue</span>;</span><br><span class="line">        dfs(y, x);</span><br><span class="line">        sz[x] += sz[y] + <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">memset</span>(tmp, <span class="number">0</span>, <span class="keyword">sizeof</span> tmp);</span><br><span class="line">        <span class="keyword">int</span> mi= <span class="built_in">min</span>(sz[x], m);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=mi;j++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> t=<span class="number">1</span>;t&lt;=j;t++) <span class="comment">// tä¸ªåˆ†ç»™æ–°å„¿å­ç”¨,j-tç»™ä¹‹å‰å„¿å­ç”¨</span></span><br><span class="line">                tmp[j] = <span class="built_in">max</span>(tmp[j], dp[y][t<span class="number">-1</span>] + dp[x][j-t] + val);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++) dp[x][j] = <span class="built_in">max</span>(dp[x][j], tmp[j]);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++) {</span><br><span class="line">        <span class="keyword">int</span> a, b, c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">        edge[a].push_back((Node){b, c});</span><br><span class="line">        edge[b].push_back((Node){a, c});</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[<span class="number">1</span>][m]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>æ²¡æœ‰ä¸Šå¸çš„èˆžä¼š</title>
    <url>/blog/%E6%B2%A1%E6%9C%89%E4%B8%8A%E5%8F%B8%E7%9A%84%E8%88%9E%E4%BC%9A/</url>
    <content><![CDATA[<p>æœ‰ä¸ªå…¬å¸è¦ä¸¾è¡Œä¸€åœºæ™šä¼šã€‚ä¸ºäº†è®©åˆ°ä¼šçš„æ¯ä¸ªäººä¸å—ä»–çš„ç›´æŽ¥ä¸Šå¸çº¦æŸè€Œèƒ½çŽ©å¾—å¼€å¿ƒï¼Œå…¬å¸é¢†å¯¼å†³å®šï¼šå¦‚æžœé‚€è¯·äº†æŸä¸ªäººï¼Œé‚£ä¹ˆä¸€å®šä¸ä¼šå†é‚€è¯·ä»–çš„ç›´æŽ¥çš„ä¸Šå¸ï¼Œä½†è¯¥äººçš„ä¸Šå¸çš„ä¸Šå¸ï¼Œä¸Šå¸çš„ä¸Šå¸çš„ä¸Šå¸â€¦â€¦éƒ½å¯ä»¥é‚€è¯·ã€‚å·²çŸ¥æ¯ä¸ªäººæœ€å¤šæœ‰å”¯ä¸€çš„ä¸€ä¸ªä¸Šå¸ã€‚<br>å·²çŸ¥å…¬å¸çš„æ¯ä¸ªäººå‚åŠ æ™šä¼šéƒ½èƒ½ä¸ºæ™šä¼šå¢žæ·»ä¸€äº›æ°”æ°›ï¼Œæ±‚ä¸€ä¸ªé‚€è¯·æ–¹æ¡ˆï¼Œä½¿æ°”æ°›å€¼çš„å’Œæœ€å¤§ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬1è¡Œä¸€ä¸ªæ•´æ•°Nè¡¨ç¤ºå…¬å¸çš„äººæ•°ï¼Œã€‚<br>æŽ¥ä¸‹ä¸€è¡ŒNä¸ªæ•´æ•°ã€‚ç¬¬iè¡Œçš„æ•°è¡¨ç¤ºç¬¬iä¸ªäººçš„æ°”æ°›å€¼xï¼Œã€‚<br>æŽ¥N-1ä¸‹æ¥æ¯è¡Œä¸¤ä¸ªæ•´æ•°Kï¼ŒLã€‚è¡¨ç¤ºç¬¬Kä¸ªäººæ˜¯ç¬¬Lä¸ªäººçš„ä¸Šå¸ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>ä¸€ä¸ªæ•°ï¼Œè¡¨ç¤ºæœ€å¤§çš„æ°”æ°›å€¼å’Œã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>4<br>1 7 3 4<br>1 2<br>2 3<br>2 4</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>8</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>ä½ å¯ä»¥è®¤ä¸ºå…¬å¸åªæœ‰å”¯ä¸€çš„æ€»bossï¼Œè¿™ä¸ªå…¬å¸çš„å…³ç³»å›¾æ˜¯ä¸€æ£µæ ‘ã€‚</p>
</blockquote>


<figure class="highlight c"><figcaption><span>wuhui.cpp</span><a href="/downloads/code/wuhui.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">200010</span>;</span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; edge[N];</span><br><span class="line"><span class="keyword">int</span> cnt[N];</span><br><span class="line"><span class="keyword">int</span> dp[N][<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edge[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edge[x][i];</span><br><span class="line">        dfs(y);</span><br><span class="line">        dp[x][<span class="number">1</span>] += dp[y][<span class="number">0</span>];</span><br><span class="line">        dp[x][<span class="number">0</span>] += <span class="built_in">max</span>(dp[y][<span class="number">0</span>], dp[y][<span class="number">1</span>]);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;dp[i][<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++) {</span><br><span class="line">        <span class="keyword">int</span> a, b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        edge[a].push_back(b);</span><br><span class="line">        cnt[b]++;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> t = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;=n; i++)</span><br><span class="line">        <span class="keyword">if</span> (!cnt[i]) {</span><br><span class="line">            t = i;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">    dfs(t);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, <span class="built_in">max</span>(dp[t][<span class="number">0</span>], dp[t][<span class="number">1</span>]));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>ç”µè„‘ç—…æ¯’</title>
    <url>/blog/%E7%94%B5%E8%84%91%E7%97%85%E6%AF%92/</url>
    <content><![CDATA[<p>å‡è®¾ä½ æ˜¯ä¸€ä¸ªé»‘å®¢ï¼Œå…¥ä¾µäº†ä¸€ä¸ªæœ‰ç€nå°è®¡ç®—æœºï¼ˆç¼–å·ä¸º0,1,2,â€¦n-1ï¼‰çš„ç½‘ç»œã€‚ä¸€å…±æœ‰nç§æœåŠ¡ï¼Œæ¯å°è®¡ç®—æœºéƒ½è¿è¡Œç€æ‰€æœ‰çš„æœåŠ¡ã€‚å¯¹äºŽæ¯å°è®¡ç®—æœºï¼Œä½ éƒ½å¯ä»¥é€‰æ‹©ä¸€é¡¹æœåŠ¡ï¼Œç»ˆæ­¢è¿™å°è®¡ç®—æœºå’Œæ‰€æœ‰ä¸Žå®ƒç›¸é‚»è®¡ç®—æœºçš„è¯¥é¡¹æœåŠ¡ï¼ˆå¦‚æžœå…¶ä¸­ä¸€äº›æœåŠ¡å·²ç»åœæ­¢ï¼Œåˆ™è¿™äº›æœåŠ¡ç»§ç»­å¤„äºŽåœæ­¢çŠ¶æ€ï¼‰ã€‚ä½ çš„ç›®æ ‡æ˜¯è®©å°½å¯èƒ½å¤šçš„æœåŠ¡ç˜«ç—ªï¼ˆå³ï¼šæ²¡æœ‰ä»»ä½•è®¡ç®—æœºè¿è¡Œè¯¥é¡¹æœåŠ¡ï¼‰ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>å¤šç»„æ•°æ®ï¼Œä»¥n=0ç»“å°¾ã€‚<br>æ¯ç»„æ•°æ®ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°nï¼Œn&lt;=16ã€‚<br>æŽ¥ä¸‹æ¥ï¼Œæ¯è¡ŒåŒ…æ‹¬m+1ä¸ªæ•´æ•°ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªæ•´æ•°ä¸ºmï¼Œè¡¨ç¤ºå—è¿™å°ç”µè„‘æœåŠ¡çš„ç”µè„‘å°æ•°ï¼›ç„¶åŽmä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºè¿™äº›ç”µè„‘çš„ç¼–å·ã€‚ç”µè„‘çš„ç¼–å·ä¸º0åˆ°n-1ä¹‹é—´çš„æ•´æ•°ã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å¯¹äºŽæ¯ç»„æ•°æ®ï¼Œè¾“å‡ºå®Œå…¨ç˜«ç—ªçš„æœåŠ¡çš„æœ€å¤§æ•°é‡ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>3<br>2 1 2<br>2 0 2<br>2 0 1<br>4<br>1 1<br>1 0<br>1 3<br>1 2<br>0</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>3<br>2</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>n&lt;=16</p>
</blockquote>


<figure class="highlight c"><figcaption><span>diannaobingdu.cpp</span><a href="/downloads/code/diannaobingdu.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> edge[N];</span><br><span class="line"><span class="keyword">int</span> dp[<span class="number">1</span>&lt;&lt;N], arrive[<span class="number">1</span>&lt;&lt;N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n), n!=<span class="number">0</span>){</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="keyword">sizeof</span> dp);</span><br><span class="line">        <span class="built_in">memset</span>(arrive, <span class="number">0</span>, <span class="keyword">sizeof</span> arrive);</span><br><span class="line">        <span class="built_in">memset</span>(edge, <span class="number">0</span>, <span class="keyword">sizeof</span> edge);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++){</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;m);</span><br><span class="line">            edge[i]|=(<span class="number">1</span>&lt;&lt;i);</span><br><span class="line">            <span class="keyword">int</span> x;</span><br><span class="line">            <span class="keyword">while</span>(m--)</span><br><span class="line">            {</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;x);</span><br><span class="line">                edge[i]|= (<span class="number">1</span>&lt;&lt;x);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">1</span>&lt;&lt;n;i++){</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++){</span><br><span class="line">                <span class="keyword">if</span>(i&gt;&gt;j&amp;<span class="number">1</span>) arrive[i] |= edge[j];</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">1</span>&lt;&lt;n;i++){</span><br><span class="line">            <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i;j;j=(j<span class="number">-1</span>)&amp;i){</span><br><span class="line">                <span class="keyword">if</span>(arrive[j] == (<span class="number">1</span>&lt;&lt;n)<span class="number">-1</span>)</span><br><span class="line">                    ans = <span class="built_in">max</span>(ans, dp[i^j] + <span class="number">1</span>);</span><br><span class="line">            }</span><br><span class="line">            dp[i] = ans;</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[(<span class="number">1</span>&lt;&lt;n)<span class="number">-1</span>]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>ç‚®å…µé˜µåœ°</title>
    <url>/blog/%E7%82%AE%E5%85%B5%E9%98%B5%E5%9C%B0/</url>
    <content><![CDATA[<p>å¸ä»¤éƒ¨çš„å°†å†›ä»¬æ‰“ç®—åœ¨N<em>Mçš„ç½‘æ ¼åœ°å›¾ä¸Šéƒ¨ç½²ä»–ä»¬çš„ç‚®å…µéƒ¨é˜Ÿã€‚ä¸€ä¸ªN</em>Mçš„åœ°å›¾ç”±Nè¡ŒMåˆ—ç»„æˆï¼Œåœ°å›¾çš„æ¯ä¸€æ ¼å¯èƒ½æ˜¯å±±åœ°ï¼ˆç”¨â€œHâ€ è¡¨ç¤ºï¼‰ï¼Œä¹Ÿå¯èƒ½æ˜¯å¹³åŽŸï¼ˆç”¨â€œPâ€è¡¨ç¤ºï¼‰ï¼Œå¦‚ä¸‹å›¾ã€‚åœ¨æ¯ä¸€æ ¼å¹³åŽŸåœ°å½¢ä¸Šæœ€å¤šå¯ä»¥å¸ƒç½®ä¸€æ”¯ç‚®å…µéƒ¨é˜Ÿï¼ˆå±±åœ°ä¸Šä¸èƒ½å¤Ÿéƒ¨ç½²ç‚®å…µéƒ¨é˜Ÿï¼‰ï¼›ä¸€æ”¯ç‚®å…µéƒ¨é˜Ÿåœ¨åœ°å›¾ä¸Šçš„æ”»å‡»èŒƒå›´å¦‚å›¾ä¸­é»‘è‰²åŒºåŸŸæ‰€ç¤ºï¼š</p>
<img src="/downloads/imgs/paobing.png" class="example" width="500" height="500" title="title exg" alt="alt exg">
<p>å¦‚æžœåœ¨åœ°å›¾ä¸­çš„ç°è‰²æ‰€æ ‡è¯†çš„å¹³åŽŸä¸Šéƒ¨ç½²ä¸€æ”¯ç‚®å…µéƒ¨é˜Ÿï¼Œåˆ™å›¾ä¸­çš„é»‘è‰²çš„ç½‘æ ¼è¡¨ç¤ºå®ƒèƒ½å¤Ÿæ”»å‡»åˆ°çš„åŒºåŸŸï¼šæ²¿æ¨ªå‘å·¦å³å„ä¸¤æ ¼ï¼Œæ²¿çºµå‘ä¸Šä¸‹å„ä¸¤æ ¼ã€‚å›¾ä¸Šå…¶å®ƒç™½è‰²ç½‘æ ¼å‡æ”»å‡»ä¸åˆ°ã€‚ä»Žå›¾ä¸Šå¯è§ç‚®å…µçš„æ”»å‡»èŒƒå›´ä¸å—åœ°å½¢çš„å½±å“ã€‚</p>
<p>çŽ°åœ¨ï¼Œå°†å†›ä»¬è§„åˆ’å¦‚ä½•éƒ¨ç½²ç‚®å…µéƒ¨é˜Ÿï¼Œåœ¨é˜²æ­¢è¯¯ä¼¤çš„å‰æä¸‹ï¼ˆä¿è¯ä»»ä½•ä¸¤æ”¯ç‚®å…µéƒ¨é˜Ÿä¹‹é—´ä¸èƒ½äº’ç›¸æ”»å‡»ï¼Œå³ä»»ä½•ä¸€æ”¯ç‚®å…µéƒ¨é˜Ÿéƒ½ä¸åœ¨å…¶ä»–æ”¯ç‚®å…µéƒ¨é˜Ÿçš„æ”»å‡»èŒƒå›´å†…ï¼‰ï¼Œåœ¨æ•´ä¸ªåœ°å›¾åŒºåŸŸå†…æœ€å¤šèƒ½å¤Ÿæ‘†æ”¾å¤šå°‘æˆ‘å†›çš„ç‚®å…µéƒ¨é˜Ÿã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>æ–‡ä»¶çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªç”±ç©ºæ ¼åˆ†å‰²å¼€çš„æ­£æ•´æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºNå’ŒMã€‚<br>æŽ¥ä¸‹æ¥çš„Nè¡Œï¼Œæ¯ä¸€è¡Œå«æœ‰è¿žç»­çš„Mä¸ªå­—ç¬¦ï¼ˆâ€˜Pâ€™æˆ–è€…â€˜Hâ€™ï¼‰ï¼Œä¸­é—´æ²¡æœ‰ç©ºæ ¼ã€‚æŒ‰é¡ºåºè¡¨ç¤ºåœ°å›¾ä¸­æ¯ä¸€è¡Œçš„æ•°æ®ã€‚</p>
</blockquote>

<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>æ–‡ä»¶ä»…åœ¨ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°Kï¼Œè¡¨ç¤ºæœ€å¤šèƒ½æ‘†æ”¾çš„ç‚®å…µéƒ¨é˜Ÿçš„æ•°é‡ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>5 4<br>PHPP<br>PPHH<br>PPPP<br>PHPP<br>PHHP</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>6</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>N&lt;=100, M&lt;=10.</p>
</blockquote>



<figure class="highlight c"><figcaption><span>paobingzhendi.cpp</span><a href="/downloads/code/paobingzhendi.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">110</span>, M = <span class="number">15</span>;</span><br><span class="line"><span class="keyword">int</span> S[N];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">char</span> ms[M];</span><br><span class="line"><span class="keyword">int</span> s[<span class="number">100</span>], tot;</span><br><span class="line"><span class="keyword">int</span> c[<span class="number">1025</span>];</span><br><span class="line"><span class="keyword">int</span> dp[N][<span class="number">1025</span>][<span class="number">1025</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> x&amp;(-x);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, ms);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m;j++){</span><br><span class="line">            S[i]|= (ms[j]==<span class="string">'H'</span>) &lt;&lt;j;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">1</span>&lt;&lt;m;i++)</span><br><span class="line">        <span class="keyword">if</span>(!(i&amp;(i&lt;&lt;<span class="number">1</span>)) &amp;&amp; !(i&amp;(i&lt;&lt;<span class="number">2</span>))) s[++tot] = i;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">1</span>&lt;&lt;m;i++)</span><br><span class="line">        c[i]  = c[i-lowbit(i)] + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> x=<span class="number">1</span>;x&lt;=n;x++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=tot;i++){</span><br><span class="line">            <span class="keyword">if</span>(s[i]&amp;S[x]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=tot;j++){</span><br><span class="line">                <span class="keyword">if</span>(s[i] &amp; s[j]) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span>(s[j] &amp; S[x<span class="number">-1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=tot;k++){</span><br><span class="line">                    <span class="keyword">if</span>(s[i]&amp;s[k]) <span class="keyword">continue</span>;</span><br><span class="line">                    <span class="keyword">if</span>(s[j]&amp;s[k]) <span class="keyword">continue</span>;</span><br><span class="line">                    <span class="keyword">if</span>(x&gt;=<span class="number">2</span> &amp;&amp; s[k]&amp;S[x<span class="number">-2</span>]) <span class="keyword">continue</span>;</span><br><span class="line">                    dp[x][i][j] = <span class="built_in">max</span>(dp[x][i][j], dp[x<span class="number">-1</span>][j][k] + c[s[i]]);</span><br><span class="line">                    ans = <span class="built_in">max</span>(ans, dp[x][i][j]);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>æ„¤æ€’çš„å°é¸Ÿ (NOIP2016)</title>
    <url>/blog/%E6%84%A4%E6%80%92%E7%9A%84%E5%B0%8F%E9%B8%9F/</url>
    <content><![CDATA[<p>Kiana æœ€è¿‘æ²‰è¿·äºŽä¸€æ¬¾ç¥žå¥‡çš„æ¸¸æˆæ— æ³•è‡ªæ‹”ã€‚<br>ç®€å•æ¥è¯´ï¼Œè¿™æ¬¾æ¸¸æˆæ˜¯åœ¨ä¸€ä¸ªå¹³é¢ä¸Šè¿›è¡Œçš„ã€‚æœ‰ä¸€æž¶å¼¹å¼“ä½äºŽ (0, 0) å¤„ï¼Œæ¯æ¬¡ Kiana å¯ä»¥ç”¨å®ƒå‘ç¬¬ä¸€è±¡é™å‘å°„ä¸€åªå°é¸Ÿï¼Œå°é¸Ÿä»¬çš„é£žè¡Œè½¨è¿¹å‡ä¸ºå½¢å¦‚ y = ax2 + bx çš„æ›²çº¿ï¼Œå…¶ä¸­ aï¼Œb æ˜¯ Kiana æŒ‡å®šçš„å‚æ•°ï¼Œä¸”å¿…é¡»æ»¡è¶³ a &lt; 0ã€‚å½“å°é¸Ÿè½å›žåœ°é¢ï¼ˆå³ x è½´ï¼‰æ—¶ï¼Œå®ƒå°±ä¼šçž¬é—´æ¶ˆå¤±ã€‚<br>åœ¨æ¸¸æˆçš„æŸä¸ªå…³å¡é‡Œï¼Œå¹³é¢çš„ç¬¬ä¸€è±¡é™ä¸­æœ‰ n åªçŒªï¼Œå…¶ä¸­ç¬¬ i åªçŒªæ‰€åœ¨çš„åæ ‡ä¸º (xi, yi)ã€‚å¦‚æžœæŸåªå°é¸Ÿçš„é£žè¡Œè½¨è¿¹ç»è¿‡äº†(xi, yi)ï¼Œé‚£ä¹ˆç¬¬ i åªçŒªå°±ä¼šè¢«æ¶ˆç­æŽ‰ï¼ŒåŒæ—¶å°é¸Ÿå°†ä¼šæ²¿ç€åŽŸå…ˆçš„è½¨è¿¹ç»§ç»­é£žè¡Œï¼›å¦‚æžœä¸€åªå°é¸Ÿçš„é£žè¡Œè½¨è¿¹æ²¡æœ‰ç»è¿‡(xi, yi)ï¼Œé‚£ä¹ˆè¿™åªå°é¸Ÿé£žè¡Œçš„å…¨è¿‡ç¨‹å°±ä¸ä¼šå¯¹ç¬¬ i åªçŒªäº§ç”Ÿä»»ä½•å½±å“ã€‚<br>ä¾‹å¦‚ï¼Œè‹¥ä¸¤åªçŒªåˆ†åˆ«ä½äºŽ (1, 3) å’Œ (3, 3)ï¼ŒKiana å¯ä»¥é€‰æ‹©å‘å°„ä¸€åªé£žè¡Œè½¨è¿¹ä¸º y = -x2 + 4x çš„å°é¸Ÿï¼Œè¿™æ ·ä¸¤åªçŒªå°±ä¼šè¢«è¿™åªå°é¸Ÿä¸€èµ·æ¶ˆç­ã€‚<br>è€Œè¿™ä¸ªæ¸¸æˆçš„ç›®çš„ï¼Œå°±æ˜¯é€šè¿‡å‘å°„å°é¸Ÿæ¶ˆç­æ‰€æœ‰çš„çŒªã€‚<br>è¿™æ¬¾ç¥žå¥‡æ¸¸æˆçš„æ¯ä¸ªå…³å¡å¯¹æ¥è¯´éƒ½å¾ˆéš¾ï¼Œæ‰€ä»¥ Kiana è¿˜è¾“å…¥äº†ä¸€äº›ç¥žç§˜çš„æŒ‡ä»¤ï¼Œä½¿å¾—è‡ªå·±èƒ½æ›´è½»æ¾åœ°å®Œæˆè¿™ä¸ªæ¸¸æˆã€‚è¿™äº›æŒ‡ä»¤å°†åœ¨ã€Œè¾“å…¥æè¿°ã€ä¸­è¯¦è¿°ã€‚<br>å‡è®¾è¿™æ¬¾æ¸¸æˆä¸€å…±æœ‰ T ä¸ªå…³å¡ï¼ŒçŽ°åœ¨ Kiana æƒ³çŸ¥é“ï¼Œå¯¹äºŽæ¯ä¸€ä¸ªå…³å¡ï¼Œè‡³å°‘éœ€è¦å‘å°„å¤šå°‘åªå°é¸Ÿæ‰èƒ½æ¶ˆç­æ‰€æœ‰çš„çŒªã€‚ç”±äºŽå¥¹ä¸ä¼šç®—ï¼Œæ‰€ä»¥å¸Œæœ›ç”±ä½ å‘Šè¯‰å¥¹ã€‚</p>
<a id="more"></a>

<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ­£æ•´æ•° Tï¼Œè¡¨ç¤ºæ¸¸æˆçš„å…³å¡æ€»æ•°ã€‚<br>ä¸‹é¢ä¾æ¬¡è¾“å…¥è¿™ T ä¸ªå…³å¡çš„ä¿¡æ¯ã€‚æ¯ä¸ªå…³å¡ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªéžè´Ÿæ•´æ•° nï¼Œmï¼Œåˆ†åˆ«è¡¨ç¤ºè¯¥å…³å¡ä¸­çš„çŒªæ•°é‡å’Œ Kiana è¾“å…¥çš„ç¥žç§˜æŒ‡ä»¤ç±»åž‹ã€‚<br>æŽ¥ä¸‹æ¥çš„ n è¡Œä¸­ï¼Œç¬¬ i è¡ŒåŒ…å«ä¸¤ä¸ªæ­£å®žæ•° (xi, yi)ï¼Œè¡¨ç¤ºç¬¬ i åªçŒªåæ ‡ä¸º (xi, yi)ã€‚æ•°æ®ä¿è¯åŒä¸€ä¸ªå…³å¡ä¸­ä¸å­˜åœ¨ä¸¤åªåæ ‡å®Œå…¨ç›¸åŒçš„çŒªã€‚</p>
<p>ä¿è¯ 1 â‰¤ n â‰¤ 18ï¼Œ0 â‰¤ m â‰¤ 2ï¼Œ0 &lt; xi, yi &lt; 10ï¼Œè¾“å…¥ä¸­çš„å®žæ•°å‡ä¿ç•™åˆ°å°æ•°ç‚¹åŽä¸¤ä½ã€‚</p>
</blockquote>

<p>è¾“å‡ºæè¿°</p>
<blockquote><p>å¯¹æ¯ä¸ªå…³å¡ä¾æ¬¡è¾“å‡ºä¸€è¡Œç­”æ¡ˆã€‚<br>è¾“å‡ºçš„æ¯ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¡¨ç¤ºç›¸åº”çš„å…³å¡ä¸­ï¼Œæ¶ˆç­æ‰€æœ‰çŒªæœ€å°‘éœ€è¦çš„å°é¸Ÿæ•°é‡ã€‚</p>
</blockquote>


<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>2<br>2 0<br>1.00 3.00<br>3.00 3.00<br>5 2<br>1.00 5.00<br>2.00 8.00<br>3.00 9.00<br>4.00 8.00<br>5.00 5.00</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>1<br>1</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>è¿™ç»„æ•°æ®ä¸­ä¸€å…±æœ‰ä¸¤ä¸ªå…³å¡ã€‚<br>ç¬¬ä¸€ä¸ªå…³å¡ä¸Žã€Œé¢˜ç›®æè¿°ã€ä¸­çš„æƒ…å½¢ç›¸åŒï¼Œ2 åªçŒªåˆ†åˆ«ä½äºŽ (1.00, 3.00) å’Œ (3.00, 3.00)ï¼Œåªéœ€å‘å°„ä¸€åªé£žè¡Œè½¨è¿¹ä¸º y = -x2 + 4x çš„å°é¸Ÿå³å¯æ¶ˆç­å®ƒä»¬ã€‚<br>ç¬¬äºŒä¸ªå…³å¡ä¸­æœ‰ 5 åªçŒªï¼Œä½†ç»è¿‡è§‚å¯Ÿæˆ‘ä»¬å¯ä»¥å‘çŽ°å®ƒä»¬çš„åæ ‡éƒ½åœ¨æŠ›ç‰©çº¿ y = -x2 + 6x ä¸Šï¼Œæ•… Kiana åªéœ€è¦å‘å°„ä¸€åªå°é¸Ÿå³å¯æ¶ˆç­æ‰€æœ‰çŒªã€‚</p>
</blockquote>

<figure class="highlight c"><figcaption><span>fennudexiaoniao.cpp</span><a href="/downloads/code/fennudexiaoniao.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> T, n, m;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt; PDD;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">20</span>, M = <span class="number">1</span>&lt;&lt;N;</span><br><span class="line">PDD q[N];</span><br><span class="line"><span class="keyword">double</span> eps = <span class="number">1e-6</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> y second</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> path[N][N];</span><br><span class="line"><span class="keyword">int</span> f[M];</span><br><span class="line"><span class="keyword">int</span> lb[M];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">double</span> y)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">fabs</span>(x-y)&lt;eps) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;y) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">    <span class="keyword">while</span>(T--){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++){</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%lf%lf"</span>, &amp;q[i].x, &amp;q[i].y);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i+<span class="number">1</span>&lt;<span class="number">1</span>&lt;&lt;n;i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++)</span><br><span class="line">                <span class="keyword">if</span>(!(i&gt;&gt;j&amp;<span class="number">1</span>)){</span><br><span class="line">                    lb[i] = j;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                }</span><br><span class="line">        <span class="built_in">memset</span>(path, <span class="number">0</span>, <span class="keyword">sizeof</span> path);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) {</span><br><span class="line">            path[i][i] = <span class="number">1</span> &lt;&lt; i;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) {</span><br><span class="line">                <span class="keyword">if</span> (!cmp(q[i].x, q[j].x)) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">double</span> x1 = q[i].x, y1 = q[i].y, x2 = q[j].x, y2 = q[j].y;</span><br><span class="line">                <span class="keyword">double</span> b = (y1 * x2 * x2 / x1 / x1 - y2) / (x2 * x2 / x1 - x2);</span><br><span class="line">                <span class="keyword">double</span> a = (y1 - b * x1) / x1 / x1;</span><br><span class="line">                <span class="keyword">if</span> (a &gt;= <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; n; k++) {</span><br><span class="line">                    <span class="keyword">double</span> x = q[k].x, y = q[k].y;</span><br><span class="line">                    <span class="keyword">if</span> (!cmp(y, a * x * x + b * x)) path[i][j] |= <span class="number">1</span> &lt;&lt; k;</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> f);</span><br><span class="line">        f[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i+<span class="number">1</span>&lt;<span class="number">1</span>&lt;&lt;n;i++){</span><br><span class="line">            <span class="keyword">int</span> x = lb[i];</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++){</span><br><span class="line">                <span class="keyword">int</span> state = path[x][j];</span><br><span class="line">                f[i|state] = <span class="built_in">min</span>(f[i|state], f[i] +<span class="number">1</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, f[(<span class="number">1</span>&lt;&lt;n)<span class="number">-1</span>]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<img src="/downloads/imgs/itr-1000.png" class="example" width="500" height="500" title="title exg" alt="alt exg">
]]></content>
      <categories>
        <category>NOIP</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>æ–¹æ ¼å–æ•°</title>
    <url>/blog/%E6%96%B9%E6%A0%BC%E5%8F%96%E6%95%B0/</url>
    <content><![CDATA[<p>ç»™ä½ ä¸€ä¸ªnâˆ—nçš„æ ¼å­çš„æ£‹ç›˜ï¼Œæ¯ä¸ªæ ¼å­é‡Œé¢æœ‰ä¸€ä¸ªéžè´Ÿæ•´æ•°ã€‚<br>ä½ éœ€è¦ä»Žä¸­å–å‡ºè‹¥å¹²ä¸ªæ•°ï¼Œä½¿å¾—ä»»æ„ä¸¤ä¸ªæ•°æ‰€åœ¨çš„æ ¼å­æ²¡æœ‰å…¬å…±è¾¹ï¼Œå°±æ˜¯è¯´æ‰€å–çš„æ•°æ‰€åœ¨çš„2ä¸ªæ ¼å­ä¸èƒ½ç›¸é‚»ï¼Œå¹¶ä¸”å–å‡ºçš„æ•°çš„å’Œæœ€å¤§ã€‚</p>
<p>è¾“å…¥æè¿°:</p>
<blockquote><p>æ¯ä¸ªæµ‹è¯•å®žä¾‹åŒ…æ‹¬ä¸€ä¸ªæ•´æ•°n å’Œnâˆ—nä¸ªéžè´Ÿæ•´æ•°ï¼Œä¿è¯æ¯ä¸ªæ•°ä¸è¶…è¿‡ã€‚</p>
</blockquote>

<a id="more"></a>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>3<br>75 15 21<br>75 15 28<br>34 70 5</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>188</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>n&lt;=16ï¼Œæ¯ä¸ªæ•°ä¸è¶…è¿‡ 10^3ã€‚</p>
</blockquote>

<figure class="highlight c"><figcaption><span>fanggequshu.cpp</span><a href="/downloads/code/fanggequshu.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">int</span> mp[N][N], dp[N][<span class="number">70000</span>];</span><br><span class="line"><span class="keyword">int</span> A[<span class="number">30005</span>], tot;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> res =<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> j = n;</span><br><span class="line">    <span class="keyword">while</span>(y){</span><br><span class="line">        <span class="keyword">if</span>(y&amp;<span class="number">1</span>) res += mp[x][j];</span><br><span class="line">        j--; y&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;mp[i][j]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="number">1</span>&lt;&lt;n);i++){</span><br><span class="line">        <span class="keyword">if</span>((i&amp;(i&gt;&gt;<span class="number">1</span>))==<span class="number">0</span>) A[++tot] = i;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//    dp[i][k] = max(dp[i][k], dp[i-1][j] + val(i-1, j))</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=tot;k++){</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=tot;j++){</span><br><span class="line">                <span class="keyword">if</span>((A[j] &amp; A[k]) ==<span class="number">0</span>){</span><br><span class="line">                    <span class="keyword">int</span> val = calc(i, A[k]);</span><br><span class="line">                    dp[i][k] = <span class="built_in">max</span>(dp[i][k], dp[i<span class="number">-1</span>][j] + val);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=tot;i++) ans = <span class="built_in">max</span>(ans, dp[n][i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>æ ‘ç½‘çš„æ ¸ (NOIP2007)</title>
    <url>/blog/%E6%A0%91%E7%BD%91%E7%9A%84%E6%A0%B8/</url>
    <content><![CDATA[<p>è®¾T=(V, E, W) æ˜¯ä¸€ä¸ªæ— åœˆä¸”è¿žé€šçš„æ— å‘å›¾ï¼ˆä¹Ÿç§°ä¸ºæ— æ ¹æ ‘ï¼‰ï¼Œæ¯æ¡è¾¹å¸¦æœ‰æ­£æ•´æ•°çš„æƒï¼Œæˆ‘ä»¬ç§°Tä¸ºæ ‘ç½‘ï¼ˆtreenetworkï¼‰ï¼Œå…¶ä¸­V, Eåˆ†åˆ«è¡¨ç¤ºç»“ç‚¹ä¸Žè¾¹çš„é›†åˆï¼ŒWè¡¨ç¤ºå„è¾¹é•¿åº¦çš„é›†åˆï¼Œå¹¶è®¾Tæœ‰nä¸ªç»“ç‚¹ã€‚<br>è·¯å¾„ï¼šæ ‘ç½‘ä¸­ä»»ä½•ä¸¤ç»“ç‚¹a,béƒ½å­˜åœ¨å”¯ä¸€çš„ä¸€æ¡ç®€å•è·¯å¾„ï¼Œç”¨d(a,b)è¡¨ç¤ºä»¥a,bä¸ºç«¯ç‚¹çš„è·¯å¾„çš„é•¿åº¦ï¼Œå®ƒæ˜¯è¯¥è·¯å¾„ä¸Šå„è¾¹é•¿åº¦ä¹‹å’Œã€‚æˆ‘ä»¬ç§°d(a,b)ä¸ºa,bä¸¤ç»“ç‚¹é—´çš„è·ç¦»ã€‚<br>ä¸€ç‚¹våˆ°ä¸€æ¡è·¯å¾„Pçš„è·ç¦»ä¸ºè¯¥ç‚¹ä¸ŽPä¸Šçš„æœ€è¿‘çš„ç»“ç‚¹çš„è·ç¦»ï¼š<br>d(vï¼ŒP) = min{d(vï¼Œu)ï¼Œuä¸ºè·¯å¾„Pä¸Šçš„ç»“ç‚¹}ã€‚<br>æ ‘ç½‘çš„ç›´å¾„ï¼šæ ‘ç½‘ä¸­æœ€é•¿çš„è·¯å¾„ç§°ä¸ºæ ‘ç½‘çš„ç›´å¾„ã€‚å¯¹äºŽç»™å®šçš„æ ‘ç½‘Tï¼Œç›´å¾„ä¸ä¸€å®šæ˜¯å”¯ä¸€çš„ï¼Œä½†å¯ä»¥è¯æ˜Žï¼šå„ç›´å¾„çš„ä¸­ç‚¹ï¼ˆä¸ä¸€å®šæ°å¥½æ˜¯æŸä¸ªç»“ç‚¹ï¼Œå¯èƒ½åœ¨æŸæ¡è¾¹çš„å†…éƒ¨ï¼‰æ˜¯å”¯ä¸€çš„ï¼Œæˆ‘ä»¬ç§°è¯¥ç‚¹ä¸ºæ ‘ç½‘çš„ä¸­å¿ƒã€‚<br>åå¿ƒè·ECC(F)ï¼šæ ‘ç½‘Tä¸­è·è·¯å¾„Fæœ€è¿œçš„ç»“ç‚¹åˆ°è·¯å¾„Fçš„è·ç¦»ï¼Œå³ECC(F)=min{d(v,F)ï¼ŒvâˆˆV}ã€‚<br>ä»»åŠ¡ï¼šå¯¹äºŽç»™å®šçš„æ ‘ç½‘T=(V, E,W)å’Œéžè´Ÿæ•´æ•°sï¼Œæ±‚ä¸€ä¸ªè·¯å¾„Fï¼Œå®ƒæ˜¯æŸç›´å¾„ä¸Šçš„ä¸€æ®µè·¯å¾„ï¼ˆè¯¥è·¯å¾„ä¸¤ç«¯å‡ä¸ºæ ‘ç½‘ä¸­çš„ç»“ç‚¹ï¼‰ï¼Œå…¶é•¿åº¦ä¸è¶…è¿‡sï¼ˆå¯ä»¥ç­‰äºŽsï¼‰ï¼Œä½¿åå¿ƒè·ECC(F)æœ€å°ã€‚æˆ‘ä»¬ç§°è¿™ä¸ªè·¯å¾„ä¸ºæ ‘ç½‘T=(V,E,W)çš„æ ¸ï¼ˆCoreï¼‰ã€‚å¿…è¦æ—¶ï¼ŒFå¯ä»¥é€€åŒ–ä¸ºæŸä¸ªç»“ç‚¹ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨ä¸Šè¿°å®šä¹‰ä¸‹ï¼Œæ ¸ä¸ä¸€å®šåªæœ‰ä¸€ä¸ªï¼Œä½†æœ€å°åå¿ƒè·æ˜¯å”¯ä¸€çš„ã€‚<br>ä¸‹é¢çš„å›¾ç»™å‡ºäº†æ ‘ç½‘çš„ä¸€ä¸ªå®žä¾‹ã€‚å›¾ä¸­ï¼ŒA-Bä¸ŽA-Cæ˜¯ä¸¤æ¡ç›´å¾„ï¼Œé•¿åº¦å‡ä¸º20ã€‚ç‚¹Wæ˜¯æ ‘ç½‘çš„ä¸­å¿ƒï¼ŒEFè¾¹çš„é•¿åº¦ä¸º5ã€‚å¦‚æžœæŒ‡å®šs=11ï¼Œåˆ™æ ‘ç½‘çš„æ ¸ä¸ºè·¯å¾„DEFGï¼ˆä¹Ÿå¯ä»¥å–ä¸ºè·¯å¾„DEFï¼‰ï¼Œåå¿ƒè·ä¸º8ã€‚å¦‚æžœæŒ‡å®šs=0ï¼ˆæˆ–s=1ã€s=2ï¼‰ï¼Œåˆ™æ ‘ç½‘çš„æ ¸ä¸ºç»“ç‚¹Fï¼Œåå¿ƒè·ä¸º12ã€‚</p>
<a id="more"></a>

<p>è¾“å…¥æè¿°:</p>
<blockquote><p>ç¬¬1è¡Œï¼Œä¸¤ä¸ªæ­£æ•´æ•°nå’Œsï¼Œä¸­é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚å…¶ä¸­nä¸ºæ ‘ç½‘ç»“ç‚¹çš„ä¸ªæ•°ï¼Œsä¸ºæ ‘ç½‘çš„æ ¸çš„é•¿åº¦çš„ä¸Šç•Œã€‚è®¾ç»“ç‚¹ç¼–å·ä¾æ¬¡ä¸º1, 2, â€¦, nã€‚<br>ä»Žç¬¬2è¡Œåˆ°ç¬¬nè¡Œï¼Œæ¯è¡Œç»™å‡º3ä¸ªç”¨ç©ºæ ¼éš”å¼€çš„æ­£æ•´æ•°ï¼Œä¾æ¬¡è¡¨ç¤ºæ¯ä¸€æ¡è¾¹çš„ä¸¤ä¸ªç«¯ç‚¹ç¼–å·å’Œé•¿åº¦ã€‚ä¾‹å¦‚ï¼Œâ€œ2 4 7â€è¡¨ç¤ºè¿žæŽ¥ç»“ç‚¹2ä¸Ž4çš„è¾¹çš„é•¿åº¦ä¸º7ã€‚<br>æ‰€ç»™çš„æ•°æ®éƒ½æ˜¯æ­£ç¡®çš„ï¼Œä¸å¿…æ£€éªŒã€‚</p>
</blockquote>

<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>è¾“å‡ºä¸€ä¸ªéžè´Ÿæ•´æ•°ï¼Œä¸ºæŒ‡å®šæ„ä¹‰ä¸‹çš„æœ€å°åå¿ƒè·ã€‚</p>
</blockquote>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>5 2<br>1 2 5<br>2 3 2<br>2 4 4<br>2 5 3</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>5</p>
</blockquote>

<p>ç¤ºä¾‹2<br>è¾“å…¥</p>
<blockquote><p>8 6<br>1 3 2<br>2 3 2<br>3 4 6<br>4 5 3<br>4 6 4<br>4 7 2<br>7 8 3</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>5</p>
</blockquote>

<p>å¤‡æ³¨ï¼š</p>
<blockquote><p>40%çš„æ•°æ®æ»¡è¶³ï¼š5 â‰¤ n â‰¤ 15<br>70%çš„æ•°æ®æ»¡è¶³ï¼š5 â‰¤ n â‰¤ 80<br>100%çš„æ•°æ®æ»¡è¶³ï¼š5 â‰¤ n â‰¤ 300, 0 â‰¤ s â‰¤ 1000ã€‚è¾¹é•¿åº¦ä¸ºä¸è¶…è¿‡1000çš„æ­£æ•´æ•°</p>
</blockquote>

<figure class="highlight c"><figcaption><span>shuwangdehe.cpp</span><a href="/downloads/code/shuwangdehe.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">310</span>, M = N*<span class="number">2</span>;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="keyword">int</span> h[N], e[M], idx, ne[M], w[M];</span><br><span class="line"><span class="keyword">int</span> q[N], st[N], dist[N];</span><br><span class="line"><span class="keyword">int</span> pre[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</span><br><span class="line"><span class="built_in">vector</span>&lt;PII&gt; path;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c)</span></span>{</span><br><span class="line">	e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> start)</span></span>{</span><br><span class="line">	<span class="keyword">int</span> hh=<span class="number">0</span>, tt =<span class="number">0</span>;</span><br><span class="line">	q[<span class="number">0</span>] = start;</span><br><span class="line">	<span class="built_in">memset</span>(st, <span class="number">0</span>, <span class="keyword">sizeof</span> st);</span><br><span class="line">	dist[start] = <span class="number">0</span>;</span><br><span class="line">	st[start] = <span class="literal">true</span>;</span><br><span class="line">	pre[start] = <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">while</span>(hh&lt;=tt){</span><br><span class="line">		<span class="keyword">int</span> u= q[hh++];</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=h[u]; ~i; i = ne[i]){</span><br><span class="line">			<span class="keyword">int</span> j = e[i];</span><br><span class="line">			<span class="keyword">if</span>(!st[j]){</span><br><span class="line">				st[j] = <span class="literal">true</span>;</span><br><span class="line">				dist[j] = dist[u] + w[i];</span><br><span class="line">				q[++tt] = j;</span><br><span class="line">				pre[j] = u;</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">get_max</span><span class="params">()</span></span>{</span><br><span class="line">	<span class="keyword">int</span> t = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">		<span class="keyword">if</span>(dist[i] &gt; dist[t])</span><br><span class="line">			t = i;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> t;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bfs_max</span><span class="params">(<span class="keyword">int</span> u)</span></span>{</span><br><span class="line">	<span class="keyword">int</span> hh=<span class="number">0</span>, tt=<span class="number">0</span>;</span><br><span class="line">	dist[u] = <span class="number">0</span>;</span><br><span class="line">	q[<span class="number">0</span>] = u;</span><br><span class="line">	<span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(hh&lt;=tt){</span><br><span class="line">		<span class="keyword">int</span> t= q[hh++];</span><br><span class="line">		res = <span class="built_in">max</span>(res, dist[t]);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=h[t];~i;i=ne[i]){</span><br><span class="line">			<span class="keyword">int</span> j = e[i];</span><br><span class="line">			<span class="keyword">if</span>(!st[j]){</span><br><span class="line">				st[j] = <span class="literal">true</span>;</span><br><span class="line">				dist[j] = dist[t] + w[i];</span><br><span class="line">				q[++tt] = j;</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> mid)</span></span>{</span><br><span class="line">	<span class="keyword">int</span> u = <span class="number">0</span>, v = path.<span class="built_in">size</span>()<span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">while</span>(u+<span class="number">1</span>&lt;path.<span class="built_in">size</span>() &amp;&amp; path[u+<span class="number">1</span>].second &lt;= mid) u++;</span><br><span class="line">	<span class="keyword">while</span>(v<span class="number">-1</span>&gt;=<span class="number">0</span> &amp;&amp; path.back().second - path[v<span class="number">-1</span>].second&lt;=mid) v--;</span><br><span class="line">	<span class="keyword">if</span>(u&gt;v) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">if</span>(path[v].second - path[u].second&gt;m) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">memset</span>(st, <span class="number">0</span>, <span class="keyword">sizeof</span> st);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;path.<span class="built_in">size</span>();i++) st[path[i].first] = <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=u;i&lt;=v;i++)</span><br><span class="line">		<span class="keyword">if</span>(bfs_max(path[i].first) &gt; mid) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">	<span class="comment">// freopen("data.in", "r", stdin);</span></span><br><span class="line">	<span class="comment">// freopen("data.out", "w", stdout);</span></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">	<span class="built_in">memset</span>(h, <span class="number">-1</span>, <span class="keyword">sizeof</span> h);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n<span class="number">-1</span>;i++){</span><br><span class="line">		<span class="keyword">int</span> a, b, c;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">		add(a, b, c), add(b, a, c);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	bfs(<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">int</span> p = get_max();</span><br><span class="line">	bfs(p);</span><br><span class="line">	<span class="keyword">int</span> v = get_max();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span>(v!=<span class="number">-1</span>){</span><br><span class="line">		path.push_back(make_pair(v, dist[v]));</span><br><span class="line">		v = pre[v];</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	reverse(path.<span class="built_in">begin</span>(), path.<span class="built_in">end</span>());</span><br><span class="line">	<span class="comment">// for(int i=0;i&lt;path.size();i++)</span></span><br><span class="line">	<span class="comment">// 	printf("%d ", path[i].first);</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> l = <span class="number">0</span>, r = <span class="number">1e9</span>;</span><br><span class="line">	<span class="keyword">while</span>(l&lt;r){</span><br><span class="line">		<span class="keyword">int</span> mid = (l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">if</span>(check(mid)) r = mid;</span><br><span class="line">		<span class="keyword">else</span> l = mid+<span class="number">1</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, r);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>NOIP</category>
      </categories>
      <tags>
        <tag>tree</tag>
      </tags>
  </entry>
  <entry>
    <title>æœºå™¨ç¿»è¯‘ (NOIP2010)</title>
    <url>/blog/%E6%9C%BA%E5%99%A8%E7%BF%BB%E8%AF%91/</url>
    <content><![CDATA[<p>å°æ™¨çš„ç”µè„‘ä¸Šå®‰è£…äº†ä¸€ä¸ªæœºå™¨ç¿»è¯‘è½¯ä»¶ï¼Œä»–ç»å¸¸ç”¨è¿™ä¸ªè½¯ä»¶æ¥ç¿»è¯‘è‹±è¯­æ–‡ç« ã€‚</p>
<p>è¿™ä¸ªç¿»è¯‘è½¯ä»¶çš„åŽŸç†å¾ˆç®€å•ï¼Œå®ƒåªæ˜¯ä»Žå¤´åˆ°å°¾ï¼Œä¾æ¬¡å°†æ¯ä¸ªè‹±æ–‡å•è¯ç”¨å¯¹åº”çš„ä¸­æ–‡å«ä¹‰æ¥æ›¿æ¢ã€‚å¯¹äºŽæ¯ä¸ªè‹±æ–‡å•è¯ï¼Œè½¯ä»¶ä¼šå…ˆåœ¨å†…å­˜ä¸­æŸ¥æ‰¾è¿™ä¸ªå•è¯çš„ä¸­æ–‡å«ä¹‰ï¼Œå¦‚æžœå†…å­˜ä¸­æœ‰ï¼Œè½¯ä»¶å°±ä¼šç”¨å®ƒè¿›è¡Œç¿»è¯‘ï¼›å¦‚æžœå†…å­˜ä¸­æ²¡æœ‰ï¼Œè½¯ä»¶å°±ä¼šåœ¨å¤–å­˜ä¸­çš„è¯å…¸å†…æŸ¥æ‰¾ï¼ŒæŸ¥å‡ºå•è¯çš„ä¸­æ–‡å«ä¹‰ç„¶åŽç¿»è¯‘ï¼Œå¹¶å°†è¿™ä¸ªå•è¯å’Œè¯‘ä¹‰æ”¾å…¥å†…å­˜ï¼Œä»¥å¤‡åŽç»­çš„æŸ¥æ‰¾å’Œç¿»è¯‘ã€‚</p>
<p>å‡è®¾å†…å­˜ä¸­æœ‰ M ä¸ªå•å…ƒï¼Œæ¯å•å…ƒèƒ½å­˜æ”¾ä¸€ä¸ªå•è¯å’Œè¯‘ä¹‰ã€‚æ¯å½“è½¯ä»¶å°†ä¸€ä¸ªæ–°å•è¯å­˜å…¥å†…å­˜å‰ï¼Œå¦‚æžœå½“å‰å†…å­˜ä¸­å·²å­˜å…¥çš„å•è¯æ•°ä¸è¶…è¿‡ Mâˆ’1ï¼Œè½¯ä»¶ä¼šå°†æ–°å•è¯å­˜å…¥ä¸€ä¸ªæœªä½¿ç”¨çš„å†…å­˜å•å…ƒï¼›è‹¥å†…å­˜ä¸­å·²å­˜å…¥M ä¸ªå•è¯ï¼Œè½¯ä»¶ä¼šæ¸…ç©ºæœ€æ—©è¿›å…¥å†…å­˜çš„é‚£ä¸ªå•è¯ï¼Œè…¾å‡ºå•å…ƒæ¥ï¼Œå­˜æ”¾æ–°å•è¯ã€‚</p>
<p>å‡è®¾ä¸€ç¯‡è‹±è¯­æ–‡ç« çš„é•¿åº¦ä¸ºN ä¸ªå•è¯ã€‚ç»™å®šè¿™ç¯‡å¾…è¯‘æ–‡ç« ï¼Œç¿»è¯‘è½¯ä»¶éœ€è¦åŽ»å¤–å­˜æŸ¥æ‰¾å¤šå°‘æ¬¡è¯å…¸ï¼Ÿå‡è®¾åœ¨ç¿»è¯‘å¼€å§‹å‰ï¼Œå†…å­˜ä¸­æ²¡æœ‰ä»»ä½•å•è¯ã€‚</p>
<a id="more"></a>

<p>è¾“å…¥æè¿°:</p>
<blockquote><p>è¾“å…¥å…±2 è¡Œã€‚æ¯è¡Œä¸­ä¸¤ä¸ªæ•°ä¹‹é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚<br>ç¬¬ä¸€è¡Œä¸ºä¸¤ä¸ªæ­£æ•´æ•°M å’ŒNï¼Œä»£è¡¨å†…å­˜å®¹é‡å’Œæ–‡ç« çš„é•¿åº¦ã€‚<br>ç¬¬äºŒè¡Œä¸º N ä¸ªéžè´Ÿæ•´æ•°ï¼ŒæŒ‰ç…§æ–‡ç« çš„é¡ºåºï¼Œæ¯ä¸ªæ•°ï¼ˆå¤§å°ä¸è¶…è¿‡ 1000ï¼‰ä»£è¡¨ä¸€ä¸ªè‹±æ–‡å•è¯ã€‚æ–‡ç« ä¸­ä¸¤ä¸ªå•è¯æ˜¯åŒä¸€ä¸ªå•è¯ï¼Œå½“ä¸”ä»…å½“å®ƒä»¬å¯¹åº”çš„éžè´Ÿæ•´æ•°ç›¸åŒã€‚</p>
</blockquote>


<p>è¾“å‡ºæè¿°:</p>
<blockquote><p>å…±1 è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œä¸ºè½¯ä»¶éœ€è¦æŸ¥è¯å…¸çš„æ¬¡æ•°ã€‚</p>
</blockquote>

<p>ç¤ºä¾‹1<br>è¾“å…¥</p>
<blockquote><p>3 7<br>1 2 1 5 4 4 1</p>
</blockquote>

<p>è¾“å‡º</p>
<blockquote><p>5</p>
</blockquote>

<p>è¯´æ˜Ž</p>
<blockquote><p>æ•´ä¸ªæŸ¥å­—å…¸è¿‡ç¨‹å¦‚ä¸‹ï¼šæ¯è¡Œè¡¨ç¤ºä¸€ä¸ªå•è¯çš„ç¿»è¯‘ï¼Œå†’å·å‰ä¸ºæœ¬æ¬¡ç¿»è¯‘åŽçš„å†…å­˜çŠ¶å†µï¼š<br>ç©ºï¼šå†…å­˜åˆå§‹çŠ¶æ€ä¸ºç©ºã€‚<br>1ï¼Ž 1ï¼šæŸ¥æ‰¾å•è¯1 å¹¶è°ƒå…¥å†…å­˜ã€‚<br>2ï¼Ž 1 2ï¼šæŸ¥æ‰¾å•è¯2 å¹¶è°ƒå…¥å†…å­˜ã€‚<br>3ï¼Ž 1 2ï¼šåœ¨å†…å­˜ä¸­æ‰¾åˆ°å•è¯1ã€‚<br>4ï¼Ž 1 2 5ï¼šæŸ¥æ‰¾å•è¯5 å¹¶è°ƒå…¥å†…å­˜ã€‚<br>5ï¼Ž 2 5 4ï¼šæŸ¥æ‰¾å•è¯4 å¹¶è°ƒå…¥å†…å­˜æ›¿ä»£å•è¯1ã€‚<br>6ï¼Ž 2 5 4ï¼šåœ¨å†…å­˜ä¸­æ‰¾åˆ°å•è¯4ã€‚<br>7ï¼Ž 5 4 1ï¼šæŸ¥æ‰¾å•è¯1 å¹¶è°ƒå…¥å†…å­˜æ›¿ä»£å•è¯2ã€‚<br>å…±è®¡æŸ¥äº†5æ¬¡è¯å…¸ã€‚</p>
</blockquote>

<p>å¤‡æ³¨ï¼š</p>
<blockquote><p>å¯¹äºŽ10%çš„æ•°æ®æœ‰M=1ï¼ŒN â‰¤5ã€‚<br>å¯¹äºŽ100%çš„æ•°æ®æœ‰0</p>
</blockquote>


<figure class="highlight c"><figcaption><span>jiqifanyi.cpp</span><a href="/downloads/code/jiqifanyi.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1010</span>;</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">bool</span> st[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; m &gt;&gt; n;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">int</span> x;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; x;</span><br><span class="line">        <span class="keyword">if</span> (!st[x])</span><br><span class="line">        {</span><br><span class="line">            res++;</span><br><span class="line">            <span class="keyword">if</span> (q.<span class="built_in">size</span>() == m)</span><br><span class="line">            {</span><br><span class="line">                st[q.front()] = <span class="literal">false</span>;</span><br><span class="line">                q.pop();</span><br><span class="line">            }</span><br><span class="line">            q.push(x);</span><br><span class="line">            st[x] = <span class="literal">true</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; res &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>NOIP</category>
      </categories>
      <tags>
        <tag>simulation</tag>
      </tags>
  </entry>
</search>
