<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>AtCoder 186</title>
    <url>/blog/AtCoder-ABC186/</url>
    <content><![CDATA[<p>A - Brick<br>At most how many bricks can be loaded?</p>
<figure class="highlight c"><figcaption><span>brick.cpp</span><a href="/downloads/code/brick.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n, w;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;w;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;n/w&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<a id="more"></a>


<p>B - Blocks on Grid<br>Print the minimum number of blocks that must be removed.</p>
<figure class="highlight c"><figcaption><span>blocks-on-grid.cpp</span><a href="/downloads/code/blocks-on-grid.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">110</span>, INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">int</span> a[N][N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">int</span> k = INF;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m;j++) {</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i][j]);</span><br><span class="line">            k = <span class="built_in">min</span>(k, a[i][j]);</span><br><span class="line">        }</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m;j++)</span><br><span class="line">            res += a[i][j] - k;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>C - Unlucky 7<br>Number of digits in octal and decimal format from 1 to N.</p>
<figure class="highlight c"><figcaption><span>unlucky-7.cpp</span><a href="/downloads/code/unlucky-7.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">to_oct</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="built_in">string</span> s;</span><br><span class="line">    <span class="keyword">while</span>(x) {</span><br><span class="line">        s = to_string(x % <span class="number">8</span>) + s;</span><br><span class="line">        x /= <span class="number">8</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;s.<span class="built_in">size</span>();j++)</span><br><span class="line">        <span class="keyword">if</span>(s[j]==<span class="string">'7'</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">to_dec</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="built_in">string</span> s = to_string(x);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;s.<span class="built_in">size</span>();j++)</span><br><span class="line">        <span class="keyword">if</span>(s[j]==<span class="string">'7'</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">int</span> s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">if</span>(to_dec(i) || to_oct(i)) s++;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;n-s&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>D - Sum of difference<br>Calculate |A_i - A_j| for all pairs of i, j in O(NlogN) time.</p>
<figure class="highlight c"><figcaption><span>sum-of-diff.cpp</span><a href="/downloads/code/sum-of-diff.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">200010</span>;</span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    LL s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">        s += a[i];</span><br><span class="line">    }</span><br><span class="line">    sort(a+<span class="number">1</span>, a+n+<span class="number">1</span>);</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        s -= a[i];</span><br><span class="line">        res += s  - (LL)(n-i) * a[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>E - Throne<br>N chairs arranged in a circle, S is the initial offset.<br>Move K chairs away each time. Minimum move to go back the first location?</p>
<figure class="highlight c"><figcaption><span>throne.cpp</span><a href="/downloads/code/throne.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">exgcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, ll &amp;x, ll &amp;y)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(!b){</span><br><span class="line">        x = <span class="number">1</span>, y = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> d= exgcd(b, a % b, y, x);</span><br><span class="line">    y -= a/b  * (ll)x;</span><br><span class="line">    <span class="keyword">return</span> d;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> t;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (t--) {</span><br><span class="line">        ll n,s,k;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;s&gt;&gt;k;</span><br><span class="line">        ll x, y;</span><br><span class="line">        s = n-s;</span><br><span class="line">        <span class="keyword">int</span> g=exgcd(k, n, x, y);</span><br><span class="line">        <span class="keyword">if</span> (s%g!=<span class="number">0</span>) {</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="string">"-1\n"</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        x = (ll)x * (s/g);</span><br><span class="line">        x = (x%(n/g) + n/g) % (n/g);</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;x&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>F - Rook on Grid<br>Given a 2-d grid and some obstacles. Print the number of cells that can be reached with the following two moves.</p>
<ol>
<li>Move down followed by move right;</li>
<li>Move right followed by move down;</li>
</ol>
<p>Idea: First add all the cells that can be reached with approach 1. Second add remaining cells that can only be reached with approach 2.<br>Use sweep line + bit tree to get O(NlogN) complexity.<br>For each line, consider the first obstacle. Cells left of this obstacle can use approach 1.<br>For cells right of this obstacle, it may be reached with approach 2.<br>tr[i] is the number of rows from 1~ith row, that has an obstacle on the left of the current enumerating column.</p>
<figure class="highlight c"><figcaption><span>rook-on-grid.cpp</span><a href="/downloads/code/rook-on-grid.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">2e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> r[N], c[N];</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> tr[N];</span><br><span class="line"><span class="keyword">int</span> h, w;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> x &amp; -x;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> v)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=x;i&lt;=h;i+=lowbit(i)) {</span><br><span class="line">        tr[i] += v;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> res =<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=x;i;i-=lowbit(i)){</span><br><span class="line">        res += tr[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> m;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;h&gt;&gt;w&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=h;i++) r[i] = w+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=w;j++) c[j] = h+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="keyword">int</span> x,y;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;x, &amp;y);</span><br><span class="line">        r[x] = <span class="built_in">min</span>(r[x], y);</span><br><span class="line">        c[y] = <span class="built_in">min</span>(c[y], x);</span><br><span class="line">    }</span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=h;i++) {</span><br><span class="line">        <span class="keyword">if</span>(flag) {r[i] = <span class="number">1</span>; <span class="keyword">continue</span>;}</span><br><span class="line">        <span class="keyword">if</span>(r[i]==<span class="number">1</span>) {flag = <span class="number">1</span>; <span class="keyword">continue</span>;}</span><br><span class="line">        res += r[i] - <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v[w+<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=h;i++) v[r[i]].push_back(i);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=w;j++){</span><br><span class="line">        <span class="keyword">if</span>(c[j]==<span class="number">1</span>) <span class="keyword">break</span>; <span class="comment">//important</span></span><br><span class="line">        res += sum(c[j] <span class="number">-1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i: v[j]) add(i, <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>AtCoder</category>
      </categories>
      <tags>
        <tag>ABC</tag>
      </tags>
  </entry>
  <entry>
    <title>AtCoder 185</title>
    <url>/blog/AtCoder-ABC185/</url>
    <content><![CDATA[<p>A - ABC Preparation<br>The number of tests that can be formed.</p>
<figure class="highlight c"><figcaption><span>abc-prep.cpp</span><a href="/downloads/code/abc-prep.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> a1, a2, a3, a4;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;a1&gt;&gt;a2&gt;&gt;a3&gt;&gt;a4;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt;<span class="built_in">min</span>(<span class="built_in">min</span>(a1,a2), <span class="built_in">min</span>(a3, a4));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<a id="more"></a>


<p>B - Smartphone Addiction<br>Print if the phone battery is able to sustain till getting home.</p>
<figure class="highlight c"><figcaption><span>smartphone-addict.cpp</span><a href="/downloads/code/smartphone-addict.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> N, m, t;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;N&gt;&gt;m&gt;&gt;t;</span><br><span class="line">    <span class="keyword">int</span> n = N;</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="keyword">int</span> pre = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++){</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b;</span><br><span class="line">        n -= (a - pre);</span><br><span class="line">        <span class="keyword">if</span>(n&lt;=<span class="number">0</span>) {<span class="built_in">cout</span>&lt;&lt;<span class="string">"No"</span>&lt;&lt;<span class="built_in">endl</span>;  <span class="keyword">return</span> <span class="number">0</span>;}</span><br><span class="line">        n += (b-a);</span><br><span class="line">        n = <span class="built_in">min</span>(n, N);</span><br><span class="line">        pre = b;</span><br><span class="line">    }</span><br><span class="line">    n -= (t - pre);</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">0</span>) <span class="built_in">cout</span> &lt;&lt; <span class="string">"No"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">cout</span> &lt;&lt; <span class="string">"Yes"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>C - Duodecim Ferra<br>The number of ways to divide L into 12 integer-segments.</p>
<figure class="highlight c"><figcaption><span>duodecim-ferra.cpp</span><a href="/downloads/code/duodecim-ferra.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    LL n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    LL res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">11</span>;i++){</span><br><span class="line">        res = res * (n - i) / i;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>D - Stamp<br>Minimum number of moves to stamp an array with stamp of size k.</p>
<figure class="highlight c"><figcaption><span>stamp.cpp</span><a href="/downloads/code/stamp.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">2e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> a[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">    sort(a, a+m);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> k = n;</span><br><span class="line">    <span class="keyword">int</span> pre = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++){</span><br><span class="line">        <span class="keyword">int</span> t = a[i] - pre - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (t &gt; <span class="number">0</span>)</span><br><span class="line">            k = <span class="built_in">min</span>(k, a[i] - pre - <span class="number">1</span>);</span><br><span class="line">        pre = a[i];</span><br><span class="line">        a[i] = t;</span><br><span class="line">    }</span><br><span class="line">    a[m] = n - pre ;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="keyword">if</span>(a[i] % k==<span class="number">0</span>) res += a[i] / k ;</span><br><span class="line">        <span class="keyword">else</span> res += a[i] / k  + <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>E - Sequence Matchinge<br>Minimum x+y given two sequence A, B of length n, m respectively.<br>x: removals from A and B to make them of equal length.<br>y: number of elements where A_i is not equal to B_i;</p>
<figure class="highlight c"><figcaption><span>seq-match.cpp</span><a href="/downloads/code/seq-match.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">10010</span>;</span><br><span class="line"><span class="keyword">int</span> a[N], b[N];</span><br><span class="line"><span class="keyword">int</span> f[N][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++) f[i][j] = <span class="built_in">max</span>(n, m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) f[i][<span class="number">0</span>] = i;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++) f[<span class="number">0</span>][j] = j;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;b[j]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++){</span><br><span class="line">            f[i][j] = <span class="built_in">min</span>(f[i][j], f[i<span class="number">-1</span>][j] + <span class="number">1</span>);</span><br><span class="line">            f[i][j] = <span class="built_in">min</span>(f[i][j], f[i][j<span class="number">-1</span>] + <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span>(a[i]!=b[j]) f[i][j] = <span class="built_in">min</span>(f[i][j], f[i<span class="number">-1</span>][j<span class="number">-1</span>] + <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">else</span> f[i][j] = <span class="built_in">min</span>(f[i][j], f[i<span class="number">-1</span>][j<span class="number">-1</span>] );</span><br><span class="line">        }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;f[n][m]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>F - Range Xor Query<br>Range query for the Xor operation.<br>Use fenwick-tree to solve.</p>
<figure class="highlight c"><figcaption><span>range-xor-query.cpp</span><a href="/downloads/code/range-xor-query.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">300010</span>;</span><br><span class="line"><span class="keyword">int</span> s[N], a[N];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> x &amp; -x;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> v)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=x;i&lt;=n;i+=lowbit(i)){</span><br><span class="line">        s[i] ^= v;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=x;i;i-=lowbit(i)){</span><br><span class="line">        res ^= s[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> q;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;q;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">int</span> x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;x);</span><br><span class="line">        a[i] = a[i<span class="number">-1</span>] ^ x;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">        s[i] = a[i] ^ a[i-lowbit(i)];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(q--){</span><br><span class="line">        <span class="keyword">int</span> t, x, v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;t, &amp;x, &amp;v);</span><br><span class="line">        <span class="keyword">if</span>(t==<span class="number">1</span>) modify(x, v);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, sum(v) ^ sum(x<span class="number">-1</span>));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>AtCoder</category>
      </categories>
      <tags>
        <tag>data_structure</tag>
        <tag>ABC</tag>
      </tags>
  </entry>
  <entry>
    <title>AtCoder 184</title>
    <url>/blog/AtCoder-ABC184/</url>
    <content><![CDATA[<p>A - Determinant</p>
<figure class="highlight c"><figcaption><span>determinant.cpp</span><a href="/downloads/code/determinant.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> a, b, c, d;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b&gt;&gt;c&gt;&gt;d;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt; a*d - b * c&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<a id="more"></a>


<p>B - Quizzes<br>Return the number of points he gets given a string.</p>
<figure class="highlight c"><figcaption><span>quizzes.cpp</span><a href="/downloads/code/quizzes.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n, x;</span><br><span class="line">    <span class="built_in">string</span> s;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;x;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;s;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> c: s){</span><br><span class="line">        <span class="keyword">if</span>(c==<span class="string">'o'</span>) x +=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> x = <span class="built_in">max</span>(<span class="number">0</span>, x<span class="number">-1</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;x&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>C - Super Ryuma<br>Minimum number of steps reaching from (r1, c1) to (r2, c2), using 3 ways.</p>
<figure class="highlight c"><figcaption><span>super-ryuma.cpp</span><a href="/downloads/code/super-ryuma.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> r1, c1, r2, c2;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;r1&gt;&gt;c1&gt;&gt;r2&gt;&gt;c2;</span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(r1==r2 &amp;&amp; c1==c2) <span class="built_in">cout</span>&lt;&lt;<span class="number">0</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(r1-c1==r2-c2 || r1+c1==r2+c2 || <span class="built_in">abs</span>(r1-r2) + <span class="built_in">abs</span>(c1-c2)&lt;=<span class="number">3</span>) <span class="built_in">cout</span>&lt;&lt;<span class="number">1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>((r1 + c1 + r2 - c2)%<span class="number">2</span>==<span class="number">0</span>) <span class="built_in">cout</span>&lt;&lt;<span class="number">2</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span>{</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">-3</span>;i&lt;=<span class="number">3</span>;i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">-3</span>;j&lt;=<span class="number">3</span>;j++){</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">abs</span>(i) + <span class="built_in">abs</span>(j) &gt; <span class="number">3</span>) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">int</span> r = r1 + i, c = c1 + j;</span><br><span class="line">                <span class="keyword">if</span>(r-c==r2-c2 || r+c == r2 + c2 || <span class="built_in">abs</span>(r-r2) + <span class="built_in">abs</span>(c -c2) &lt;=<span class="number">3</span>){</span><br><span class="line">                    <span class="built_in">cout</span>&lt;&lt;<span class="number">2</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="number">3</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>D - increment of coins<br>Given A, B, C coins, return the expected number of operations to reach 100 points in bag.</p>
<figure class="highlight c"><figcaption><span>incre-coins.cpp</span><a href="/downloads/code/incre-coins.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">double</span> ret[maxn][maxn][maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">dfs</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp;coins)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(coins[<span class="number">1</span>]==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">100.0</span> - coins[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">if</span>(coins[<span class="number">0</span>]==<span class="number">100</span> || coins[<span class="number">1</span>] ==<span class="number">100</span> || coins[<span class="number">2</span>]==<span class="number">100</span>) <span class="keyword">return</span> <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">double</span> &amp;ans = ret[coins[<span class="number">0</span>]][coins[<span class="number">1</span>]][coins[<span class="number">2</span>]];</span><br><span class="line">    <span class="keyword">if</span>(ans&gt;=<span class="number">0</span>) <span class="keyword">return</span> ans;</span><br><span class="line">    <span class="keyword">int</span> s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> c: coins) s += c;</span><br><span class="line">    <span class="keyword">double</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++){</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;nxt(coins);</span><br><span class="line">        nxt[i] ++;</span><br><span class="line">        res += (<span class="keyword">double</span>)coins[i] / s * (<span class="number">1</span>+dfs(nxt));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> ans = res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">coins</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++) <span class="built_in">cin</span>&gt;&gt;coins[i];</span><br><span class="line">    sort(coins.rbegin(), coins.rend());</span><br><span class="line">    <span class="built_in">memset</span>(ret, <span class="number">-1</span>, <span class="keyword">sizeof</span> ret);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.12f\n"</span>, dfs(coins));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>E - Third Avenue<br>Given 2-dim grids, return the minimum number of steps from start to goal.<br>An additional way of teleport is abled.</p>
<figure class="highlight c"><figcaption><span>third-avenue.cpp</span><a href="/downloads/code/third-avenue.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">2010</span>, INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"><span class="keyword">char</span> g[N][N];</span><br><span class="line"><span class="keyword">int</span> dis[N][N];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> y second</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> dx[<span class="number">4</span>] = {<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>}, dy[<span class="number">4</span>] = {<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>};</span><br><span class="line"><span class="keyword">int</span> si, sj, ei, ej;</span><br><span class="line"><span class="built_in">vector</span>&lt;PII&gt; tele[<span class="number">26</span>];</span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt; <span class="title">used</span><span class="params">(<span class="number">26</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bfs</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">queue</span>&lt;PII&gt; q;</span><br><span class="line">    q.push({si, sj});</span><br><span class="line">    dis[si][sj] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(q.<span class="built_in">size</span>()){</span><br><span class="line">        <span class="keyword">auto</span> t = q.front();</span><br><span class="line">        q.pop();</span><br><span class="line">        <span class="keyword">if</span>(t.x == ei &amp;&amp; t.y == ej) <span class="keyword">return</span> dis[t.x][t.y];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++){</span><br><span class="line">            <span class="keyword">int</span> mx = t.x + dx[i], my = t.y + dy[i];</span><br><span class="line">            <span class="keyword">if</span>(mx&lt;<span class="number">0</span> || mx &gt;=n || my&lt;<span class="number">0</span> || my&gt;=m || dis[mx][my]!=INF || g[mx][my]==<span class="string">'#'</span>) <span class="keyword">continue</span>;</span><br><span class="line">            dis[mx][my] = dis[t.x][t.y] + <span class="number">1</span>;</span><br><span class="line">            q.push({mx, my});</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(g[t.x][t.y]&gt;=<span class="string">'a'</span> &amp;&amp; g[t.x][t.y]&lt;=<span class="string">'z'</span> &amp;&amp; !used[g[t.x][t.y] - <span class="string">'a'</span>]){</span><br><span class="line">            used[g[t.x][t.y] - <span class="string">'a'</span>] = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">auto</span> [x, y]: tele[g[t.x][t.y] - <span class="string">'a'</span>]){</span><br><span class="line">                <span class="keyword">if</span>(dis[x][y]==INF){</span><br><span class="line">                    dis[x][y] = dis[t.x][t.y] + <span class="number">1</span>;</span><br><span class="line">                    q.push({x, y});</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> INF;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="built_in">memset</span>(dis, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> dis);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, g[i]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m;j++){</span><br><span class="line">            <span class="keyword">if</span>(g[i][j]==<span class="string">'S'</span>) si = i, sj = j;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(g[i][j]==<span class="string">'G'</span>) ei = i, ej = j;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(g[i][j]&gt;=<span class="string">'a'</span> &amp;&amp; g[i][j]&lt;=<span class="string">'z'</span>) tele[g[i][j]-<span class="string">'a'</span>].push_back({i, j});</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> res = bfs();</span><br><span class="line">    <span class="keyword">if</span>(res==INF) <span class="built_in">cout</span>&lt;&lt;<span class="number">-1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>F - Programming Contest<br>Maximum number of problems that can be solved with maximum T minutes.<br>This is a typical backpacking problem, but the maximum volume is too large.<br>Should use meet-in-the-middle to solve.</p>
<figure class="highlight c"><figcaption><span>program-contest.cpp</span><a href="/downloads/code/program-contest.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">45</span>;</span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="built_in">set</span>&lt;<span class="keyword">int</span>&gt; L, R;</span><br><span class="line">    L.insert(<span class="number">0</span>), R.insert(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="built_in">cin</span>&gt;&gt;a[i];</span><br><span class="line">    <span class="keyword">int</span> l = n/<span class="number">2</span>, r = n - l;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="number">1</span>&lt;&lt;l);i++){</span><br><span class="line">        <span class="keyword">int</span> s = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;l;j++){</span><br><span class="line">            <span class="keyword">if</span>(i&amp;(<span class="number">1</span>&lt;&lt;j)){</span><br><span class="line">                s += a[j];</span><br><span class="line">                <span class="keyword">if</span>(s&gt;m) <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(s&lt;=m) L.insert(s);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="number">1</span>&lt;&lt;r);i++){</span><br><span class="line">        <span class="keyword">int</span> s = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;r;j++){</span><br><span class="line">            <span class="keyword">if</span>(i&amp;(<span class="number">1</span>&lt;&lt;j)){</span><br><span class="line">                s += a[l + j];</span><br><span class="line">                <span class="keyword">if</span>(s&gt;m) <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(s&lt;=m) R.insert(s);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> l: L){</span><br><span class="line">        <span class="keyword">auto</span> it = R.lower_bound(m+<span class="number">1</span>-l);</span><br><span class="line">        <span class="keyword">if</span>(it!=R.<span class="built_in">begin</span>())</span><br><span class="line">            it--;</span><br><span class="line">        <span class="keyword">if</span>(l + * it &lt;=m) res = <span class="built_in">max</span>(res, l + *it);</span><br><span class="line">        <span class="keyword">if</span>(res==m) <span class="keyword">break</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>AtCoder</category>
      </categories>
      <tags>
        <tag>data_structure</tag>
        <tag>ABC</tag>
      </tags>
  </entry>
  <entry>
    <title>AtCoder 183</title>
    <url>/blog/AtCoder-ABC183/</url>
    <content><![CDATA[<p>A - ReLU</p>
<figure class="highlight c"><figcaption><span>relu.cpp</span><a href="/downloads/code/relu.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;x;</span><br><span class="line">    x = <span class="built_in">max</span>(x, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;x&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<a id="more"></a>


<p>B - Billiards<br>Ouput the turning point given input point and output point.</p>
<figure class="highlight c"><figcaption><span>billards.cpp</span><a href="/downloads/code/billards.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">double</span> sx, sy, gx, gy;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;sx&gt;&gt;sy&gt;&gt;gx&gt;&gt;gy;</span><br><span class="line">    <span class="keyword">double</span> x = (<span class="keyword">double</span>)(sy*gx + sx * gy) / (sy+gy);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.10lf\n"</span>, x);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<p>C - Travel<br>Find the number of paths from city 1 to city n with total distance equalling to k.</p>
<figure class="highlight c"><figcaption><span>travel.cpp</span><a href="/downloads/code/travel.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span>  N = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> g[N][N];</span><br><span class="line"><span class="keyword">bool</span> vis[N];</span><br><span class="line"><span class="keyword">int</span> n, k;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> cnt, <span class="keyword">int</span> dis)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(cnt==n){</span><br><span class="line">        dis += g[u][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span>(dis==k) res++;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">if</span>(!vis[i]){</span><br><span class="line">            vis[i] = <span class="number">1</span>;</span><br><span class="line">            dfs(i, cnt+<span class="number">1</span>, dis + g[u][i]);</span><br><span class="line">            vis[i] = <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;k;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">            <span class="built_in">cin</span>&gt;&gt;g[i][j];</span><br><span class="line">    vis[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;res&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>D - Water Heater<br>A water heater is able to provide W liters at a given minute.<br>There are N people, the i-th people needs P_i water from S_i to E_i.<br>Is it possible to satisfy everyone?</p>
<figure class="highlight c"><figcaption><span>water-heater.cpp</span><a href="/downloads/code/water-heater.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">200010</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line">LL b[N];</span><br><span class="line"><span class="keyword">int</span> n, w;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;w;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) {</span><br><span class="line">        <span class="keyword">int</span> st, ed, c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;st, &amp;ed, &amp;c);</span><br><span class="line">        b[st] += c, b[ed] -= c;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++) b[i] += b[i<span class="number">-1</span>];</span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="keyword">if</span>(b[i] &gt; w){</span><br><span class="line">        flag = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(flag) <span class="built_in">cout</span>&lt;&lt;<span class="string">"Yes"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="string">"No"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>E - Queen on Grid<br>The number of ways from (1,1) to (H, W). Need to take care of walls in the path.</p>
<figure class="highlight c"><figcaption><span>queen-grid.cpp</span><a href="/downloads/code/queen-grid.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">2010</span>;</span><br><span class="line"><span class="keyword">char</span> g[N][N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="keyword">int</span> f[N][N], rsum[N][N], csum[N][N], dsum[N][N];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, g[i]);</span><br><span class="line"></span><br><span class="line">    f[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    rsum[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1</span>, csum[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1</span>, dsum[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++) {</span><br><span class="line">            <span class="keyword">if</span> (g[i - <span class="number">1</span>][j - <span class="number">1</span>] == <span class="string">'#'</span>) {</span><br><span class="line">                f[i][j] = <span class="number">0</span>;</span><br><span class="line">                rsum[i][j] = <span class="number">0</span>, csum[i][j] = <span class="number">0</span>, dsum[i][j] = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            }</span><br><span class="line">            LL tmp = f[i][j];</span><br><span class="line">            tmp = (tmp + rsum[i<span class="number">-1</span>][j]) % mod;</span><br><span class="line">            tmp = (tmp + csum[i][j<span class="number">-1</span>]) % mod;</span><br><span class="line">            tmp = (tmp + dsum[i<span class="number">-1</span>][j<span class="number">-1</span>]) % mod;</span><br><span class="line"></span><br><span class="line">            f[i][j] = tmp;</span><br><span class="line">            rsum[i][j] = (rsum[i<span class="number">-1</span>][j] + f[i][j]) % mod;</span><br><span class="line">            csum[i][j] = (csum[i][j<span class="number">-1</span>] + f[i][j]) % mod;</span><br><span class="line">            dsum[i][j] = (dsum[i<span class="number">-1</span>][j<span class="number">-1</span>] + f[i][j]) % mod;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="comment">//    for(int i=1;i&lt;=n;i++){</span></span><br><span class="line"><span class="comment">//        for(int j=1;j&lt;=m;j++)</span></span><br><span class="line"><span class="comment">//            printf("%d ", f[i][j]);</span></span><br><span class="line"><span class="comment">//        puts("");</span></span><br><span class="line"><span class="comment">//    }</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;f[n][m]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>


<p>F - Confluence<br>N students belonging to C different classes.<br>1 a b: join student a and b in the same group<br>2 a b: query the number of students belonging to class b from group of student a;</p>
<figure class="highlight c"><figcaption><span>confluence.cpp</span><a href="/downloads/code/confluence.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, q;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">200010</span>;</span><br><span class="line"><span class="keyword">int</span> p[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(p[x]!=x) p[x] = <span class="built_in">find</span>(p[x]);</span><br><span class="line">    <span class="keyword">return</span> p[x];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;q;</span><br><span class="line">    vector&lt;map&lt;int,int&gt;&gt; cnt(n+1);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">        <span class="keyword">int</span> c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;c);</span><br><span class="line">        p[i] = i;</span><br><span class="line">        cnt[i][c] = <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(q--){</span><br><span class="line">        <span class="keyword">int</span> x, a, b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;x, &amp;a, &amp;b);</span><br><span class="line">        <span class="keyword">if</span>(x==<span class="number">1</span>){</span><br><span class="line">            <span class="keyword">int</span> fa = <span class="built_in">find</span>(a), fb = <span class="built_in">find</span>(b);</span><br><span class="line">            <span class="keyword">if</span>(fa!=fb){</span><br><span class="line">                <span class="keyword">if</span>(cnt[fa].<span class="built_in">size</span>() &gt; cnt[fb].<span class="built_in">size</span>()) swap(fa, fb);</span><br><span class="line">                p[fa] = fb;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">auto</span> [k,v]: cnt[fa]) cnt[fb][k] += v;</span><br><span class="line">            }</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="keyword">int</span> fa = <span class="built_in">find</span>(a);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, cnt[fa][b]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>AtCoder</category>
      </categories>
      <tags>
        <tag>data_structure</tag>
        <tag>ABC</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E7%A4%BC%E7%89%A9/</url>
    <content><![CDATA[<p>ABNN(cntA+cntB=N)cntAcntBABA_iB_i|cntA-cntB|&lt;=1|sumA-sumB|</p>
<p>:</p>
<blockquote><p>N, N&lt;=30<br>NAA_i<br>NBB_i</p>
</blockquote>

<p>:</p>
<blockquote><p></p>
</blockquote>


<a id="more"></a>

<p>1<br></p>
<blockquote><p>3<br>1 2 3<br>4 2 1</p>
</blockquote>

<p></p>
<blockquote><p>1</p>
</blockquote>


<figure class="highlight c"><figcaption><span>liwu.cpp</span><a href="/downloads/code/liwu.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 40</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;R[M];</span><br><span class="line"><span class="keyword">int</span> A[M],B[M],n,ans;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> &amp;a,<span class="keyword">int</span> b)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(a==<span class="number">-1</span>||a&gt;b)a=b;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> sum,<span class="keyword">int</span> c)</span></span>{<span class="comment">//cA</span></span><br><span class="line">    <span class="keyword">int</span> id=lower_bound(R[c].<span class="built_in">begin</span>(),R[c].<span class="built_in">end</span>(),sum)-R[c].<span class="built_in">begin</span>();</span><br><span class="line">    <span class="keyword">if</span>(id!=(<span class="keyword">int</span>)R[c].<span class="built_in">size</span>())</span><br><span class="line">        check(ans,<span class="built_in">abs</span>(sum-R[c][id]));</span><br><span class="line">    <span class="keyword">if</span>(id&gt;<span class="number">0</span>)</span><br><span class="line">        check(ans,<span class="built_in">abs</span>(sum-R[c][id<span class="number">-1</span>]));</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> i,j;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i]);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;B[i]);</span><br><span class="line">    <span class="keyword">int</span> m=n/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=n;i++)R[i].<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;(<span class="number">1</span>&lt;&lt;(n-m));i++){<span class="comment">//</span></span><br><span class="line">        <span class="keyword">int</span> sum=<span class="number">0</span>,c=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;n-m;j++){</span><br><span class="line">            <span class="keyword">if</span>(i&amp;(<span class="number">1</span>&lt;&lt;j)){</span><br><span class="line">                sum-=A[m+j],c++;</span><br><span class="line">            }<span class="keyword">else</span> sum+=B[m+j];</span><br><span class="line">        }</span><br><span class="line">        R[c].push_back(sum);<span class="comment">//sumB-sumA</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;=n-m;i++)sort(R[i].<span class="built_in">begin</span>(),R[i].<span class="built_in">end</span>());<span class="comment">//vector</span></span><br><span class="line">    ans=<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;(<span class="number">1</span>&lt;&lt;m);i++){<span class="comment">//</span></span><br><span class="line">        <span class="keyword">int</span> L=<span class="number">0</span>,c=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;m;j++)</span><br><span class="line">            <span class="keyword">if</span>(i&amp;(<span class="number">1</span>&lt;&lt;j)){<span class="comment">//sumA-sumB</span></span><br><span class="line">                L+=A[j],c++;</span><br><span class="line">            }<span class="keyword">else</span> L-=B[j];</span><br><span class="line">        <span class="keyword">if</span>(n&amp;<span class="number">1</span>)solve(L,n/<span class="number">2</span>+<span class="number">1</span>-c);</span><br><span class="line">        solve(L,n/<span class="number">2</span>-c);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>search</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E5%93%88%E5%B8%8C/</url>
    <content><![CDATA[<p>3nA,B,C.SS[i]A[i],B[i],C[i]S</p>
<blockquote><p>function hash(S):<br>    answer = 0<br>    for each valid index i into S, starting from 0:<br>        answer = (answer * 127 + ord(S[i])) mod 1000000000000037<br>return answer</p>
</blockquote>
<p>ord(S[i])S[i]ascii</p>
<p>:</p>
<blockquote><p>nn20<br>3A,B,C</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>4<br>ELLY<br>KRIS<br>STAN</p>
</blockquote>

<p></p>
<blockquote><p>142572564</p>
</blockquote>


<figure class="highlight c"><figcaption><span>haxi.cpp</span><a href="/downloads/code/haxi.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LL long long</span></span><br><span class="line">LL num[<span class="number">5000005</span>],ans;</span><br><span class="line">LL P=<span class="number">1000000000000037L</span>L,T;</span><br><span class="line"><span class="built_in">string</span> a,b,c;</span><br><span class="line"><span class="keyword">int</span> all,n,m,tot;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,LL p)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(x==n){</span><br><span class="line">        num[tot]=p;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++)num[tot]=(num[tot]*<span class="number">127</span>)%P;</span><br><span class="line">        tot++;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    dfs(x+<span class="number">1</span>,(p*<span class="number">127</span>+a[x])%P);</span><br><span class="line">    dfs(x+<span class="number">1</span>,(p*<span class="number">127</span>+b[x])%P);</span><br><span class="line">    dfs(x+<span class="number">1</span>,(p*<span class="number">127</span>+c[x])%P);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> x,LL p)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(x==all){</span><br><span class="line">        LL tmp=(num[<span class="number">0</span>]+p)%P;</span><br><span class="line">        ans=<span class="built_in">min</span>(ans,tmp);</span><br><span class="line">        <span class="keyword">int</span> k=lower_bound(num,num+tot,P-p)-num;</span><br><span class="line">        <span class="keyword">if</span>(k!=tot)ans=<span class="built_in">min</span>(ans,(num[k]+p)%P);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    DFS(x+<span class="number">1</span>,(p*<span class="number">127</span>+a[x])%P);</span><br><span class="line">    DFS(x+<span class="number">1</span>,(p*<span class="number">127</span>+b[x])%P);</span><br><span class="line">    DFS(x+<span class="number">1</span>,(p*<span class="number">127</span>+c[x])%P);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">int</span> N;<span class="built_in">string</span> A,B,C;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;N&gt;&gt;A&gt;&gt;B&gt;&gt;C;</span><br><span class="line">        n=N/<span class="number">2</span>;all=N;</span><br><span class="line">        m=N-n;</span><br><span class="line">        tot=<span class="number">0</span>;</span><br><span class="line">        a=A;b=B;c=C;</span><br><span class="line">        dfs(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        sort(num,num+tot);</span><br><span class="line">        ans=P;</span><br><span class="line">        DFS(n,<span class="number">0</span>);</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt; ans &lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">};</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>search</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E6%9C%80%E5%8F%97%E6%AC%A2%E8%BF%8E%E7%9A%84%E5%A5%B6%E7%89%9B/</url>
    <content><![CDATA[<p>1&lt;=N&lt;=100001&lt;=M&lt;=50000(A,B),ABABBC,AC</p>
<p>:</p>
<blockquote><p>NM2M+1ABAB</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>3 3<br>1 2<br>2 1<br>2 3</p>
</blockquote>

<p></p>
<blockquote><p>1</p>
</blockquote>

<p></p>
<blockquote><p>3</p>
</blockquote>


<figure class="highlight c"><figcaption><span>popular_cow.cpp</span><a href="/downloads/code/popular_cow.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">P</span>{</span></span><br><span class="line">    <span class="keyword">int</span> l,to;</span><br><span class="line">}e[<span class="number">50005</span>],E[<span class="number">50005</span>];</span><br><span class="line"><span class="keyword">int</span> n,m,sk[<span class="number">10005</span>],tp,d[<span class="number">10005</span>],l[<span class="number">10005</span>],b[<span class="number">10005</span>],t,nu,h[<span class="number">10005</span>],x,y,H[<span class="number">10005</span>],s,u;</span><br><span class="line"><span class="keyword">bool</span> v[<span class="number">10005</span>],is[<span class="number">10005</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">se</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    d[x]=l[x]=++t;sk[++tp]=x;is[x]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=h[x];i;i=e[i].l){</span><br><span class="line">        <span class="keyword">if</span>(!d[e[i].to]){</span><br><span class="line">            se(e[i].to);</span><br><span class="line">            l[x]=<span class="built_in">min</span>(l[x],l[e[i].to]);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(is[e[i].to])l[x]=<span class="built_in">min</span>(l[x],l[e[i].to]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(l[x]==d[x]){</span><br><span class="line">        ++nu;</span><br><span class="line">        <span class="keyword">do</span>{</span><br><span class="line">            y=sk[tp--];</span><br><span class="line">            b[y]=nu;</span><br><span class="line">            is[y]=<span class="number">0</span>;</span><br><span class="line">        }<span class="keyword">while</span>(y!=x);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;++i){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;x,&amp;e[i].to);</span><br><span class="line">        e[i].l=h[x];h[x]=i;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i){</span><br><span class="line">        <span class="keyword">if</span>(!d[i])se(i);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i){</span><br><span class="line">        x=b[i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> o=h[i];o;o=e[o].l){</span><br><span class="line">            y=b[e[o].to];</span><br><span class="line">            <span class="keyword">if</span>(x!=y)v[x]=<span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line"><span class="comment">//      printf("%d %d %d\n",i,x,v[x]);</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=nu;++i){</span><br><span class="line">        <span class="keyword">if</span>(!v[i])s++,u=i;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(s!=<span class="number">1</span>)<span class="built_in">printf</span>(<span class="string">"0\n"</span>);</span><br><span class="line">    <span class="keyword">else</span> {</span><br><span class="line">        s--;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;++i)<span class="keyword">if</span>(b[i]==u)s++;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,s);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>graph</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E9%A2%9C%E8%89%B2%E7%BB%9F%E8%AE%A1/</url>
    <content><![CDATA[<p> n c_i  q  v  k 1</p>
<p>:</p>
<blockquote><p>nm</p>
<p>nc_i</p>
<p>n-1</p>
<p>mvk</p>
<p>1&lt;=n,m,ci&lt;=10^5</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>8 5<br>1 2 2 3 3 2 3 3<br>1 2<br>1 5<br>2 3<br>2 4<br>5 6<br>5 7<br>5 8<br>1 2<br>1 3<br>1 4<br>2 3<br>5 3</p>
</blockquote>

<p></p>
<blockquote><p>2<br>2<br>1<br>0<br>1</p>
</blockquote>


<figure class="highlight c"><figcaption><span>yansetongji.cpp</span><a href="/downloads/code/yansetongji.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Query</span>{</span></span><br><span class="line">    <span class="keyword">int</span> id,c;</span><br><span class="line">};</span><br><span class="line"><span class="built_in">vector</span>&lt;Query&gt;q[M];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;edge[M];</span><br><span class="line"><span class="keyword">int</span> col[M],cnt[M],Res[M];</span><br><span class="line"><span class="keyword">int</span> sz[M],Big[M],ans[M];</span><br><span class="line"><span class="keyword">int</span> Lt[M],Rt[M],dfsLine[M],tid=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Rd</span><span class="params">(<span class="keyword">int</span> &amp;res)</span></span>{</span><br><span class="line">    <span class="keyword">char</span> c;res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(c=getchar(),c&lt;<span class="string">'0'</span>);</span><br><span class="line">    <span class="keyword">do</span> res=(res&lt;&lt;<span class="number">3</span>)+(res&lt;&lt;<span class="number">1</span>)+(c^<span class="number">48</span>);</span><br><span class="line">    <span class="keyword">while</span>(c=getchar(),c&gt;=<span class="string">'0'</span>);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs_pre</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> f)</span></span>{</span><br><span class="line">    sz[x]=<span class="number">1</span>;Big[x]=<span class="number">0</span>;</span><br><span class="line">    Lt[x]=++tid;dfsLine[tid]=x;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edge[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y=edge[x][i];</span><br><span class="line">        <span class="keyword">if</span>(y==f)<span class="keyword">continue</span>;</span><br><span class="line">        dfs_pre(y,x);</span><br><span class="line">        sz[x]+=sz[y];</span><br><span class="line">    }</span><br><span class="line">    Rt[x]=tid;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Del</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=Lt[x];i&lt;=Rt[x];i++){</span><br><span class="line">        <span class="keyword">int</span> t=dfsLine[i];</span><br><span class="line">        --Res[cnt[col[t]]--];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=Lt[x];i&lt;=Rt[x];i++) {</span><br><span class="line">        <span class="keyword">int</span> t=dfsLine[i];</span><br><span class="line">        ++Res[++cnt[col[t]]];</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> f)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> big=<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edge[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y=edge[x][i];</span><br><span class="line">        <span class="keyword">if</span>(y==f)<span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span>(big==<span class="number">-1</span>||sz[y]&gt;sz[big])big=y;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edge[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y=edge[x][i];</span><br><span class="line">        <span class="keyword">if</span>(y!=f&amp;&amp;y!=big){</span><br><span class="line">            solve(y,x);Del(y);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(big!=<span class="number">-1</span>)solve(big,x);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edge[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y=edge[x][i];</span><br><span class="line">        <span class="keyword">if</span>(y!=f&amp;&amp;y!=big)Add(y);</span><br><span class="line">    }</span><br><span class="line">    ++Res[++cnt[col[x]]];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;q[x].<span class="built_in">size</span>();i++)</span><br><span class="line">        ans[q[x][i].id]=Res[q[x][i].c];</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Prt</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(x==<span class="number">0</span>)<span class="keyword">return</span>;</span><br><span class="line">    Prt(x/<span class="number">10</span>); <span class="built_in">putchar</span>(x%<span class="number">10</span>^<span class="number">48</span>);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n,m,a,b;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        edge[i].<span class="built_in">clear</span>();</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;col[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;a,&amp;b);</span><br><span class="line">        edge[a].push_back(b);</span><br><span class="line">        edge[b].push_back(a);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;a,&amp;b);</span><br><span class="line">        q[a].push_back((Query){i,b});</span><br><span class="line">    }</span><br><span class="line">    dfs_pre(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">    solve(<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="keyword">if</span>(ans[i]==<span class="number">0</span>)<span class="built_in">putchar</span>(<span class="string">'0'</span>);</span><br><span class="line">        Prt(ans[i]);</span><br><span class="line">        <span class="built_in">putchar</span>(<span class="string">'\n'</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>tree</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E6%A0%91%E7%9A%84%E7%BB%9F%E8%AE%A1/</url>
    <content><![CDATA[<p>n1nw</p>
<p></p>
<p>I. CHANGE u t : ut</p>
<p>II. QMAX u v: uv</p>
<p>III. QSUM u v: uv</p>
<p>uvuv</p>
<p>:</p>
<blockquote><p>nn12abab</p>
<p>niwii1q</p>
<p>qCHANGE u tQMAX u vQSUM u v</p>
<p> 100 1&lt;=n&lt;=30000, 0&lt;=q&lt;=200000w-3000030000</p>
</blockquote>


<p>:</p>
<blockquote><p>QMAXQSUM</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>4<br>1 2<br>2 3<br>4 1<br>4 2 1 3<br>12<br>QMAX 3 4<br>QMAX 3 3<br>QMAX 3 2<br>QMAX 2 3<br>QSUM 3 4<br>QSUM 2 1<br>CHANGE 1 5<br>QMAX 3 4<br>CHANGE 3 6<br>QMAX 3 4<br>QMAX 2 4<br>QSUM 3 4</p>
</blockquote>

<p></p>
<blockquote><p>4<br>1<br>2<br>2<br>10<br>6<br>5<br>6<br>5<br>16</p>
</blockquote>


<figure class="highlight c"><figcaption><span>shudetongji.cpp</span><a href="/downloads/code/shudetongji.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 30005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> L,R,sum,mx;</span><br><span class="line">}tree[M&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;edge[M];</span><br><span class="line"><span class="keyword">int</span> val[M],A[M],dep[M];</span><br><span class="line"><span class="keyword">int</span> sz[M];<span class="comment">//</span></span><br><span class="line"><span class="keyword">int</span> pathfa[M];<span class="comment">//</span></span><br><span class="line"><span class="keyword">int</span> root[M];<span class="comment">//</span></span><br><span class="line"><span class="keyword">int</span> sonID[M];<span class="comment">//</span></span><br><span class="line"><span class="keyword">int</span> segID[M];<span class="comment">//</span></span><br><span class="line"><span class="keyword">int</span> sT=<span class="number">0</span>;<span class="comment">//</span></span><br><span class="line"><span class="keyword">int</span> qsum,qmx;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Assign</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> f,<span class="keyword">int</span> d)</span></span>{<span class="comment">//</span></span><br><span class="line">    sz[x]=<span class="number">1</span>;<span class="keyword">int</span> k=<span class="number">-1</span>; dep[x]=d;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edge[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y=edge[x][i];</span><br><span class="line">        <span class="keyword">if</span>(y==f)<span class="keyword">continue</span>;</span><br><span class="line">        Assign(y,x,d+<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(k==<span class="number">-1</span>||sz[y]&gt;sz[k])k=y;</span><br><span class="line">        sz[x]+=sz[y];</span><br><span class="line">    }</span><br><span class="line">    sonID[x]=k;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> f,<span class="keyword">int</span> pf)</span></span>{<span class="comment">//</span></span><br><span class="line">    root[x]=f;pathfa[x]=pf;segID[x]=++sT;A[sT]=val[x];</span><br><span class="line">    <span class="keyword">if</span>(sonID[x]!=<span class="number">-1</span>)Dfs(sonID[x],f,pf);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edge[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y=edge[x][i];</span><br><span class="line">        <span class="keyword">if</span>(sonID[x]==y||sz[x]&lt;sz[y])<span class="keyword">continue</span>;<span class="comment">//</span></span><br><span class="line">        Dfs(y,y,x);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Up</span><span class="params">(<span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    tree[p].sum=tree[<span class="number">2</span>*p].sum+tree[<span class="number">2</span>*p+<span class="number">1</span>].sum;</span><br><span class="line">    tree[p].mx=<span class="built_in">max</span>(tree[<span class="number">2</span>*p].mx,tree[<span class="number">2</span>*p+<span class="number">1</span>].mx);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    tree[p].L=L,tree[p].R=R;</span><br><span class="line">    <span class="keyword">if</span>(L==R){</span><br><span class="line">        tree[p].sum=tree[p].mx=A[L];<span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(L,mid,<span class="number">2</span>*p);build(mid+<span class="number">1</span>,R,<span class="number">2</span>*p+<span class="number">1</span>);</span><br><span class="line">    Up(p);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> x,<span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(tree[p].L==tree[p].R){</span><br><span class="line">        tree[p].mx=tree[p].sum=x;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid=(tree[p].L+tree[p].R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(a&lt;=mid)update(a,x,<span class="number">2</span>*p);</span><br><span class="line">    <span class="keyword">else</span> update(a,x,<span class="number">2</span>*p+<span class="number">1</span>);</span><br><span class="line">    Up(p);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(tree[p].L==L&amp;&amp;tree[p].R==R){</span><br><span class="line">        qsum+=tree[p].sum,qmx=<span class="built_in">max</span>(qmx,tree[p].mx);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid=(tree[p].L+tree[p].R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(R&lt;=mid)query(L,R,<span class="number">2</span>*p);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(L&gt;mid)query(L,R,<span class="number">2</span>*p+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> {</span><br><span class="line">        query(L,mid,<span class="number">2</span>*p);query(mid+<span class="number">1</span>,R,<span class="number">2</span>*p+<span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Query</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>{</span><br><span class="line">    <span class="keyword">while</span>(root[a]!=root[b]){</span><br><span class="line">        <span class="keyword">if</span>(dep[root[a]]&lt;dep[root[b]])swap(a,b);</span><br><span class="line">        query(segID[root[a]],segID[a],<span class="number">1</span>);</span><br><span class="line">        a=pathfa[a];<span class="comment">//</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(dep[a]&lt;dep[b])swap(a,b);</span><br><span class="line">    query(segID[b],segID[a],<span class="number">1</span>);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n,m,i,j,k,a,b;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;a,&amp;b);</span><br><span class="line">        edge[a].push_back(b);</span><br><span class="line">        edge[b].push_back(a);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;val[i]);</span><br><span class="line">    Assign(<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">    Dfs(<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">    build(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;m);</span><br><span class="line">    <span class="keyword">char</span> tmp[<span class="number">20</span>];</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;m;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s%d%d"</span>,tmp,&amp;a,&amp;b);</span><br><span class="line">        <span class="keyword">if</span>(tmp[<span class="number">0</span>]==<span class="string">'C'</span>){</span><br><span class="line">            update(segID[a],b,<span class="number">1</span>);</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            qsum=<span class="number">0</span>,qmx=<span class="number">-10000000</span>;</span><br><span class="line">            Query(a,b);</span><br><span class="line">            <span class="keyword">if</span>(tmp[<span class="number">1</span>]==<span class="string">'S'</span>)<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,qsum);</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,qmx);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>shulianpofen</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E6%A0%91%E4%B8%8A%E9%9B%86%E4%B8%AD/</url>
    <content><![CDATA[<p>n1.</p>
<p>mAB</p>
<p>AB</p>
<p>:</p>
<blockquote><p>n<br>n-1<br>m<br>mABAB<br>n,m&lt;=10^5</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>4<br>1 2<br>2 3<br>2 4<br>2<br>1 2<br>1 3<br></p>
</blockquote>

<p></p>
<blockquote><p>0<br>2</p>
</blockquote>


<figure class="highlight c"><figcaption><span>shushangjizhong.cpp</span><a href="/downloads/code/shushangjizhong.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> F first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S second</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MP make_pair</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> all(x) (x).begin(), (x).end()</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ull;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">double</span> ld;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> EPS = <span class="number">1e-9</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> PI = <span class="built_in">acos</span>(<span class="number">-1.0</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MOD = <span class="number">1000</span> * <span class="number">1000</span> * <span class="number">1000</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">2000</span> * <span class="number">1000</span> * <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> LG = <span class="number">30</span>;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> T <span class="title">sqr</span><span class="params">(T n)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> n * n;</span><br><span class="line">}</span><br><span class="line"><span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; g[MAXN];</span><br><span class="line"><span class="keyword">int</span> n, x, y;</span><br><span class="line"><span class="keyword">int</span> depth[MAXN], <span class="built_in">size</span>[MAXN], anc[MAXN][LG];</span><br><span class="line"><span class="keyword">int</span> tin[MAXN], tout[MAXN], timer;</span><br><span class="line"><span class="keyword">int</span> q, a, b;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> v, <span class="keyword">int</span> par = <span class="number">1</span>, <span class="keyword">int</span> d = <span class="number">0</span>)</span> </span>{</span><br><span class="line">    depth[v] = d;</span><br><span class="line">    <span class="built_in">size</span>[v] = <span class="number">1</span>;</span><br><span class="line">    tin[v] = timer++;</span><br><span class="line">    anc[v][<span class="number">0</span>] = par;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; LG; i++) {</span><br><span class="line">        anc[v][i] = anc[anc[v][i - <span class="number">1</span>]][i - <span class="number">1</span>];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; g[v].<span class="built_in">size</span>(); i++) {</span><br><span class="line">        <span class="keyword">int</span> to = g[v][i];</span><br><span class="line">        <span class="keyword">if</span> (to != par) {</span><br><span class="line">            dfs(to, v, d + <span class="number">1</span>);</span><br><span class="line">            <span class="built_in">size</span>[v] += <span class="built_in">size</span>[to];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    tout[v] = timer++;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">ancestor</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> tin[a] &lt;= tin[b] &amp;&amp; tout[b] &lt;= tout[a];</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">go_up</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>{</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = LG - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) {</span><br><span class="line">        <span class="keyword">if</span> (!ancestor(anc[a][i], b)) {</span><br><span class="line">            a = anc[a][i];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> result = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span> (ancestor(a, b)) {</span><br><span class="line">        result = a;</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (ancestor(b, a)) {</span><br><span class="line">        result = b;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        result = anc[go_up(a, b)][<span class="number">0</span>];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> l = lca(a, b);</span><br><span class="line">    <span class="keyword">int</span> result = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span> (a == b) {</span><br><span class="line">        result = n;</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (depth[a] - depth[l] == depth[b] - depth[l]) {</span><br><span class="line">        a = go_up(a, l);</span><br><span class="line">        b = go_up(b, l);</span><br><span class="line">        result = n - <span class="built_in">size</span>[a] - <span class="built_in">size</span>[b];</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">if</span> (depth[a] &lt; depth[b]) {</span><br><span class="line">            swap(a, b);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">int</span> to = a;</span><br><span class="line">        <span class="keyword">int</span> dist = depth[a] + depth[b] - <span class="number">2</span> * depth[l];</span><br><span class="line">        <span class="keyword">if</span> (dist % <span class="number">2</span> == <span class="number">1</span>) {</span><br><span class="line">            result = <span class="number">0</span>;</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            dist /= <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = LG - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) {</span><br><span class="line">                <span class="keyword">if</span> (depth[a] - depth[anc[to][i]] &lt; dist) {</span><br><span class="line">                    to = anc[to][i];</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">int</span> mid = anc[to][<span class="number">0</span>];</span><br><span class="line">            result = <span class="built_in">size</span>[mid] - <span class="built_in">size</span>[to];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    freopen(<span class="string">"data0.in"</span>, <span class="string">"r"</span>, <span class="built_in">stdin</span>);</span><br><span class="line">    freopen(<span class="string">"data0.out"</span>, <span class="string">"w"</span>, <span class="built_in">stdout</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;x, &amp;y);</span><br><span class="line">        g[x].push_back(y);</span><br><span class="line">        g[y].push_back(x);</span><br><span class="line">    }</span><br><span class="line">    dfs(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;q);</span><br><span class="line">    <span class="keyword">while</span> (q--) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(a, b));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>LCA</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E8%B7%B3%E6%A0%BC%E5%AD%90/</url>
    <content><![CDATA[<p>n*mc<br>(x,y)<br>1)(tx,ty), tx&gt;x, ty&gt;y<br>2)(tx,ty), c[(tx,ty)]c[(x,y)]<br></p>
<p>:</p>
<blockquote><p>n,m,k,[1,k]<br>nm<br>100%n,m&lt;=750, k&lt;=n*m</p>
</blockquote>


<p>:</p>
<blockquote><p>s10^9+7</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>4 4 4<br>1 1 1 1<br>1 3 2 1<br>1 2 4 1<br>1 1 1 1</p>
</blockquote>

<p></p>
<blockquote><p>5</p>
</blockquote>


<figure class="highlight c"><figcaption><span>tiaogezi.cpp</span><a href="/downloads/code/tiaogezi.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 755</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> P 1000000007</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,k;</span><br><span class="line"><span class="keyword">int</span> del[M*M];</span><br><span class="line"><span class="keyword">int</span> c[M][M],dp[M][M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CDQ</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(L==R)<span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    CDQ(L,mid);</span><br><span class="line">    <span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>;j&lt;=m;j++){</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k=L;k&lt;=mid;k++){</span><br><span class="line">            sum=(sum+dp[k][j<span class="number">-1</span>])%P;</span><br><span class="line">            del[c[k][j<span class="number">-1</span>]]=(del[c[k][j<span class="number">-1</span>]]+dp[k][j<span class="number">-1</span>])%P;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k=mid+<span class="number">1</span>;k&lt;=R;k++){</span><br><span class="line">            dp[k][j]=(dp[k][j]+sum)%P;</span><br><span class="line">            dp[k][j]=(dp[k][j]-del[c[k][j]]+P)%P;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k=L;k&lt;=mid;k++)</span><br><span class="line">            del[c[k][j]]=<span class="number">0</span>;</span><br><span class="line">    CDQ(mid+<span class="number">1</span>,R);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;n,&amp;m,&amp;k);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;c[i][j]);</span><br><span class="line">    dp[<span class="number">1</span>][<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">    CDQ(<span class="number">1</span>,n);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[n][m]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E5%BA%8F%E5%88%97%E5%88%86%E6%AE%B5/</url>
    <content><![CDATA[<p>nak<br>1&lt;=&lt;=35000, 1&lt;=k&lt;=min(n, 50), 1&lt;=ai&lt;=n</p>
<p>:</p>
<blockquote><p>nk<br>n</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>7 2<br>1 3 3 1 4 4 4</p>
</blockquote>

<p></p>
<blockquote><p>5</p>
</blockquote>

<p>2<br></p>
<blockquote><p>8 3<br>7 7 8 7 7 8 1 7</p>
</blockquote>

<p></p>
<blockquote><p>6</p>
</blockquote>


<figure class="highlight c"><figcaption><span>xuliefenduan.cpp</span><a href="/downloads/code/xuliefenduan.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lson l,m,rt*2</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rson m+1,r,rt*2+1</span></span><br><span class="line"><span class="keyword">int</span> tree[<span class="number">350050</span>*<span class="number">8</span>];</span><br><span class="line"><span class="keyword">int</span> flag[<span class="number">350050</span>*<span class="number">8</span>];</span><br><span class="line"><span class="keyword">int</span> a[<span class="number">350050</span>];</span><br><span class="line"><span class="keyword">int</span> last[<span class="number">350050</span>];</span><br><span class="line"><span class="keyword">int</span> dp[<span class="number">350050</span>];</span><br><span class="line"><span class="keyword">int</span> n,k;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span> </span>{</span><br><span class="line">    flag[rt]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(l==r) {</span><br><span class="line">        tree[rt]=dp[l];</span><br><span class="line">        flag[rt]=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(lson);</span><br><span class="line">    build(rson);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span> </span>{ <span class="comment">//</span></span><br><span class="line">    <span class="keyword">if</span>(flag[rt]) { <span class="comment">//0</span></span><br><span class="line">        <span class="keyword">int</span> m=(l+r)/<span class="number">2</span>;</span><br><span class="line">        flag[rt*<span class="number">2</span>]+=flag[rt];</span><br><span class="line">        flag[rt*<span class="number">2</span>+<span class="number">1</span>]+=flag[rt];</span><br><span class="line">        tree[rt*<span class="number">2</span>]+=flag[rt];<span class="comment">//m-l+1.</span></span><br><span class="line">        tree[rt*<span class="number">2</span>+<span class="number">1</span>]+=flag[rt];</span><br><span class="line">        flag[rt]=<span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> rt)</span> </span>{</span><br><span class="line">    tree[rt]=<span class="built_in">max</span>(tree[rt&lt;&lt;<span class="number">1</span>],tree[rt&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Query</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(L&lt;=l&amp;&amp;r&lt;=R) {</span><br><span class="line">        <span class="keyword">return</span> tree[rt];</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        pushdown(l,r,rt);</span><br><span class="line">        <span class="keyword">int</span> m=(l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span>(L&lt;=m) {</span><br><span class="line">            ans=<span class="built_in">max</span>(ans,Query(L,R,lson));</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(m&lt;R) {</span><br><span class="line">            ans=<span class="built_in">max</span>(ans,Query(L,R,rson));</span><br><span class="line">        }</span><br><span class="line">        pushup(rt);</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> c,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> rt)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(L&lt;=l&amp;&amp;r&lt;=R) { <span class="comment">//~</span></span><br><span class="line">        tree[rt]+=c;<span class="comment">//</span></span><br><span class="line">        flag[rt]+=c;<span class="comment">//~</span></span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    }</span><br><span class="line">    pushdown(l,r,rt);</span><br><span class="line">    <span class="keyword">int</span> m=(l+r)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span>(L&lt;=m) {</span><br><span class="line">        update(L,R,c,lson);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(m&lt;R) {</span><br><span class="line">        update(L,R,c,rson);</span><br><span class="line">    }</span><br><span class="line">    pushup(rt);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;k);</span><br><span class="line">    <span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=k; i++) {</span><br><span class="line">        build(<span class="number">0</span>,n,<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; j++)dp[j]=<span class="number">0</span>,last[a[j]]=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=n; j++) {</span><br><span class="line">            update(last[a[j]],j<span class="number">-1</span>,<span class="number">1</span>,<span class="number">0</span>,n,<span class="number">1</span>);</span><br><span class="line">            last[a[j]]=j;</span><br><span class="line">            dp[j]=Query(<span class="number">0</span>,j<span class="number">-1</span>,<span class="number">0</span>,n,<span class="number">1</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[n]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">char</span> in[<span class="number">20</span>]={<span class="string">"sub0.in"</span>};</span><br><span class="line">    <span class="keyword">char</span> out[<span class="number">20</span>]={<span class="string">"sub0.out"</span>};</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> cas=<span class="number">0</span>;cas&lt;<span class="number">10</span>;cas++){</span><br><span class="line">        freopen(in,<span class="string">"r"</span>,<span class="built_in">stdin</span>);in[<span class="number">3</span>]++;</span><br><span class="line">        freopen(out,<span class="string">"w"</span>,<span class="built_in">stdout</span>);out[<span class="number">3</span>]++;</span><br><span class="line">        solve();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>MIS</title>
    <url>/blog/MIS/</url>
    <content><![CDATA[<p>mM length Increase SubsequenceMIS<br>nMIS<br></p>
<p>:</p>
<blockquote><p>nm</p>
<p>n</p>
</blockquote>


<p>:</p>
<blockquote><p>MIS20140921</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>5 3<br>1 2 5 3 4</p>
</blockquote>

<p></p>
<blockquote><p>5</p>
</blockquote>


<figure class="highlight c"><figcaption><span>MIS.cpp</span><a href="/downloads/code/MIS.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> reg register</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 10005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 105</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> P 20140921</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> A[N],B[N],cnt[N];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> dp[M][N];</span><br><span class="line"><span class="keyword">int</span> n,m,mx;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>{</span><br><span class="line">    <span class="keyword">while</span>(x&lt;=mx) {</span><br><span class="line">        cnt[x]+=y;</span><br><span class="line">        <span class="keyword">if</span>(cnt[x]&gt;=P)cnt[x]-=P;</span><br><span class="line">        x+=x&amp;-x;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x) {</span><br><span class="line">        res+=cnt[x];</span><br><span class="line">        <span class="keyword">if</span>(res&gt;=P)res-=P;</span><br><span class="line">        x-=x&amp;-x;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    reg <span class="keyword">int</span> i,j;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;=n; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i]);</span><br><span class="line">        dp[<span class="number">1</span>][i]=<span class="number">1</span>;</span><br><span class="line">        B[i]=A[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(m==<span class="number">1</span>){</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,n);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">    sort(B+<span class="number">1</span>,B+n+<span class="number">1</span>);</span><br><span class="line">    mx=unique(B+<span class="number">1</span>,B+n+<span class="number">1</span>)-B;<span class="comment">//</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;=n; i++)A[i]=lower_bound(B+<span class="number">1</span>,B+<span class="number">1</span>+mx,A[i])-B+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">2</span>; i&lt;=m; i++) {</span><br><span class="line">        <span class="built_in">memset</span>(cnt,<span class="number">0</span>,<span class="keyword">sizeof</span> cnt);</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">1</span>; j&lt;=n; j++) {</span><br><span class="line">            dp[i][j]=query(A[j]<span class="number">-1</span>);</span><br><span class="line">            <span class="keyword">if</span>(dp[i<span class="number">-1</span>][j])add(A[j],dp[i<span class="number">-1</span>][j]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    reg <span class="keyword">long</span> <span class="keyword">long</span> ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(j=<span class="number">1</span>; j&lt;=n; j++)</span><br><span class="line">    {</span><br><span class="line">        ans+=dp[m][j];</span><br><span class="line">        <span class="keyword">if</span>(ans&gt;=P)ans-=P;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans%P);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>NOIP</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E8%82%A1%E7%A5%A8%E4%BA%A4%E6%98%93/</url>
    <content><![CDATA[<p>lxhgww<br>lxhgwwTiAP_iiBP_iiiAS_iBS_i<br>Wii+1i+WMaxP<br>1lxhgww<br>Tlxhgww</p>
<p>:</p>
<blockquote><p>3TMaxPW<br>Tii-14AP_i,BP_i,AS_i,BS_i0&lt;=W&lt;T&lt;=2000, 1&lt;=MaxP&lt;=2000, 1&lt;=BPi&lt;=APi&lt;=1000, 1&lt;=ASi&lt;=BSi&lt;=MaxP</p>
</blockquote>


<p>:</p>
<blockquote><p>1lxhgww</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>5 2 0<br>2 1 1 1<br>2 1 1 1<br>3 2 1 1<br>4 3 1 1<br>5 4 1 1</p>
</blockquote>

<p></p>
<blockquote><p>3</p>
</blockquote>


<figure class="highlight c"><figcaption><span>gupiaojiaoyi.cpp</span><a href="/downloads/code/gupiaojiaoyi.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 2005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> ap,bp,as,bs;</span><br><span class="line">}A[M];</span><br><span class="line"><span class="keyword">int</span> dp[M][M];</span><br><span class="line"><span class="keyword">int</span> INF;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> v,id;</span><br><span class="line">}Q[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n,m,W;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m&gt;&gt;W;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;A[i].ap&gt;&gt;A[i].bp&gt;&gt;A[i].as&gt;&gt;A[i].bs;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(dp,<span class="number">-127</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=W+<span class="number">1</span>;i++){</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=m;j++){</span><br><span class="line">            <span class="keyword">if</span>(j&lt;=A[i].as)dp[i][j]=-j*A[i].ap;</span><br><span class="line">            <span class="keyword">if</span>(i&gt;<span class="number">1</span>)dp[i][j]=<span class="built_in">max</span>(dp[i][j],dp[i<span class="number">-1</span>][j]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=W+<span class="number">2</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">int</span> ii=i-W<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">int</span> L=<span class="number">0</span>,R=<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=m;j&gt;=<span class="number">0</span>;j--){<span class="comment">//</span></span><br><span class="line">            Node tmp;</span><br><span class="line">            tmp.v=dp[ii][j]+j*A[i].bp;  tmp.id=j;</span><br><span class="line">            <span class="keyword">while</span>(L&lt;=R&amp;&amp;Q[R].v&lt;=tmp.v)R--;</span><br><span class="line">            Q[++R]=tmp;</span><br><span class="line">            <span class="keyword">while</span>(L&lt;=R&amp;&amp;Q[L].id-j&gt;A[i].bs)L++;</span><br><span class="line">            dp[i][j]=Q[L].v-j*A[i].bp;</span><br><span class="line">        }</span><br><span class="line">        L=<span class="number">0</span>,R=<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=m;j++){<span class="comment">//</span></span><br><span class="line">            Node tmp;</span><br><span class="line">            tmp.v=dp[ii][j]+j*A[i].ap;   tmp.id=j;</span><br><span class="line">            <span class="keyword">while</span>(L&lt;=R&amp;&amp;Q[R].v&lt;=tmp.v)R--;</span><br><span class="line">            Q[++R]=tmp;</span><br><span class="line">            <span class="keyword">while</span>(L&lt;=R&amp;&amp;j-Q[L].id&gt;A[i].as)L++;</span><br><span class="line">            dp[i][j]=<span class="built_in">max</span>(dp[i][j],Q[L].v-j*A[i].ap);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=m;j++){</span><br><span class="line">            dp[i][j]=<span class="built_in">max</span>(dp[i][j],dp[i<span class="number">-1</span>][j]);</span><br><span class="line">        <span class="comment">//  printf("%d %d %d\n",i,j,dp[i][j]);</span></span><br><span class="line">        }</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        for(int j=0;j&lt;=m;j++){</span></span><br><span class="line"><span class="comment">            {</span></span><br><span class="line"><span class="comment">                for(int jj=j;jj&lt;=min(j+A[i].bs,m);jj++)//</span></span><br><span class="line"><span class="comment">                    dp[i][j]=max(dp[i][j],dp[ii][jj]+jj*A[i].bp)-j*A[i].bp);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                for(int jj=j;jj&gt;=max(0,j-A[i].as);jj--)//</span></span><br><span class="line"><span class="comment">                    dp[i][j]=max(dp[i][j],dp[ii][jj]+jj*A[i].ap)-j*A[i].ap);</span></span><br><span class="line"><span class="comment">            }</span></span><br><span class="line"><span class="comment">            dp[i][j]=max(dp[i][j],dp[i-1][j]);</span></span><br><span class="line"><span class="comment">        }*/</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=m;j++)ans=<span class="built_in">max</span>(ans,dp[n][j]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E5%A4%9A%E9%87%8D%E8%83%8C%E5%8C%85/</url>
    <content><![CDATA[<p>Vm</p>
<p>:</p>
<blockquote><p>Vm<br>m3i<br>V&lt;=10000m&lt;=500,1000</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>10 4<br>2 3 2<br>2 4 3<br>1 2 2<br>4 5 3</p>
</blockquote>

<p></p>
<blockquote><p>8</p>
</blockquote>


<figure class="highlight c"><figcaption><span>duochongbeibao.cpp</span><a href="/downloads/code/duochongbeibao.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> dp[M],A[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">int</span> V,m,v,c,k;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;V,&amp;m);</span><br><span class="line">        <span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;k,&amp;v,&amp;c);</span><br><span class="line">            <span class="keyword">if</span>(k*v&gt;=V){</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=v;j&lt;=V;j++)<span class="comment">//</span></span><br><span class="line">                    dp[j]=<span class="built_in">max</span>(dp[j],dp[j-v]+c);</span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                <span class="keyword">int</span> n=<span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=k;j&lt;&lt;=<span class="number">1</span>){</span><br><span class="line">                    A[n++]=j;k-=j;</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">if</span>(k)A[n++]=k;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> a=<span class="number">0</span>;a&lt;n;a++){<span class="comment">//01</span></span><br><span class="line">                    <span class="keyword">for</span>(<span class="keyword">int</span> b=V;b&gt;=A[a]*v;b--)</span><br><span class="line">                        dp[b]=<span class="built_in">max</span>(dp[b],dp[b-v*A[a]]+c*A[a]);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[V]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>duochongbeibao4.cpp</span><a href="/downloads/code/duochongbeibao4.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 10005</span></span><br><span class="line"><span class="keyword">int</span> Q[M],Q2[M],dp[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line"><span class="comment">//  dp[cur][k*d+i]-k*val[i] = Max(dp[!cur][j*d+i]-j*val[i]);</span></span><br><span class="line">    <span class="keyword">int</span> n,v;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;v,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,num,ct,val; i&lt;=n; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;num,&amp;ct,&amp;val);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;ct; j++) {</span><br><span class="line">            <span class="keyword">int</span> head = <span class="number">1</span>,tail = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k*ct+j&lt;=v; k++) {</span><br><span class="line">                <span class="keyword">int</span> res = dp[k*ct+j]-k*val;</span><br><span class="line">                <span class="keyword">while</span>(head &lt;= tail &amp;&amp; k-Q2[head] &gt; num) head ++;</span><br><span class="line">                <span class="keyword">while</span>(head &lt;= tail &amp;&amp; res &gt;= Q[tail]) tail--;</span><br><span class="line">                Q[++tail] = res,Q2[tail] = k;</span><br><span class="line">                dp[k*ct+j] = Q[head]+k*val;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[v]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title> </title>
    <url>/blog/%E6%8E%92%E9%98%9F/</url>
    <content><![CDATA[<p>nT[i]1~n</p>
<p>:</p>
<blockquote><p>nn1000<br>nT<a href="T[i]1000">i</a></p>
</blockquote>


<p>:</p>
<blockquote><p>n2</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>4<br>2 4 3 5</p>
</blockquote>

<p></p>
<blockquote><p>6.00 5.00 5.50 4.50</p>
</blockquote>


<figure class="highlight c"><figcaption><span>paidui.cpp</span><a href="/downloads/code/paidui.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> A[<span class="number">2005</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">int</span> s=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) {</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;A[i];</span><br><span class="line">        s+=A[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%.2f "</span>,(s-A[i])/<span class="number">2.0</span>);</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    solve();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title> 1</title>
    <url>/blog/%E5%8F%98%E6%88%901/</url>
    <content><![CDATA[<p>nn1</p>
<p>:</p>
<blockquote><p>T<br>Tn<br>T,n&lt;=100000</p>
</blockquote>


<p>:</p>
<blockquote><p>n14</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>3<br>1<br>2<br>50</p>
</blockquote>

<p></p>
<blockquote><p>0.0000<br>2.0000<br>3.0333</p>
</blockquote>


<figure class="highlight c"><figcaption><span>biancheng1.cpp</span><a href="/downloads/code/biancheng1.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100005</span></span><br><span class="line"><span class="keyword">double</span> dp[M];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;son[M];</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> n)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(dp[n]&lt;<span class="number">0</span>){</span><br><span class="line">        <span class="keyword">double</span> &amp;res=dp[n];</span><br><span class="line">        <span class="keyword">int</span> t=son[n].<span class="built_in">size</span>();</span><br><span class="line">        res=t;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            dp[n]=sum(dp[son[n][i]])/t+1;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;son[n].<span class="built_in">size</span>();i++){</span><br><span class="line">            <span class="keyword">int</span> x=son[n][i];</span><br><span class="line">            <span class="keyword">if</span>(x==n)<span class="keyword">continue</span>;</span><br><span class="line">            res+=dfs(x);</span><br><span class="line">        }</span><br><span class="line">        res=res/(t<span class="number">-1</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> dp[n];</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;M;i++){</span><br><span class="line">        dp[i]=<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;M;j+=i)</span><br><span class="line">            son[j].push_back(i);</span><br><span class="line">    }</span><br><span class="line">    dp[<span class="number">1</span>]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> cas,n,v=<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;cas;</span><br><span class="line">    <span class="keyword">while</span>(cas--){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%.4f\n"</span>,dfs(n));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E5%9B%BE%E4%B8%8A%E8%A1%8C%E8%B5%B0/</url>
    <content><![CDATA[<p>1N1n<br>K1/K<br></p>
<p>:</p>
<blockquote><p>:  N MNM<br> 1+M : 3 a b cabc<br>N&lt;=100000, M&lt;=2N</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>4 4<br>1 2 1<br>1 3 2<br>2 3 3<br>3 4 4</p>
</blockquote>

<p></p>
<blockquote><p>7.00</p>
</blockquote>


<figure class="highlight c"><figcaption><span>tushangxingzou.cpp</span><a href="/downloads/code/tushangxingzou.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> to,v;</span><br><span class="line">};</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt;edge[M];</span><br><span class="line"><span class="keyword">double</span> dp[M];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">bool</span> mark[M];</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(x==n)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(dp[x]&gt;<span class="number">-1.0</span>)<span class="keyword">return</span> dp[x];</span><br><span class="line">    dp[x]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edge[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y=edge[x][i].to;</span><br><span class="line">        dp[x]+=edge[x][i].v+dfs(y);</span><br><span class="line">    }</span><br><span class="line">    dp[x]/=edge[x].<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">return</span> dp[x];</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> m,a,b,c;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">        edge[a].push_back((node)&lt;%b,c%&gt;);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)dp[i]=<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">double</span> ans=dfs(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.2f\n"</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title> </title>
    <url>/blog/%E9%AA%B0%E5%AD%90%E6%B8%B8%E6%88%8F/</url>
    <content><![CDATA[<p>ABn,m0A</p>
<p>:</p>
<blockquote><p>nmABn,m1000<br>6A1-6<br>6B1-6</p>
</blockquote>


<p>:</p>
<blockquote><p>A</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>5 5<br>1.000 0.000 0.000 0.000 0.000 0.000<br>0.000 0.000 0.000 0.000 0.000 1.000</p>
</blockquote>

<p></p>
<blockquote><p>0.000000</p>
</blockquote>


<p>2<br></p>
<blockquote><p>5 5<br>0.000 0.000 0.000 0.000 0.000 1.000<br>1.000 0.000 0.000 0.000 0.000 0.000</p>
</blockquote>

<p></p>
<blockquote><p>1.000000</p>
</blockquote>



<figure class="highlight c"><figcaption><span>saiziyouxi.cpp</span><a href="/downloads/code/saiziyouxi.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">double</span> dp[<span class="number">2005</span>][<span class="number">2005</span>],A[<span class="number">10</span>],B[<span class="number">10</span>],p,q;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(y==<span class="number">0</span>)<span class="keyword">return</span> <span class="number">1.0</span>;</span><br><span class="line">    <span class="keyword">if</span>(x==<span class="number">0</span>)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(dp[x][y]&gt;<span class="number">-1.0</span>)<span class="keyword">return</span> dp[x][y];</span><br><span class="line">    <span class="keyword">return</span> dp[x][y]=dfs(x<span class="number">-1</span>,y)*q+dfs(x,y<span class="number">-1</span>)*p;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> n,m;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">6</span>; i++)<span class="built_in">scanf</span>(<span class="string">"%lf"</span>,&amp;A[i]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">6</span>; i++)<span class="built_in">scanf</span>(<span class="string">"%lf"</span>,&amp;B[i]);</span><br><span class="line">    p=<span class="number">0</span>,q=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">6</span>; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=<span class="number">6</span>; j++) {</span><br><span class="line">            <span class="keyword">if</span>(i&gt;j)p+=A[i]*B[j];</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(i&lt;j)q+=A[i]*B[j];</span><br><span class="line">        }</span><br><span class="line">    <span class="keyword">double</span> s=p+q;</span><br><span class="line">    p/=s,q/=s;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;=n; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;=m; j++)dp[i][j]=<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">double</span> tmp=dfs(n,m);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.6f\n"</span>,tmp);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    solve();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E7%8F%A0%E5%AE%9D%E7%AE%B1/</url>
    <content><![CDATA[<p>n*m</p>
<p>:</p>
<blockquote><p>nmn,m100</p>
</blockquote>


<p>:</p>
<blockquote><p>1000000007 </p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>3 2</p>
</blockquote>

<p></p>
<blockquote><p>25</p>
</blockquote>

<p>2<br></p>
<blockquote><p>5 10</p>
</blockquote>

<p></p>
<blockquote><p>853472452</p>
</blockquote>


<figure class="highlight c"><figcaption><span>zhubaoxiang.cpp</span><a href="/downloads/code/zhubaoxiang.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 51</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> P 1000000007</span></span><br><span class="line"><span class="keyword">int</span> F2[M],Ft[M],F[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Fast</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> n)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> res=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(n&gt;<span class="number">0</span>) {</span><br><span class="line">        <span class="keyword">if</span>(n&amp;<span class="number">1</span>)res=(<span class="number">1L</span>L*res*x)%P;</span><br><span class="line">        x=(<span class="number">1L</span>L*x*x)%P;</span><br><span class="line">        n&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init</span><span class="params">()</span> </span>{</span><br><span class="line">    F2[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    F[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;M; i++) {</span><br><span class="line">        F2[i]=F2[i<span class="number">-1</span>]*<span class="number">2</span>%P;</span><br><span class="line">        F[i]=<span class="number">1L</span>L*F[i<span class="number">-1</span>]*i%P;</span><br><span class="line">    }</span><br><span class="line">    Ft[M<span class="number">-1</span>]=Fast(F[M<span class="number">-1</span>],P<span class="number">-2</span>);<span class="comment">//Ft[i]= i!^-1</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=M<span class="number">-2</span>; i&gt;=<span class="number">0</span>; i--) {</span><br><span class="line">        Ft[i]=<span class="number">1L</span>L*(i+<span class="number">1</span>)*Ft[i+<span class="number">1</span>]%P;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> &amp;x,<span class="keyword">int</span> y)</span> </span>{</span><br><span class="line">    x+=y;</span><br><span class="line">    <span class="keyword">if</span>(x&gt;=P)x-=P;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;<span class="number">0</span>)x+=P;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> n,m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;m; i++) {</span><br><span class="line">        <span class="keyword">int</span> tmp=<span class="number">1L</span>L*F[m]*Ft[m-i]%P*Ft[i]%P*Fast(F2[m-i]<span class="number">-1</span>,n)%P;</span><br><span class="line">        <span class="keyword">if</span>(i&amp;<span class="number">1</span>)tmp=-tmp;</span><br><span class="line">        Add(ans,tmp);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    Init();</span><br><span class="line">    solve();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>SPOJ BALNUM</title>
    <url>/blog/SPOJ-BALNUM/</url>
    <content><![CDATA[<p></p>
<ol>
<li><p></p>
</li>
<li><p></p>
</li>
</ol>
<p>T[A,B]</p>
<p>:</p>
<blockquote><p>TT&lt;=500<br>TAB1&lt;=A,B&lt;=10^19</p>
</blockquote>


<p>:</p>
<blockquote><p>[A,B]</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>2<br>1 1000<br>1 9</p>
</blockquote>

<p></p>
<blockquote><p>147<br>4</p>
</blockquote>

<p></p>
<blockquote><p>T&lt;=500, 1&lt;=A,B&lt;=10^19</p>
</blockquote>


<figure class="highlight c"><figcaption><span>SPOJ_BALLNUM.cpp</span><a href="/downloads/code/SPOJ_BALLNUM.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> uLL unsigned long long</span></span><br><span class="line">uLL dp[<span class="number">21</span>][<span class="number">1025</span>][<span class="number">1025</span>];</span><br><span class="line"><span class="keyword">int</span> num[<span class="number">21</span>];</span><br><span class="line"><span class="keyword">bool</span> mark[<span class="number">1025</span>][<span class="number">1025</span>];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> mask,<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(!mask)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">        <span class="keyword">if</span>(mask&amp;(<span class="number">1</span>&lt;&lt;i)){</span><br><span class="line">            <span class="keyword">if</span>(((x&amp;(<span class="number">1</span>&lt;&lt;i))&gt;<span class="number">0</span>)==(i&amp;<span class="number">1</span>))<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">1024</span>;i++){</span><br><span class="line">         <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">1024</span>;j++)</span><br><span class="line">             mark[i][j]=check(i,j);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function">uLL <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> pos,<span class="keyword">int</span> mask,<span class="keyword">int</span> x,<span class="keyword">bool</span> limit)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(pos==<span class="number">0</span>)<span class="keyword">return</span> mark[mask][x];</span><br><span class="line">    <span class="keyword">if</span>(!limit&amp;&amp;~dp[pos][mask][x])<span class="keyword">return</span> dp[pos][mask][x];</span><br><span class="line">    <span class="keyword">int</span> up=limit?num[pos]:<span class="number">9</span>;</span><br><span class="line">    uLL cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=up;i++){</span><br><span class="line">        <span class="keyword">if</span>(!mask&amp;&amp;!i)cnt+=dfs(pos<span class="number">-1</span>,mask,x,limit&amp;&amp;(i==up));</span><br><span class="line">        <span class="keyword">else</span> cnt+=dfs(pos<span class="number">-1</span>,mask|(<span class="number">1</span>&lt;&lt;i),x^(<span class="number">1</span>&lt;&lt;i),limit&amp;&amp;(i==up));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> limit?cnt:dp[pos][mask][x]=cnt;</span><br><span class="line">}</span><br><span class="line"><span class="function">uLL <span class="title">solve</span><span class="params">(uLL n)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">0</span>)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> len=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(n){</span><br><span class="line">        num[++len]=n%<span class="number">10</span>;</span><br><span class="line">        n/=<span class="number">10</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> dfs(len,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    Init();</span><br><span class="line">    <span class="keyword">int</span> cas;</span><br><span class="line">    <span class="built_in">memset</span>(dp,<span class="number">-1</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;cas;</span><br><span class="line">    uLL L,R;</span><br><span class="line">    <span class="keyword">while</span>(cas--){</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;L&gt;&gt;R;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;solve(R)-solve(L<span class="number">-1</span>)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title>Round Numbers</title>
    <url>/blog/Round-Numbers/</url>
    <content><![CDATA[<p><br>Round Number<br>nRound Number9Round Number91001262611010<br>Round Number<br>[l,r]Round Number</p>
<p>:</p>
<blockquote><p>l,r1&lt;=l,r&lt;=2x10^9</p>
</blockquote>


<p>:</p>
<blockquote><p>Round Number</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>2 12</p>
</blockquote>

<p></p>
<blockquote><p>6</p>
</blockquote>


<figure class="highlight c"><figcaption><span>roundnumber.cpp</span><a href="/downloads/code/roundnumber.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LL long long</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> dp[<span class="number">35</span>][<span class="number">2</span>][<span class="number">70</span>];</span><br><span class="line"><span class="keyword">int</span> num[<span class="number">40</span>],len;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Abs</span><span class="params">(<span class="keyword">int</span> x)</span></span>{ <span class="keyword">return</span> x&gt;<span class="number">0</span>?x:-x; }</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> pos,<span class="keyword">bool</span> lead0,<span class="keyword">int</span> cha,<span class="keyword">bool</span> limit)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(pos==<span class="number">0</span>)<span class="keyword">return</span> cha&gt;=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(!limit&amp;&amp;~dp[pos][lead0][cha+<span class="number">35</span>])<span class="keyword">return</span> dp[pos][lead0][cha+<span class="number">35</span>];</span><br><span class="line">    <span class="keyword">int</span> up=limit?num[pos]:<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=up;i++){</span><br><span class="line">        <span class="keyword">if</span>(lead0){</span><br><span class="line">            <span class="keyword">if</span>(i==<span class="number">0</span>)cnt+=dfs(pos<span class="number">-1</span>,<span class="number">1</span>,cha,limit&amp;&amp;i==up);</span><br><span class="line">            <span class="keyword">else</span> cnt+=dfs(pos<span class="number">-1</span>,<span class="number">0</span>,cha<span class="number">-1</span>,limit&amp;&amp;i==up);</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="keyword">int</span> k=(i==<span class="number">0</span>)?<span class="number">1</span>:<span class="number">-1</span>;</span><br><span class="line">            cnt+=dfs(pos<span class="number">-1</span>,<span class="number">0</span>,cha+k,limit&amp;&amp;i==up);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> limit?cnt:dp[pos][lead0][cha+<span class="number">35</span>]=cnt;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> n)</span></span>{</span><br><span class="line">    len=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(n){</span><br><span class="line">        num[++len]=n%<span class="number">2</span>;</span><br><span class="line">        n/=<span class="number">2</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(dp,<span class="number">-1</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">    <span class="keyword">return</span> dfs(len,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> a,b;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;a,&amp;b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,solve(b)-solve(a<span class="number">-1</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E4%B8%8D%E9%99%8D%E6%95%B0/</url>
    <content><![CDATA[<p>123446<br>[a,b] </p>
<p>:</p>
<blockquote><p> ab,1&lt;=a,b&lt;=2^31</p>
</blockquote>


<p>:</p>
<blockquote><p> [a,b] </p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>1 9<br>1 19</p>
</blockquote>

<p></p>
<blockquote><p>9<br>18</p>
</blockquote>


<figure class="highlight c"><figcaption><span>bujiangshu.cpp</span><a href="/downloads/code/bujiangshu.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LL long long</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">25</span>;</span><br><span class="line"><span class="keyword">int</span> digit[N];</span><br><span class="line">LL dp[N][N];</span><br><span class="line"><span class="function">LL <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> pos,<span class="keyword">int</span> statu,<span class="keyword">int</span> limit)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">     <span class="keyword">int</span> i,<span class="built_in">end</span>,s;</span><br><span class="line">     LL res=<span class="number">0</span>;</span><br><span class="line">     <span class="keyword">if</span>(pos==<span class="number">-1</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">     <span class="keyword">if</span>(!limit&amp;&amp;dp[pos][statu]!=<span class="number">-1</span>)</span><br><span class="line">        <span class="keyword">return</span> dp[pos][statu];</span><br><span class="line">     <span class="built_in">end</span>=limit?digit[pos]:<span class="number">9</span>;</span><br><span class="line">     <span class="keyword">for</span>(i=statu;i&lt;=<span class="built_in">end</span>;i++)</span><br><span class="line">         res+=dfs(pos<span class="number">-1</span>,i,limit&amp;&amp;i==<span class="built_in">end</span>);</span><br><span class="line">     <span class="keyword">if</span>(!limit)</span><br><span class="line">         dp[pos][statu]=res;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"><span class="function">LL <span class="title">calc</span><span class="params">(LL n)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">     <span class="keyword">int</span> len=<span class="number">0</span>;</span><br><span class="line">     <span class="built_in">memset</span>(dp,<span class="number">-1</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">     <span class="keyword">while</span>(n)</span><br><span class="line">     {</span><br><span class="line">         digit[len++]=n%<span class="number">10</span>;</span><br><span class="line">         n/=<span class="number">10</span>;</span><br><span class="line">     }</span><br><span class="line">     <span class="keyword">return</span> dfs(len<span class="number">-1</span>,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{    freopen(<span class="string">"data1.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</span><br><span class="line">     freopen(<span class="string">"data1.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</span><br><span class="line">     LL a,b;</span><br><span class="line">     <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%lld %lld"</span>,&amp;a,&amp;b)!=EOF)</span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,calc(b)-calc(a<span class="number">-1</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E9%80%89%E8%AF%BE/</url>
    <content><![CDATA[<p>NN&lt;300MM<br>FrontpageWindowsWindowsFrontpage123 :12234312<br></p>
<p>:</p>
<blockquote><p>NM</p>
<p>N12N010</p>
</blockquote>


<p>:</p>
<blockquote><p>,</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>7 4<br>2 2<br>0 1<br>0 4<br>2 1<br>7 1<br>7 6<br>2 2</p>
</blockquote>

<p></p>
<blockquote><p>13</p>
</blockquote>

<p></p>
<blockquote><p>1&lt;=N&lt;=300, M&lt;=N</p>
</blockquote>


<figure class="highlight c"><figcaption><span>xuanke.cpp</span><a href="/downloads/code/xuanke.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 305</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> m,val[M]= {<span class="number">0</span>},cost[M];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;edge[M];</span><br><span class="line"><span class="keyword">int</span> dp[M][M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> t=<span class="number">0</span>,i,j,k,y;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;=m; i++)</span><br><span class="line">        dp[x][i]=val[x];</span><br><span class="line">    <span class="keyword">if</span>(x)t=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;edge[x].<span class="built_in">size</span>(); i++) {</span><br><span class="line">        y=edge[x][i];</span><br><span class="line">        dfs(y);</span><br><span class="line">        <span class="keyword">for</span>(j=m; j&gt;=t; j--)</span><br><span class="line">            <span class="keyword">for</span>(k=<span class="number">1</span>; k&lt;=j-t; k++)</span><br><span class="line">                dp[x][j]=<span class="built_in">max</span>(dp[x][j],dp[x][j-k]+dp[y][k]);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> n,i,a,b;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;=n; i++)</span><br><span class="line">        edge[i].<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>; i&lt;=n; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;a,&amp;val[i]);</span><br><span class="line">        edge[a].push_back(i);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">memset</span>(dp,<span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">    dfs(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[<span class="number">0</span>][m]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E7%8E%AF%E4%B8%8A%E6%9C%80%E5%A4%A7%E8%BF%9E%E7%BB%AD%E5%92%8C/</url>
    <content><![CDATA[<p>N,KA[1],A[2],A[3],A[N]A[1]A[N]<br>K</p>
<p>:</p>
<blockquote><p>NK<br>NA[i]</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>6 3<br>6 -1 2 -6 5 -5</p>
</blockquote>

<p></p>
<blockquote><p>7</p>
</blockquote>

<p>2<br></p>
<blockquote><p>6 4<br>6 -1 2 -6 5 -5</p>
</blockquote>

<p></p>
<blockquote><p>7</p>
</blockquote>

<p>3<br></p>
<blockquote><p>6 3<br>-1 2 -6 5 -5 6</p>
</blockquote>

<p></p>
<blockquote><p>7</p>
</blockquote>

<p>4<br></p>
<blockquote><p>6 6<br>-1 -1 -1 -1 -1 -1</p>
</blockquote>

<p></p>
<blockquote><p>-1</p>
</blockquote>



<p></p>
<blockquote><p>1&lt;=K&lt;=N&lt;=10^5, -10^3&lt;A[i]&lt;10^3</p>
</blockquote>


<figure class="highlight c"><figcaption><span>huanshangzuidalianxu.cpp</span><a href="/downloads/code/huanshangzuidalianxu.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> isum[i]-sum[x]xsum[x]</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 200005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> q[M],sum[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> n,k,l=<span class="number">1</span>,r=<span class="number">1</span>,ans=<span class="number">-2e9</span>,al,ar;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;k);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;sum[i]);</span><br><span class="line">        sum[i]+=sum[i<span class="number">-1</span>];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=n+<span class="number">1</span>; i&lt;n+k; i++)sum[i]=sum[n]+sum[i-n];</span><br><span class="line">    q[r]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;n+k; i++) {</span><br><span class="line">        <span class="keyword">while</span>(r&gt;=l&amp;&amp;i-q[l]&gt;k)l++;</span><br><span class="line">        <span class="keyword">if</span>(r&gt;=l&amp;&amp;ans&lt;sum[i]-sum[q[l]]) {</span><br><span class="line">            ans=sum[i]-sum[q[l]];</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">while</span>(r&gt;=l&amp;&amp;sum[q[r]]&gt;=sum[i])r--;</span><br><span class="line">        q[++r]=i;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>monotone_queue</tag>
      </tags>
  </entry>
  <entry>
    <title> 1</title>
    <url>/blog/%E6%9C%80%E5%A4%A7%E5%85%A81%E7%9F%A9%E9%98%B5/</url>
    <content><![CDATA[<p>n*m01111</p>
<p>:</p>
<blockquote><p>m n<br>mn01</p>
</blockquote>


<p>:</p>
<blockquote><p>1</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>4 5<br>1 1 1 0 0<br>1 1 1 0 0<br>1 1 0 0 0<br>1 1 0 0 0</p>
</blockquote>

<p></p>
<blockquote><p>8</p>
</blockquote>

<p></p>
<blockquote><p>n,m&lt;=1000</p>
</blockquote>


<figure class="highlight c"><figcaption><span>zuidaquan1.cpp</span><a href="/downloads/code/zuidaquan1.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 2005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> max(x,y) (x)&gt;(y)?(x):(y)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> S(x) sum[C][x]</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> sum[M][M],stk[M],L[M],R[M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> &amp;x,<span class="keyword">int</span> y)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(x&lt;y) x=y;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> C,<span class="keyword">int</span> n)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> top=<span class="number">0</span>;</span><br><span class="line">    S(<span class="number">0</span>)=<span class="number">-2e9</span>,stk[++top]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) {</span><br><span class="line">        <span class="keyword">while</span>(S(stk[top])&gt;=S(i)) top--;</span><br><span class="line">        L[i]=stk[top];</span><br><span class="line">        stk[++top]=i;</span><br><span class="line">    }</span><br><span class="line">    top=<span class="number">0</span>;</span><br><span class="line">    S(n+<span class="number">1</span>)=<span class="number">-2e9</span>,stk[++top]=n+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=n; i&gt;=<span class="number">1</span>; i--) {</span><br><span class="line">        <span class="keyword">while</span>(S(stk[top])&gt;=S(i)) top--;</span><br><span class="line">        R[i]=stk[top];</span><br><span class="line">        stk[++top]=i;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> ans=<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) check(ans,(R[i]-L[i]<span class="number">-1</span>)*S(i));</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> n,m;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="built_in">memset</span>(sum,<span class="number">0</span>,<span class="keyword">sizeof</span>(sum));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=m; j++) {</span><br><span class="line">            <span class="keyword">int</span> x;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;x);</span><br><span class="line">            <span class="keyword">if</span>(x!=<span class="number">0</span>)<span class="comment">//</span></span><br><span class="line">                sum[i][j]=sum[i<span class="number">-1</span>][j]+x;</span><br><span class="line">        }</span><br><span class="line">    <span class="keyword">int</span> ans=<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++)</span><br><span class="line">        check(ans,solve(i,m));</span><br><span class="line"><span class="comment">//    cerr&lt;&lt;n&lt;&lt;" "&lt;&lt;m&lt;&lt;" "&lt;&lt;ans&lt;&lt;endl;</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">char</span> in[<span class="number">20</span>]={<span class="string">"zero0.in"</span>};</span><br><span class="line">    <span class="keyword">char</span> out[<span class="number">20</span>]={<span class="string">"zero0.out"</span>};</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> cas=<span class="number">1</span>;cas&lt;=<span class="number">10</span>;cas++){</span><br><span class="line">        freopen(in,<span class="string">"r"</span>,<span class="built_in">stdin</span>);in[<span class="number">4</span>]++;</span><br><span class="line">        freopen(out,<span class="string">"w"</span>,<span class="built_in">stdout</span>);out[<span class="number">4</span>]++;</span><br><span class="line">        solve();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>monotone_stack</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E8%B4%A7%E8%BD%A6%E8%BF%90%E8%BE%93/</url>
    <content><![CDATA[<p>An1nmq </p>
<p>:</p>
<blockquote><p>n,m Anm<br>m3x,y,zxyzxy<br>qq<br>qx yxyxy</p>
</blockquote>


<p>:</p>
<blockquote><p>q-1</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>4 3<br>1 2 4<br>2 3 3<br>3 1 1<br>3<br>1 3<br>1 4<br>1 3</p>
</blockquote>

<p></p>
<blockquote><p>3<br>-1<br>3</p>
</blockquote>

<p></p>
<blockquote><p>n,m,q&lt;=10^4, z&lt;=10^5</p>
</blockquote>


<figure class="highlight c"><figcaption><span>huocheyunshu.cpp</span><a href="/downloads/code/huocheyunshu.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;ctype.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> oo 2000000000</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> x,y,z;</span><br><span class="line">}s[M];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Query</span>{</span></span><br><span class="line">    <span class="keyword">int</span> x,id,next;</span><br><span class="line">}query[M*<span class="number">10</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Rd</span><span class="params">(<span class="keyword">int</span> &amp;res)</span></span>{</span><br><span class="line">    <span class="keyword">char</span> c;res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(c=getchar(),!<span class="built_in">isdigit</span>(c));</span><br><span class="line">    <span class="keyword">do</span>{</span><br><span class="line">        res=(res&lt;&lt;<span class="number">3</span>)+(res&lt;&lt;<span class="number">1</span>)+(c^<span class="number">48</span>);</span><br><span class="line">    }<span class="keyword">while</span>(c=getchar(),<span class="built_in">isdigit</span>(c));</span><br><span class="line">}</span><br><span class="line"><span class="keyword">int</span> fa[M],ans[M];</span><br><span class="line"><span class="keyword">int</span> qcnt[M],head[M],tot=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> v)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(fa[v]!=v)</span><br><span class="line">        fa[v]=<span class="built_in">get</span>(fa[v]);</span><br><span class="line">    <span class="keyword">return</span> fa[v];</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node A,node B)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> A.z&gt;B.z;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> &amp;x,<span class="keyword">int</span> y)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(x&lt;y)x=y;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> c)</span></span>{</span><br><span class="line">    qcnt[a]++;</span><br><span class="line">    query[tot].x=b,query[tot].id=c,query[tot].next=head[a],head[a]=tot++;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n,m,q,x,y,i,j;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)fa[i]=i;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;m;i++){</span><br><span class="line">        Rd(s[i].x);Rd(s[i].y);Rd(s[i].z);</span><br><span class="line">    }</span><br><span class="line">    sort(s,s+m,cmp);</span><br><span class="line">    Rd(q);</span><br><span class="line">    <span class="built_in">memset</span>(head,<span class="number">-1</span>,<span class="keyword">sizeof</span>(head));</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;q;i++){</span><br><span class="line">        Rd(x);Rd(y);</span><br><span class="line">        add(x,y,i);add(y,x,i); ans[i]=<span class="number">-1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;m;i++){</span><br><span class="line">        x=s[i].x,y=s[i].y;</span><br><span class="line">        <span class="keyword">int</span> fx=<span class="built_in">get</span>(x),fy=<span class="built_in">get</span>(y);</span><br><span class="line">        <span class="keyword">if</span>(fx==fy)<span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span>(qcnt[fx]&gt;qcnt[fy])swap(fx,fy);</span><br><span class="line">        fa[fx]=fy;</span><br><span class="line">        <span class="keyword">for</span>(j=head[fx];j!=<span class="number">-1</span>;j=query[j].next){</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">get</span>(query[j].x)==fy)check(ans[query[j].id],s[i].z);</span><br><span class="line">            <span class="keyword">else</span> add(fy,query[j].x,query[j].id);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;q;i++)<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>union_find</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E7%A7%BB%E5%8A%A8%E7%A7%AF%E6%9C%A8/</url>
    <content><![CDATA[<p>Niip</p>
<p>M x yxy</p>
<p>:</p>
<blockquote><p>q<br>qM, x, yC, x<br>N30000</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>6<br>M 1 6<br>C 1<br>M 2 4<br>M 2 6<br>C 3<br>C 4</p>
</blockquote>

<p></p>
<blockquote><p>1<br>0<br>2</p>
</blockquote>

<p></p>
<blockquote><p>1&lt;=n&lt;=30000q&lt;=10^5</p>
</blockquote>


<figure class="highlight c"><figcaption><span>yidongjimu.cpp</span><a href="/downloads/code/yidongjimu.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 30005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> m;</span><br><span class="line"><span class="keyword">int</span> p[M],dis[M];<span class="comment">//cnt</span></span><br><span class="line"><span class="keyword">int</span> sz[M];</span><br><span class="line"><span class="keyword">char</span> S[<span class="number">5</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(p[x]!=x) {</span><br><span class="line">        <span class="keyword">int</span> t=<span class="built_in">find</span>(p[x]);</span><br><span class="line">        dis[x]+=dis[p[x]];</span><br><span class="line">        p[x]=t;</span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="comment">//abba</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=M<span class="number">-5</span>; i++)p[i]=i,dis[i]=<span class="number">0</span>,sz[i]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,x,y; i&lt;=m; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>,S);</span><br><span class="line">        <span class="keyword">if</span>(S[<span class="number">0</span>]==<span class="string">'M'</span>) {</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</span><br><span class="line">            <span class="keyword">int</span> r1=<span class="built_in">find</span>(x),r2=<span class="built_in">find</span>(y);</span><br><span class="line">            <span class="keyword">if</span>(r1!=r2) {</span><br><span class="line">                p[r1]=r2;</span><br><span class="line">                dis[r1]+=sz[r2];</span><br><span class="line">                sz[r2]+=sz[r1];</span><br><span class="line">                sz[r1]=<span class="number">0</span>;</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;x);</span><br><span class="line">            <span class="keyword">int</span> r=<span class="built_in">find</span>(x);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dis[x]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>union_find</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E5%BC%80%E8%BD%A6/</url>
    <content><![CDATA[<p>nm<br>Jackxx<br>(a,b)ab</p>
<p>:</p>
<blockquote><p>3nmq<br>m3a,b,c.abc<br>qx</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>5 5 3<br>2 3 6334<br>1 5 15724<br>3 5 5705<br>4 3 12382<br>1 3 21726<br>6000<br>10000<br>13000</p>
</blockquote>

<p></p>
<blockquote><p>2<br>6<br>12</p>
</blockquote>

<p></p>
<blockquote><p>n,q&lt;=20000, c,m&lt;=10^5</p>
</blockquote>


<figure class="highlight c"><figcaption><span>kaiche.cpp</span><a href="/downloads/code/kaiche.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MN 20005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> {</span></span><br><span class="line">    <span class="keyword">int</span> a,b,x;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Edge &amp;m) <span class="keyword">const</span> {</span><br><span class="line">        <span class="keyword">return</span> x&lt;m.x;</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line">Edge e[<span class="number">100005</span>];</span><br><span class="line"><span class="keyword">int</span> ufs[MN],siz[MN];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> x==ufs[x]?x:ufs[x]=<span class="built_in">find</span>(ufs[x]);</span><br><span class="line">}</span><br><span class="line"><span class="function">ll <span class="title">Union</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span> </span>{</span><br><span class="line">    a=<span class="built_in">find</span>(a);</span><br><span class="line">    b=<span class="built_in">find</span>(b);</span><br><span class="line">    <span class="keyword">if</span>(a==b)<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    ll ans=(ll)siz[a]*siz[b];</span><br><span class="line">    siz[a]+=siz[b];</span><br><span class="line">    ufs[b]=a;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">}</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Ques</span> {</span></span><br><span class="line">    <span class="keyword">int</span> id,x;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Ques &amp;m) <span class="keyword">const</span> {</span><br><span class="line">        <span class="keyword">return</span> x&lt;m.x;</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line">Ques q[<span class="number">5005</span>];</span><br><span class="line">ll out[<span class="number">5005</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span>  n,m,k;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;n,&amp;m,&amp;k);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; i++) {</span><br><span class="line">        ufs[i]=i;</span><br><span class="line">        siz[i]=<span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=m; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;e[i].a,&amp;e[i].b,&amp;e[i].x);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=k; i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;q[i].x),q[i].id=i;</span><br><span class="line">    sort(e+<span class="number">1</span>,e+<span class="number">1</span>+m);</span><br><span class="line">    sort(q+<span class="number">1</span>,q+<span class="number">1</span>+k);</span><br><span class="line">    ll ans=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,j=<span class="number">1</span>; i&lt;=k; i++) {</span><br><span class="line">        <span class="keyword">while</span>(j&lt;=m&amp;&amp;e[j].x&lt;=q[i].x) {</span><br><span class="line">            ans+=Union(e[j].a,e[j].b);</span><br><span class="line">            j++;</span><br><span class="line">        }</span><br><span class="line">        out[q[i].id]=ans;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=k; i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,out[i]*<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>union_find</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E9%9B%86%E5%B8%82%E7%8F%AD%E8%BD%A6/</url>
    <content><![CDATA[<p>N1N<br>KiM_iS_iT_iC </p>
<p>:</p>
<blockquote><p>K N C<br>K+1i+1iS_i,E_iM_i</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>8 15 3<br>1 5 2<br>13 14 1<br>5 8 3<br>8 14 2<br>14 15 1<br>9 12 1<br>12 15 2<br>4 6 1</p>
</blockquote>

<p></p>
<blockquote><p>10</p>
</blockquote>

<p></p>
<blockquote><p>155881491213141415<br>2&lt;=N&lt;=10000, 1&lt;=K&lt;=50000, 1&lt;=C&lt;=100</p>
</blockquote>


<figure class="highlight c"><figcaption><span>jishibanche.cpp</span><a href="/downloads/code/jishibanche.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment">   </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 10005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 50005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> s,e,m;</span><br><span class="line">} A[N];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node w1,node w2)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> w1.e&lt;w2.e;</span><br><span class="line">}</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> L,R,mx,add;</span><br><span class="line">} tree[M&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">up</span><span class="params">(<span class="keyword">int</span> p)</span> </span>{</span><br><span class="line">    tree[p].mx=<span class="built_in">max</span>(tree[p&lt;&lt;<span class="number">1</span>].mx,tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].mx);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">down</span><span class="params">(<span class="keyword">int</span> p)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(!tree[p].add)<span class="keyword">return</span>;</span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>].add+=tree[p].add;</span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>].mx+=tree[p].add;</span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].add+=tree[p].add;</span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].mx+=tree[p].add;</span><br><span class="line">    tree[p].add=<span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> p)</span> </span>{</span><br><span class="line">    tree[p].L=L,tree[p].R=R,tree[p].mx=<span class="number">0</span>,tree[p].add=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(L==R)<span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(L,mid,p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    build(mid+<span class="number">1</span>,R,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> p,<span class="keyword">int</span> a)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(tree[p].L==L&amp;&amp;tree[p].R==R) {</span><br><span class="line">        tree[p].mx+=a;</span><br><span class="line">        tree[p].add+=a;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    down(p);</span><br><span class="line">    <span class="keyword">int</span> mid=(tree[p].L+tree[p].R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(R&lt;=mid)update(L,R,p&lt;&lt;<span class="number">1</span>,a);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(L&gt;mid)update(L,R,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,a);</span><br><span class="line">    <span class="keyword">else</span> update(L,mid,p&lt;&lt;<span class="number">1</span>,a),update(mid+<span class="number">1</span>,R,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>,a);</span><br><span class="line">    up(p);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> p)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(tree[p].L==L&amp;&amp;tree[p].R==R)<span class="keyword">return</span> tree[p].mx;</span><br><span class="line">    down(p);</span><br><span class="line">    <span class="keyword">int</span> mid=(tree[p].L+tree[p].R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(R&lt;=mid)<span class="keyword">return</span> query(L,R,p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span>(L&gt;mid)<span class="keyword">return</span> query(L,R,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">max</span>(query(L,mid,p&lt;&lt;<span class="number">1</span>),query(mid+<span class="number">1</span>,R,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>));</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> k,n,c,ans=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;k,&amp;n,&amp;c);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;A[i].s,&amp;A[i].e,&amp;A[i].m);</span><br><span class="line">    sort(A+<span class="number">1</span>,A+<span class="number">1</span>+k,cmp);</span><br><span class="line">    build(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=k;i++) {</span><br><span class="line">        <span class="keyword">int</span> mx=query(A[i].s,A[i].e<span class="number">-1</span>,<span class="number">1</span>);</span><br><span class="line">        mx=<span class="built_in">max</span>(c-mx,<span class="number">0</span>);</span><br><span class="line">        mx=<span class="built_in">min</span>(mx,A[i].m);</span><br><span class="line">        update(A[i].s,A[i].e<span class="number">-1</span>,<span class="number">1</span>,mx);</span><br><span class="line">        ans+=mx;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>seg_tree</tag>
      </tags>
  </entry>
  <entry>
    <title>K</title>
    <url>/blog/%E5%8F%AF%E4%BF%AE%E6%94%B9%E5%8C%BA%E9%97%B4%E7%AC%ACK%E5%80%BC/</url>
    <content><![CDATA[<p>nAm[L,R]K</p>
<p>:</p>
<blockquote><p>nm<br>nAi<br>m<br>1 L R K[L,R]K<br>2 x yA[x]y</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>5 3<br>10 5 3 4 8<br>1 1 2 1<br>2 4 7<br>1 1 4 3</p>
</blockquote>

<p></p>
<blockquote><p>5<br>7</p>
</blockquote>

<p></p>
<blockquote><p>n,m&lt;=30000</p>
</blockquote>


<figure class="highlight c"><figcaption><span>kexiukaik.cpp</span><a href="/downloads/code/kexiukaik.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 305</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> A[M*M],sz[M],K;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> id,num;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">(<span class="keyword">int</span> _id,<span class="keyword">int</span> _num)</span> </span>{</span><br><span class="line">        id=_id,num=_num;</span><br><span class="line">    }</span><br><span class="line">} C[M][M];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node a,node b)</span> </span>{</span><br><span class="line">    <span class="keyword">return</span> a.num&lt;b.num;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Find</span><span class="params">(<span class="keyword">int</span> id,<span class="keyword">int</span> R,<span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> L=<span class="number">0</span>,res=<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">while</span>(L&lt;=R) {</span><br><span class="line">        <span class="keyword">int</span> mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(C[id][mid].num&lt;=x) {</span><br><span class="line">            res=mid;</span><br><span class="line">            L=mid+<span class="number">1</span>;</span><br><span class="line">        } <span class="keyword">else</span> R=mid<span class="number">-1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find_less</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span> </span>{<span class="comment">//</span></span><br><span class="line">    <span class="keyword">int</span> id_a=a/K,id_b=b/K;</span><br><span class="line">    <span class="keyword">int</span> res=<span class="number">0</span>,i;</span><br><span class="line">    <span class="keyword">if</span>(id_a==id_b) {</span><br><span class="line">        <span class="keyword">for</span>(i=a; i&lt;=b; i++)</span><br><span class="line">            res+=A[i]&lt;=x;</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">for</span>(i=a; i&lt;id_a*K+sz[id_a]; i++)</span><br><span class="line">            res+=A[i]&lt;=x;</span><br><span class="line">        <span class="keyword">for</span>(i=id_a+<span class="number">1</span>; i&lt;id_b; i++)</span><br><span class="line">            res+=Find(i,sz[i]<span class="number">-1</span>,x)+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(i=id_b*K; i&lt;=b; i++)</span><br><span class="line">            res+=A[i]&lt;=x;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> k)</span> </span>{<span class="comment">//</span></span><br><span class="line">    <span class="keyword">int</span> L=<span class="number">0</span>,R=<span class="number">1000000000</span>;</span><br><span class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(L&lt;=R) {</span><br><span class="line">        <span class="keyword">int</span> mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span>(find_less(mid,a,b)&gt;=k) {</span><br><span class="line">            res=mid;</span><br><span class="line">            R=mid<span class="number">-1</span>;</span><br><span class="line">        } <span class="keyword">else</span> L=mid+<span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> x)</span> </span>{<span class="comment">//</span></span><br><span class="line">    <span class="keyword">int</span> i,id_a=a/K;</span><br><span class="line">    A[a]=x;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;sz[id_a]; i++)<span class="comment">//</span></span><br><span class="line">        <span class="keyword">if</span>(C[id_a][i].id==a) {</span><br><span class="line">            C[id_a][i].num=x;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">    sort(C[id_a],C[id_a]+sz[id_a],cmp);<span class="comment">//</span></span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> cas,n,m,i,j,k,a,b;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;cas);</span><br><span class="line">    <span class="keyword">while</span>(cas--) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;m);</span><br><span class="line">        K=<span class="keyword">int</span>(<span class="built_in">sqrt</span>(n));</span><br><span class="line">        <span class="built_in">memset</span>(sz,<span class="number">0</span>,<span class="keyword">sizeof</span>(sz));</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;n; i++) {</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i]);</span><br><span class="line">            C[i/K][i%K].<span class="built_in">set</span>(i,A[i]);</span><br><span class="line">            sz[i/K]++;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;=(n<span class="number">-1</span>)/K; i++) {</span><br><span class="line">            sort(C[i],C[i]+sz[i],cmp);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">char</span> op[<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">while</span>(m--&amp;&amp;<span class="built_in">scanf</span>(<span class="string">"%s"</span>,op)) {</span><br><span class="line">            <span class="keyword">if</span>(op[<span class="number">0</span>]==<span class="string">'Q'</span>) {</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;a,&amp;b,&amp;k);</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,query(--a,--b,k));</span><br><span class="line">            } <span class="keyword">else</span> {</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;a,&amp;b);</span><br><span class="line">                update(--a,b);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>block</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E5%8A%A8%E6%80%81%E5%8C%BA%E9%97%B4%E8%BF%9E%E7%BB%AD%E5%92%8C/</url>
    <content><![CDATA[<p>nAm</p>
<p>10 x aA[x]a</p>
<p>21 x y[x,y] max{A[i] +  + A[j]} (x&lt;=i&lt;=j&lt;=y)</p>
<p>:</p>
<blockquote><p>n<br>n<br>m<br>m</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>4<br>1 2 3 4<br>4<br>1 1 3<br>0 3 -3<br>1 2 4<br>1 3 3</p>
</blockquote>

<p></p>
<blockquote><p>6<br>4<br>-3</p>
</blockquote>

<p></p>
<blockquote><p>100%1&lt;=n,m&lt;=10^5y[-20000,20000]</p>
</blockquote>


<figure class="highlight c"><figcaption><span>dongtailianxuhe.cpp</span><a href="/downloads/code/dongtailianxuhe.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> 1</span></span><br><span class="line"><span class="comment"> 2</span></span><br><span class="line"><span class="comment"> 3  </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M=<span class="number">1e5</span>+<span class="number">5</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> mx;<span class="comment">//</span></span><br><span class="line">    <span class="keyword">int</span> sum;<span class="comment">//</span></span><br><span class="line">    <span class="keyword">int</span> Lmx;<span class="comment">//</span></span><br><span class="line">    <span class="keyword">int</span> Rmx;<span class="comment">//</span></span><br><span class="line">} tree[M&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> A[M],n,m,a,b,f;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">Max</span><span class="params">(<span class="keyword">int</span> &amp;a,<span class="keyword">int</span> b)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(a&lt;b)a=b;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">up</span><span class="params">(node &amp;C,node A,node B)</span> </span>{ <span class="comment">//[A][B][C]</span></span><br><span class="line">    C.sum=A.sum+B.sum;</span><br><span class="line">    C.mx=<span class="built_in">max</span>(A.mx,B.mx);</span><br><span class="line">    Max(C.mx,A.Rmx+B.Lmx);</span><br><span class="line">    C.Lmx=<span class="built_in">max</span>(A.Lmx,A.sum+B.Lmx);</span><br><span class="line">    C.Rmx=<span class="built_in">max</span>(B.Rmx,B.sum+A.Rmx);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> p)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(l==r) {</span><br><span class="line">        tree[p].mx=tree[p].Lmx=tree[p].Rmx=tree[p].sum=A[l];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid=l+r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(l,mid,p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    build(mid+<span class="number">1</span>,r,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    up(tree[p],tree[p&lt;&lt;<span class="number">1</span>],tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> a,<span class="keyword">int</span> x,<span class="keyword">int</span> p)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(L==R) {</span><br><span class="line">        tree[p].mx=tree[p].Lmx=tree[p].Rmx=tree[p].sum=x;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid=L+R&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(a&lt;=mid)update(L,mid,a,x,p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> update(mid+<span class="number">1</span>,R,a,x,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    up(tree[p],tree[p&lt;&lt;<span class="number">1</span>],tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">}</span><br><span class="line"><span class="function">node <span class="title">query</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> l,<span class="keyword">int</span> r,<span class="keyword">int</span> p)</span> </span>{</span><br><span class="line">    <span class="keyword">if</span>(L==l&amp;&amp;R==r)<span class="keyword">return</span> tree[p];</span><br><span class="line">    <span class="keyword">int</span> mid=L+R&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(r&lt;=mid)<span class="keyword">return</span> query(L,mid,l,r,p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(l&gt;mid)<span class="keyword">return</span> query(mid+<span class="number">1</span>,R,l,r,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> {</span><br><span class="line">        node A=query(L,mid,l,mid,p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">        node B=query(mid+<span class="number">1</span>,R,mid+<span class="number">1</span>,r,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">        node C;</span><br><span class="line">        up(C,A,B);</span><br><span class="line">        <span class="keyword">return</span> C;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=n; ++i)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i]);</span><br><span class="line">    build(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;m;</span><br><span class="line">    <span class="keyword">while</span>(m--) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;f,&amp;a,&amp;b);</span><br><span class="line">        <span class="keyword">if</span>(f) {</span><br><span class="line">            node tmp=query(<span class="number">1</span>,n,a,b,<span class="number">1</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,tmp.mx);</span><br><span class="line">        } <span class="keyword">else</span> update(<span class="number">1</span>,n,a,b,<span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>seg_tree</tag>
      </tags>
  </entry>
  <entry>
    <title>k</title>
    <url>/blog/%E5%8C%BA%E9%97%B4%E7%AC%ACk%E5%80%BC/</url>
    <content><![CDATA[<p>nAm[L,R]K</p>
<p>:</p>
<blockquote><p>nm<br>nAi<br>m3L,R,K</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>5 3<br>10 5 3 4 8<br>1 2 1<br>2 4 3<br>1 5 4</p>
</blockquote>

<p></p>
<blockquote><p>5<br>5<br>8</p>
</blockquote>

<p></p>
<blockquote><p>n,m&lt;=30000</p>
</blockquote>


<figure class="highlight c"><figcaption><span>qujiank_fenkuai.cpp</span><a href="/downloads/code/qujiank_fenkuai.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 30005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> A[M],B[M],S,num[M];</span><br><span class="line"><span class="keyword">int</span> sum[<span class="number">180</span>][M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> x)</span></span>{<span class="comment">//[L,R]&lt;=x</span></span><br><span class="line">    <span class="keyword">int</span> kl=L/S,kr=R/S,cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(kl==kr){</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=L;i&lt;=R;i++)</span><br><span class="line">            cnt+=A[i]&lt;=num[x];</span><br><span class="line">    }<span class="keyword">else</span>{</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=L;i&lt;(kl+<span class="number">1</span>)*S;i++)cnt+=A[i]&lt;=num[x];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=kl+<span class="number">1</span>;i&lt;kr;i++)cnt+=sum[i][x];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=kr*S;i&lt;=R;i++)cnt+=A[i]&lt;=num[x];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line"></span><br><span class="line">    freopen(<span class="string">"kth.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</span><br><span class="line">    freopen(<span class="string">"my.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> n,m;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i]);</span><br><span class="line">        num[i<span class="number">-1</span>]=B[i]=A[i];</span><br><span class="line">    }</span><br><span class="line">    S=<span class="built_in">sqrt</span>(n);</span><br><span class="line">    sort(num,num+n);</span><br><span class="line">    <span class="keyword">int</span> v=unique(num,num+n)-num;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">int</span> k=lower_bound(num,num+v,A[i])-num;</span><br><span class="line">        sum[i/S][k]++;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n/S;i++)<span class="comment">//</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;v;j++)sum[i][j]+=sum[i][j<span class="number">-1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="keyword">int</span> a,b,c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">        <span class="keyword">int</span> L=<span class="number">0</span>,R=v<span class="number">-1</span>,res;</span><br><span class="line">        <span class="keyword">while</span>(L&lt;=R){</span><br><span class="line">            <span class="keyword">int</span> mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> tmp=<span class="built_in">get</span>(a,b,mid);</span><br><span class="line">            <span class="keyword">if</span>(tmp&gt;=c){</span><br><span class="line">                res=mid;R=mid<span class="number">-1</span>;</span><br><span class="line">            }<span class="keyword">else</span> L=mid+<span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,num[res]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>qujiank_fenkuai1.cpp</span><a href="/downloads/code/qujiank_fenkuai1.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 30005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> A[M],B[M],S,num[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> x)</span></span>{<span class="comment">//[L,R]&lt;=x</span></span><br><span class="line">    <span class="keyword">int</span> kl=L/S,kr=R/S,cnt=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(kl==kr){</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=L;i&lt;=R;i++)</span><br><span class="line">            cnt+=A[i]&lt;=x;</span><br><span class="line">    }<span class="keyword">else</span>{</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=L;i&lt;(kl+<span class="number">1</span>)*S;i++)cnt+=A[i]&lt;=x;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=kl+<span class="number">1</span>;i&lt;kr;i++)cnt+=upper_bound(B+i*S,B+i*S+S,x)-(B+i*S);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=kr*S;i&lt;=R;i++)cnt+=A[i]&lt;=x;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    freopen(<span class="string">"kth.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</span><br><span class="line">    freopen(<span class="string">"my.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</span><br><span class="line">    <span class="keyword">int</span> n,m;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i]);</span><br><span class="line">        num[i]=B[i]=A[i];</span><br><span class="line">    }</span><br><span class="line">    S=<span class="built_in">sqrt</span>(n*<span class="built_in">log</span>(n)/<span class="built_in">log</span>(<span class="number">2</span>));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=S;i+S<span class="number">-1</span>&lt;=n;i+=S)sort(B+i,B+i+S); <span class="comment">//</span></span><br><span class="line">    sort(num+<span class="number">1</span>,num+n+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="keyword">int</span> a,b,c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">        <span class="keyword">int</span> L=<span class="number">1</span>,R=n,res;</span><br><span class="line">        <span class="keyword">while</span>(L&lt;=R){</span><br><span class="line">            <span class="keyword">int</span> mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> tmp=<span class="built_in">get</span>(a,b,num[mid]);</span><br><span class="line">            <span class="keyword">if</span>(tmp&gt;=c){</span><br><span class="line">                res=num[mid];</span><br><span class="line">                R=mid<span class="number">-1</span>;</span><br><span class="line">            }<span class="keyword">else</span> L=mid+<span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,res);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>qujiank_segtree.cpp</span><a href="/downloads/code/qujiank_segtree.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 30005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> L,R;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;num;</span><br><span class="line">}tree[M&lt;&lt;<span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> A[M],s[M];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    tree[p].L=L,tree[p].R=R;</span><br><span class="line">    tree[p].num.<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">if</span>(L==R){</span><br><span class="line">        tree[p].num.push_back(A[L]);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(L,mid,p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    build(mid+<span class="number">1</span>,R,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    tree[p].num.resize(R-L+<span class="number">1</span>);<span class="comment">//****</span></span><br><span class="line">    merge(tree[p&lt;&lt;<span class="number">1</span>].num.<span class="built_in">begin</span>(),tree[p&lt;&lt;<span class="number">1</span>].num.<span class="built_in">end</span>(),</span><br><span class="line">          tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].num.<span class="built_in">begin</span>(),tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].num.<span class="built_in">end</span>(),</span><br><span class="line">          tree[p].num.<span class="built_in">begin</span>());</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L,<span class="keyword">int</span> R,<span class="keyword">int</span> x,<span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(L==tree[p].L&amp;&amp;R==tree[p].R){</span><br><span class="line">        <span class="keyword">return</span> upper_bound(tree[p].num.<span class="built_in">begin</span>(),tree[p].num.<span class="built_in">end</span>(),x)-tree[p].num.<span class="built_in">begin</span>();</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid=(tree[p].L+tree[p].R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(R&lt;=mid)<span class="keyword">return</span> query(L,R,x,p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(L&gt;mid)<span class="keyword">return</span> query(L,R,x,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span>{</span><br><span class="line">        <span class="keyword">return</span> query(L,mid,x,p&lt;&lt;<span class="number">1</span>)+query(mid+<span class="number">1</span>,R,x,p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    freopen(<span class="string">"kth.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</span><br><span class="line">    freopen(<span class="string">"my.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</span><br><span class="line">    <span class="keyword">int</span> n,m,a,b,c;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i]);</span><br><span class="line">        s[i<span class="number">-1</span>]=A[i];</span><br><span class="line">    }</span><br><span class="line">    sort(s,s+n);</span><br><span class="line">    build(<span class="number">1</span>,n,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">        <span class="keyword">int</span> L=<span class="number">0</span>,R=n<span class="number">-1</span>,res;</span><br><span class="line">        <span class="keyword">while</span>(L&lt;=R){</span><br><span class="line">            <span class="keyword">int</span> mid=(L+R)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> tmp=query(a,b,s[mid],<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span>(tmp&gt;=c){</span><br><span class="line">                R=mid<span class="number">-1</span>;res=s[mid];</span><br><span class="line">            }<span class="keyword">else</span> L=mid+<span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,res);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>qujiank_bitree.cpp</span><a href="/downloads/code/qujiank_bitree.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 30005</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> lowbit(x) (x&amp;(-x))</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> A[M],B[M],S,num[M],C[M],V,ans[M],n;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> a,b,c,l,r,mid,res,id;</span><br><span class="line">}query[M];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Num</span>{</span></span><br><span class="line">    <span class="keyword">int</span> id,x;</span><br><span class="line">}G[M];</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node a,node b)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> a.mid&lt;b.mid;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp1</span><span class="params">(Num a,Num b)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> a.x&lt;b.x;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Add</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(x==<span class="number">0</span>)<span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">while</span>(x&lt;=n){</span><br><span class="line">        C[x]++;x+=lowbit(x);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Get</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> res=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x&gt;<span class="number">0</span>){</span><br><span class="line">        res+=C[x];</span><br><span class="line">        x-=lowbit(x);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    freopen(<span class="string">"kth.in"</span>,<span class="string">"r"</span>,<span class="built_in">stdin</span>);</span><br><span class="line">    freopen(<span class="string">"my.out"</span>,<span class="string">"w"</span>,<span class="built_in">stdout</span>);</span><br><span class="line">    <span class="keyword">int</span> m;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;A[i]);</span><br><span class="line">        num[i]=A[i];</span><br><span class="line">    }</span><br><span class="line">    sort(num,num+n);</span><br><span class="line">    V=unique(num,num+n)-num;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++){</span><br><span class="line">        A[i]=lower_bound(num,num+V,A[i])-num;</span><br><span class="line">        G[i].id=i+<span class="number">1</span>,G[i].x=A[i];</span><br><span class="line">    }</span><br><span class="line">    sort(G,G+n,cmp1);</span><br><span class="line">    <span class="keyword">int</span> a,b,c;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d %d"</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">        query[i]=(node){a,b,c,<span class="number">0</span>,V<span class="number">-1</span>,(V<span class="number">-1</span>)&gt;&gt;<span class="number">1</span>,<span class="number">-1</span>,i};</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">15</span>;i++){</span><br><span class="line">        sort(query,query+m,cmp);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> k=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)C[j]=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m;j++){</span><br><span class="line">            <span class="keyword">if</span>(query[j].l&gt;query[j].r)<span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">while</span>(k&lt;n&amp;&amp;G[k].x&lt;=query[j].mid){</span><br><span class="line">                Add(G[k++].id);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">int</span> tmp=Get(query[j].b)-Get(query[j].a<span class="number">-1</span>);</span><br><span class="line">            <span class="keyword">if</span>(tmp&gt;=query[j].c){</span><br><span class="line">                query[j].res=query[j].mid;</span><br><span class="line">                query[j].r=query[j].mid<span class="number">-1</span>;</span><br><span class="line">            }<span class="keyword">else</span>{</span><br><span class="line">                query[j].l=query[j].mid+<span class="number">1</span>;</span><br><span class="line">            }</span><br><span class="line">            query[j].mid=query[j].l+query[j].r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++)ans[query[i].id]=num[query[i].res];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++)<span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ans[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>seg_tree</tag>
        <tag>block</tag>
        <tag>bit_tree</tag>
      </tags>
  </entry>
  <entry>
    <title>POJ-1804</title>
    <url>/blog/POJ-1804/</url>
    <content><![CDATA[<p></p>
<p>:</p>
<blockquote><p>The first line contains the number of scenarios.<br>For every scenario, you are given a line containing first the length N (1 &lt;= N &lt;= 1000) of the sequence,followed by the N elements of the sequence (each element is an integer in [-1000000, 1000000]). All numbers in this line are separated by single blanks.</p>
</blockquote>


<p>:</p>
<blockquote><p>Start the output for every scenario with a line containing Scenario #i:, where i is the number of the scenario starting at 1. Then print a single line containing the minimal number of swaps of adjacent numbers that are necessary to sort the given sequence. Terminate the output for the scenario with a blank line.</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>4<br>4 2 8 0 3<br>10 0 1 2 3 4 5 6 7 8 9<br>6 -42 23 6 28 -100 65537<br>5 0 0 0 0 0</p>
</blockquote>

<p></p>
<blockquote><p>Scenario #1:<br>3</p>
<p>Scenario #2:<br>0</p>
<p>Scenario #3:<br>5</p>
<p>Scenario #4:<br>0</p>
</blockquote>


<figure class="highlight c"><figcaption><span>POJ_1804_merge_sort.cpp</span><a href="/downloads/code/POJ_1804_merge_sort.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1010</span>;</span><br><span class="line"><span class="keyword">int</span> a[N], tmp[N];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">merge_sort</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(L&gt;=R) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> mid = L+R&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> res = merge_sort(L, mid) + merge_sort(mid+<span class="number">1</span>, R);</span><br><span class="line">    <span class="keyword">int</span> l = L, r=mid+<span class="number">1</span>, k = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(l&lt;=mid &amp;&amp; r&lt;=R){</span><br><span class="line">        <span class="keyword">if</span>(a[l]&lt;=a[r]) tmp[k++] = a[l++];</span><br><span class="line">        <span class="keyword">else</span> {</span><br><span class="line">            tmp[k++] = a[r++];</span><br><span class="line">            res += mid-l+<span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">while</span>(l&lt;=mid) tmp[k++] = a[l++];</span><br><span class="line">    <span class="keyword">while</span>(r&lt;=R) tmp[k++] = a[r++];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=L, j=<span class="number">0</span>; i&lt;=R; i++, j++) a[i] = tmp[j];</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=T;i++){</span><br><span class="line">        <span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="keyword">sizeof</span> a);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">        <span class="keyword">int</span> res = merge_sort(<span class="number">0</span>, n<span class="number">-1</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Scenario #%d:\n%d\n\n"</span>, i, res);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>POJ_1804_seg_tree.cpp</span><a href="/downloads/code/POJ_1804_seg_tree.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1010</span>;</span><br><span class="line"><span class="keyword">int</span> a[N], bin[N];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> sum[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    sum[x] = sum[x*<span class="number">2</span>] + sum[x*<span class="number">2</span>+<span class="number">1</span>];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> l,<span class="keyword">int</span> r, <span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(l==r){</span><br><span class="line">        sum[x] = <span class="number">0</span>; <span class="comment">//mistake</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = l+r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(l, mid, x&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    build(mid+<span class="number">1</span>, r, x&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    update(x);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> A, <span class="keyword">int</span> B, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(A&lt;=l &amp;&amp; B&gt;=r) <span class="keyword">return</span> sum[x];</span><br><span class="line">    <span class="keyword">int</span> mid = l+r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(A&lt;=mid) ans += query(A, B, l, mid, x&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span>(B&gt;mid) ans += query(A, B, mid+<span class="number">1</span>, r, x&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">change</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> v, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(l==r) {</span><br><span class="line">        sum[x]+= v;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = l+r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(pos &lt;=mid) change(pos, v, l, mid, x&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> change(pos, v, mid+<span class="number">1</span>, r, x&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    update(x);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;T);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=T;i++){</span><br><span class="line">        <span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="keyword">sizeof</span> a);</span><br><span class="line">        <span class="built_in">memset</span>(bin, <span class="number">0</span>, <span class="keyword">sizeof</span> bin);</span><br><span class="line">        <span class="built_in">memset</span>(sum, <span class="number">0</span>, <span class="keyword">sizeof</span> sum);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">            bin[++cnt] = a[i];</span><br><span class="line">        }</span><br><span class="line">        sort(bin+<span class="number">1</span>, bin+<span class="number">1</span>+cnt);</span><br><span class="line">        cnt = unique(bin+<span class="number">1</span>, bin+<span class="number">1</span>+cnt) - bin<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">            a[i] = lower_bound(bin + <span class="number">1</span>, bin + <span class="number">1</span> + cnt, a[i]) - bin;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        build(<span class="number">1</span>, cnt, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">            res += query(a[i]+<span class="number">1</span>, cnt, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">            change(a[i], <span class="number">1</span>, <span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Scenario #%d:\n%d\n\n"</span>, i, res);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>wanmen</category>
      </categories>
      <tags>
        <tag>seg_tree</tag>
        <tag>merge_sort</tag>
      </tags>
  </entry>
  <entry>
    <title>POJ_3067</title>
    <url>/blog/POJ-3067/</url>
    <content><![CDATA[<p>Japan plans to welcome the ACM ICPC World Finals and a lot of roads must be built for the venue. Japan is tall island with N cities on the East coast and M cities on the West coast (M &lt;= 1000, N &lt;= 1000). K superhighways will be build. Cities on each coast are numbered 1, 2,  from North to South. Each superhighway is straight line and connects city on the East coast with city of the West coast. The funding for the construction is guaranteed by ACM. A major portion of the sum is determined by the number of crossings between superhighways. At most two superhighways cross at one location. Write a program that calculates the number of the crossings between superhighways.</p>
<p>:</p>
<blockquote><p>The input file starts with T - the number of test cases. Each test case starts with three numbers  N, M, K. Each of the next K lines contains two numbers  the numbers of cities connected by the superhighway. The first one is the number of the city on the East coast and second one is the number of the city of the West coast.</p>
</blockquote>


<p>:</p>
<blockquote><p>For each test case write one line on the standard output:<br>Test case (case number): (number of crossings)</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>1<br>3 4 4<br>1 4<br>2 3<br>3 2<br>3 1</p>
</blockquote>

<p></p>
<blockquote><p>Test case 1: 5</p>
</blockquote>


<figure class="highlight c"><figcaption><span>POJ_3067.cpp</span><a href="/downloads/code/POJ_3067.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1010</span>;</span><br><span class="line"><span class="keyword">int</span> a, b, n;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line">ll c[N];</span><br><span class="line"><span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; &gt; p;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; &amp; p1, <span class="keyword">const</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; &amp;p2)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(p1.second != p2.second) <span class="keyword">return</span> p1.second&gt;p2.second;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> p1.first&lt; p2.first;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> x &amp; -x;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=x;i&lt;=N;i+=lowbit(i))</span><br><span class="line">        c[i] += <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=x;i&gt;<span class="number">0</span>;i-=lowbit(i))</span><br><span class="line">        ans += c[i];</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> t=<span class="number">1</span>;t&lt;=T;t++){</span><br><span class="line">        <span class="built_in">memset</span>(c, <span class="number">0</span>, <span class="keyword">sizeof</span> c);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;n);</span><br><span class="line">        <span class="keyword">int</span> x, y;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x, &amp;y);</span><br><span class="line">            p.push_back({x, y});</span><br><span class="line">        }</span><br><span class="line">        sort(p.<span class="built_in">begin</span>(), p.<span class="built_in">end</span>(), cmp);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;p.<span class="built_in">size</span>();i++) <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span> ,p[i].first, p[i].second);</span><br><span class="line">        ll ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;p.<span class="built_in">size</span>();i++){</span><br><span class="line">            x = p[i].first, y = p[i].second;</span><br><span class="line">            ans += query(x<span class="number">-1</span>);</span><br><span class="line">            add(x);</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Test case %d: %lld\n"</span>, t,ans);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>wanmen</category>
      </categories>
      <tags>
        <tag>bit_tree</tag>
      </tags>
  </entry>
  <entry>
    <title>HDU_2852</title>
    <url>/blog/HDU-2852/</url>
    <content><![CDATA[<p>For the k-th number, we all should be very familiar with it. Of course,to kiki it is also simple. Now Kiki meets a very similar problem, kiki wants to design a container, the container is to support the three operations.</p>
<p>Push: Push a given element e to container</p>
<p>Pop: Pop element of a given e from container</p>
<p>Query: Given two elements a and k, query the kth larger number which greater than a in container;</p>
<p>Although Kiki is very intelligent, she can not think of how to do it, can you help her to solve this problem?</p>
<p>:</p>
<blockquote><p>Input some groups of test data ,each test data the first number is an integer m (1 &lt;= m &lt;100000), means that the number of operation to do. The next m lines, each line will be an integer p at the beginning, p which has three values:<br>If p is 0, then there will be an integer e (0 &lt;e &lt;100000), means press element e into Container.</p>
<p>If p is 1, then there will be an integer e (0 &lt;e &lt;100000), indicated that delete the element e from the container</p>
<p>If p is 2, then there will be two integers a and k (0 &lt;a &lt;100000, 0 &lt;k &lt;10000),means the inquiries, the element is greater than a, and the k-th larger number.</p>
</blockquote>


<p>:</p>
<blockquote><p>For each deletion, if you want to delete the element which does not exist, the output No Elment!. For each query, output the suitable answers in line .if the number does not exist, the output Not Find!.</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>5<br>0 5<br>1 2<br>0 6<br>2 3 2<br>2 8 1<br>7<br>0 2<br>0 2<br>0 4<br>2 1 1<br>2 1 2<br>2 1 3<br>2 1 4</p>
</blockquote>

<p></p>
<blockquote><p>No Elment!<br>6<br>Not Find!<br>2<br>2<br>4<br>Not Find!</p>
</blockquote>


<figure class="highlight c"><figcaption><span>HDU_2852.cpp</span><a href="/downloads/code/HDU_2852.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> sum[N+<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> x &amp;-x;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> d)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=x;i&lt;=N;i+=lowbit(i))</span><br><span class="line">        sum[i] +=d;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=x;i&gt;<span class="number">0</span>;i-=lowbit(i)){</span><br><span class="line">        ans += sum[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> m, t, e, a, k;</span><br><span class="line">    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;m)){</span><br><span class="line">        <span class="built_in">memset</span>(sum, <span class="number">0</span>, <span class="keyword">sizeof</span> sum);</span><br><span class="line">        <span class="keyword">while</span>(m--){</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;t);</span><br><span class="line">            <span class="keyword">if</span>(t==<span class="number">0</span>){</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;e);</span><br><span class="line">                add(e, <span class="number">1</span>);</span><br><span class="line">            }<span class="keyword">else</span> <span class="keyword">if</span>(t==<span class="number">1</span>){</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;e);</span><br><span class="line">                <span class="keyword">if</span>(!(query(e) - query(e<span class="number">-1</span>))) <span class="built_in">printf</span>(<span class="string">"No Elment!\n"</span>);</span><br><span class="line">                <span class="keyword">else</span> add(e, <span class="number">-1</span>);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span>{</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;k);</span><br><span class="line">                <span class="keyword">int</span> v = query(a)+ k;</span><br><span class="line">                <span class="keyword">int</span> l = <span class="number">0</span>, r = N;</span><br><span class="line">                <span class="keyword">while</span>(l&lt;r){</span><br><span class="line">                    <span class="keyword">int</span> mid = l+r&gt;&gt;<span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">if</span>(query(mid)&gt;=v) r = mid;</span><br><span class="line">                    <span class="keyword">else</span> l = mid+<span class="number">1</span>;</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">if</span>(r==<span class="number">0</span> || r==N) <span class="built_in">printf</span>(<span class="string">"Not Find!\n"</span>);</span><br><span class="line">                <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, r);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>wanmen</category>
      </categories>
      <tags>
        <tag>bit_tree</tag>
      </tags>
  </entry>
  <entry>
    <title>poj_2352</title>
    <url>/blog/poj-2352/</url>
    <content><![CDATA[<p>Astronomers often examine star maps where stars are represented by points on a plane and each star has Cartesian coordinates. Let the level of a star be an amount of the stars that are not higher and not to the right of the given star. Astronomers want to know the distribution of the levels of the stars.</p>
<img src="/downloads/imgs/poj-2352.png" class="example" title="title exg" alt="alt exg">

<p>For example, look at the map shown on the figure above. Level of the star number 5 is equal to 3 (its formed by three stars with a numbers 1, 2 and 4). And the levels of the stars numbered by 2 and 4 are 1. At this map there are only one star of the level 0, two stars of the level 1, one star of the level 2, and one star of the level 3.</p>
<p>You are to write a program that will count the amounts of the stars of each level on a given map.</p>
<p>:</p>
<blockquote><p>The first line of the input file contains a number of stars N (1&lt;=N&lt;=15000). The following N lines describe coordinates of stars (two integers X and Y per line separated by a space, 0&lt;=X,Y&lt;=32000). There can be only one star at one point of the plane. Stars are listed in ascending order of Y coordinate. Stars with equal Y coordinates are listed in ascending order of X coordinate.</p>
</blockquote>


<p>:</p>
<blockquote><p>The output should contain N lines, one number per line. The first line contains amount of stars of the level 0, the second does amount of stars of the level 1 and so on, the last line contains amount of stars of the level N-1.</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>5<br>1 1<br>5 1<br>7 1<br>3 3<br>5 5</p>
</blockquote>

<p></p>
<blockquote><p>1<br>2<br>1<br>1<br>0</p>
</blockquote>



<figure class="highlight c"><figcaption><span>poj_2352.cpp</span><a href="/downloads/code/poj_2352.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">15010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; &gt; coords;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">const</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;&amp;p1, <span class="keyword">const</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;&amp;p2)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(p1.second!=p2.second){</span><br><span class="line">        <span class="keyword">return</span> p1.second&lt;p2.second;</span><br><span class="line">    }<span class="keyword">else</span> <span class="keyword">return</span> p1.first&lt;p2.first;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">32001</span>;</span><br><span class="line"><span class="keyword">int</span> c[M+<span class="number">2</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> x &amp; -x;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ans[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> d)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=x;i&lt;=M;i+=lowbit(i)){</span><br><span class="line">        c[i] += d;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=x;i&gt;<span class="number">0</span>;i-=lowbit(i)){</span><br><span class="line">        ans += c[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">int</span> x, y;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;x, &amp;y);</span><br><span class="line">        coords.push_back(make_pair(x, y));</span><br><span class="line">    }</span><br><span class="line">    sort(coords.<span class="built_in">begin</span>(), coords.<span class="built_in">end</span>(), cmp);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;coords.<span class="built_in">size</span>();i++){</span><br><span class="line">        add(coords[i].first, <span class="number">1</span>);</span><br><span class="line">        ans[query(coords[i].first)] ++;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>wanmen</category>
      </categories>
      <tags>
        <tag>bit_tree</tag>
      </tags>
  </entry>
  <entry>
    <title>POJ_3468</title>
    <url>/blog/POJ-3468/</url>
    <content><![CDATA[<p>You have N integers, A1, A2,  , AN. You need to deal with two kinds of operations. One type of operation is to add some given number to each number in a given interval. The other is to ask for the sum of numbers in a given interval.</p>
<p>Input</p>
<p>:</p>
<blockquote><p>The first line contains two numbers N and Q. 1  N,Q  100000.<br>The second line contains N numbers, the initial values of A1, A2,  , AN. -1000000000  Ai  1000000000.<br>Each of the next Q lines represents an operation.<br>C a b c means adding c to each of Aa, Aa+1,  , Ab. -10000  c  10000.<br>Q a b means querying the sum of Aa, Aa+1,  , Ab.</p>
</blockquote>


<p>:</p>
<blockquote><p>You need to answer all Q commands in order. One answer in a line.</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>10 5<br>1 2 3 4 5 6 7 8 9 10<br>Q 4 4<br>Q 1 10<br>Q 2 4<br>C 3 6 3<br>Q 2 4</p>
</blockquote>

<p></p>
<blockquote><p>4<br>55<br>9<br>15</p>
</blockquote>

<p></p>
<blockquote><p>The sums may exceed the range of 32-bit integers</p>
</blockquote>


<figure class="highlight c"><figcaption><span>poj_3468.cpp</span><a href="/downloads/code/poj_3468.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line">ll N,tree1[<span class="number">100001</span>],tree2[<span class="number">100001</span>];</span><br><span class="line">ll a[<span class="number">100001</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="keyword">return</span> (x&amp;(-x));</span><br><span class="line">}</span><br><span class="line"> <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(ll x ,ll val)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ll i;</span><br><span class="line">    <span class="keyword">for</span>( i = x ; i &lt;= N;i+=lowbit(i) )</span><br><span class="line">    {</span><br><span class="line">        tree1[i]+=val;</span><br><span class="line">        tree2[i]+=x*val;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function">ll <span class="title">query</span><span class="params">(ll x)</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ll i;</span><br><span class="line">    ll sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>( i = x ; i &gt; <span class="number">0</span> ;i-=lowbit(i))</span><br><span class="line">    {</span><br><span class="line">        sum+=(x+<span class="number">1</span>)*tree1[i]-tree2[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    ll  Q , i , A ,B , C;</span><br><span class="line">    <span class="built_in">string</span> s;</span><br><span class="line">    ios::sync_with_stdio(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; N &gt;&gt; Q;</span><br><span class="line">    a[<span class="number">0</span>]=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> ( i = <span class="number">1</span> ;i &lt;= N ; i++)</span><br><span class="line">    {</span><br><span class="line">         <span class="built_in">cin</span> &gt;&gt; a[i];</span><br><span class="line">         update(i ,a[i]-a[i<span class="number">-1</span>]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span> ( i = <span class="number">1</span> ; i &lt;= Q ; i ++)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">        <span class="keyword">if</span>(s[<span class="number">0</span>]==<span class="string">'Q'</span>)</span><br><span class="line">        {</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; A &gt;&gt; B ;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; query (B)- query(A<span class="number">-1</span>)&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        {</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; A &gt;&gt; B &gt;&gt; C;</span><br><span class="line">            update(A , C);</span><br><span class="line">            update(B+<span class="number">1</span> ,-C );</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>wanmen</category>
      </categories>
      <tags>
        <tag>bit_tree</tag>
      </tags>
  </entry>
  <entry>
    <title>POJ_2155_matrix</title>
    <url>/blog/POJ-2155-matrix/</url>
    <content><![CDATA[<p>Language:<br>Matrix<br>Time Limit: 3000MS        Memory Limit: 65536K<br>Total Submissions: 37057        Accepted: 13286<br>Description</p>
<p>Given an N*N matrix A, whose elements are either 0 or 1. A[i, j] means the number in the i-th row and j-th column. Initially we have A[i, j] = 0 (1 &lt;= i, j &lt;= N).</p>
<p>We can change the matrix in the following way. Given a rectangle whose upper-left corner is (x1, y1) and lower-right corner is (x2, y2), we change all the elements in the rectangle by using not operation (if it is a 0 then change it into 1 otherwise change it into 0). To maintain the information of the matrix, you are asked to write a program to receive and execute two kinds of instructions.</p>
<ol>
<li>C x1 y1 x2 y2 (1 &lt;= x1 &lt;= x2 &lt;= n, 1 &lt;= y1 &lt;= y2 &lt;= n) changes the matrix by using the rectangle whose upper-left corner is (x1, y1) and lower-right corner is (x2, y2).</li>
<li>Q x y (1 &lt;= x, y &lt;= n) querys A[x, y].</li>
</ol>
<p>:</p>
<blockquote><p>The first line of the input is an integer X (X &lt;= 10) representing the number of test cases. The following X blocks each represents a test case.</p>
<p>The first line of each block contains two numbers N and T (2 &lt;= N &lt;= 1000, 1 &lt;= T &lt;= 50000) representing the size of the matrix and the number of the instructions. The following T lines each represents an instruction having the format Q x y or C x1 y1 x2 y2, which has been described above.</p>
</blockquote>


<p>:</p>
<blockquote><p>For each querying output one line, which has an integer representing A[x, y].</p>
<p>There is a blank line between every two continuous test cases.</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>1<br>2 10<br>C 2 1 2 2<br>Q 2 2<br>C 2 1 2 1<br>Q 1 1<br>C 1 1 2 1<br>C 1 2 1 2<br>C 1 1 2 2<br>Q 1 1<br>C 1 1 2 1<br>Q 2 1</p>
</blockquote>

<p></p>
<blockquote><p>1<br>0<br>0<br>1</p>
</blockquote>


<figure class="highlight c"><figcaption><span>poj_2155.cpp</span><a href="/downloads/code/poj_2155.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1010</span>;</span><br><span class="line"><span class="keyword">int</span> sum[N][N];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">C</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> x &amp; -x;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x&gt;<span class="number">0</span>){</span><br><span class="line">        <span class="keyword">int</span> ty = y;</span><br><span class="line">        <span class="keyword">while</span>(ty&gt;<span class="number">0</span>){</span><br><span class="line">            ans += sum[x][ty];</span><br><span class="line">            ty -= C(ty);</span><br><span class="line">        }</span><br><span class="line">        x -= C(x);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> d)</span></span>{</span><br><span class="line">    <span class="keyword">while</span>(x&lt;=n){</span><br><span class="line">        <span class="keyword">int</span> ty = y;</span><br><span class="line">        <span class="keyword">while</span>(ty&lt;=n){</span><br><span class="line">            sum[x][ty] = (sum[x][ty] + d) % <span class="number">2</span>;</span><br><span class="line">            ty += C(ty);</span><br><span class="line">        }</span><br><span class="line">        x += C(x);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> X ;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;X);</span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    <span class="keyword">char</span> c[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">int</span> x1, y1, x2, y2;</span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;X;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;T);</span><br><span class="line">        <span class="built_in">memset</span>(sum, <span class="number">0</span>, <span class="keyword">sizeof</span> sum);</span><br><span class="line">        <span class="keyword">while</span>(T--){</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>,c);</span><br><span class="line">            <span class="keyword">if</span>(c[<span class="number">0</span>]==<span class="string">'C'</span>){</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d%d%d%d"</span>, &amp;x1, &amp;y1, &amp;x2, &amp;y2);</span><br><span class="line"><span class="comment">//                printf("%d %d %d %d\n", x1,y1, x2,y2);</span></span><br><span class="line">                add(x1, y1, <span class="number">1</span>);</span><br><span class="line">                add(x1, y2+<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">                add(x2+<span class="number">1</span>, y1, <span class="number">1</span>);</span><br><span class="line">                add(x2+<span class="number">1</span>, y2+<span class="number">1</span>, +<span class="number">1</span>);</span><br><span class="line">            }<span class="keyword">else</span> <span class="keyword">if</span>(c[<span class="number">0</span>]==<span class="string">'Q'</span>){</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;x, &amp;y);</span><br><span class="line"><span class="comment">//                printf("%d %d\n", x, y);</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(x, y) % <span class="number">2</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>wanmen</category>
      </categories>
      <tags>
        <tag>bit_tree</tag>
      </tags>
  </entry>
  <entry>
    <title>Planning for Autononous Cars that Leverage Effects on Human Actions</title>
    <url>/blog/Planning-for-Autononous-Cars/</url>
    <content><![CDATA[<p><b>Idea: </b></p>
<ol>
<li>Action from the autonomous car will affect human responses and these could be leveraged for planning.</li>
<li>Approximate human as optimal driver, with a reward function acquired through inverse reinforcement learning.</li>
</ol>
<p><b>Motivation:</b></p>
<ol>
<li>Current autonomous cars are defensive</li>
<li>Plan more efficient and communicative behaviors for autonomous cars.</li>
</ol>
<a id="more"></a>

<p><b>Assumptions</b></p>
<ol>
<li>Two car system.</li>
</ol>
<p><b>Method</b></p>
<ol>
<li><p>The robot will use MPC at every iteration by computing a finite sequence of actions to maximize its reward and then execute the first one. (Eqn 5).</p>
<img src="/downloads/imgs/auton1.png" class="example" title="title exg" alt="alt exg">
</li>
<li><p>Compute u^{*}_H by optimizing the following:</p>
<img src="/downloads/imgs/auton2.png" class="example" title="title exg" alt="alt exg">
</li>
<li><p>Learn r_h with inverse reinforcement learning (separate optimization process that maximizes probability of demonstrations).</p>
</li>
</ol>
<p><b>Implementations</b><br>Use theano to compute jacobian and hessian symbolically and use L-BFGS to optimize Eqn 5. (code: <a href="https://github.com/dsadigh/driving-interactions/blob/master/utils.py" target="_blank" rel="noopener">https://github.com/dsadigh/driving-interactions/blob/master/utils.py</a>)</p>
]]></content>
      <categories>
        <category>Papers</category>
      </categories>
      <tags>
        <tag>HRI</tag>
      </tags>
  </entry>
  <entry>
    <title>Human-Robot-Mutual</title>
    <url>/blog/Human-Robot-Mutual/</url>
    <content><![CDATA[<blockquote><p>Formalizing Human-Robot Mutual Adaptation: A Bounded Memory Model</p>
</blockquote>

<p><b>Idea: </b> the robot reasons how human may change its strategy, based on a model of human adaptation.<br><b>Motivation:</b></p>
<ol>
<li>Previous works do not use a model of human adaptation that can enable the robot to actively influence the actions of human.</li>
<li>Previous works do not reason over the human adaptation throughout the interaction. Compare with Intention-Aware Motion Planning paper.</li>
</ol>
<a id="more"></a>

<p><b>Assumptions</b></p>
<ol>
<li>Definition of m_r, m_h requires a specific collaborative task (rotating table as in paper).</li>
</ol>
<p><b>Preliminaries</b></p>
<ol>
<li>f maps QxArxAh into modes M: {0,1}.</li>
<li>Q=X_state x H_k at time step i is reprensented eventually as m_{h}^{i}, m_{r}^{i}, computed over a history of length k.</li>
</ol>
<p><b>Method</b><br>Modelling (adaptable human): Human adaptability a is accounted for via transition function P: Q to P(Q). At state q, the human will choose action specified by m_r with probability a, or m_h with 1-a.<br>Planning (adaptable robot):</p>
<ol>
<li>S: X x Y; X: X_world x M^{k} x M^{k}. M is the mode of robot/human; Y is partial observable variable, adaptabiity.</li>
<li>human policy $\pi_h$ is from BAM model. It outputs m_h or m_r.</li>
<li>The belief is based on unobserable variable a. Therefore, MOMDP maps from V(Q, b(a)) to a_r. Then BAM models gives human action a_h. Then use Eqn.3 (below) to update the belief.</li>
</ol>
<img src="/downloads/imgs/mutual1.png" class="example" title="title exg" alt="alt exg">]]></content>
      <categories>
        <category>Papers</category>
      </categories>
      <tags>
        <tag>HRI</tag>
      </tags>
  </entry>
  <entry>
    <title>Intention-Aware Motion Planning</title>
    <url>/blog/CSCI699/</url>
    <content><![CDATA[<blockquote><p>Intention-aware motion planning</p>
</blockquote>

<p><b>Motivation:</b> Motion planning with uncertainty in human intention.<br><b>Assumptions</b></p>
<ol>
<li>A finite set of unknown intentions.</li>
<li>Given intention, the agents dynamics is modeled and known to robot.</li>
<li>The agent has perfect information on the robots and its own state.</li>
</ol>
<a id="more"></a>

<p><b>Idea:</b></p>
<ol>
<li>Model intent-aware motion planning as a Partially Observable Markov Decision Process.</li>
<li>The agents intention is the primary uncertainty state variable in MOMDP.</li>
</ol>
<p><b>Preliminaries</b></p>
<ol>
<li>MDP allows to model action uncertainty only and the state is fully obserable.</li>
<li>POMDP specifies p(o|s,a), which models observation uncertainty.</li>
<li>In POMDP, state is not known and is represented as a belief b(s).</li>
<li>A POMDP policy induces a value function mapping from b to reward.</li>
<li>Each alpha-vector defines a hyperplane over B. The value function V can be represented as a finite set of hyperplanes.</li>
</ol>
<p><b>Method</b></p>
<ol>
<li>In the offline stage, construct a motion model for each agent intention; in the online stage, infer over a finite set of agent intentions and act accordingly.</li>
<li>Modelling<ol>
<li>Each intention type corresponds to an agent policy $\rou: XxYx\theta$.</li>
<li>$\rou$ can be computed by solving a simplified MDP. Assume the pedestrian follows shortest path and avoids collision.</li>
</ol>
</li>
<li>Execution<ol>
<li>MOMDP policy, represented as a value function $V(x, y, b_\theta)$.</li>
<li>First selects an action for current belief: $V(x, y, b_\theta) = max_{a} {a * b_\theta}$</li>
<li>Then update the belief: $b<em>\theta = Z(x,y, o) \sum</em>{\theta}{T_x(x, a, x) * T_y{x, y, \theta, y} * b(\theta)}$</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>Papers</category>
      </categories>
      <tags>
        <tag>HRI</tag>
      </tags>
  </entry>
  <entry>
    <title>reinforcement_learning-1</title>
    <url>/blog/reinforcement-learning1/</url>
    <content><![CDATA[<blockquote><p>End-to-End Robotic Reinforcement Learning without Reward Engineering</p>
</blockquote>

<p><b>Motivation:</b> Manual-engineered reward defeats the purpose of end-to-end learning<br><b>Idea:</b></p>
<ol>
<li>Human periodically labels the queries, used to supervise reward training</li>
<li>Train a classifier to predict reward, based on high-dimensional input (pixels)</li>
<li>Use RL to provide negative samples for step2 and RL uses the reward from step 2.</li>
</ol>
]]></content>
      <categories>
        <category>Papers</category>
      </categories>
      <tags>
        <tag>HRI</tag>
        <tag>reinforcement_learning</tag>
      </tags>
  </entry>
  <entry>
    <title>metric_learning-1</title>
    <url>/blog/metric-learning/</url>
    <content><![CDATA[<blockquote><p>Self-training with Noisy Student improves ImageNet classification</p>
</blockquote>

<p>The idea is to train a noisy student no smaller than the teacher and repeat.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">While not converge</span><br><span class="line">    1. Train a teacher net to provide pseudo-labels (unoised).</span><br><span class="line">    2. Train a larger student model with pseudo and groundtruth labels (noised).</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<blockquote><p>Embedding Expansion: Augmentation in Embedding Space for Deep Metric Learning</p>
</blockquote>
<p><b>Idea:</b> Proposes an embedding augmentation and combines with representation learning.<br><b>Motivation:</b> To generate hard-synthsis with easy samples without using GAN.<br><b>Related Work:</b> query expansion and database augmentation.<br><b>Method:</b> Loss/Negative Pair Mining</p>
<blockquote><p>Momentum Contrast for Unsupervised Visual Representation Learning</p>
</blockquote>
<p><b>Motivation:</b> Close the gap between unsupervised learning and supervised learning.<br><b>Idea: </b>Reformulate contrastive matching as dictionary look-up<br><b>Method</b></p>
<ol>
<li>Loss function: maximize softmax on the positive key</li>
<li>Implement the dictionary as a queue and maintains a momentum update on the key encoder</li>
</ol>
<blockquote><p>A Simple Framework for Contrastive Learning of Visual Representations</p>
</blockquote>
<p><b>Method</b></p>
<ol>
<li>Data augmentation plays a crucial role</li>
<li>Nonlinear transformation between representation and loss is crucial</li>
<li>Larger batch_size and more training steps compared to supervised training</li>
</ol>
<blockquote><p>Learning Diverse Fashion Collocation by Neural Graph Filtering</p>
</blockquote>
<p><b>Motivation:</b> To achieve compatibility, diversity and flexibility requirements of fashion<br>collocation.</p>
<p><b>Highlights:</b><br>    1. Edge-centric graph operations with permutation-invariant symmetric aggregation function<br>    2. Use focal loss to handle imbalance.<br>    3. New dataset for style classification.</p>
]]></content>
      <categories>
        <category>Papers</category>
      </categories>
      <tags>
        <tag>metric-learning</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E4%B8%AD%E5%9B%BD%E5%89%A9%E4%BD%99%E5%AE%9A%E7%90%86/</url>
    <content><![CDATA[<p>A[i]B[i]</p>
<p>:</p>
<blockquote><p>n<br>nA[i]B[i],A[i]B[i]<br>A[i]</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>3<br>2 1<br>3 2<br>5 3</p>
</blockquote>

<p></p>
<blockquote><p>23</p>
</blockquote>


<figure class="highlight c"><figcaption><span>shengyudingli.cpp</span><a href="/downloads/code/shengyudingli.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> A[N], B[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">exgcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, LL &amp;x, LL &amp;y)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(b==<span class="number">0</span>){</span><br><span class="line">        x = <span class="number">1</span>, y = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> d = exgcd(b, a%b, x, y);</span><br><span class="line">    LL x1 = y;</span><br><span class="line">    LL y1 = x - a/b * y;</span><br><span class="line">    x = x1, y= y1;</span><br><span class="line">    <span class="keyword">return</span> d;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    LL mul = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;A[i], &amp;B[i]);</span><br><span class="line">        mul *= A[i];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        LL Mi = mul / A[i];</span><br><span class="line">        LL x, y;</span><br><span class="line">        exgcd(Mi, A[i], x, y);</span><br><span class="line">        sum += ((x%A[i] + A[i]) % A[i]) * Mi * B[i];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, sum % mul);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>Math</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E9%9D%92%E8%9B%99%E7%9A%84%E7%BA%A6%E4%BC%9A/</url>
    <content><![CDATA[<p><br>AB01AxByAmBnL</p>
<p>:</p>
<blockquote><p>5xymnL</p>
</blockquote>


<p>:</p>
<blockquote><p>Impossible</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>1 2 3 4 5</p>
</blockquote>

<p></p>
<blockquote><p>4</p>
</blockquote>


<figure class="highlight c"><figcaption><span>qingwadeyuehui.cpp</span><a href="/downloads/code/qingwadeyuehui.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> int long long</span></span><br><span class="line"><span class="keyword">int</span> s1, s2, m, n, L;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">exgcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> &amp;x, <span class="keyword">int</span> &amp;y)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(b==<span class="number">0</span>){</span><br><span class="line">        x = <span class="number">1</span>, y = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span>  res = exgcd(b, a%b, x, y);</span><br><span class="line">    <span class="keyword">int</span> x1 = y;</span><br><span class="line">    <span class="keyword">int</span> y1 =  x - a/b * y;</span><br><span class="line">    x = x1, y = y1;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line"></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d%d%d"</span>, &amp;s1, &amp;s2, &amp;m, &amp;n, &amp;L);</span><br><span class="line">    s1%=L, s2%=L;</span><br><span class="line">    <span class="keyword">int</span> a = m-n, b = s2-s1;</span><br><span class="line">    <span class="keyword">if</span>(a&lt;<span class="number">0</span>) a = -a, b = -b;</span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">    <span class="keyword">int</span> d = exgcd(a, L, x, y);</span><br><span class="line">    <span class="keyword">if</span>(b%d) <span class="built_in">puts</span>(<span class="string">"Impossible"</span>);</span><br><span class="line">    <span class="keyword">else</span> x = x * b / d,  L/= d, <span class="built_in">printf</span>(<span class="string">"%lld"</span>, (x%L + L) % L);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>Math</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E7%BB%84%E5%90%88%E8%AE%A1%E6%95%B0/</url>
    <content><![CDATA[<p>C(n, m)% P</p>
<p>:</p>
<blockquote><p>nm</p>
</blockquote>


<p>:</p>
<blockquote><p>C(n,m) </p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>6 3</p>
</blockquote>

<p></p>
<blockquote><p>20</p>
</blockquote>


<figure class="highlight c"><figcaption><span>zuheshu1.cpp</span><a href="/downloads/code/zuheshu1.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1000010</span>, P = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="keyword">int</span> cnt[N+<span class="number">10</span>];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; son[N+<span class="number">10</span>];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">prime</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=N;i++){</span><br><span class="line">        <span class="keyword">if</span>(son[i].<span class="built_in">size</span>()==<span class="number">0</span>)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;=n;j+=i) {</span><br><span class="line">                son[j].push_back(i); <span class="comment">// </span></span><br><span class="line">            }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> k)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;son[i].<span class="built_in">size</span>();j++){</span><br><span class="line">            <span class="keyword">int</span> x = son[i][j], c = <span class="number">0</span>, p=i;</span><br><span class="line">            <span class="keyword">while</span>(p%x==<span class="number">0</span>){</span><br><span class="line">                p/=x, c++;</span><br><span class="line">            }</span><br><span class="line">            cnt[x] += c*k;</span><br><span class="line">        }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">fast</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>{</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(b){</span><br><span class="line">        <span class="keyword">if</span>(b&amp;<span class="number">1</span>) res = res * a % P;</span><br><span class="line">        a = a * a % P;</span><br><span class="line">        b&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    prime();</span><br><span class="line">    solve(n, <span class="number">1</span>);</span><br><span class="line">    solve(n-m, <span class="number">-1</span>);</span><br><span class="line">    solve(m, <span class="number">-1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">if</span>(cnt[i]&gt;<span class="number">0</span>)</span><br><span class="line">            res = res * fast(i, cnt[i]) % P;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>zuheshu2.cpp</span><a href="/downloads/code/zuheshu2.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1000010</span>, P = <span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> pcnt, pr[N+<span class="number">10</span>];</span><br><span class="line"><span class="keyword">int</span> cnt[N+<span class="number">10</span>];</span><br><span class="line"><span class="keyword">int</span> mark[N+<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">prime</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=N;i++)</span><br><span class="line">        <span class="keyword">if</span>(!mark[i]) {</span><br><span class="line">            pr[++pcnt] = i;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i + i; j &lt;= n; j += i)</span><br><span class="line">                mark[j] = <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> k)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=pcnt &amp;&amp; pr[i]&lt;=n;i++){  <span class="comment">//starts from 1</span></span><br><span class="line">        <span class="keyword">int</span> x = pr[i];</span><br><span class="line">        <span class="comment">// xn!</span></span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> t = x;</span><br><span class="line">        <span class="keyword">while</span>(t&lt;=n){</span><br><span class="line">            cnt[x] += n/t * k;</span><br><span class="line">            t*=x;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="keyword">long</span> <span class="title">fast</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(x){</span><br><span class="line">        <span class="keyword">if</span>(x&amp;<span class="number">1</span>) res = res * n % P;</span><br><span class="line">        n = n * n % P;</span><br><span class="line">        x &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    prime();</span><br><span class="line">    solve(n, <span class="number">1</span>);</span><br><span class="line">    solve(n-m, <span class="number">-1</span>);</span><br><span class="line">    solve(m, <span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">if</span>(cnt[i])</span><br><span class="line">            res = res * fast(i, cnt[i]) % P;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>zuheshu3.cpp</span><a href="/downloads/code/zuheshu3.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line">ll T,f[<span class="number">1000009</span>],n,m;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> p=<span class="number">1e9</span>+<span class="number">7</span>;</span><br><span class="line"><span class="function">ll <span class="title">fast</span><span class="params">(ll x,<span class="keyword">int</span> b)</span></span>{</span><br><span class="line">    ll res=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(b&gt;<span class="number">0</span>){</span><br><span class="line">        <span class="keyword">if</span>(b&amp;<span class="number">1</span>)res=res*x%p,res%=p;</span><br><span class="line">        x=x*x%p,x%=p;</span><br><span class="line">        b/=<span class="number">2</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    f[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">1000000</span>;i++)f[i]=(f[i<span class="number">-1</span>]%p*i)%p;</span><br><span class="line">    <span class="keyword">char</span> in[<span class="number">20</span>]={<span class="string">"data0.in"</span>};</span><br><span class="line">    <span class="keyword">char</span> out[<span class="number">20</span>]={<span class="string">"data0.out"</span>};</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> cas=<span class="number">1</span>;cas&lt;=<span class="number">10</span>;cas++){</span><br><span class="line">        freopen(in,<span class="string">"r"</span>,<span class="built_in">stdin</span>);in[<span class="number">4</span>]++;</span><br><span class="line">        freopen(out,<span class="string">"w"</span>,<span class="built_in">stdout</span>);out[<span class="number">4</span>]++;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;n,&amp;m);</span><br><span class="line">        <span class="comment">//cerr&lt;&lt;n&lt;&lt;" "&lt;&lt;m&lt;&lt;endl;</span></span><br><span class="line">        <span class="comment">// +</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>,f[n]%p*fast(f[m],p<span class="number">-2</span>)%p*fast(f[n-m],p<span class="number">-2</span>)%p);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>Math</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E5%8C%BA%E9%97%B4%E7%B4%A0%E6%95%B02/</url>
    <content><![CDATA[<p>a,b[a,b]</p>
<p>:</p>
<blockquote><p>a,b</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>350874129179 350875129179</p>
</blockquote>

<p></p>
<blockquote><p>37682</p>
</blockquote>


<figure class="highlight c"><figcaption><span>qujiansushu.cpp</span><a href="/downloads/code/qujiansushu.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1000010</span>;</span><br><span class="line"><span class="keyword">int</span> mark[N+<span class="number">10</span>], pmark[N+<span class="number">10</span>];</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line">LL a, b;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">prime</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in">sqrt</span>(b);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">if</span>(!mark[i]){</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i+i;j&lt;=n;j+=i)</span><br><span class="line">                mark[j] = <span class="number">1</span>;</span><br><span class="line">            LL p;</span><br><span class="line">            <span class="keyword">if</span>(a%i==<span class="number">0</span>) p = a;</span><br><span class="line">            <span class="keyword">else</span> p = <span class="built_in">max</span>(<span class="number">2L</span>L, (a/i + <span class="number">1</span>) * i);</span><br><span class="line">            <span class="keyword">for</span>(; p&lt;=b; p+=i) pmark[p-a] = <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%lld%lld"</span>, &amp;a, &amp;b);</span><br><span class="line">    prime();</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=b-a;i++)</span><br><span class="line">        <span class="keyword">if</span>(pmark[i]==<span class="number">0</span>) sum++;</span><br><span class="line">    <span class="keyword">if</span>(a==<span class="number">1</span>) sum--;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, sum);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>Math</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E5%8C%BA%E9%97%B4%E7%B4%A0%E6%95%B0%E5%92%8C/</url>
    <content><![CDATA[<p>n[L,R]</p>
<p>:</p>
<blockquote><p>n,<br>nLR</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>2<br>10 55<br>33 101</p>
</blockquote>

<p></p>
<blockquote><p>208<br>365</p>
</blockquote>



<figure class="highlight c"><figcaption><span>qujianyinzi.cpp</span><a href="/downloads/code/qujianyinzi.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">2000010</span>;</span><br><span class="line"><span class="keyword">int</span> st[N+<span class="number">10</span>];</span><br><span class="line"><span class="keyword">int</span> sum[N+<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;i++) sum[i] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=N;i++){ <span class="comment">//O(nloglogN)</span></span><br><span class="line">        <span class="keyword">if</span>(!st[i]){</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i+i;j&lt;=N;j+=i) st[j] =<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i;j&lt;=N;j+=i){</span><br><span class="line">                <span class="keyword">int</span> t = j, c= <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span>(t%i==<span class="number">0</span>){</span><br><span class="line">                    c++, t/=i;</span><br><span class="line">                }</span><br><span class="line">                sum[j]*=(c+<span class="number">1</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;i++)</span><br><span class="line">        sum[i] += sum[i<span class="number">-1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n--){</span><br><span class="line">        <span class="keyword">int</span> L, R;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;L, &amp;R);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, sum[R] - sum[L<span class="number">-1</span>]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>Math</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E5%A4%9A%E9%87%8D%E8%83%8C%E5%8C%85/</url>
    <content><![CDATA[<p>Vm</p>
<p>:</p>
<blockquote><p>Vm<br>m3i<br>V&lt;=10^4, m&lt;=5001000</p>
<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>10 4<br>2 3 2<br>2 4 3<br>1 2 2<br>4 5 3</p>
</blockquote>

<p><br>8</p></blockquote>


<figure class="highlight c"><figcaption><span>duochongbeibao1.cpp</span><a href="/downloads/code/duochongbeibao1.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">510</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">10010</span>;</span><br><span class="line"><span class="keyword">int</span> A[N];</span><br><span class="line"><span class="keyword">int</span> m, V;</span><br><span class="line"><span class="keyword">int</span> dp[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;V, &amp;m);</span><br><span class="line">    <span class="keyword">int</span> x, y, z;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;x, &amp;y, &amp;z);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=V;j&gt;=<span class="number">0</span>;j--){</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;=x;k++)</span><br><span class="line">                <span class="keyword">if</span>(j&gt;=k*y)</span><br><span class="line">                    dp[j] = <span class="built_in">max</span>(dp[j], dp[j-k*y] + k*z);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[V]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>duochongbeibao2.cpp</span><a href="/downloads/code/duochongbeibao2.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">510</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">10010</span>;</span><br><span class="line"><span class="keyword">int</span> A[N];</span><br><span class="line"><span class="keyword">int</span> m, V;</span><br><span class="line"><span class="keyword">int</span> dp[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;V, &amp;m);</span><br><span class="line">    <span class="keyword">int</span> x, y, z;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;x, &amp;y, &amp;z);</span><br><span class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>; j&lt;=x; j*=<span class="number">2</span>){</span><br><span class="line">            A[k++] = j;</span><br><span class="line">            x-=j;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(x) A[k++] = x;</span><br><span class="line"></span><br><span class="line"><span class="comment">// note: m must be at the outerloop</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> m=<span class="number">0</span>;m&lt;k;m++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=V;j&gt;=A[m]*y; j--){</span><br><span class="line">                dp[j] = <span class="built_in">max</span>(dp[j], dp[j-A[m]*y] + A[m]*z);</span><br><span class="line">            }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[V]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>duochongbeibao3.cpp</span><a href="/downloads/code/duochongbeibao3.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// dp[k*y+j] = max(dp[t*y+j] + (k-t)*z)</span></span><br><span class="line"><span class="comment">// dp[k*y+j] = max(dp[t*y+j] - t*z) + k*z</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">510</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">10010</span>;</span><br><span class="line"><span class="keyword">int</span> m, V;</span><br><span class="line"><span class="keyword">int</span> dp[M];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> cnt, val;</span><br><span class="line">}Q[M];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;V, &amp;m);</span><br><span class="line">    <span class="keyword">int</span> x, y, z;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;x, &amp;y, &amp;z);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;y;j++) {</span><br><span class="line">            <span class="keyword">int</span> L = <span class="number">0</span>, R = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k * y + j &lt;= V; k++) {</span><br><span class="line">                node tmp = (node){k, dp[k*y+j] - k*z}; <span class="comment">//easy to forget</span></span><br><span class="line">                <span class="keyword">while</span>(L&lt;=R &amp;&amp; Q[R].val&lt;=tmp.val) R--;</span><br><span class="line">                <span class="keyword">while</span>(L&lt;=R &amp;&amp; tmp.cnt - Q[L].cnt &gt; x ) L++;</span><br><span class="line">                Q[++R] = tmp;</span><br><span class="line">                dp[k*y+j] = <span class="built_in">max</span>(dp[k*y+j], Q[L].val + k*z);</span><br><span class="line"></span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[V]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>duochongbeibao3.5.cpp</span><a href="/downloads/code/duochongbeibao3.5.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100005</span>;</span><br><span class="line"><span class="keyword">int</span> dp[N][N];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> cnt, val;</span><br><span class="line">}Q[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> V, n, x, y, z;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;V&gt;&gt;n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;x, &amp;y, &amp;z);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;x;j++){</span><br><span class="line">            <span class="keyword">int</span> L = <span class="number">0</span>, R = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k*x+j&lt;=V; k++){</span><br><span class="line">                node tmp = (node){k,dp[i<span class="number">-1</span>][k*x+j] - k*y};</span><br><span class="line">                <span class="keyword">while</span>(R&gt;=L &amp;&amp; tmp.val &gt;= Q[R].val)R--;</span><br><span class="line">                <span class="keyword">while</span>(R&gt;=L &amp;&amp; tmp.cnt - Q[L].cnt&gt;z) L++;</span><br><span class="line">                Q[++R] = tmp;</span><br><span class="line">                dp[i][k*x+j] = Q[L].val + k*y;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=V;j++) dp[i][j] = <span class="built_in">max</span>(dp[i<span class="number">-1</span>][j], dp[i][j]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>duochongbeibao4.cpp</span><a href="/downloads/code/duochongbeibao4.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 10005</span></span><br><span class="line"><span class="keyword">int</span> Q[M],Q2[M],dp[M];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line"><span class="comment">//  dp[cur][k*d+i]-k*val[i] = Max(dp[!cur][j*d+i]-j*val[i]);</span></span><br><span class="line">    <span class="keyword">int</span> n,v;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;v,&amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>,num,ct,val; i&lt;=n; i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;num,&amp;ct,&amp;val);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;ct; j++) {</span><br><span class="line">            <span class="keyword">int</span> head = <span class="number">1</span>,tail = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>; k*ct+j&lt;=v; k++) {</span><br><span class="line">                <span class="keyword">int</span> res = dp[k*ct+j]-k*val;</span><br><span class="line">                <span class="keyword">while</span>(head &lt;= tail &amp;&amp; k-Q2[head] &gt; num) head ++;</span><br><span class="line">                <span class="keyword">while</span>(head &lt;= tail &amp;&amp; res &gt;= Q[tail]) tail--;</span><br><span class="line">                Q[++tail] = res,Q2[tail] = k;</span><br><span class="line">                dp[k*ct+j] = Q[head]+k*val;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,dp[v]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
        <tag>monotone_queue</tag>
        <tag>optimization</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E9%AA%91%E5%A3%AB/</url>
    <content><![CDATA[<p>551212 <br>1221<br>  <br></p>
<p>:</p>
<blockquote><p>T()NT5501<br>*</p>
</blockquote>


<p>:</p>
<blockquote><p>15151</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>2<br>10110<br>01<em>11<br>10111<br>01001<br>00000<br>01011<br>110</em>1<br>01110<br>01010<br>00100</p>
</blockquote>

<p></p>
<blockquote><p>7<br>-1</p>
</blockquote>


<figure class="highlight c"><figcaption><span>qishi.cpp</span><a href="/downloads/code/qishi.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> goal[<span class="number">5</span>][<span class="number">5</span>]= {</span><br><span class="line">        {<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>},</span><br><span class="line">        {<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>},</span><br><span class="line">        {<span class="number">0</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>},</span><br><span class="line">        {<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>},</span><br><span class="line">        {<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>}</span><br><span class="line">};</span><br><span class="line"><span class="keyword">int</span> Map[<span class="number">5</span>][<span class="number">5</span>],T,pd;</span><br><span class="line"><span class="keyword">int</span> fx[<span class="number">8</span>]= {<span class="number">1</span>,<span class="number">-1</span>,<span class="number">2</span>,<span class="number">-2</span>,<span class="number">1</span>,<span class="number">-1</span>,<span class="number">2</span>,<span class="number">-2</span>};</span><br><span class="line"><span class="keyword">int</span> fy[<span class="number">8</span>]= {<span class="number">2</span>,<span class="number">2</span>,<span class="number">-1</span>,<span class="number">-1</span>,<span class="number">-2</span>,<span class="number">-2</span>,<span class="number">1</span>,<span class="number">1</span>};</span><br><span class="line"><span class="keyword">int</span> stx,sty;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">check</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> ret=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">5</span>; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;<span class="number">5</span>; j++)</span><br><span class="line">            <span class="keyword">if</span>(Map[i][j]!=goal[i][j]) ret++;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">IDA</span><span class="params">(<span class="keyword">int</span> left, <span class="keyword">int</span> x,<span class="keyword">int</span> y)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> h = check();</span><br><span class="line">    <span class="keyword">if</span>(!h) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="comment">//    if(h-1&gt;left) return false; //where * comes from, pruning procedure</span></span><br><span class="line">    <span class="keyword">if</span>(left==<span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">8</span>; i++) {</span><br><span class="line">        <span class="keyword">int</span> x1=x+fx[i];</span><br><span class="line">        <span class="keyword">int</span> y1=y+fy[i];</span><br><span class="line">        <span class="keyword">if</span>(x1&lt;<span class="number">0</span>||x1&gt;<span class="number">4</span>||y1&lt;<span class="number">0</span>||y1&gt;<span class="number">4</span>) <span class="keyword">continue</span>;</span><br><span class="line">        swap(Map[x1][y1],Map[x][y]);</span><br><span class="line">        <span class="keyword">if</span>(IDA(left<span class="number">-1</span>,x1, y1)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        swap(Map[x1][y1],Map[x][y]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;T;</span><br><span class="line">    <span class="keyword">while</span>(T--) {</span><br><span class="line">        pd=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">5</span>; i++) {</span><br><span class="line">            <span class="keyword">char</span> s[<span class="number">10</span>];</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>,s);</span><br><span class="line"><span class="comment">//            printf("%s\n", s);</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;<span class="number">5</span>; j++) {</span><br><span class="line">                <span class="keyword">if</span>(s[j]-<span class="string">'0'</span>==<span class="number">0</span>) Map[i][j]=<span class="number">0</span>;</span><br><span class="line">                <span class="keyword">if</span>(s[j]-<span class="string">'0'</span>==<span class="number">1</span>) Map[i][j]=<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span>(s[j]==<span class="string">'*'</span>) Map[i][j]=<span class="number">2</span>,stx=i,sty=j;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"><span class="comment">//        for(int i=0;i&lt;5;i++){</span></span><br><span class="line"><span class="comment">//            for(int j=0;j&lt;5;j++)</span></span><br><span class="line"><span class="comment">//                printf("%d ", Map[i][j]);</span></span><br><span class="line"><span class="comment">//            printf("\n");</span></span><br><span class="line"><span class="comment">//        }</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>; i&lt;=<span class="number">15</span>; i++)</span><br><span class="line">            <span class="keyword">if</span>(IDA(i,stx, sty)) {</span><br><span class="line">                pd=i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">        <span class="keyword">if</span>(pd) <span class="built_in">cout</span>&lt;&lt;pd&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="string">"-1"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>graph</tag>
        <tag>search</tag>
        <tag>IDA*</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E5%85%AB%E6%95%B0%E7%A0%81/</url>
    <content><![CDATA[<p>1-8x3*3x</p>
<p>1 2 3<br>4 5 6<br>7 8 x</p>
<p></p>
<p>:</p>
<blockquote><p>3*31-8x</p>
</blockquote>


<p>:</p>
<blockquote><p><br>-1</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>2  3  4<br>1  5  x<br>7  6  8</p>
</blockquote>

<p></p>
<blockquote><p>19</p>
</blockquote>


<figure class="highlight c"><figcaption><span>bashuma_bfs.cpp</span><a href="/downloads/code/bashuma_bfs.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">400010</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> mp[<span class="number">3</span>][<span class="number">3</span>];</span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">step</span>;</span><br><span class="line">    <span class="keyword">int</span> h;</span><br><span class="line">}Q[N], now;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> F[<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Hash</span><span class="params">(<span class="keyword">int</span> A[<span class="number">3</span>][<span class="number">3</span>])</span></span>{</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> s[<span class="number">10</span>]; <span class="keyword">int</span> k=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++) s[k++] = A[i][j];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> t = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;k;i++){</span><br><span class="line">        t = s[i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;i;j++)</span><br><span class="line">            <span class="keyword">if</span>(s[j] &lt; s[i]) t--;</span><br><span class="line">        res += (t<span class="number">-1</span>) * F[<span class="number">8</span>-i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> st[N];</span><br><span class="line"><span class="keyword">int</span> rx[] = {<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>};</span><br><span class="line"><span class="keyword">int</span> ry[] = {<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> x&gt;=<span class="number">0</span> &amp;&amp; x &lt;<span class="number">3</span> &amp;&amp; y&gt;=<span class="number">0</span> &amp;&amp; y&lt;<span class="number">3</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bfs</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> L = <span class="number">0</span>, R = <span class="number">-1</span>;</span><br><span class="line">    now.<span class="built_in">step</span> = <span class="number">0</span>;</span><br><span class="line">    Q[++R] = now;</span><br><span class="line">    <span class="keyword">int</span> h;</span><br><span class="line">    st[h = Hash(now.mp)] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(h==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(L&lt;=R){</span><br><span class="line">        now = Q[L++];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++){</span><br><span class="line">            <span class="keyword">if</span> (check(now.x + rx[i], now.y + ry[i])){</span><br><span class="line">                swap(now.mp[now.x + rx[i]][now.y + ry[i]], now.mp[now.x][now.y]);</span><br><span class="line">                now.x += rx[i], now.y += ry[i];</span><br><span class="line">                now.<span class="built_in">step</span> ++;</span><br><span class="line">                <span class="keyword">int</span> h = Hash(now.mp);</span><br><span class="line">                <span class="keyword">if</span>(h==<span class="number">0</span>) <span class="keyword">return</span> now.<span class="built_in">step</span>;</span><br><span class="line">                <span class="keyword">if</span>(!st[h]){</span><br><span class="line">                    st[h] = <span class="number">1</span>;</span><br><span class="line">                    Q[++R] = now;</span><br><span class="line">                }</span><br><span class="line">                now.x -= rx[i], now.y -= ry[i], now.<span class="built_in">step</span>--;</span><br><span class="line">                swap(now.mp[now.x + rx[i]][now.y + ry[i]], now.mp[now.x][now.y]);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    F[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">10</span>;i++) F[i] = F[i<span class="number">-1</span>] * i;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> s[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++) {</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>, s);</span><br><span class="line">            <span class="keyword">if</span> (s[<span class="number">0</span>] == <span class="string">'x'</span>) {</span><br><span class="line">                now.x = i, now.y = j;</span><br><span class="line">                s[<span class="number">0</span>] = <span class="string">'9'</span>;</span><br><span class="line">            }</span><br><span class="line">            now.mp[i][j] = s[<span class="number">0</span>] - <span class="string">'0'</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, bfs());</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>bashuma_ASTAR.cpp</span><a href="/downloads/code/bashuma_ASTAR.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">400010</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> mp[<span class="number">3</span>][<span class="number">3</span>];</span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">step</span>, h;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> node&amp;A) <span class="keyword">const</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">step</span>+h &gt; A.<span class="built_in">step</span> + A.h;</span><br><span class="line">    }</span><br><span class="line">}now;</span><br><span class="line"></span><br><span class="line">priority_queue&lt;node&gt; Q;</span><br><span class="line"><span class="keyword">int</span> F[<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Hash</span><span class="params">(<span class="keyword">int</span> A[<span class="number">3</span>][<span class="number">3</span>])</span></span>{</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> s[<span class="number">10</span>]; <span class="keyword">int</span> k=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++) s[k++] = A[i][j];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> t = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;k;i++){</span><br><span class="line">        t = s[i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;i;j++)</span><br><span class="line">            <span class="keyword">if</span>(s[j] &lt; s[i]) t--;</span><br><span class="line">        res += (t<span class="number">-1</span>) * F[<span class="number">8</span>-i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> st[N];</span><br><span class="line"><span class="keyword">int</span> rx[] = {<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>};</span><br><span class="line"><span class="keyword">int</span> ry[] = {<span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>};</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> x&gt;=<span class="number">0</span> &amp;&amp; x &lt;<span class="number">3</span> &amp;&amp; y&gt;=<span class="number">0</span> &amp;&amp; y&lt;<span class="number">3</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">H</span><span class="params">(<span class="keyword">int</span> A[<span class="number">3</span>][<span class="number">3</span>])</span></span>{</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++){</span><br><span class="line">            <span class="keyword">if</span>(A[i][j] == <span class="number">9</span>) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">int</span> x = (A[i][j] - <span class="number">1</span>) /<span class="number">3</span>;</span><br><span class="line">            <span class="keyword">int</span> y = (A[i][j] - <span class="number">1</span>) %<span class="number">3</span>;</span><br><span class="line">            res += <span class="built_in">abs</span>(i-x) + <span class="built_in">abs</span>(j-y);</span><br><span class="line">        }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bfs</span><span class="params">()</span></span>{</span><br><span class="line">    now.<span class="built_in">step</span> = <span class="number">0</span>; now.h = H(now.mp);</span><br><span class="line">    Q.push(now);</span><br><span class="line">    <span class="keyword">int</span> h = Hash(now.mp);</span><br><span class="line">    <span class="keyword">if</span>(h==<span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(!Q.empty()){</span><br><span class="line">        now = Q.top(); Q.pop();</span><br><span class="line">        <span class="keyword">int</span> h = Hash(now.mp);</span><br><span class="line">        <span class="keyword">if</span>(h==<span class="number">0</span>) <span class="keyword">return</span> now.<span class="built_in">step</span>;  <span class="comment">//</span></span><br><span class="line">        <span class="keyword">if</span>(st[h]) <span class="keyword">continue</span>;  <span class="comment">//dijstra</span></span><br><span class="line">        st[h] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++){</span><br><span class="line">            <span class="keyword">if</span> (check(now.x + rx[i], now.y + ry[i])){</span><br><span class="line">                swap(now.mp[now.x + rx[i]][now.y + ry[i]], now.mp[now.x][now.y]);</span><br><span class="line">                now.x += rx[i], now.y += ry[i]; now.<span class="built_in">step</span> ++; now.h = H(now.mp);</span><br><span class="line">                Q.push(now); <span class="comment">// no if before entering priority_queue</span></span><br><span class="line">                now.x -= rx[i], now.y -= ry[i], now.<span class="built_in">step</span>--;</span><br><span class="line">                swap(now.mp[now.x + rx[i]][now.y + ry[i]], now.mp[now.x][now.y]); now.h = H(now.mp);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    F[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">10</span>;i++) F[i] = F[i<span class="number">-1</span>] * i;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> s[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++) {</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>, s);</span><br><span class="line">            <span class="keyword">if</span> (s[<span class="number">0</span>] == <span class="string">'x'</span>) {</span><br><span class="line">                now.x = i, now.y = j;</span><br><span class="line">                s[<span class="number">0</span>] = <span class="string">'9'</span>;</span><br><span class="line">            }</span><br><span class="line">            now.mp[i][j] = s[<span class="number">0</span>] - <span class="string">'0'</span>;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, bfs());</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>BFS</tag>
        <tag>Search</tag>
        <tag>A*</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E8%BF%87%E5%B1%B1%E8%BD%A6/</url>
    <content><![CDATA[<p>nm<br></p>
<p>:</p>
<blockquote><p>K , M , NK&lt;=1000<br>N, M&lt;=500.KA_iB_j0</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>6 3 3<br>1 1<br>1 2<br>1 3<br>2 1<br>2 3<br>3 1<br>0</p>
</blockquote>

<p></p>
<blockquote><p>3</p>
</blockquote>


<figure class="highlight c"><figcaption><span>guoshanche.cpp</span><a href="/downloads/code/guoshanche.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">510</span>;</span><br><span class="line"><span class="keyword">int</span> mp[N][N];</span><br><span class="line"><span class="keyword">int</span> st[N];</span><br><span class="line"><span class="keyword">int</span> a[N], b[N];</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="keyword">int</span> ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">sp</span><span class="params">(<span class="keyword">int</span> v)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="keyword">if</span>(mp[v][i] &amp;&amp; !st[i]){</span><br><span class="line">            st[i] = <span class="number">1</span>; <span class="comment">//</span></span><br><span class="line">            <span class="keyword">if</span>(b[i]==<span class="number">-1</span> || sp(b[i])){</span><br><span class="line">                b[i] = v;</span><br><span class="line">                a[v] = i;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>{</span><br><span class="line">    ans = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(a, <span class="number">-1</span>, <span class="keyword">sizeof</span> a);</span><br><span class="line">    <span class="built_in">memset</span>(b, <span class="number">-1</span>, <span class="keyword">sizeof</span> b);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">if</span>(a[i]==<span class="number">-1</span>){</span><br><span class="line">            <span class="built_in">memset</span>(st, <span class="number">0</span>, <span class="keyword">sizeof</span> st); <span class="comment">//i</span></span><br><span class="line">            <span class="keyword">if</span>(sp(i)) ans ++;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">int</span> k;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;k) &amp;&amp; k){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">        <span class="keyword">int</span> a, b;</span><br><span class="line">        <span class="built_in">memset</span>(mp, <span class="number">0</span>, <span class="keyword">sizeof</span> mp);</span><br><span class="line">        <span class="keyword">while</span>(k--){</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">            mp[a][b] = <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">        solve();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>graph</tag>
        <tag>matching</tag>
        <tag>hungarian</tag>
      </tags>
  </entry>
  <entry>
    <title>Theremustbesomethingwrong</title>
    <url>/blog/Theremustbesomethingwrong/</url>
    <content><![CDATA[<p>202020004000nm?</p>
<p>:</p>
<blockquote><p>nm<br>mabab,ab<br>100%n[2,100000],m[0,100000]</p>
</blockquote>


<p>:</p>
<blockquote><p>its your own problem<br>there are must be something wrong</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>4 4<br>1 2<br>2 3<br>3 4<br>4 1</p>
</blockquote>

<p></p>
<blockquote><p>its your own problem</p>
</blockquote>

<p>2<br></p>
<blockquote><p>3 3<br>1 2<br>1 3<br>2 3</p>
</blockquote>

<p></p>
<blockquote><p>there are must be something wrong</p>
</blockquote>


<figure class="highlight c"><figcaption><span>coloring.cpp</span><a href="/downloads/code/coloring.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;edges[N];</span><br><span class="line"><span class="keyword">int</span> colors[N];</span><br><span class="line"><span class="keyword">bool</span> ff = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> c)</span></span>{</span><br><span class="line">    colors[x] = c;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edges[x][i];</span><br><span class="line">        <span class="keyword">if</span>(colors[x]==colors[y]){</span><br><span class="line">            ff = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }<span class="keyword">else</span> <span class="keyword">if</span>(colors[y]==<span class="number">0</span>){</span><br><span class="line">            dfs(y, -c);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        edges[a].push_back(b);</span><br><span class="line">        edges[b].push_back(a);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="built_in">memset</span>(colors, <span class="number">0</span>, <span class="keyword">sizeof</span>(colors));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">if</span>(colors[i]==<span class="number">0</span>) dfs(i, <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(ff) <span class="built_in">puts</span>(<span class="string">"it's your own problem"</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">puts</span>(<span class="string">"there are must be something wrong"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>graph</tag>
        <tag>coloring</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E7%81%8C%E6%B0%B4/</url>
    <content><![CDATA[<p>Farmer Johnn(1n300)1n wi(1wi105),pij Farmer John<br>:</p>
<blockquote><p>n</p>
<p>n+1i+1wi</p>
<p>n+22n+1n+1+injpij</p>
</blockquote>


<p>:</p>
<blockquote><p>.</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>4<br>5<br>4<br>4<br>3<br>0 2 2 2<br>2 0 3 3<br>2 3 0 4<br>2 3 4 0</p>
</blockquote>

<p></p>
<blockquote><p>9</p>
</blockquote>



<figure class="highlight c"><figcaption><span>guanshui.cpp</span><a href="/downloads/code/guanshui.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">310</span>;</span><br><span class="line"><span class="keyword">int</span> fa[N];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span>{</span></span><br><span class="line">    <span class="keyword">int</span> a, b, v;</span><br><span class="line">}edges[N*N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> tot;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(x==fa[x]) <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">return</span> fa[x] = <span class="built_in">find</span>(fa[x]);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(Edge &amp;a, Edge&amp;b)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> a.v &lt; b.v;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">int</span> val;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;val);</span><br><span class="line">        edges[++tot].a = <span class="number">0</span>, edges[tot].b = i, edges[tot].v = val;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++){</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;val);</span><br><span class="line">            <span class="keyword">if</span>(i&lt;j)</span><br><span class="line">                edges[++tot].a= i, edges[tot].b = j, edges[tot].v = val;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=n;i++) fa[i] = i;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    sort(edges+<span class="number">1</span>, edges+tot+<span class="number">1</span>, cmp);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=tot;i++){</span><br><span class="line">        <span class="keyword">int</span> a = <span class="built_in">find</span>(edges[i].a);</span><br><span class="line">        <span class="keyword">int</span> b = <span class="built_in">find</span>(edges[i].b);</span><br><span class="line">        <span class="keyword">if</span>(a!=b) fa[a] = b, ans += edges[i].v;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>graph</tag>
        <tag>kruskal</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E6%98%82%E8%B4%B5%E7%9A%84%E8%81%98%E7%A4%BC/</url>
    <content><![CDATA[<p>1000080005000<br>11PLTiViM</p>
<p>:</p>
<blockquote><p>MNNPLXX &lt; NXTV100%N[1,100],M[1,100].</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>1 4<br>10000 3 2<br>2 8000<br>3 5000<br>1000 2 1<br>4 200<br>3000 2 1<br>4 200<br>50 2 0</p>
</blockquote>

<p></p>
<blockquote><p>5250</p>
</blockquote>



<figure class="highlight c"><figcaption><span>angguipinli.cpp</span><a href="/downloads/code/angguipinli.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">110</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> level[N];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> to, v;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Node &amp;A) <span class="keyword">const</span>{ <span class="comment">//</span></span><br><span class="line">        <span class="keyword">return</span> v &gt; A.v;</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt;edges[N];</span><br><span class="line">priority_queue&lt;Node&gt; Q;</span><br><span class="line"><span class="keyword">int</span> dis[N], st[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ans = <span class="number">1e9</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Node in Q is different from node used in input. Q stores (index, dis[index])</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Dijstra</span><span class="params">(<span class="keyword">int</span> L)</span></span>{ <span class="comment">//[L, L+m]</span></span><br><span class="line">    <span class="built_in">memset</span>(dis, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> dis);</span><br><span class="line">    <span class="built_in">memset</span>(st, <span class="number">0</span>, <span class="keyword">sizeof</span> st);</span><br><span class="line">    dis[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    Q.push({<span class="number">0</span>, <span class="number">0</span>});</span><br><span class="line">    <span class="keyword">while</span>(!Q.empty()){</span><br><span class="line">        Node tmp = Q.top();Q.pop();</span><br><span class="line">        <span class="keyword">int</span> k = tmp.to;</span><br><span class="line">        <span class="keyword">if</span>(st[k]) <span class="keyword">continue</span>;</span><br><span class="line">        st[k] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[k].<span class="built_in">size</span>();i++){</span><br><span class="line">            <span class="keyword">int</span> y = edges[k][i].to;</span><br><span class="line">            <span class="keyword">int</span> v = edges[k][i].v;</span><br><span class="line">            <span class="keyword">if</span>(level[y]&lt;L || level[y] &gt; L+m) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(dis[y] &gt; dis[k] + v){</span><br><span class="line">                dis[y] = dis[k] + v;</span><br><span class="line">                Q.push({y, dis[y]});</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    ans = <span class="built_in">min</span>(ans, dis[<span class="number">1</span>]);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;m, &amp;n);</span><br><span class="line">    <span class="keyword">int</span> x, k, y;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){ <span class="comment">//i</span></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;x, &amp;level[i], &amp;k);</span><br><span class="line">        edges[<span class="number">0</span>].push_back({i, x}); <span class="comment">// </span></span><br><span class="line">        <span class="keyword">while</span>(k--){</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;y, &amp;x);</span><br><span class="line">            edges[y].push_back({i, x}); <span class="comment">// xtarget iy</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">100</span>;i++){</span><br><span class="line">        Dijstra(i);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>graph</tag>
        <tag>dijstra</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E6%A0%91%E9%93%BE%E5%89%96%E5%88%86/</url>
    <content><![CDATA[<p>dfs son[x],  top[x], x<br> logn</p>
<p>LCA</p>
<p>:</p>
<blockquote><p>n<br>n-1</p>
</blockquote>


<p>:</p>
<blockquote><p>i, son[i], top[i]</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>14 1<br>1 2<br>1 3<br>1 4<br>2 5<br>2 6<br>6 11<br>6 12<br>3 7<br>4 8<br>4 9<br>4 10<br>9 13<br>13 14<br>8 14 // m</p>
</blockquote>

<p></p>
<blockquote><p>1 4 1<br>2 6 2<br>3 7 3<br>4 9 1<br>5 0 5<br>6 11 2<br>7 0 3<br>8 0 8<br>9 13 1<br>10 0 10<br>11 0 2<br>12 0 12<br>13 14 1<br>14 0 1<br>4</p>
</blockquote>


<img src="/downloads/imgs/shulian.png" class="example" title="title exg" alt="alt exg">

<figure class="highlight c"><figcaption><span>shulian.cpp</span><a href="/downloads/code/shulian.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;edges[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> fa[N], dep[N], son[N], top[N], sz[N];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="comment">// get son vector</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f, <span class="keyword">int</span> d)</span></span>{</span><br><span class="line">    fa[x] = f, dep[x] = d, sz[x] = <span class="number">1</span>, son[x] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edges[x][i];</span><br><span class="line">        <span class="keyword">if</span>(y==f) <span class="keyword">continue</span>;</span><br><span class="line">        dfs(y, x, d+<span class="number">1</span>);</span><br><span class="line">        sz[x] += sz[y];</span><br><span class="line">        <span class="keyword">if</span>(sz[son[x]] &lt; sz[y]) son[x] = y;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// get top vector</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs2</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f, <span class="keyword">int</span> tp)</span></span>{</span><br><span class="line">    top[x] = tp; ID[x] = ++tot;</span><br><span class="line">    <span class="keyword">if</span>(son[x]) dfs2(son[x], x, tp);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edges[x][i];</span><br><span class="line">        <span class="keyword">if</span>(y==f || y == son[x]) <span class="keyword">continue</span>;</span><br><span class="line">        dfs2(y, x, y);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// ab</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">LCA</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>{</span><br><span class="line">    <span class="keyword">while</span>(top[a]!=top[b]){</span><br><span class="line">        <span class="keyword">if</span>(dep[top[a]] &gt; dep[top[b]]){</span><br><span class="line">            <span class="comment">// ID[top[a]], ID[a] </span></span><br><span class="line">            a = fa[top[a]];</span><br><span class="line">        }<span class="keyword">else</span> b = fa[top[b]];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> dep[a] &gt; dep[b] ? b: a;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        edges[a].push_back(b);</span><br><span class="line">        edges[b].push_back(a);</span><br><span class="line">    }</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">    dfs2(<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d %d %d\n"</span>, i, son[i], top[i]);</span><br><span class="line">    }</span><br><span class="line"><span class="comment">// 8 jumps to 8, fa[8] = 4</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, LCA(a, b));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>tree</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E5%8A%A8%E6%80%81%E5%B7%AE%E5%88%86/</url>
    <content><![CDATA[<p>nm<br>(1):1 x y d:xyd<br>(2):2 x:x</p>
<p>:</p>
<blockquote><p>nm<br>n-1<br>m<br>n,m&lt;=10^5</p>
</blockquote>


<p>:</p>
<blockquote><p>2</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>5 4<br>1 2<br>1 3<br>3 4<br>3 5<br>1 3 4 1<br>2 3<br>1 1 5 2<br>2 3</p>
</blockquote>

<p></p>
<blockquote><p>1<br>3</p>
</blockquote>

<p></p>
<blockquote><p></p>
</blockquote>


<figure class="highlight c"><figcaption><span>dongtaichafen.cpp</span><a href="/downloads/code/dongtaichafen.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// , </span></span><br><span class="line"><span class="comment">//  </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Two mistakes from LCA, (1) fa[N][S+2], (2) return after goUp.</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> S = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> fa[N][S+<span class="number">2</span>], dep[N];</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> Lid[N], Rid[N], tot;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> to, id;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt;edges[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f)</span></span>{</span><br><span class="line">    Lid[x] = ++tot;</span><br><span class="line">    fa[x][<span class="number">0</span>] = f, dep[x] = dep[f]+ <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edges[x][i].to;</span><br><span class="line">        <span class="keyword">if</span>(y==f)<span class="keyword">continue</span>;</span><br><span class="line">        dfs(y, x);</span><br><span class="line">    }</span><br><span class="line">    Rid[x] = tot;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goUp</span><span class="params">(<span class="keyword">int</span> &amp;x, <span class="keyword">int</span> <span class="built_in">step</span>)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=S;i++)</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">step</span> &amp; (<span class="number">1</span>&lt;&lt;i)) x = fa[x][i];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(dep[a] &lt; dep[b]) swap(a,b);</span><br><span class="line">    goUp(a, dep[a]-dep[b]);</span><br><span class="line">    <span class="keyword">if</span>(a==b ) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=S;i&gt;=<span class="number">0</span>;i--)</span><br><span class="line">        <span class="keyword">if</span>(fa[a][i] != fa[b][i])</span><br><span class="line">            a = fa[a][i], b= fa[b][i];</span><br><span class="line">    <span class="keyword">return</span> fa[a][<span class="number">0</span>];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Bit</span>{</span></span><br><span class="line">    LL C[N];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> d)</span></span>{</span><br><span class="line">        <span class="keyword">while</span>(x&lt;=tot){</span><br><span class="line">            C[x] += d;</span><br><span class="line">            x += x&amp;-x;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="function">LL <span class="title">sum</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(x){</span><br><span class="line">            res += C[x];</span><br><span class="line">            x -= x&amp;-x;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    }</span><br><span class="line">}<span class="built_in">bit</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n ,&amp;m);</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        edges[a].push_back({b, i});</span><br><span class="line">        edges[b].push_back({a, i});</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=S;j++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) fa[i][j] = fa[ fa[i][j<span class="number">-1</span>] ][j<span class="number">-1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> x, y, d;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a);</span><br><span class="line">        <span class="keyword">if</span>(a==<span class="number">1</span>){</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;x ,&amp;y, &amp;d);</span><br><span class="line">            <span class="keyword">int</span> c = lca(x, y);</span><br><span class="line"><span class="comment">//            printf("lca = %d %d %d\n", x, y, c);</span></span><br><span class="line">            <span class="keyword">int</span> e = fa[c][<span class="number">0</span>];</span><br><span class="line">            <span class="built_in">bit</span>.add(Lid[x], d);</span><br><span class="line">            <span class="built_in">bit</span>.add(Lid[y], d);</span><br><span class="line">            <span class="built_in">bit</span>.add(Lid[c], -d);</span><br><span class="line">            <span class="keyword">if</span>(e)<span class="built_in">bit</span>.add(Lid[e], -d); <span class="comment">// if is crucial!</span></span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span>{</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;x);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, <span class="built_in">bit</span>.sum(Rid[x]) - <span class="built_in">bit</span>.sum(Lid[x] <span class="number">-1</span>));</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>LCA</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E8%B7%AF%E5%BE%84%E6%9B%B4%E6%96%B0/</url>
    <content><![CDATA[<p> n m1</p>
<p>:</p>
<blockquote><p>nm<br>n-1<br>mabab1<br>n, m&lt;=10^5</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>5 3<br>1 2<br>1 3<br>3 4<br>3 5<br>1 4<br>1 5<br>2 3</p>
</blockquote>

<p></p>
<blockquote><p>1<br>3<br>1<br>1</p>
</blockquote>


<figure class="highlight c"><figcaption><span>lujinggengxin.cpp</span><a href="/downloads/code/lujinggengxin.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">300010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> S = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> path[N];</span><br><span class="line"><span class="keyword">int</span> ans[N], ID[N]; <span class="comment">//map node id to edge id</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> to, id;</span><br><span class="line">};</span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt;edges[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dis[N], dep[N];</span><br><span class="line"><span class="keyword">int</span> fa[N][S+<span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> cnt[N];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f, <span class="keyword">int</span> d)</span></span>{</span><br><span class="line">    fa[x][<span class="number">0</span>] = f, dep[x] = dep[f] +<span class="number">1</span>, dis[x] = d;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edges[x][i].to;</span><br><span class="line">        <span class="keyword">if</span>(y==f) <span class="keyword">continue</span>;</span><br><span class="line">        ID[y] = edges[x][i].id;  <span class="comment">// ID maps y to edge id;</span></span><br><span class="line">        dfs(y, x, d + <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goUp</span><span class="params">(<span class="keyword">int</span> &amp;x, <span class="keyword">int</span> <span class="built_in">step</span>)</span></span>{</span><br><span class="line"><span class="comment">//  starts from 0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=S;i++){</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">step</span> &amp; (<span class="number">1</span>&lt;&lt;i)) x = fa[x][i];</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(dep[x] &lt; dep[y]) swap(x, y);</span><br><span class="line">    goUp(x, dep[x]-dep[y]);</span><br><span class="line">    <span class="keyword">if</span>(x==y) <span class="keyword">return</span> x; <span class="comment">// easy to forget</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=S;i&gt;=<span class="number">0</span>;i--){</span><br><span class="line">        <span class="keyword">if</span>(fa[x][i] != fa[y][i])</span><br><span class="line">            x = fa[x][i], y= fa[y][i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> fa[x][<span class="number">0</span>];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edges[x][i].to;</span><br><span class="line">        <span class="keyword">if</span>(y==f) <span class="keyword">continue</span>;</span><br><span class="line">        DFS(y, x);</span><br><span class="line">        cnt[x] += cnt[y];</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// crucial</span></span><br><span class="line">    ans[ID[x]] = cnt[x];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        edges[a].push_back({b, i});</span><br><span class="line">        edges[b].push_back({a, i});</span><br><span class="line">    }</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=S;j++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">            fa[i][j] = fa[ fa[i][j<span class="number">-1</span>] ][j<span class="number">-1</span>];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        <span class="keyword">int</span> c = lca(a, b);</span><br><span class="line">        cnt[a]++, cnt[b]++, cnt[c]-=<span class="number">2</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    DFS(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++) <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>chafen</tag>
        <tag>LCA</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E6%9D%BE%E9%BC%A0%E7%9A%84%E6%96%B0%E5%AE%B6/</url>
    <content><![CDATA[<p>nn-1a_1a_2a_n</p>
<p></p>
<p>an</p>
<p>:</p>
<blockquote><p>n 2&lt;=n&lt;=300000;</p>
<p>n a1~an</p>
<p>n-1xyxy</p>
</blockquote>


<p>:</p>
<blockquote><p>nii</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>5<br>1 4 5 3 2<br>1 2<br>2 4<br>2 3<br>4 5</p>
</blockquote>

<p></p>
<blockquote><p>1<br>2<br>1<br>2<br>1</p>
</blockquote>

<p></p>
<blockquote><p>n a1~an </p>
</blockquote>


<figure class="highlight c"><figcaption><span>songshuhome.cpp</span><a href="/downloads/code/songshuhome.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">300010</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> S = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> path[N];</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;edges[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dis[N], dep[N];</span><br><span class="line"><span class="keyword">int</span> fa[N][S+<span class="number">1</span>];</span><br><span class="line"><span class="keyword">int</span> cnt[N];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f, <span class="keyword">int</span> d)</span></span>{</span><br><span class="line">    fa[x][<span class="number">0</span>] = f, dep[x] = dep[f] +<span class="number">1</span>, dis[x] = d;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edges[x][i];</span><br><span class="line">        <span class="keyword">if</span>(y==f) <span class="keyword">continue</span>;</span><br><span class="line">        dfs(y, x, d + <span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goUp</span><span class="params">(<span class="keyword">int</span> &amp;x, <span class="keyword">int</span> <span class="built_in">step</span>)</span></span>{</span><br><span class="line"><span class="comment">//  starts from 0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=S;i++){</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">step</span> &amp; (<span class="number">1</span>&lt;&lt;i)) x = fa[x][i];</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(dep[x] &lt; dep[y]) swap(x, y);</span><br><span class="line">    goUp(x, dep[x]-dep[y]);</span><br><span class="line">    <span class="keyword">if</span>(x==y) <span class="keyword">return</span> x; <span class="comment">// easy to forget</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=S;i&gt;=<span class="number">0</span>;i--){</span><br><span class="line">        <span class="keyword">if</span>(fa[x][i] != fa[y][i])</span><br><span class="line">            x = fa[x][i], y= fa[y][i];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> fa[x][<span class="number">0</span>];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edges[x][i];</span><br><span class="line">        <span class="keyword">if</span>(y==f) <span class="keyword">continue</span>;</span><br><span class="line">        DFS(y, x);</span><br><span class="line">        cnt[x] += cnt[y];</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;path[i]);</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        edges[a].push_back(b);</span><br><span class="line">        edges[b].push_back(a);</span><br><span class="line">    }</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=S;j++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">            fa[i][j] = fa[ fa[i][j<span class="number">-1</span>] ][j<span class="number">-1</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//    for(int i=1;i&lt;=n;i++) printf("%d ", fa[i][0]);</span></span><br><span class="line"><span class="comment">//    puts("");</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++){</span><br><span class="line">        a = path[i], b = path[i+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span> c = lca(a, b);</span><br><span class="line"><span class="comment">//        printf("%d %d %d\n", a, b, c);</span></span><br><span class="line">        cnt[a]++, cnt[b]++, cnt[c]--, cnt[fa[c][<span class="number">0</span>]]--;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    DFS(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=n;i++) cnt[path[i]]--; <span class="comment">//why?</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, cnt[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>chafen</tag>
        <tag>LCA</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E6%A0%91%E4%B8%8A%E4%B8%A4%E7%82%B9%E8%B7%9D%E7%A6%BB/</url>
    <content><![CDATA[<p><br>:</p>
<blockquote><p>nm<br>n-1abcabc<br>mmabab<br>nm10^5;  10^4.</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>5 4<br>1 2 1<br>1 3 2<br>2 4 3<br>2 5 4<br>1 2<br>2 3<br>4 5<br>3 4</p>
</blockquote>

<p></p>
<blockquote><p>1<br>3<br>7<br>6</p>
</blockquote>


<figure class="highlight c"><figcaption><span>shuliangdian.cpp</span><a href="/downloads/code/shuliangdian.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>, S = <span class="number">17</span>;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> fa[N][S+<span class="number">2</span>]; <span class="comment">//crucial!</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> {</span></span><br><span class="line">    <span class="keyword">int</span> to, val;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt; edges[N];</span><br><span class="line"><span class="keyword">int</span> dep[N], dis[N];</span><br><span class="line"></span><br><span class="line"><span class="comment">//f can't be -1, because of dep[f];</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f, <span class="keyword">int</span> d)</span></span>{</span><br><span class="line">    fa[x][<span class="number">0</span>] = f, dep[x] = dep[f] + <span class="number">1</span>, dis[x] = d;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt; edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> j = edges[x][i].to;</span><br><span class="line">        <span class="keyword">if</span>(j==f) <span class="keyword">continue</span>;</span><br><span class="line">        dfs(j, x, d + edges[x][i].val);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">goUp</span><span class="params">(<span class="keyword">int</span> &amp;x, <span class="keyword">int</span> <span class="built_in">step</span>)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=S;i++)</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">step</span> &amp; (<span class="number">1</span>&lt;&lt;i)) x = fa[x][i];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">LCA</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(dep[a]&lt;dep[b]) swap(a, b);</span><br><span class="line">    goUp(a, dep[a] - dep[b]);</span><br><span class="line">    <span class="keyword">if</span>(a==b) <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=S;i&gt;=<span class="number">0</span>;i--){</span><br><span class="line">        <span class="keyword">if</span>(fa[a][i] != fa[b][i]){</span><br><span class="line">            a = fa[a][i];  b = fa[b][i];</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> fa[a][<span class="number">0</span>];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">int</span> a, b, c;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">        edges[a].push_back((Node){b, c});</span><br><span class="line">        edges[b].push_back((Node){a, c});</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=S;j++){</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">            fa[i][j] = fa[ fa[i][j<span class="number">-1</span>] ][j<span class="number">-1</span>];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        <span class="keyword">int</span> c = LCA(a, b);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dis[a] + dis[b] - <span class="number">2</span>*dis[c]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>LCA</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E6%89%BE%E8%B7%AF%E5%BE%84/</url>
    <content><![CDATA[<p>nm</p>
<p>0 x y: xy</p>
<p>1 x: 0x</p>
<p>:</p>
<blockquote><p>nm<br>n-1<br>nv<br>m</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>6 5<br>0 1<br>1 2<br>0 3<br>3 4<br>5 3<br>7 -5 100 20 -5 -7<br>1 1<br>1 3<br>0 2 -1<br>1 1<br>1 5</p>
</blockquote>

<p></p>
<blockquote><p>102<br>27<br>2<br>20</p>
</blockquote>


<figure class="highlight c"><figcaption><span>zhaolujing.cpp</span><a href="/downloads/code/zhaolujing.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;edges[N];</span><br><span class="line"><span class="keyword">int</span> val[N]; <span class="comment">// number on this node</span></span><br><span class="line"><span class="keyword">int</span> Lid[N], Rid[N], tot;</span><br><span class="line"><span class="keyword">int</span> Line[N]; <span class="comment">//map from dfs_id to original id</span></span><br><span class="line">LL dis[N]; <span class="comment">// accumulated number from root till this node</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f, LL d)</span></span>{</span><br><span class="line">    Lid[x] = ++tot; dis[x] = d; Line[tot] = x;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> j = edges[x][i];</span><br><span class="line">        <span class="keyword">if</span>(j==f) <span class="keyword">continue</span>;</span><br><span class="line">        dfs(j, x, d + val[j]);</span><br><span class="line">    }</span><br><span class="line">    Rid[x] = tot;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> L, R;</span><br><span class="line">    LL mx, add;</span><br><span class="line">}tree[N&lt;&lt;<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">up</span><span class="params">(<span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    tree[p].mx = <span class="built_in">max</span>(tree[p&lt;&lt;<span class="number">1</span>].mx, tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].mx);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    tree[p].L = L, tree[p].R = R;</span><br><span class="line">    tree[p].add = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(L==R){</span><br><span class="line">        tree[p].mx = dis[Line[L]];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = (L + R )&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(L, mid, p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    build(mid+<span class="number">1</span>, R, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    up(p);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">down</span><span class="params">(<span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    LL &amp;t = tree[p].add;</span><br><span class="line">    <span class="keyword">if</span>(t==<span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>].add += t;</span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>].mx += t;</span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].add += t;</span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].mx += t;</span><br><span class="line">    t = <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> x, <span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(tree[p].L == L &amp;&amp; tree[p].R ==R){</span><br><span class="line">        tree[p].add += x;</span><br><span class="line">        tree[p].mx += x;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    down(p);</span><br><span class="line">    <span class="keyword">int</span> mid = (tree[p].L + tree[p].R )&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(R&lt;=mid) update(L, R, x, p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(L&gt;mid) update(L, R, x, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span>{</span><br><span class="line">        update(L, mid, x, p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">        update(mid+<span class="number">1</span>, R, x, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">    up(p);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(tree[p].L == L &amp;&amp; tree[p].R ==R ){</span><br><span class="line">        <span class="keyword">return</span> tree[p].mx;</span><br><span class="line">    }</span><br><span class="line">    down(p);</span><br><span class="line">    <span class="keyword">int</span> mid = (tree[p].L + tree[p].R) &gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(R&lt;=mid) <span class="keyword">return</span> query(L,R, p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(L&gt;mid) <span class="keyword">return</span> query(L, R, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">max</span>(query(L, mid, p&lt;&lt;<span class="number">1</span>), query(mid+<span class="number">1</span>, R, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>));</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) edges[i].<span class="built_in">clear</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        edges[a].push_back(b);</span><br><span class="line">        edges[b].push_back(a);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;val[i]);</span><br><span class="line">    }</span><br><span class="line"><span class="comment">//  dfs order</span></span><br><span class="line">    dfs(<span class="number">0</span>, <span class="number">-1</span>, val[<span class="number">0</span>]);</span><br><span class="line">    build(<span class="number">1</span>, tot, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> c;</span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        <span class="keyword">if</span>(a==<span class="number">0</span>){</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;c);</span><br><span class="line">            update(Lid[b], Rid[b], c-val[b], <span class="number">1</span>); <span class="comment">// segment tree supports dfs_id manipulation</span></span><br><span class="line">            val[b] = c;  <span class="comment">// original id</span></span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(Lid[b], Rid[b], <span class="number">1</span>));</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>seg_tree</tag>
        <tag>tree</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E8%8B%B9%E6%9E%9C%E6%A0%91/</url>
    <content><![CDATA[<p><br><br><br>C x x()<br>Q x x<br>1</p>
<p>:</p>
<blockquote><p>N<br>n-1,2u,v,uv<br>M<br>M,,Q xC x<br>n,m 10^5;</p>
</blockquote>


<p>:</p>
<blockquote><p>Q x,,</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>3<br>1 2<br>1 3<br>3<br>Q 1<br>C 2<br>Q 1</p>
</blockquote>

<p></p>
<blockquote><p>3<br>2</p>
</blockquote>

<p>:</p>
<blockquote><p>1n 1 m<br>1 x:x 10 01<br>2 x:x</p>
</blockquote>


<figure class="highlight c"><figcaption><span>pingguoshu.cpp</span><a href="/downloads/code/pingguoshu.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;edges[M];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> L[M], R[M], tot;</span><br><span class="line"><span class="keyword">int</span> val[M];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Bit</span>{</span></span><br><span class="line">    <span class="keyword">int</span> C[M];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> t)</span></span>{</span><br><span class="line">        <span class="keyword">while</span>(x&lt;=n){</span><br><span class="line">            C[x] += t;</span><br><span class="line">            x += x&amp;-x;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(x){</span><br><span class="line">            res += C[x];</span><br><span class="line">            x -= x&amp;-x;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    }</span><br><span class="line">}<span class="built_in">bit</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f)</span></span>{</span><br><span class="line">    L[x] = ++tot;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edges[x][i];</span><br><span class="line">        <span class="keyword">if</span>(y==f) <span class="keyword">continue</span>;</span><br><span class="line">        dfs(y, x);</span><br><span class="line">    }</span><br><span class="line">    R[x] = tot;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++){</span><br><span class="line">        <span class="keyword">int</span> a, b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        edges[a].push_back({b});</span><br><span class="line">        edges[b].push_back({a});</span><br><span class="line">        <span class="built_in">bit</span>.add(i,<span class="number">1</span>);</span><br><span class="line">        val[i] = <span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    val[n] = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">bit</span>.add(n, <span class="number">1</span>);</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//L[x], [L[x], R[x]]</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;m);</span><br><span class="line">    <span class="keyword">char</span> s[<span class="number">10</span>];</span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//  </span></span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s%d"</span>, s, &amp;x);</span><br><span class="line">        <span class="keyword">if</span>(s[<span class="number">0</span>]==<span class="string">'C'</span>) {</span><br><span class="line">            <span class="built_in">bit</span>.add(L[x], -val[x]);</span><br><span class="line">            val[x] = -val[x];</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> {</span><br><span class="line">            <span class="keyword">int</span> m = <span class="built_in">bit</span>.sum(R[x]) - <span class="built_in">bit</span>.sum(L[x]<span class="number">-1</span>);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, m);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>tree</tag>
        <tag>bit_tree</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E6%A0%91%E7%9A%84%E7%9B%B4%E5%BE%84/</url>
    <content><![CDATA[<p></p>
<p>:</p>
<blockquote><p>n;<br>n1a,b,cabc</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>6<br>0 1 3<br>1 5 4<br>1 2 2<br>2 3 1<br>2 4 5</p>
</blockquote>

<p></p>
<blockquote><p>11</p>
</blockquote>

<p></p>
<blockquote><p>csacademy.com/app/graph_editor</p>
</blockquote>


<figure class="highlight c"><figcaption><span>tree_radius1.cpp</span><a href="/downloads/code/tree_radius1.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">100010</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> to, val;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt;edges[M];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ans = <span class="number">0</span>, R=<span class="number">-1</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f, <span class="keyword">int</span> dis)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(dis &gt; ans) {ans = dis, R = x;}</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edges[x][i].to;</span><br><span class="line">        <span class="keyword">if</span>(y==f) <span class="keyword">continue</span>;</span><br><span class="line">        dfs(y, x, dis + edges[x][i].val);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++){</span><br><span class="line">        <span class="keyword">int</span> a, b, c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">        edges[a].push_back({b,c});</span><br><span class="line">        edges[b].push_back({a,c});</span><br><span class="line">    }</span><br><span class="line">    dfs(<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>);</span><br><span class="line">    dfs(R, <span class="number">-1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>tree_radius2.cpp</span><a href="/downloads/code/tree_radius2.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">100010</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> to, val;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt;edges[M];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> fir = <span class="number">0</span>, sec = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edges[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edges[x][i].to;</span><br><span class="line">        <span class="keyword">if</span>(y==f) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">int</span> t= dfs(y, x) + edges[x][i].val;</span><br><span class="line">        <span class="keyword">if</span>(t &gt;fir){</span><br><span class="line">            sec = fir;</span><br><span class="line">            fir = t;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(t &gt; sec)</span><br><span class="line">            sec = t;</span><br><span class="line">    }</span><br><span class="line">    ans = <span class="built_in">max</span>(ans, fir+sec);</span><br><span class="line">    <span class="keyword">return</span> fir;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++){</span><br><span class="line">        <span class="keyword">int</span> a, b, c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">        edges[a].push_back({b,c});</span><br><span class="line">        edges[b].push_back({a,c});</span><br><span class="line">    }</span><br><span class="line">    dfs(<span class="number">0</span>, <span class="number">-1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>tree</tag>
      </tags>
  </entry>
  <entry>
    <title>ST</title>
    <url>/blog/ST%E8%A1%A8/</url>
    <content><![CDATA[<p>nAm[L,R]</p>
<p>:</p>
<blockquote><p>n,m,<br>nA<br>mLR</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>5 3<br>4 5 2 3 8<br>3 4<br>3 5<br>2 4</p>
</blockquote>

<p></p>
<blockquote><p>3<br>8<br>5</p>
</blockquote>

<p></p>
<blockquote><p>n,m&lt;=10^5</p>
</blockquote>


<figure class="highlight c"><figcaption><span>st1.cpp</span><a href="/downloads/code/st1.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> S[N][<span class="number">17</span>];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> res = a[L];</span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">step</span> = R-L +<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;(<span class="number">1</span>&lt;&lt;i)&lt;=<span class="built_in">step</span>;i++){</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">step</span> &amp; (<span class="number">1</span>&lt;&lt;i)){</span><br><span class="line">            res = <span class="built_in">max</span>(res, S[L][i]);</span><br><span class="line">            L += (<span class="number">1</span>&lt;&lt;i);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">        S[i][<span class="number">0</span>] = a[i];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;(<span class="number">1</span>&lt;&lt;j)&lt;=n;j++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i+(<span class="number">1</span>&lt;&lt;j)<span class="number">-1</span>&lt;=n;i++) {</span><br><span class="line">            <span class="keyword">int</span> t = i + (<span class="number">1</span>&lt;&lt;j<span class="number">-1</span>);</span><br><span class="line">            S[i][j] = <span class="built_in">max</span>(S[i][j<span class="number">-1</span>], S[t][j<span class="number">-1</span>]);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="keyword">int</span> L, R;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;L, &amp;R);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(L, R));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>st2.cpp</span><a href="/downloads/code/st2.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> S[N][<span class="number">17</span>];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> k=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(L+(<span class="number">1</span>&lt;&lt;k)&lt;R-(<span class="number">1</span>&lt;&lt;k)+<span class="number">1</span>) k++;</span><br><span class="line">    res = <span class="built_in">max</span>(S[L][k], S[R-(<span class="number">1</span>&lt;&lt;k)+<span class="number">1</span>][k]);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">        S[i][<span class="number">0</span>] = a[i];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;(<span class="number">1</span>&lt;&lt;j)&lt;=n;j++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i+(<span class="number">1</span>&lt;&lt;j)<span class="number">-1</span>&lt;=n;i++) {</span><br><span class="line">            <span class="keyword">int</span> t = i + (<span class="number">1</span>&lt;&lt;j<span class="number">-1</span>);</span><br><span class="line">            S[i][j] = <span class="built_in">max</span>(S[i][j<span class="number">-1</span>], S[t][j<span class="number">-1</span>]);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="keyword">int</span> L, R;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;L, &amp;R);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(L, R));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>st3.cpp</span><a href="/downloads/code/st3.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> S[N][<span class="number">17</span>];</span><br><span class="line"><span class="keyword">int</span> Log[N];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> k= Log[R-L+<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">int</span> res = <span class="built_in">max</span>(S[L][k], S[R-(<span class="number">1</span>&lt;&lt;k)+<span class="number">1</span>][k]);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">        S[i][<span class="number">0</span>] = a[i];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    Log[<span class="number">0</span>] =<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) Log[i] = Log[i&gt;&gt;<span class="number">1</span>] + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;(<span class="number">1</span>&lt;&lt;j)&lt;=n;j++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i+(<span class="number">1</span>&lt;&lt;j)<span class="number">-1</span>&lt;=n;i++) {</span><br><span class="line">            <span class="keyword">int</span> t = i + (<span class="number">1</span>&lt;&lt;j<span class="number">-1</span>);</span><br><span class="line">            S[i][j] = <span class="built_in">max</span>(S[i][j<span class="number">-1</span>], S[t][j<span class="number">-1</span>]);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="keyword">int</span> L, R;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;L, &amp;R);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(L, R));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>data_structure</tag>
        <tag>beizeng</tag>
      </tags>
  </entry>
  <entry>
    <title>MinMax</title>
    <url>/blog/MinMax/</url>
    <content><![CDATA[<img src="/downloads/imgs/minmax.png" class="example" title="title exg" alt="alt exg">

<p>:</p>
<blockquote><p>n k<br>na_i</p>
</blockquote>


<p>:</p>
<blockquote><p>n-k+1bc</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>8 3<br>1 3 -1 -3 5 3 6 7</p>
</blockquote>

<p></p>
<blockquote><p>-1 -3 -3 -3 3 3<br>3 3 5 5 6 7</p>
</blockquote>

<p></p>
<blockquote><p>n&lt;=10^6</p>
</blockquote>


<figure class="highlight c"><figcaption><span>minmax.cpp</span><a href="/downloads/code/minmax.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1000010</span>;</span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> q[N];</span><br><span class="line"><span class="keyword">int</span> ans[N];</span><br><span class="line"><span class="keyword">int</span> tt=<span class="number">0</span>, rr = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, k;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;k);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;a[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">while</span>(tt&lt;=rr &amp;&amp; a[q[rr]]&gt;=a[i]) rr--;</span><br><span class="line">        q[++rr] = i;</span><br><span class="line">        <span class="keyword">while</span>(tt&lt;=rr &amp;&amp; i-q[tt]&gt;=k) tt++;</span><br><span class="line">        ans[i] = q[tt];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=k;i&lt;=n;i++) <span class="built_in">printf</span>(<span class="string">"%d "</span>, a[ans[i]]);</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line"></span><br><span class="line">    tt =<span class="number">0</span>, rr = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">while</span>(tt&lt;=rr &amp;&amp; a[q[rr]]&lt;=a[i]) rr--;</span><br><span class="line">        q[++rr] = i;</span><br><span class="line">        <span class="keyword">while</span>(tt&lt;=rr &amp;&amp; i-q[tt]&gt;=k) tt++;</span><br><span class="line">        ans[i] = q[tt];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=k;i&lt;=n;i++) <span class="built_in">printf</span>(<span class="string">"%d "</span>, a[ans[i]]);</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>monotone_queue</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E6%9C%80%E5%A4%A7%E9%9D%A2%E7%A7%AF/</url>
    <content><![CDATA[<p>n1$h_1,h_2,h_n$</p>
<p>:</p>
<blockquote><p>n<br>n$h_i$</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>7<br>2 1 4 5 1 3 3</p>
</blockquote>

<p></p>
<blockquote><p>8</p>
</blockquote>

<p></p>
<blockquote><p>n&lt;=10^5.</p>
</blockquote>


<figure class="highlight c"><figcaption><span>zuidamianji.cpp</span><a href="/downloads/code/zuidamianji.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> h[N];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> L[N], R[N];</span><br><span class="line"><span class="keyword">int</span> stk[N], t=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;h[i]);</span><br><span class="line"></span><br><span class="line">    stk[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">        <span class="keyword">while</span> (t &gt; <span class="number">0</span> &amp;&amp; h[stk[t]] &gt;= h[i]) t--;</span><br><span class="line">        L[i] = stk[t];</span><br><span class="line">        stk[++t] = i;</span><br><span class="line">    }</span><br><span class="line">    stk[<span class="number">0</span>] = n+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=n;i&gt;=<span class="number">1</span>;i--){</span><br><span class="line">        <span class="keyword">while</span>(t&gt;<span class="number">0</span> &amp;&amp; h[stk[t]] &gt;= h[i]) t--;</span><br><span class="line">        R[i] = stk[t];</span><br><span class="line">        stk[++t] = i;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//    for(int i=1;i&lt;=n;i++) printf("%d ", L[i]);</span></span><br><span class="line"><span class="comment">//    puts("");</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    for(int i=1;i&lt;=n;i++) printf("%d ", R[i]);</span></span><br><span class="line"><span class="comment">//    puts("");</span></span><br><span class="line"></span><br><span class="line">    LL res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        res = <span class="built_in">max</span>(res, <span class="number">1L</span>L * (R[i]-L[i] <span class="number">-1</span>) * h[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, res);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>monotone_stack</tag>
      </tags>
  </entry>
  <entry>
    <title>Quick Sort Template</title>
    <url>/blog/hello-world/</url>
    <content><![CDATA[<p>Quick sort is one of the most fundamental algorithms.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Test"><a href="#Test" class="headerlink" title="Test"></a>Test</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo g &amp;&amp; hexo s -p 8001</span><br></pre></td></tr></table></figure>
<h3 id="Deploy"><a href="#Deploy" class="headerlink" title="Deploy"></a>Deploy</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo g &amp;&amp; hexo d</span><br></pre></td></tr></table></figure>

<a id="more"></a>
<h3 id="quick-sort"><a href="#quick-sort" class="headerlink" title="quick sort"></a>quick sort</h3><figure class="highlight c"><figcaption><span>quick_sort.cpp</span><a href="/downloads/code/quick_sort.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100005</span>;</span><br><span class="line"><span class="keyword">int</span> q[N];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quick_sort</span><span class="params">(<span class="keyword">int</span> q[], <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(l&gt;=r) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">int</span> x = q[l], i=l<span class="number">-1</span>, j = r+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(i&lt;j){</span><br><span class="line">        <span class="keyword">do</span> i++; <span class="keyword">while</span>(q[i]&lt;x);</span><br><span class="line">        <span class="keyword">do</span> j--; <span class="keyword">while</span>(q[j]&gt;x);</span><br><span class="line">        <span class="keyword">if</span>(i&lt;j) swap(q[i], q[j]);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    quick_sort(q, l ,j);</span><br><span class="line">    quick_sort(q, j+<span class="number">1</span>, r);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;q[i]);</span><br><span class="line">    quick_sort(q, <span class="number">0</span>, n<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) <span class="built_in">printf</span>(<span class="string">"%d "</span>, q[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>template</category>
      </categories>
      <tags>
        <tag>basic_algo</tag>
      </tags>
  </entry>
  <entry>
    <title>DeepSnake</title>
    <url>/blog/DeepSnake/</url>
    <content><![CDATA[<h2 id="Traditional-snake-algorithms"><a href="#Traditional-snake-algorithms" class="headerlink" title="Traditional snake algorithms:"></a>Traditional snake algorithms:</h2><blockquote><p>given an initial contour, traditional snake algorithms treat the coordinates<br>of the vertices as a set of variables and optimize an energy functional with respect to these variables.<br>Active contour models could optimize the contour to the object boundary. The energy functional is typically<br>nonconvex, the deformation process tend to find local optimal solutions.</p>
</blockquote>

<h2 id="Network-Architecture"><a href="#Network-Architecture" class="headerlink" title="Network Architecture:"></a>Network Architecture:</h2><blockquote><p>Deep snake consists of three parts: <span style="color:red">a backbone</span>, <span style="color:red">a fusion block</span> and <span style="color:red">a prediction head</span>. The backbone is comprised<br> of 8 CirConvBn-ReLU layers and <em>uses residual skip connections for all layers</em>. The fusion block aims to fuse<br> the information across all contour points at multiple scales.</p>
</blockquote>
<img src="/downloads/imgs/deepsnake_architecture.jpg" class="example" title="title exg" alt="alt exg">

<h2 id="Detail"><a href="#Detail" class="headerlink" title="Detail:"></a>Detail:</h2><blockquote><p>Add deep snake to an object detection model. The detector first produces objet boxes that are used to construct<br>diamond contours. Then deep snake deforms the diamond vertices to object extreme points, which are used to<br>construct octagon contours. Finally, the approach takes <strong>octagons as initial contours and performs iterative<br>contour deformation to obtain the object shape</strong>.</p>
</blockquote>

<h2 id="Initial-contour-proposal"><a href="#Initial-contour-proposal" class="headerlink" title="Initial contour proposal:"></a>Initial contour proposal:</h2><blockquote><p>The octagon is formed by four extreme points, which are top, leftmost, bottom, rightmost pixels in an object,<br>given a detected object box, extract four points centered at top, left, bottom, right box borders and then<br>connect them to get a diamond contour.</p>
</blockquote>

<h2 id="Optimization"><a href="#Optimization" class="headerlink" title="Optimization:"></a>Optimization:</h2><blockquote><p>Regressing the offsets in one pass in challenging, especially for vertices far away from the object. <strong>Use an<br>iterative optimization fashion</strong>. Solve the localization errors from the detector.</p>
</blockquote>

<h2 id="Multi-component-objects"><a href="#Multi-component-objects" class="headerlink" title="Multi-component objects:"></a>Multi-component objects:</h2><blockquote><p>use RoIAlign to extract a feature map and adds a detector branch on the feature map to produce the component boxes.</p>
</blockquote>

<img src="/downloads/imgs/RoIAlign.png" class="example" title="title exg" alt="alt exg">




]]></content>
      <categories>
        <category>Computer Vision</category>
      </categories>
      <tags>
        <tag>Instance Segmentation</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E5%8A%A8%E6%80%81%E5%8C%BA%E9%97%B4%E6%B1%82%E5%92%8C/</url>
    <content><![CDATA[<p>nm</p>
<p>:</p>
<blockquote><p>nmnm<br>n<br>m<br>Add x y a[x,y]aa[-10000,10000]<br>Query x y[x,y]</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>5 5<br>1 2 3 4 5<br>Query 1 5<br>Add 1 3 5<br>Query 3 5<br>Add 3 5 10<br>Query 1 5</p>
</blockquote>

<p></p>
<blockquote><p>15<br>17<br>60</p>
</blockquote>

<p></p>
<blockquote><p>n,m&lt;=10^5</p>
</blockquote>


<figure class="highlight c"><figcaption><span>lazy_seg_tree.cpp</span><a href="/downloads/code/lazy_seg_tree.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> A[N];</span><br><span class="line"><span class="keyword">char</span> s[<span class="number">100</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> L, R;</span><br><span class="line">    LL tag, sum;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">len</span><span class="params">()</span></span>{ <span class="keyword">return</span> (R-L+<span class="number">1</span>);}</span><br><span class="line"></span><br><span class="line">}tree[N&lt;&lt;<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">up</span><span class="params">(<span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    tree[p].sum = tree[p&lt;&lt;<span class="number">1</span>].sum + tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].sum;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    tree[p].L = L, tree[p].R =R;</span><br><span class="line">    <span class="keyword">if</span>(L==R){</span><br><span class="line">        tree[p].sum = A[L];</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = L+R&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(L, mid, p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    build(mid+<span class="number">1</span>, R, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    up(p);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">down</span><span class="params">(<span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    LL &amp;t = tree[p].tag;</span><br><span class="line">    <span class="keyword">if</span>(t==<span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>].tag += t;</span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>].sum += t * tree[p&lt;&lt;<span class="number">1</span>].len();</span><br><span class="line"></span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].tag += t;</span><br><span class="line">    tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].sum += t*tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>].len();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">    t = <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> x, <span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(tree[p].L ==L &amp;&amp; tree[p].R ==R){</span><br><span class="line">        tree[p].tag += x;</span><br><span class="line">        tree[p].sum += tree[p].len() * x; <span class="comment">// forget;</span></span><br><span class="line">        <span class="comment">//forget</span></span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    }</span><br><span class="line">    down(p);</span><br><span class="line">    <span class="keyword">int</span> mid = tree[p].L + tree[p].R &gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(R&lt;=mid) update(L, R, x, p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(L&gt;mid) update(L, R, x, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> {</span><br><span class="line">        update(L, mid, x, p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">        update(mid+<span class="number">1</span>, R, x, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">    up(p);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(tree[p].L==L &amp;&amp; tree[p].R==R){</span><br><span class="line">        <span class="keyword">return</span> tree[p].sum;</span><br><span class="line">    }</span><br><span class="line"><span class="comment">//    forget</span></span><br><span class="line">    down(p);</span><br><span class="line">    <span class="keyword">int</span> mid = tree[p].L + tree[p].R &gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(R&lt;=mid) <span class="keyword">return</span> query(L, R, p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(L&gt;mid) <span class="keyword">return</span> query(L, R, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">return</span> query(L, mid, p&lt;&lt;<span class="number">1</span>) + query(mid+<span class="number">1</span>, R, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;A[i]);</span><br><span class="line">    build(<span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, s);</span><br><span class="line">        <span class="keyword">if</span>(s[<span class="number">0</span>]==<span class="string">'A'</span>){</span><br><span class="line">            <span class="keyword">int</span> a, b, c;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">            update(a, b, c, <span class="number">1</span>);</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="keyword">int</span> a, b;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, query(a, b, <span class="number">1</span>));</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>chunji_nowcoder</tag>
        <tag>lazy_tag</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E5%8C%BA%E9%97%B4%E7%BB%9F%E8%AE%A1/</url>
    <content><![CDATA[<p>1nAm[L,R]x</p>
<p>:</p>
<blockquote><p>2nm<br>n<br>m3L,R,x</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>5 3<br>4 3 2 5 1<br>1 2 3<br>2 4 3<br>3 5 4</p>
</blockquote>

<p></p>
<blockquote><p>1<br>2<br>2</p>
</blockquote>

<p></p>
<blockquote><p>n,m&lt;=10^5</p>
</blockquote>


<figure class="highlight c"><figcaption><span>qujiantongji_fenkuai.cpp</span><a href="/downloads/code/qujiantongji_fenkuai.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> A[N], B[N];</span><br><span class="line"><span class="keyword">int</span> S;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> ka = L / S, kb = R / S;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (ka == kb) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = L; i &lt;= R; i++) {</span><br><span class="line">            res += A[i] &lt;= x;</span><br><span class="line">        }</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = L; i &lt; (ka + <span class="number">1</span>) * S; i++)</span><br><span class="line">            res += A[i] &lt;= x;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = ka + <span class="number">1</span>; i &lt; kb; i++) {</span><br><span class="line">            res += upper_bound(B + i * S, B + i * S + S, x) - (B + i * S);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = kb * S; i &lt;= R; i++)</span><br><span class="line">            res += A[i] &lt;= x;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;A[i]);</span><br><span class="line">        B[i] = A[i];</span><br><span class="line">    }</span><br><span class="line">    S = <span class="built_in">sqrt</span>(n*<span class="built_in">log</span>(n)/<span class="built_in">log</span>(<span class="number">2</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=S;i+S<span class="number">-1</span>&lt;=n;i+=S){</span><br><span class="line">        sort(B+i, B+i+S);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="keyword">int</span> a, b, x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;x);</span><br><span class="line">        <span class="keyword">int</span> ans = query(a, b, x);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>qujiantongji2.cpp</span><a href="/downloads/code/qujiantongji2.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> A[N], sum[<span class="number">320</span>][N];</span><br><span class="line"><span class="keyword">int</span> S;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> x)</span> </span>{</span><br><span class="line">    <span class="keyword">int</span> ka = L / S, kb = R / S;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (ka == kb) {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = L; i &lt;= R; i++) {</span><br><span class="line">            res += A[i] &lt;= x;</span><br><span class="line">        }</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = L; i &lt; (ka + <span class="number">1</span>) * S; i++)</span><br><span class="line">            res += A[i] &lt;= x;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = ka + <span class="number">1</span>; i &lt; kb; i++) {</span><br><span class="line">            res += sum[i][x];</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = kb * S; i &lt;= R; i++)</span><br><span class="line">            res += A[i] &lt;= x;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    S = <span class="built_in">sqrt</span>(n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;A[i]);</span><br><span class="line">        sum[i/S][A[i]] ++;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n/S; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">            sum[i][j] += sum[i][j<span class="number">-1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="keyword">int</span> a, b, x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;x);</span><br><span class="line">        <span class="keyword">int</span> ans = query(a, b, x);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>qujiantongji_fenwick_tree.cpp</span><a href="/downloads/code/qujiantongji_fenwick_tree.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> A[N];</span><br><span class="line"><span class="keyword">int</span> C[N];</span><br><span class="line"><span class="keyword">int</span> pre[N];</span><br><span class="line"><span class="keyword">int</span> ans[N];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> x, id, flag;</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt;query[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> a)</span></span>{</span><br><span class="line">    <span class="keyword">while</span>(x&lt;=n){</span><br><span class="line">        C[x] += a;</span><br><span class="line">        x += x&amp;-x;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(x){</span><br><span class="line">        res+= C[x];</span><br><span class="line">        x-= x&amp;-x;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) pre[i] = pre[i<span class="number">-1</span>] + A[i];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        C[i] = pre[i] - pre[i-(i&amp;-i)];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;A[i]);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="keyword">int</span> L, R, x;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;L, &amp;R, &amp;x);</span><br><span class="line">        query[R].push_back((Node){x, i, <span class="number">1</span>});</span><br><span class="line">        query[L<span class="number">-1</span>].push_back((Node){x, i, <span class="number">-1</span>});</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="comment">//    for(int i=1;i&lt;=n;i++) add(A[i], 1);  wrong</span></span><br><span class="line"><span class="comment">//   </span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        add(A[i], <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;query[i].<span class="built_in">size</span>();j++){</span><br><span class="line">            ans[query[i][j].id] += query[i][j].flag * sum(query[i][j].x);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"><span class="comment">//    ,</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>data_structure</tag>
        <tag>fenwick_tree_offline</tag>
        <tag>seg_tree</tag>
        <tag>block</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E6%9C%80%E4%BC%98%E8%B4%B8%E6%98%93%E5%88%86%E5%9D%97/</url>
    <content><![CDATA[<p>C n  1  n  i  i+1  n </p>
<p>C</p>
<p>C</p>
<p> a  b </p>
<p></p>
<p>:</p>
<blockquote><p>nmnm<br>nn<br>ma,baba&lt;b</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>6 3<br>2 1 3 6 4 5<br>1 2<br>2 4<br>1 6</p>
</blockquote>

<p></p>
<blockquote><p>0<br>5<br>5</p>
</blockquote>

<p></p>
<blockquote><p>12<br>2424<br>1624</p>
</blockquote>


<figure class="highlight c"><figcaption><span>zuiyoumaoyi_fenkuai.cpp</span><a href="/downloads/code/zuiyoumaoyi_fenkuai.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">320</span>, M = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> S;</span><br><span class="line"><span class="keyword">int</span> A[M];</span><br><span class="line"><span class="keyword">int</span> V[N], Mi[N], Mx[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> ka = L/S, kb= R/S;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>, mi = A[L];</span><br><span class="line">    <span class="keyword">if</span>(ka==kb){</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=L+<span class="number">1</span>;i&lt;=R;i++){</span><br><span class="line">            res = <span class="built_in">max</span>(res, A[i] - mi);</span><br><span class="line">            mi = <span class="built_in">min</span>(mi, A[i]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span>{</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=L+<span class="number">1</span>;i&lt;(ka+<span class="number">1</span>)*S;i++){</span><br><span class="line">            res = <span class="built_in">max</span>(res, A[i] - mi);</span><br><span class="line">            mi = <span class="built_in">min</span>(mi, A[i]);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=ka+<span class="number">1</span>;i&lt;kb;i++){</span><br><span class="line">            res = <span class="built_in">max</span>(res, <span class="built_in">max</span>(V[i], Mx[i] - mi));</span><br><span class="line">            mi = <span class="built_in">min</span>(mi, Mi[i]);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=kb*S;i&lt;=R;i++){</span><br><span class="line">            res = <span class="built_in">max</span>(res, A[i] - mi);</span><br><span class="line">            mi = <span class="built_in">min</span>(mi, A[i]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;A[i]);</span><br><span class="line">    S = <span class="built_in">sqrt</span>(n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n/S; i++){</span><br><span class="line">        V[i] = <span class="number">0</span>;</span><br><span class="line">        Mi[i] = <span class="number">1e9</span>;</span><br><span class="line">        Mx[i] = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">int</span> x = i/S;</span><br><span class="line">        V[x] = <span class="built_in">max</span>(V[x], A[i] - Mi[x]);</span><br><span class="line">        Mi[x] = <span class="built_in">min</span>(Mi[x], A[i]);</span><br><span class="line">        Mx[x] = <span class="built_in">max</span>(Mx[x], A[i]);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="keyword">int</span> l, r;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;l, &amp;r);</span><br><span class="line">        <span class="keyword">int</span> ans = query(l, r);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>zuiyoumaoyi_segtree.cpp</span><a href="/downloads/code/zuiyoumaoyi_segtree.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> A[N];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> val, mi, mx;</span><br><span class="line">    <span class="keyword">int</span> L, R;</span><br><span class="line">}tree[N&lt;&lt;<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">up</span><span class="params">(Node&amp;root, Node &amp;ls, Node &amp;rs)</span></span>{</span><br><span class="line">    root.val = <span class="built_in">max</span>(<span class="built_in">max</span>(ls.val, rs.val), rs.mx-ls.mi);</span><br><span class="line">    root.mi = <span class="built_in">min</span>(ls.mi, rs.mi);</span><br><span class="line">    root.mx = <span class="built_in">max</span>(ls.mx, rs.mx);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    tree[p].L = L, tree[p].R = R;</span><br><span class="line">    <span class="keyword">if</span>(L==R){</span><br><span class="line">        tree[p].val = <span class="number">0</span>;</span><br><span class="line">        tree[p].mi = A[L];</span><br><span class="line">        tree[p].mx = A[L];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = L+R&gt;&gt;<span class="number">1</span>;</span><br><span class="line">    build(L, mid, p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    build(mid+<span class="number">1</span>, R, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    <span class="comment">//tree</span></span><br><span class="line">    up(tree[p], tree[p&lt;&lt;<span class="number">1</span>], tree[p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>]);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function">Node <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R, <span class="keyword">int</span> p)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(tree[p].L ==L &amp;&amp; tree[p].R==R){</span><br><span class="line">        <span class="keyword">return</span> tree[p];</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> mid = tree[p].L + tree[p].R &gt;&gt;<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(R&lt;=mid) <span class="keyword">return</span> query(L, R, p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(L&gt;mid) <span class="keyword">return</span> query(L, R, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">else</span>{</span><br><span class="line"><span class="comment">//        </span></span><br><span class="line">        Node B = query(L, mid, p&lt;&lt;<span class="number">1</span>);</span><br><span class="line">        Node C = query(mid+<span class="number">1</span>, R, p&lt;&lt;<span class="number">1</span>|<span class="number">1</span>);</span><br><span class="line">        Node res;</span><br><span class="line">        up(res, B, C);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n ,&amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;A[i]);</span><br><span class="line">    build(<span class="number">1</span>, n, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="keyword">int</span> L, R;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;L, &amp;R);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(L, R, <span class="number">1</span>).val);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>zuiyoumaoyi_beizeng.cpp</span><a href="/downloads/code/zuiyoumaoyi_beizeng.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> A[N];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> V[N][<span class="number">17</span>], Mi[N][<span class="number">17</span>], Mx[N][<span class="number">17</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> L, <span class="keyword">int</span> R)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">step</span> = R - L + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>, mi = <span class="number">1e9</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;(<span class="number">1</span>&lt;&lt;i)&lt;=<span class="built_in">step</span>;i++){</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">step</span> &amp; (<span class="number">1</span>&lt;&lt;i)){</span><br><span class="line">            res = <span class="built_in">max</span>(res, <span class="built_in">max</span>(V[L][i], Mx[L][i] - mi));</span><br><span class="line">            mi = <span class="built_in">min</span>(mi, Mi[L][i]);</span><br><span class="line">            L += (<span class="number">1</span>&lt;&lt;i);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) {</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;A[i]);</span><br><span class="line">        V[i][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        Mi[i][<span class="number">0</span>] = A[i];</span><br><span class="line">        Mx[i][<span class="number">0</span>] = A[i];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;(<span class="number">1</span>&lt;&lt;j)&lt;=n;j++){</span><br><span class="line"><span class="comment">//      i starts from i cause'  A starts from 1</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i+(<span class="number">1</span>&lt;&lt;j)<span class="number">-1</span>&lt;=n;i++){</span><br><span class="line">            <span class="keyword">int</span> t = i+(<span class="number">1</span>&lt;&lt;j<span class="number">-1</span>);</span><br><span class="line">            V[i][j] = <span class="built_in">max</span>(<span class="built_in">max</span>(V[i][j<span class="number">-1</span>], V[t][j<span class="number">-1</span>]), Mx[t][j<span class="number">-1</span>] - Mi[i][j<span class="number">-1</span>]);</span><br><span class="line">            Mx[i][j] = <span class="built_in">max</span>(Mx[i][j<span class="number">-1</span>], Mx[t][j<span class="number">-1</span>]);</span><br><span class="line">            Mi[i][j] = <span class="built_in">min</span>(Mi[i][j<span class="number">-1</span>], Mi[t][j<span class="number">-1</span>]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(m--){</span><br><span class="line">        <span class="keyword">int</span> L, R;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;L, &amp;R);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(L, R));</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>zuiyoumaoyi_union_set.cpp</span><a href="/downloads/code/zuiyoumaoyi_union_set.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">100010</span>;</span><br><span class="line"><span class="keyword">int</span> A[N];</span><br><span class="line"><span class="keyword">int</span> fa[N];</span><br><span class="line"><span class="comment">// corresponding value from i to root</span></span><br><span class="line"><span class="keyword">int</span> V[N], Mx[N], Mi[N];</span><br><span class="line"><span class="keyword">int</span> ans[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> L, id;</span><br><span class="line">};</span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt;query[N];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getfa</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(fa[x] != x) {</span><br><span class="line">        <span class="keyword">int</span> t = fa[x];</span><br><span class="line">        <span class="comment">// finish calc of father's Mi[t], V[t], Mx[t]</span></span><br><span class="line">        fa[x] = getfa(t);</span><br><span class="line">        <span class="comment">// x--&gt; t --&gt; fa[x]</span></span><br><span class="line">        V[x] = <span class="built_in">max</span>(V[x], <span class="built_in">max</span>(V[t], Mx[t] - Mi[x]));</span><br><span class="line">        Mi[x] = <span class="built_in">min</span>(Mi[x], Mi[t]);</span><br><span class="line">        Mx[x] = <span class="built_in">max</span>(Mx[x], Mx[t]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> fa[x];</span><br><span class="line">}</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;A[i]);</span><br><span class="line">        fa[i] = i;</span><br><span class="line">        Mi[i] = Mx[i] = A[i];</span><br><span class="line">        V[i] = <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="keyword">int</span> L, R;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;L, &amp;R);</span><br><span class="line">        query[R].push_back((Node){L, i});</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;query[i].<span class="built_in">size</span>();j++){</span><br><span class="line">            <span class="keyword">int</span> L = query[i][j].L;  <span class="comment">//[L, i]</span></span><br><span class="line">            getfa(L);</span><br><span class="line">            ans[query[i][j].id] = V[L];</span><br><span class="line">        }</span><br><span class="line">        fa[i] = i+<span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++){</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans[i]);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>data_structure</tag>
        <tag>seg_tree</tag>
        <tag>block</tag>
        <tag>beizeng</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E8%BF%9B%E7%94%B5%E6%A2%AF/</url>
    <content><![CDATA[<p>np1-pt</p>
<p>:</p>
<blockquote><p>n t pn,t2000p[0,1]</p>
</blockquote>


<p>:</p>
<blockquote><p>t6</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>1 1 0.50</p>
</blockquote>

<p></p>
<blockquote><p>0.500000</p>
</blockquote>


<p><br>dp[i][j] = dp[i-1][j] * (1-p) + dp[i-1][j-1] * p</p>
<p><br>dp[i+1][j] += dp[i][j] * (1-p)<br>dp[i+1][j+1] += dp[i][j] * p</p>
<figure class="highlight c"><figcaption><span>jindianti.cpp</span><a href="/downloads/code/jindianti.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">2010</span>;</span><br><span class="line"><span class="keyword">double</span> dp[N][N];</span><br><span class="line"><span class="keyword">int</span> n, t;</span><br><span class="line"><span class="keyword">double</span> p;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line"></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%lf"</span>, &amp;n, &amp;t, &amp;p);</span><br><span class="line"><span class="comment">//    cin&gt;&gt;n&gt;&gt;t&gt;&gt;p;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) dp[<span class="number">0</span>][i] = <span class="number">0</span>;</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=t;i++){</span><br><span class="line">        dp[i][<span class="number">0</span>] = dp[i<span class="number">-1</span>][<span class="number">0</span>] * (<span class="number">1</span>-p);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=(i,n<span class="number">-1</span>);j++) {</span><br><span class="line">            dp[i][j] = dp[i<span class="number">-1</span>][j] * (<span class="number">1</span>-p) + dp[i<span class="number">-1</span>][j<span class="number">-1</span>] * p;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span>(i&gt;=n) dp[i][n] = dp[i<span class="number">-1</span>][n] + dp[i<span class="number">-1</span>][n<span class="number">-1</span>] * p;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">double</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        ans += dp[t][i] * i;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.6lf\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E4%BA%8C%E5%8F%89%E8%8B%B9%E6%9E%9C%E6%A0%91/</url>
    <content><![CDATA[<p>n1m</p>
<p>:</p>
<blockquote><p>n,m<br>n-1x,y,zx,yz</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>5 2<br>1 3 1<br>1 4 10<br>2 3 20<br>3 5 20</p>
</blockquote>

<p></p>
<blockquote><p>21</p>
</blockquote>

<p></p>
<blockquote><p>n&lt;=100, m&lt;=n-1.</p>
</blockquote>


<figure class="highlight c"><figcaption><span>erchapingguo1.cpp</span><a href="/downloads/code/erchapingguo1.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">//70%</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">110</span>;</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> to, val;</span><br><span class="line">};</span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt; edge[N];</span><br><span class="line"><span class="keyword">int</span> ch[N][<span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> dp[N][N];</span><br><span class="line"><span class="keyword">int</span> val[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> k=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edge[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edge[x][i].to;</span><br><span class="line">        <span class="keyword">if</span>(y!=f){</span><br><span class="line">            dfs(y, x);</span><br><span class="line">            val[y] = edge[x][i].val;</span><br><span class="line">            ch[x][k++] = y;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"><span class="comment">//    printf("%d %d\n", x, k);</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DP</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> ls = ch[x][<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">int</span> rs = ch[x][<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">if</span>(ls==<span class="number">0</span> &amp;&amp; rs==<span class="number">0</span>){</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++) dp[x][i] = val[x];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span>(ls!=<span class="number">0</span> &amp;&amp; rs!=<span class="number">0</span>) {</span><br><span class="line">        DP(ls);</span><br><span class="line">        DP(rs);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j + <span class="number">1</span> &lt;= i; j++)</span><br><span class="line">                dp[x][i] = <span class="built_in">max</span>(dp[x][i], dp[ls][j] + dp[rs][i - j - <span class="number">1</span>] + val[x]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m); m++;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++) {</span><br><span class="line">        <span class="keyword">int</span> a, b, c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">        edge[a].push_back({b, c});</span><br><span class="line">        edge[b].push_back({a, c});</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    DP(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[<span class="number">1</span>][m]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>erchapingguo2.cpp</span><a href="/downloads/code/erchapingguo2.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">110</span>;</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> to, val;</span><br><span class="line">};</span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt; edge[N];</span><br><span class="line"><span class="keyword">int</span> ch[N][<span class="number">2</span>];</span><br><span class="line"><span class="keyword">int</span> dp[N][N];</span><br><span class="line"><span class="keyword">int</span> val[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> k=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edge[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edge[x][i].to;</span><br><span class="line">        <span class="keyword">if</span>(y!=f){</span><br><span class="line">            dfs(y, x);</span><br><span class="line">            val[y] = edge[x][i].val;</span><br><span class="line">            ch[x][k++] = y;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(k!=<span class="number">0</span>){</span><br><span class="line">        <span class="keyword">int</span> ls = ch[x][<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">int</span> rs = ch[x][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++) {</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= i; j++)</span><br><span class="line">                dp[x][i] = <span class="built_in">max</span>(dp[x][i], dp[ls][j] + dp[rs][i - j]);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=m;i&gt;=<span class="number">1</span>;i--)</span><br><span class="line">        dp[x][i] = dp[x][i<span class="number">-1</span>] + val[x];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m); m++;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++) {</span><br><span class="line">        <span class="keyword">int</span> a, b, c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">        edge[a].push_back({b, c});</span><br><span class="line">        edge[b].push_back({a, c});</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[<span class="number">1</span>][m]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><figcaption><span>duochapingguo.cpp</span><a href="/downloads/code/duochapingguo.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// Note that m edges rather than m nodes.</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">110</span>;</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>{</span></span><br><span class="line">    <span class="keyword">int</span> to, val;</span><br><span class="line">};</span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt; edge[N];</span><br><span class="line"><span class="keyword">int</span> dp[N][N];</span><br><span class="line"><span class="keyword">int</span> tmp[N];</span><br><span class="line"><span class="keyword">int</span> sz[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> f)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edge[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edge[x][i].to, val = edge[x][i].val;</span><br><span class="line">        <span class="keyword">if</span> (y==f) <span class="keyword">continue</span>;</span><br><span class="line">        dfs(y, x);</span><br><span class="line">        sz[x] += sz[y] + <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">memset</span>(tmp, <span class="number">0</span>, <span class="keyword">sizeof</span> tmp);</span><br><span class="line">        <span class="keyword">int</span> mi= <span class="built_in">min</span>(sz[x], m);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=mi;j++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> t=<span class="number">1</span>;t&lt;=j;t++) <span class="comment">// t,j-t</span></span><br><span class="line">                tmp[j] = <span class="built_in">max</span>(tmp[j], dp[y][t<span class="number">-1</span>] + dp[x][j-t] + val);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++) dp[x][j] = <span class="built_in">max</span>(dp[x][j], tmp[j]);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++) {</span><br><span class="line">        <span class="keyword">int</span> a, b, c;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">        edge[a].push_back((Node){b, c});</span><br><span class="line">        edge[b].push_back((Node){a, c});</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[<span class="number">1</span>][m]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E6%B2%A1%E6%9C%89%E4%B8%8A%E5%8F%B8%E7%9A%84%E8%88%9E%E4%BC%9A/</url>
    <content><![CDATA[<p><br></p>
<p>:</p>
<blockquote><p>1N<br>Niix<br>N-1KLKL</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>4<br>1 7 3 4<br>1 2<br>2 3<br>2 4</p>
</blockquote>

<p></p>
<blockquote><p>8</p>
</blockquote>

<p></p>
<blockquote><p>boss</p>
</blockquote>


<figure class="highlight c"><figcaption><span>wuhui.cpp</span><a href="/downloads/code/wuhui.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">200010</span>;</span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; edge[N];</span><br><span class="line"><span class="keyword">int</span> cnt[N];</span><br><span class="line"><span class="keyword">int</span> dp[N][<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;edge[x].<span class="built_in">size</span>();i++){</span><br><span class="line">        <span class="keyword">int</span> y = edge[x][i];</span><br><span class="line">        dfs(y);</span><br><span class="line">        dp[x][<span class="number">1</span>] += dp[y][<span class="number">0</span>];</span><br><span class="line">        dp[x][<span class="number">0</span>] += <span class="built_in">max</span>(dp[y][<span class="number">0</span>], dp[y][<span class="number">1</span>]);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;dp[i][<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++) {</span><br><span class="line">        <span class="keyword">int</span> a, b;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;a, &amp;b);</span><br><span class="line">        edge[a].push_back(b);</span><br><span class="line">        cnt[b]++;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">int</span> t = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;=n; i++)</span><br><span class="line">        <span class="keyword">if</span> (!cnt[i]) {</span><br><span class="line">            t = i;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">    dfs(t);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, <span class="built_in">max</span>(dp[t][<span class="number">0</span>], dp[t][<span class="number">1</span>]));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E7%94%B5%E8%84%91%E7%97%85%E6%AF%92/</url>
    <content><![CDATA[<p>n0,1,2,n-1n</p>
<p>:</p>
<blockquote><p>n=0<br>nn&lt;=16<br>m+1mm0n-1</p>
</blockquote>


<p>:</p>
<blockquote><p></p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>3<br>2 1 2<br>2 0 2<br>2 0 1<br>4<br>1 1<br>1 0<br>1 3<br>1 2<br>0</p>
</blockquote>

<p></p>
<blockquote><p>3<br>2</p>
</blockquote>

<p></p>
<blockquote><p>n&lt;=16</p>
</blockquote>


<figure class="highlight c"><figcaption><span>diannaobingdu.cpp</span><a href="/downloads/code/diannaobingdu.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> edge[N];</span><br><span class="line"><span class="keyword">int</span> dp[<span class="number">1</span>&lt;&lt;N], arrive[<span class="number">1</span>&lt;&lt;N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n), n!=<span class="number">0</span>){</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="keyword">sizeof</span> dp);</span><br><span class="line">        <span class="built_in">memset</span>(arrive, <span class="number">0</span>, <span class="keyword">sizeof</span> arrive);</span><br><span class="line">        <span class="built_in">memset</span>(edge, <span class="number">0</span>, <span class="keyword">sizeof</span> edge);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++){</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;m);</span><br><span class="line">            edge[i]|=(<span class="number">1</span>&lt;&lt;i);</span><br><span class="line">            <span class="keyword">int</span> x;</span><br><span class="line">            <span class="keyword">while</span>(m--)</span><br><span class="line">            {</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;x);</span><br><span class="line">                edge[i]|= (<span class="number">1</span>&lt;&lt;x);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">1</span>&lt;&lt;n;i++){</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++){</span><br><span class="line">                <span class="keyword">if</span>(i&gt;&gt;j&amp;<span class="number">1</span>) arrive[i] |= edge[j];</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">1</span>&lt;&lt;n;i++){</span><br><span class="line">            <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i;j;j=(j<span class="number">-1</span>)&amp;i){</span><br><span class="line">                <span class="keyword">if</span>(arrive[j] == (<span class="number">1</span>&lt;&lt;n)<span class="number">-1</span>)</span><br><span class="line">                    ans = <span class="built_in">max</span>(ans, dp[i^j] + <span class="number">1</span>);</span><br><span class="line">            }</span><br><span class="line">            dp[i] = ans;</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[(<span class="number">1</span>&lt;&lt;n)<span class="number">-1</span>]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E7%82%AE%E5%85%B5%E9%98%B5%E5%9C%B0/</url>
    <content><![CDATA[<p>N<em>MN</em>MNMH P</p>
<img src="/downloads/imgs/paobing.png" class="example" width="500" height="500" title="title exg" alt="alt exg">
<p></p>
<p></p>
<p>:</p>
<blockquote><p>NM<br>NMPH</p>
</blockquote>

<p>:</p>
<blockquote><p>K</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>5 4<br>PHPP<br>PPHH<br>PPPP<br>PHPP<br>PHHP</p>
</blockquote>

<p></p>
<blockquote><p>6</p>
</blockquote>

<p></p>
<blockquote><p>N&lt;=100, M&lt;=10.</p>
</blockquote>



<figure class="highlight c"><figcaption><span>paobingzhendi.cpp</span><a href="/downloads/code/paobingzhendi.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">110</span>, M = <span class="number">15</span>;</span><br><span class="line"><span class="keyword">int</span> S[N];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">char</span> ms[M];</span><br><span class="line"><span class="keyword">int</span> s[<span class="number">100</span>], tot;</span><br><span class="line"><span class="keyword">int</span> c[<span class="number">1025</span>];</span><br><span class="line"><span class="keyword">int</span> dp[N][<span class="number">1025</span>][<span class="number">1025</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span></span>{</span><br><span class="line">    <span class="keyword">return</span> x&amp;(-x);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, ms);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;m;j++){</span><br><span class="line">            S[i]|= (ms[j]==<span class="string">'H'</span>) &lt;&lt;j;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">1</span>&lt;&lt;m;i++)</span><br><span class="line">        <span class="keyword">if</span>(!(i&amp;(i&lt;&lt;<span class="number">1</span>)) &amp;&amp; !(i&amp;(i&lt;&lt;<span class="number">2</span>))) s[++tot] = i;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">1</span>&lt;&lt;m;i++)</span><br><span class="line">        c[i]  = c[i-lowbit(i)] + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> x=<span class="number">1</span>;x&lt;=n;x++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=tot;i++){</span><br><span class="line">            <span class="keyword">if</span>(s[i]&amp;S[x]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=tot;j++){</span><br><span class="line">                <span class="keyword">if</span>(s[i] &amp; s[j]) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">if</span>(s[j] &amp; S[x<span class="number">-1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=tot;k++){</span><br><span class="line">                    <span class="keyword">if</span>(s[i]&amp;s[k]) <span class="keyword">continue</span>;</span><br><span class="line">                    <span class="keyword">if</span>(s[j]&amp;s[k]) <span class="keyword">continue</span>;</span><br><span class="line">                    <span class="keyword">if</span>(x&gt;=<span class="number">2</span> &amp;&amp; s[k]&amp;S[x<span class="number">-2</span>]) <span class="keyword">continue</span>;</span><br><span class="line">                    dp[x][i][j] = <span class="built_in">max</span>(dp[x][i][j], dp[x<span class="number">-1</span>][j][k] + c[s[i]]);</span><br><span class="line">                    ans = <span class="built_in">max</span>(ans, dp[x][i][j]);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title> (NOIP2016)</title>
    <url>/blog/%E6%84%A4%E6%80%92%E7%9A%84%E5%B0%8F%E9%B8%9F/</url>
    <content><![CDATA[<p>Kiana <br> (0, 0)  Kiana  y = ax2 + bx  ab  Kiana  a &lt; 0 x <br> n  i  (xi, yi)(xi, yi) i (xi, yi) i <br> (1, 3)  (3, 3)Kiana  y = -x2 + 4x <br><br> Kiana <br> T  Kiana </p>
<a id="more"></a>

<p>:</p>
<blockquote><p> T<br> T  nm Kiana <br> n  i  (xi, yi) i  (xi, yi)</p>
<p> 1  n  180  m  20 &lt; xi, yi &lt; 10</p>
</blockquote>

<p></p>
<blockquote><p><br></p>
</blockquote>


<p>1<br></p>
<blockquote><p>2<br>2 0<br>1.00 3.00<br>3.00 3.00<br>5 2<br>1.00 5.00<br>2.00 8.00<br>3.00 9.00<br>4.00 8.00<br>5.00 5.00</p>
</blockquote>

<p></p>
<blockquote><p>1<br>1</p>
</blockquote>

<p></p>
<blockquote><p><br>2  (1.00, 3.00)  (3.00, 3.00) y = -x2 + 4x <br> 5  y = -x2 + 6x  Kiana </p>
</blockquote>

<figure class="highlight c"><figcaption><span>fennudexiaoniao.cpp</span><a href="/downloads/code/fennudexiaoniao.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> T, n, m;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt; PDD;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">20</span>, M = <span class="number">1</span>&lt;&lt;N;</span><br><span class="line">PDD q[N];</span><br><span class="line"><span class="keyword">double</span> eps = <span class="number">1e-6</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> y second</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> path[N][N];</span><br><span class="line"><span class="keyword">int</span> f[M];</span><br><span class="line"><span class="keyword">int</span> lb[M];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">double</span> y)</span></span>{</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">fabs</span>(x-y)&lt;eps) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(x&lt;y) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">    <span class="keyword">while</span>(T--){</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++){</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%lf%lf"</span>, &amp;q[i].x, &amp;q[i].y);</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i+<span class="number">1</span>&lt;<span class="number">1</span>&lt;&lt;n;i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++)</span><br><span class="line">                <span class="keyword">if</span>(!(i&gt;&gt;j&amp;<span class="number">1</span>)){</span><br><span class="line">                    lb[i] = j;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                }</span><br><span class="line">        <span class="built_in">memset</span>(path, <span class="number">0</span>, <span class="keyword">sizeof</span> path);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++) {</span><br><span class="line">            path[i][i] = <span class="number">1</span> &lt;&lt; i;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) {</span><br><span class="line">                <span class="keyword">if</span> (!cmp(q[i].x, q[j].x)) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">double</span> x1 = q[i].x, y1 = q[i].y, x2 = q[j].x, y2 = q[j].y;</span><br><span class="line">                <span class="keyword">double</span> b = (y1 * x2 * x2 / x1 / x1 - y2) / (x2 * x2 / x1 - x2);</span><br><span class="line">                <span class="keyword">double</span> a = (y1 - b * x1) / x1 / x1;</span><br><span class="line">                <span class="keyword">if</span> (a &gt;= <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; n; k++) {</span><br><span class="line">                    <span class="keyword">double</span> x = q[k].x, y = q[k].y;</span><br><span class="line">                    <span class="keyword">if</span> (!cmp(y, a * x * x + b * x)) path[i][j] |= <span class="number">1</span> &lt;&lt; k;</span><br><span class="line">                }</span><br><span class="line"></span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">0x3f</span>, <span class="keyword">sizeof</span> f);</span><br><span class="line">        f[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i+<span class="number">1</span>&lt;<span class="number">1</span>&lt;&lt;n;i++){</span><br><span class="line">            <span class="keyword">int</span> x = lb[i];</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++){</span><br><span class="line">                <span class="keyword">int</span> state = path[x][j];</span><br><span class="line">                f[i|state] = <span class="built_in">min</span>(f[i|state], f[i] +<span class="number">1</span>);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, f[(<span class="number">1</span>&lt;&lt;n)<span class="number">-1</span>]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>

<img src="/downloads/imgs/itr-1000.png" class="example" width="500" height="500" title="title exg" alt="alt exg">
]]></content>
      <categories>
        <category>NOIP</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/blog/%E6%96%B9%E6%A0%BC%E5%8F%96%E6%95%B0/</url>
    <content><![CDATA[<p>nn<br>2</p>
<p>:</p>
<blockquote><p>n nn</p>
</blockquote>

<a id="more"></a>

<p>1<br></p>
<blockquote><p>3<br>75 15 21<br>75 15 28<br>34 70 5</p>
</blockquote>

<p></p>
<blockquote><p>188</p>
</blockquote>

<p></p>
<blockquote><p>n&lt;=16 10^3</p>
</blockquote>

<figure class="highlight c"><figcaption><span>fanggequshu.cpp</span><a href="/downloads/code/fanggequshu.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">int</span> mp[N][N], dp[N][<span class="number">70000</span>];</span><br><span class="line"><span class="keyword">int</span> A[<span class="number">30005</span>], tot;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>{</span><br><span class="line">    <span class="keyword">int</span> res =<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> j = n;</span><br><span class="line">    <span class="keyword">while</span>(y){</span><br><span class="line">        <span class="keyword">if</span>(y&amp;<span class="number">1</span>) res += mp[x][j];</span><br><span class="line">        j--; y&gt;&gt;=<span class="number">1</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;mp[i][j]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(<span class="number">1</span>&lt;&lt;n);i++){</span><br><span class="line">        <span class="keyword">if</span>((i&amp;(i&gt;&gt;<span class="number">1</span>))==<span class="number">0</span>) A[++tot] = i;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//    dp[i][k] = max(dp[i][k], dp[i-1][j] + val(i-1, j))</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=tot;k++){</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=tot;j++){</span><br><span class="line">                <span class="keyword">if</span>((A[j] &amp; A[k]) ==<span class="number">0</span>){</span><br><span class="line">                    <span class="keyword">int</span> val = calc(i, A[k]);</span><br><span class="line">                    dp[i][k] = <span class="built_in">max</span>(dp[i][k], dp[i<span class="number">-1</span>][j] + val);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=tot;i++) ans = <span class="built_in">max</span>(ans, dp[n][i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>chunji_nowcoder</category>
      </categories>
      <tags>
        <tag>DP</tag>
      </tags>
  </entry>
  <entry>
    <title> (NOIP2007)</title>
    <url>/blog/%E6%A0%91%E7%BD%91%E7%9A%84%E6%A0%B8/</url>
    <content><![CDATA[<p>T=(V, E, W) TtreenetworkV, EWTn<br>a,bd(a,b)a,bd(a,b)a,b<br>vPP<br>d(vP) = min{d(vu)uP}<br>T<br>ECC(F)TFFECC(F)=min{d(v,F)vV}<br>T=(V, E,W)sFssECC(F)T=(V,E,W)CoreF<br>A-BA-C20WEF5s=11DEFGDEF8s=0s=1s=2F12</p>
<a id="more"></a>

<p>:</p>
<blockquote><p>1nsns1, 2, , n<br>2n32 4 7247<br></p>
</blockquote>

<p>:</p>
<blockquote><p></p>
</blockquote>

<p>1<br></p>
<blockquote><p>5 2<br>1 2 5<br>2 3 2<br>2 4 4<br>2 5 3</p>
</blockquote>

<p></p>
<blockquote><p>5</p>
</blockquote>

<p>2<br></p>
<blockquote><p>8 6<br>1 3 2<br>2 3 2<br>3 4 6<br>4 5 3<br>4 6 4<br>4 7 2<br>7 8 3</p>
</blockquote>

<p></p>
<blockquote><p>5</p>
</blockquote>

<p></p>
<blockquote><p>40%5  n  15<br>70%5  n  80<br>100%5  n  300, 0  s  10001000</p>
</blockquote>

<figure class="highlight c"><figcaption><span>shuwangdehe.cpp</span><a href="/downloads/code/shuwangdehe.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">310</span>, M = N*<span class="number">2</span>;</span><br><span class="line"><span class="keyword">int</span> n,m;</span><br><span class="line"><span class="keyword">int</span> h[N], e[M], idx, ne[M], w[M];</span><br><span class="line"><span class="keyword">int</span> q[N], st[N], dist[N];</span><br><span class="line"><span class="keyword">int</span> pre[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; PII;</span><br><span class="line"><span class="built_in">vector</span>&lt;PII&gt; path;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c)</span></span>{</span><br><span class="line">	e[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> start)</span></span>{</span><br><span class="line">	<span class="keyword">int</span> hh=<span class="number">0</span>, tt =<span class="number">0</span>;</span><br><span class="line">	q[<span class="number">0</span>] = start;</span><br><span class="line">	<span class="built_in">memset</span>(st, <span class="number">0</span>, <span class="keyword">sizeof</span> st);</span><br><span class="line">	dist[start] = <span class="number">0</span>;</span><br><span class="line">	st[start] = <span class="literal">true</span>;</span><br><span class="line">	pre[start] = <span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">while</span>(hh&lt;=tt){</span><br><span class="line">		<span class="keyword">int</span> u= q[hh++];</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=h[u]; ~i; i = ne[i]){</span><br><span class="line">			<span class="keyword">int</span> j = e[i];</span><br><span class="line">			<span class="keyword">if</span>(!st[j]){</span><br><span class="line">				st[j] = <span class="literal">true</span>;</span><br><span class="line">				dist[j] = dist[u] + w[i];</span><br><span class="line">				q[++tt] = j;</span><br><span class="line">				pre[j] = u;</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">get_max</span><span class="params">()</span></span>{</span><br><span class="line">	<span class="keyword">int</span> t = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){</span><br><span class="line">		<span class="keyword">if</span>(dist[i] &gt; dist[t])</span><br><span class="line">			t = i;</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> t;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">bfs_max</span><span class="params">(<span class="keyword">int</span> u)</span></span>{</span><br><span class="line">	<span class="keyword">int</span> hh=<span class="number">0</span>, tt=<span class="number">0</span>;</span><br><span class="line">	dist[u] = <span class="number">0</span>;</span><br><span class="line">	q[<span class="number">0</span>] = u;</span><br><span class="line">	<span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(hh&lt;=tt){</span><br><span class="line">		<span class="keyword">int</span> t= q[hh++];</span><br><span class="line">		res = <span class="built_in">max</span>(res, dist[t]);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=h[t];~i;i=ne[i]){</span><br><span class="line">			<span class="keyword">int</span> j = e[i];</span><br><span class="line">			<span class="keyword">if</span>(!st[j]){</span><br><span class="line">				st[j] = <span class="literal">true</span>;</span><br><span class="line">				dist[j] = dist[t] + w[i];</span><br><span class="line">				q[++tt] = j;</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">	<span class="keyword">return</span> res;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> mid)</span></span>{</span><br><span class="line">	<span class="keyword">int</span> u = <span class="number">0</span>, v = path.<span class="built_in">size</span>()<span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">while</span>(u+<span class="number">1</span>&lt;path.<span class="built_in">size</span>() &amp;&amp; path[u+<span class="number">1</span>].second &lt;= mid) u++;</span><br><span class="line">	<span class="keyword">while</span>(v<span class="number">-1</span>&gt;=<span class="number">0</span> &amp;&amp; path.back().second - path[v<span class="number">-1</span>].second&lt;=mid) v--;</span><br><span class="line">	<span class="keyword">if</span>(u&gt;v) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">if</span>(path[v].second - path[u].second&gt;m) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">memset</span>(st, <span class="number">0</span>, <span class="keyword">sizeof</span> st);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;path.<span class="built_in">size</span>();i++) st[path[i].first] = <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=u;i&lt;=v;i++)</span><br><span class="line">		<span class="keyword">if</span>(bfs_max(path[i].first) &gt; mid) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line">	<span class="comment">// freopen("data.in", "r", stdin);</span></span><br><span class="line">	<span class="comment">// freopen("data.out", "w", stdout);</span></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);</span><br><span class="line">	<span class="built_in">memset</span>(h, <span class="number">-1</span>, <span class="keyword">sizeof</span> h);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n<span class="number">-1</span>;i++){</span><br><span class="line">		<span class="keyword">int</span> a, b, c;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">		add(a, b, c), add(b, a, c);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	bfs(<span class="number">1</span>);</span><br><span class="line">	<span class="keyword">int</span> p = get_max();</span><br><span class="line">	bfs(p);</span><br><span class="line">	<span class="keyword">int</span> v = get_max();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span>(v!=<span class="number">-1</span>){</span><br><span class="line">		path.push_back(make_pair(v, dist[v]));</span><br><span class="line">		v = pre[v];</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	reverse(path.<span class="built_in">begin</span>(), path.<span class="built_in">end</span>());</span><br><span class="line">	<span class="comment">// for(int i=0;i&lt;path.size();i++)</span></span><br><span class="line">	<span class="comment">// 	printf("%d ", path[i].first);</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> l = <span class="number">0</span>, r = <span class="number">1e9</span>;</span><br><span class="line">	<span class="keyword">while</span>(l&lt;r){</span><br><span class="line">		<span class="keyword">int</span> mid = (l+r)&gt;&gt;<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">if</span>(check(mid)) r = mid;</span><br><span class="line">		<span class="keyword">else</span> l = mid+<span class="number">1</span>;</span><br><span class="line">	}</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, r);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>NOIP</category>
      </categories>
      <tags>
        <tag>tree</tag>
      </tags>
  </entry>
  <entry>
    <title> (NOIP2010)</title>
    <url>/blog/%E6%9C%BA%E5%99%A8%E7%BF%BB%E8%AF%91/</url>
    <content><![CDATA[<p></p>
<p></p>
<p> M  M1M </p>
<p>N </p>
<a id="more"></a>

<p>:</p>
<blockquote><p>2 <br>M N<br> N  1000</p>
</blockquote>


<p>:</p>
<blockquote><p>1 </p>
</blockquote>

<p>1<br></p>
<blockquote><p>3 7<br>1 2 1 5 4 4 1</p>
</blockquote>

<p></p>
<blockquote><p>5</p>
</blockquote>

<p></p>
<blockquote><p><br><br>1 11 <br>2 1 22 <br>3 1 21<br>4 1 2 55 <br>5 2 5 44 1<br>6 2 5 44<br>7 5 4 11 2<br>5</p>
</blockquote>

<p></p>
<blockquote><p>10%M=1N 5<br>100%0</p>
</blockquote>


<figure class="highlight c"><figcaption><span>jiqifanyi.cpp</span><a href="/downloads/code/jiqifanyi.cpp">view raw</a></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1010</span>;</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">bool</span> st[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>{</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; m &gt;&gt; n;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">int</span> x;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; x;</span><br><span class="line">        <span class="keyword">if</span> (!st[x])</span><br><span class="line">        {</span><br><span class="line">            res++;</span><br><span class="line">            <span class="keyword">if</span> (q.<span class="built_in">size</span>() == m)</span><br><span class="line">            {</span><br><span class="line">                st[q.front()] = <span class="literal">false</span>;</span><br><span class="line">                q.pop();</span><br><span class="line">            }</span><br><span class="line">            q.push(x);</span><br><span class="line">            st[x] = <span class="literal">true</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; res &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>NOIP</category>
      </categories>
      <tags>
        <tag>simulation</tag>
      </tags>
  </entry>
</search>
